/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// Backbone.BabySitter
// -------------------
// v0.1.0
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v1.6.4
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

/* ========================================================================
 * Bootstrap: transition.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#transitions
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#dropdowns
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#buttons
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#modals
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/*
 Copyright 2011 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!

 handlebars v1.1.2

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*

jQuery.Freefocus 0.5.2

Copyright (c) 2013-2014 Ilia Ablamonov. Licensed under the MIT license.

*/

/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2013
  */

/*
 TraceKit - Cross brower stack traces - github.com/occ/TraceKit
 MIT license
*/

/*
 * Bugsense JavaScript SDK v1.1.1
 * http://bugsense.com/
 *
 * Copyright 2013 Splunk Inc.
 *
 */

/*
 *  jssha256 version 0.1  -  Copyright 2006 B. Poettering
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License as
 *  published by the Free Software Foundation; either version 2 of the
 *  License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307 USA
 */

// Copyright 2013 Google Inc. All Rights Reserved.

/**
 * @fileoverview Manages the DRM license requests.
 */

// perform a single license call. This may be important if the server

// is tracking license requests, for example.

function X2JS(e,t,n){function i(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function r(s){var a,l,u;if(s.nodeType==o.DOCUMENT_NODE){var c,d;for(l=s.firstChild,c=0,d=s.childNodes.length;d>c;c+=1)if(s.childNodes[c].nodeType!==o.COMMENT_NODE){l=s.childNodes[c];break}return n?a=r(l):(a={},u=i(l),a[u]=r(l)),a}if(s.nodeType==o.ELEMENT_NODE){var h=0,p=s.childNodes;a=new Object;for(var f=0;f<p.length;f++)if(l=p.item(f),u=i(l),h++,null==a[u])a[u]=r(l);else{if(null!=a[u]&&!(a[u]instanceof Array)){var m=a[u];
a[u]=[],a[u].push(m)}for(var g=0;null!=a[u][g];)g++;a[u][g]=r(l)}for(var v=0;v<s.attributes.length;v++){var y=s.attributes.item(v);h++;for(var b=y.value,w=0,x=e.length;x>w;w++){var S=e[w];S.test.call(this,y.value)&&(b=S.converter.call(this,y.value))}a[t+y.name]=b}if(null!=a["#text"]){var k=a["#text"];"string"==typeof k?(k=k.replace(/[\r\n]/g,""),a["#text"]=k,1==h&&(a=k)):delete a["#text"]}return a}return s.nodeType==o.TEXT_NODE||s.nodeType==o.CDATA_SECTION_NODE?s.nodeValue:s.nodeType==o.COMMENT_NODE?null:void 0
}(null===t||void 0===t)&&(t="_"),(null===n||void 0===n)&&(n=!1);var s="1.0.11",a=!1,o={"ELEMENT_NODE":1,"TEXT_NODE":3,"CDATA_SECTION_NODE":4,"COMMENT_NODE":8,"DOCUMENT_NODE":9};this.parseXmlString=function(e){var t;if(window.DOMParser){var n=new window.DOMParser;t=n.parseFromString(e,"text/xml")}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.xml2json=function(e){return r(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);
return this.xml2json(t)},this.getVersion=function(){return s},this.escapeMode=function(e){a=e}}function string_to_array(e){for(var t=e.length,n=new Array(t),i=0;t>i;i++)n[i]=e.charCodeAt(i);return n}function array_to_hex_string(e){for(var t="",n=0;n<e.length;n++)t+=SHA256_hexchars[e[n]>>4]+SHA256_hexchars[15&e[n]];return t}function array_to_string(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0
}function SHA256_write(e){SHA256_buf=SHA256_buf.concat("string"==typeof e?string_to_array(e):e);for(var t=0;t+64<=SHA256_buf.length;t+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(t,t+64));SHA256_buf=SHA256_buf.slice(t),SHA256_len+=e.length}function SHA256_finalize(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var e=SHA256_buf.length;64>e;e++)SHA256_buf[e]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var e=SHA256_buf.length;59>e;e++)SHA256_buf[e]=0;
SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);for(var t=new Array(32),e=0;8>e;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=SHA256_H[e]>>16&255,t[4*e+2]=SHA256_H[e]>>8&255,t[4*e+3]=255&SHA256_H[e];return delete SHA256_H,delete SHA256_buf,delete SHA256_len,t}function SHA256_hash(e){var t;return SHA256_init(),SHA256_write(e),t=SHA256_finalize(),array_to_hex_string(t)
}function HMAC_SHA256_init(e){HMAC_SHA256_key="string"==typeof e?string_to_array(e):(new Array).concat(e),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var t=HMAC_SHA256_key.length;64>t;t++)HMAC_SHA256_key[t]=0;for(var t=0;64>t;t++)HMAC_SHA256_key[t]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(e){SHA256_write(e)}function HMAC_SHA256_finalize(){for(var e=SHA256_finalize(),t=0;64>t;t++)HMAC_SHA256_key[t]^=106;
SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(e);for(var t=0;64>t;t++)HMAC_SHA256_key[t]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(e,t){var n;return HMAC_SHA256_init(e),HMAC_SHA256_write(t),n=HMAC_SHA256_finalize(),array_to_hex_string(n)}function SHA256_sigma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function SHA256_sigma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}function SHA256_Sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function SHA256_Sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)
}function SHA256_Ch(e,t,n){return n^e&(t^n)}function SHA256_Maj(e,t,n){return e&t^n&(e^t)}function SHA256_Hash_Word_Block(e,t){for(var n=16;64>n;n++)t[n]=SHA256_sigma1(t[n-2])+t[n-7]+SHA256_sigma0(t[n-15])+t[n-16]&4294967295;for(var i=(new Array).concat(e),n=0;64>n;n++){var r=i[7]+SHA256_Sigma1(i[4])+SHA256_Ch(i[4],i[5],i[6])+SHA256_K[n]+t[n],s=SHA256_Sigma0(i[0])+SHA256_Maj(i[0],i[1],i[2]);i.pop(),i.unshift(r+s&4294967295),i[4]=i[4]+r&4294967295}for(var n=0;8>n;n++)e[n]=e[n]+i[n]&4294967295}function SHA256_Hash_Byte_Block(e,t){for(var n=new Array(16),i=0;16>i;i++)n[i]=t[4*i+0]<<24|t[4*i+1]<<16|t[4*i+2]<<8|t[4*i+3];
SHA256_Hash_Word_Block(e,n)}var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,s,a,o,l,u,c,d,h=t&&t.split("/"),p=m.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=h.concat(e.split("/")),u=0;u<e.length;u+=1)if(d=e[u],"."===d)e.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||f)&&p){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(c=h.length;c>0;c-=1)if(r=p[h.slice(0,c).join("/")],r&&(r=r[i])){s=r,a=u;
break}if(s)break;!o&&f&&f[i]&&(o=f[i],l=u)}!s&&o&&(s=o,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function i(t,n){return function(){return c.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function s(e){return function(t){p[e]=t}}function a(n){if(t(f,n)){var i=f[n];delete f[n],g[n]=!0,u.apply(e,i)}if(!t(p,n)&&!t(g,n))throw new Error("No "+n);return p[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]
}function l(e){return function(){return m&&m.config&&m.config[e]||{}}}var u,c,d,h,p={},f={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice;d=function(e,t){var i,s=o(e),l=s[0];return e=s[1],l&&(l=n(l,t),i=a(l)),l?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),s=o(e),l=s[0],e=s[1],l&&(i=a(l))),{"f":l?l+"!"+e:e,"n":e,"pr":l,"p":i}},h={"require":function(e){return i(e)},"exports":function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},"module":function(e){return{"id":e,"uri":"","exports":p[e],"config":l(e)}
}},u=function(n,r,o,l){var u,c,m,v,y,b,w=[];if(l=l||n,"function"==typeof o){for(r=!r.length&&o.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=d(r[y],l),c=v.f,"require"===c)w[y]=h.require(n);else if("exports"===c)w[y]=h.exports(n),b=!0;else if("module"===c)u=w[y]=h.module(n);else if(t(p,c)||t(f,c)||t(g,c))w[y]=a(c);else{if(!v.p)throw new Error(n+" missing "+c);v.p.load(v.n,i(l,!0),s(c),{}),w[y]=p[c]}m=o.apply(p[n],w),n&&(u&&u.exports!==e&&u.exports!==p[n]?p[n]=u.exports:m===e&&b||(p[n]=m))
}else n&&(p[n]=o)},requirejs=require=c=function(t,n,i,r,s){return"string"==typeof t?h[t]?h[t](n):a(d(t,n).f):(t.splice||(m=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=s),r?u(e,t,n,i):setTimeout(function(){u(e,t,n,i)},4),c)},c.config=function(e){return m=e,m.deps&&c(m.deps,m.callback),c},requirejs._defined=p,define=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(f,e)||(f[e]=[e,n,i])},define.amd={"jQuery":!0}}(),define("libs/require/almond-0.2.6",function(){}),require.config({"baseUrl":"js","templatePathPrefixs":["app/","app/js/"],"paths":{"templates":"../templates","text":"libs/require/text-2.0.10","hb":"libs/require/handlebars.precompile-0.1","tpl":"libs/require/underscore-tpl-0.1.0","jquery-lib":"libs/jquery-1.10.2","underscore":"libs/backbone/underscore-1.6.0","backbone-lib":"libs/backbone/backbone-1.1.2","marionette-lib":"libs/backbone/backbone.marionette-1.6.4","backbone.wreqr":"libs/backbone/backbone.wreqr-1.1.0","backbone.babysitter":"libs/backbone/backbone.babysitter-0.1.0","handlebars-lib":"libs/backbone/handlebars-1.1.2","soundmanager-defer":"libs/soundmanager/soundmanager2-defer","soundmanager-lib":"libs/soundmanager/soundmanager2-nodebug","googledash":"libs/googledash","jwplayer":"libs/jwplayer/jwplayer-6.8","swfobject":"libs/jwplayer/swfobject-2.2","fastclick":"libs/fastclick-0.6.11","x2js":"libs/x2js-1.0.11","moment":"libs/moment-2.4.0","chrome-analytics":"libs/analytics/chrome-analytics","google-analytics":"libs/analytics/google-analytics","bugsense":"libs/analytics/bugsense-2.0.1","select2":"libs/select2-3.4.5","jquery.freefocus":"libs/jquery.freefocus-0.5.3","jquery.translate":"libs/jquery.translate-0.1.0","jquery.mousewheel":"libs/jquery.mousewheel-3.1.11","sortable":"libs/sortable-0.1.5","mousetrap":"libs/mousetrap-1.4.6","jssha256":"libs/jssha256-0.1","requestanimframe":"libs/requestanimframe-0.1","jquery":"plex/base/initializers/configs/JQueryConfig","backbone":"plex/base/initializers/configs/BackboneConfig","marionette":"plex/base/initializers/configs/MarionetteConfig","handlebars":"plex/base/initializers/configs/HandlebarsConfig","soundmanager":"plex/base/initializers/configs/SoundManagerConfig","affix":"libs/bootstrap/affix","alert":"libs/bootstrap/alert","button":"libs/bootstrap/button","carousel":"libs/bootstrap/carousel","collapse":"libs/bootstrap/collapse","dropdown":"libs/bootstrap/dropdown","modal":"libs/bootstrap/modal","popover":"libs/bootstrap/popover","scrollspy":"libs/bootstrap/scrollspy","tab":"libs/bootstrap/tab","tooltip":"libs/bootstrap/tooltip","transition":"libs/bootstrap/transition"},"shim":{"hb":["handlebars"],"handlebars-lib":{"exports":"Handlebars"},"soundmanager-lib":{"deps":["soundmanager-defer"],"exports":"soundManager"},"googledash":{"exports":"googledash"},"jwplayer":{"exports":"jwplayer"},"swfobject":{"exports":"swfobject"},"x2js":{"exports":"X2JS"},"moment":{"exports":"moment"},"chrome-analytics":{"exports":"analytics"},"google-analytics":{"exports":"ga"},"bugsense":{"exports":"Bugsense"},"jquery.freefocus":["jquery"],"jquery.translate":["jquery"],"jquery.mousewheel":["jquery"],"sortable":{"exports":"Sortable"},"affix":["jquery"],"alert":["jquery"],"button":["jquery"],"carousel":["jquery"],"collapse":["jquery"],"dropdown":["jquery"],"modal":["jquery"],"popover":["jquery"],"scrollspy":["jquery"],"tab":["jquery"],"tooltip":["jquery"],"transition":["jquery"]}}),define("config/require.conf",function(){}),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,a=i.push,o=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,S=s.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)
};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(e,t,i){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,s=e.length;s>r;r++)if(t.call(i,e[r],r,e)===n)return}else for(var a=k.keys(e),r=0,s=a.length;s>r;r++)if(t.call(i,e[a[r]],a[r],e)===n)return;return e};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,r,s){i.push(t.call(n,e,r,s))
}),i)};var _="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=k.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,s,a){r?n=t.call(i,n,e,s,a):(n=e,r=!0)}),!r)throw new TypeError(_);return n},k.reduceRight=k.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=k.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var a=k.keys(e);
s=a.length}if(C(e,function(o,l,u){l=a?a[--s]:--s,r?n=t.call(i,n,e[l],l,u):(n=e[l],r=!0)}),!r)throw new TypeError(_);return n},k.find=k.detect=function(e,t,n){var i;return T(e,function(e,r,s){return t.call(n,e,r,s)?(i=e,!0):void 0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(C(e,function(e,r,s){t.call(n,e,r,s)&&i.push(e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},k.every=k.all=function(e,t,i){t||(t=k.identity);
var r=!0;return null==e?r:g&&e.every===g?e.every(t,i):(C(e,function(e,s,a){return(r=r&&t.call(i,e,s,a))?void 0:n}),!!r)};var T=k.some=k.any=function(e,t,i){t||(t=k.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,i):(C(e,function(e,s,a){return r||(r=t.call(i,e,s,a))?n:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):T(e,function(e){return e===t})},k.invoke=function(e,t){var n=o.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){return(i?t:e[t]).apply(e,n)
})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matches(t))},k.findWhere=function(e,t){return k.find(e,k.matches(t))},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,r=-1/0;return C(e,function(e,s,a){var o=t?t.call(n,e,s,a):e;o>r&&(i=e,r=o)}),i},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,r=1/0;return C(e,function(e,s,a){var o=t?t.call(n,e,s,a):e;
r>o&&(i=e,r=o)}),i},k.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i},k.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))};var M=function(e){return null==e?k.identity:k.isFunction(e)?e:k.property(e)};k.sortBy=function(e,t,n){return t=M(t),k.pluck(k.map(e,function(e,i,r){return{"value":e,"index":i,"criteria":t.call(n,e,i,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;
if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,i){var r={};return n=M(n),C(t,function(s,a){var o=n.call(i,s,a,t);e(r,o,s)}),r}};k.groupBy=A(function(e,t,n){k.has(e,t)?e[t].push(n):e[t]=[n]}),k.indexBy=A(function(e,t,n){e[t]=n}),k.countBy=A(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,i){n=M(n);for(var r=n.call(i,t),s=0,a=e.length;a>s;){var o=s+a>>>1;n.call(i,e[o])<r?s=o+1:a=o}return s
},k.toArray=function(e){return e?k.isArray(e)?o.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:o.call(e,0,t)},k.initial=function(e,t,n){return o.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return o.call(e,null==t||n?1:t)
},k.compact=function(e){return k.filter(e,k.identity)};var I=function(e,t,n){return t&&k.every(e,k.isArray)?l.apply(n,e):(C(e,function(e){k.isArray(e)||k.isArguments(e)?t?a.apply(n,e):I(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return I(e,t,[])},k.without=function(e){return k.difference(e,o.call(arguments,1))},k.partition=function(e,t,n){t=M(t);var i=[],r=[];return C(e,function(e){(t.call(n,e)?i:r).push(e)}),[i,r]},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var r=n?k.map(e,n,i):e,s=[],a=[];
return C(r,function(n,i){(t?i&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),s.push(e[i]))}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=o.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.contains(t,e)})})},k.difference=function(e){var t=l.apply(i,o.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);
return t},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);
for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,s=new Array(i);i>r;)s[r++]=e,e+=n;return s};var P=function(){};k.bind=function(e,t){var n,i;if(S&&e.bind===S)return S.apply(e,o.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(o.call(arguments)));P.prototype=e.prototype;
var r=new P;P.prototype=null;var s=e.apply(r,n.concat(o.call(arguments)));return Object(s)===s?s:r}},k.partial=function(e){var t=o.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,s=i.length;s>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},k.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};
return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(o.call(arguments,1)))},k.throttle=function(e,t,n){var i,r,s,a=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:k.now(),a=null,s=e.apply(i,r),i=r=null};return function(){var u=k.now();o||n.leading!==!1||(o=u);var c=t-(u-o);
return i=this,r=arguments,0>=c?(clearTimeout(a),a=null,o=u,s=e.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(l,c)),s}},k.debounce=function(e,t,n){var i,r,s,a,o,l=function(){var u=k.now()-a;t>u?i=setTimeout(l,t-u):(i=null,n||(o=e.apply(s,r),s=r=null))};return function(){s=this,r=arguments,a=k.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(o=e.apply(s,r),s=r=null),o}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return k.partial(t,e)
},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=function(e){if(!k.isObject(e))return[];if(x)return x(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];
return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return C(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(i,o.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(i,o.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);
return t},k.defaults=function(e){return C(o.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var E=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;
case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;var a=e.constructor,o=t.constructor;if(a!==o&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==r){if(l=e.length,c=l==t.length)for(;l--&&(c=E(e[l],t[l],n,i)););}else{for(var d in e)if(k.has(e,d)&&(l++,!(c=k.has(t,d)&&E(e[d],t[d],n,i))))break;
if(c){for(d in t)if(k.has(t,d)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(e,t){return E(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=w||function(e){return"[object Array]"==u.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return u.call(t)=="[object "+e+"]"
}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return c.call(e,t)},k.noConflict=function(){return e._=t,this
},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.property=function(e){return function(t){return t[e]}},k.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},k.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var D={"escape":{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};
D.unescape=k.invert(D.escape);var L={"escape":new RegExp("["+k.keys(D.escape).join("")+"]","g"),"unescape":new RegExp("("+k.keys(D.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return D[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){C(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),V.call(this,n.apply(k,e))
}})};var R=0;k.uniqueId=function(e){var t=++R+"";return e?e+t:t},k.templateSettings={"evaluate":/<%([\s\S]+?)%>/g,"interpolate":/<%=([\s\S]+?)%>/g,"escape":/<%-([\s\S]+?)%>/g};var B=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||B).source,(n.interpolate||B).source,(n.evaluate||B).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(r,function(t,n,i,r,o){return a+=e.slice(s,o).replace(O,function(e){return"\\"+N[e]
}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return i(t,k);var l=function(e){return i.call(this,e,k)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l
},k.chain=function(e){return k(e).chain()};var V=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],V.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return V.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{"chain":function(){return this._chain=!0,this
},"value":function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(e,t){function n(e){var t=e.length,n=ct.type(e);return ct.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=_t[e]={};return ct.each(e.match(ht)||[],function(e,n){t[n]=!0}),t}function r(e,n,i,r){if(ct.acceptData(e)){var s,a,o=ct.expando,l=e.nodeType,u=l?ct.cache:e,c=l?e[o]:e[o]&&o;
if(c&&u[c]&&(r||u[c].data)||i!==t||"string"!=typeof n)return c||(c=l?e[o]=tt.pop()||ct.guid++:o),u[c]||(u[c]=l?{}:{"toJSON":ct.noop}),("object"==typeof n||"function"==typeof n)&&(r?u[c]=ct.extend(u[c],n):u[c].data=ct.extend(u[c].data,n)),a=u[c],r||(a.data||(a.data={}),a=a.data),i!==t&&(a[ct.camelCase(n)]=i),"string"==typeof n?(s=a[n],null==s&&(s=a[ct.camelCase(n)])):s=a,s}}function s(e,t,n){if(ct.acceptData(e)){var i,r,s=e.nodeType,a=s?ct.cache:e,l=s?e[ct.expando]:ct.expando;if(a[l]){if(t&&(i=n?a[l]:a[l].data)){ct.isArray(t)?t=t.concat(ct.map(t,ct.camelCase)):t in i?t=[t]:(t=ct.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;
for(;r--;)delete i[t[r]];if(n?!o(i):!ct.isEmptyObject(i))return}(n||(delete a[l].data,o(a[l])))&&(s?ct.cleanData([e],!0):ct.support.deleteExpando||a!=a.window?delete a[l]:a[l]=null)}}}function a(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(Mt,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Tt.test(i)?ct.parseJSON(i):i}catch(s){}ct.data(e,n,i)}else i=t}return i}function o(e){var t;for(t in e)if(("data"!==t||!ct.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;
return!0}function l(){return!0}function u(){return!1}function c(){try{return G.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(ct.isFunction(t))return ct.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ct.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ut.test(t))return ct.filter(t,e,n);t=ct.filter(t,e)}return ct.grep(e,function(e){return ct.inArray(e,t)>=0!==n})}function p(e){var t=Wt.split("|"),n=e.createDocumentFragment();
if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return ct.nodeName(e,"table")&&ct.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ct.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=sn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)ct._data(n,"globalEval",!t||ct._data(t[i],"globalEval"))
}function y(e,t){if(1===t.nodeType&&ct.hasData(e)){var n,i,r,s=ct._data(e),a=ct._data(t,s),o=s.events;if(o){delete a.handle,a.events={};for(n in o)for(i=0,r=o[n].length;r>i;i++)ct.event.add(t,n,o[n][i])}a.data&&(a.data=ct.extend({},a.data))}}function b(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ct.support.noCloneEvent&&t[ct.expando]){r=ct._data(t);for(i in r.events)ct.removeEvent(t,i,r.handle);t.removeAttribute(ct.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ct.support.html5Clone&&e.innerHTML&&!ct.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)
}}function w(e,n){var i,r,s=0,a=typeof e.getElementsByTagName!==X?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==X?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],i=e.childNodes||e;null!=(r=i[s]);s++)!n||ct.nodeName(r,n)?a.push(r):ct.merge(a,w(r,n));return n===t||n&&ct.nodeName(e,n)?ct.merge([e],a):a}function x(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=_n.length;r--;)if(t=_n[r]+n,t in e)return t;
return i}function k(e,t){return e=t||e,"none"===ct.css(e,"display")||!ct.contains(e.ownerDocument,e)}function C(e,t){for(var n,i,r,s=[],a=0,o=e.length;o>a;a++)i=e[a],i.style&&(s[a]=ct._data(i,"olddisplay"),n=i.style.display,t?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&k(i)&&(s[a]=ct._data(i,"olddisplay",A(i.nodeName)))):s[a]||(r=k(i),(n&&"none"!==n||!r)&&ct._data(i,"olddisplay",r?n:ct.css(i,"display"))));for(a=0;o>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[a]||"":"none"));
return e}function _(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function T(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=ct.css(e,n+Cn[s],!0,r)),i?("content"===n&&(a-=ct.css(e,"padding"+Cn[s],!0,r)),"margin"!==n&&(a-=ct.css(e,"border"+Cn[s]+"Width",!0,r))):(a+=ct.css(e,"padding"+Cn[s],!0,r),"padding"!==n&&(a+=ct.css(e,"border"+Cn[s]+"Width",!0,r)));return a}function M(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=dn(e),a=ct.support.boxSizing&&"border-box"===ct.css(e,"boxSizing",!1,s);
if(0>=r||null==r){if(r=hn(e,t,s),(0>r||null==r)&&(r=e.style[t]),bn.test(r))return r;i=a&&(ct.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+T(e,t,n||(a?"border":"content"),i,s)+"px"}function A(e){var t=G,n=xn[e];return n||(n=I(e,t),"none"!==n&&n||(cn=(cn||ct("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(cn[0].contentWindow||cn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=I(e,t),cn.detach()),xn[e]=n),n
}function I(e,t){var n=ct(t.createElement(e)).appendTo(t.body),i=ct.css(n[0],"display");return n.remove(),i}function P(e,t,n,i){var r;if(ct.isArray(t))ct.each(t,function(t,r){n||Mn.test(e)?i(e,r):P(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==ct.type(t))i(e,t);else for(r in t)P(e+"["+r+"]",t[r],n,i)}function E(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(ht)||[];if(ct.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)
}}function D(e,t,n,i){function r(o){var l;return s[o]=!0,ct.each(e[o]||[],function(e,o){var u=o(t,n,i);return"string"!=typeof u||a||s[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var s={},a=e===qn;return r(t.dataTypes[0])||!s["*"]&&r("*")}function L(e,n){var i,r,s=ct.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);return i&&ct.extend(!0,e,i),e}function R(e,n,i){for(var r,s,a,o,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));
if(s)for(o in l)if(l[o]&&l[o].test(s)){u.unshift(o);break}if(u[0]in i)a=u[0];else{for(o in i){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}r||(r=o)}a=a||r}return a?(a!==u[0]&&u.unshift(a),i[a]):void 0}function B(e,t,n,i){var r,s,a,o,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(a=u[l+" "+s]||u["* "+s],!a)for(r in u)if(o=r.split(" "),o[1]===s&&(a=u[l+" "+o[0]]||u["* "+o[0]])){a===!0?a=u[r]:u[r]!==!0&&(s=o[0],c.unshift(o[1]));
break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{"state":"parsererror","error":a?d:"No conversion from "+l+" to "+s}}}return{"state":"success","data":t}}function N(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(){return setTimeout(function(){Zn=t}),Zn=ct.now()}function j(e,t,n){for(var i,r=(si[t]||[]).concat(si["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,t,e))return i}function H(e,t,n){var i,r,s=0,a=ri.length,o=ct.Deferred().always(function(){delete l.elem
}),l=function(){if(r)return!1;for(var t=Zn||V(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,s=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(s);return o.notifyWith(e,[u,s,n]),1>s&&l?n:(o.resolveWith(e,[u]),!1)},u=o.promise({"elem":e,"props":ct.extend({},t),"opts":ct.extend(!0,{"specialEasing":{}},n),"originalProperties":t,"originalOptions":n,"startTime":Zn||V(),"duration":n.duration,"tweens":[],"createTween":function(t,n){var i=ct.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);
return u.tweens.push(i),i},"stop":function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(z(c,u.opts.specialEasing);a>s;s++)if(i=ri[s].call(u,e,c,u.opts))return i;return ct.map(c,j,u),ct.isFunction(u.opts.start)&&u.opts.start.call(e,u),ct.fx.timer(ct.extend(l,{"elem":e,"anim":u,"queue":u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)
}function z(e,t){var n,i,r,s,a;for(n in e)if(i=ct.camelCase(n),r=t[i],s=e[n],ct.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),a=ct.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function U(e,t,n){var i,r,s,a,o,l,u=this,c={},d=e.style,h=e.nodeType&&k(e),p=ct._data(e,"fxshow");n.queue||(o=ct._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,ct.queue(e,"fx").length||o.empty.fire()
})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ct.css(e,"display")&&"none"===ct.css(e,"float")&&(ct.support.inlineBlockNeedsLayout&&"inline"!==A(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ct.support.shrinkWrapBlocks||u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],ti.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(h?"hide":"show"))continue;
c[i]=p&&p[i]||ct.style(e,i)}if(!ct.isEmptyObject(c)){p?"hidden"in p&&(h=p.hidden):p=ct._data(e,"fxshow",{}),s&&(p.hidden=!h),h?ct(e).show():u.done(function(){ct(e).hide()}),u.done(function(){var t;ct._removeData(e,"fxshow");for(t in c)ct.style(e,t,c[t])});for(i in c)a=j(h?p[i]:0,i,u),i in p||(p[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t,n,i,r){return new F.prototype.init(e,t,n,i,r)}function q(e,t){var n,i={"height":e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Cn[r],i["margin"+n]=i["padding"+n]=e;
return t&&(i.opacity=i.width=e),i}function $(e){return ct.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var W,K,X=typeof t,Q=e.location,G=e.document,Y=G.documentElement,J=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",it=tt.concat,rt=tt.push,st=tt.slice,at=tt.indexOf,ot=et.toString,lt=et.hasOwnProperty,ut=nt.trim,ct=function(e,t){return new ct.fn.init(e,t,K)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,wt=/^-ms-/,xt=/-([\da-z])/gi,St=function(e,t){return t.toUpperCase()
},kt=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(Ct(),ct.ready())},Ct=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",kt,!1),e.removeEventListener("load",kt,!1)):(G.detachEvent("onreadystatechange",kt),e.detachEvent("onload",kt))};ct.fn=ct.prototype={"jquery":nt,"constructor":ct,"init":function(e,n,i){var r,s;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);
if(r[1]){if(n=n instanceof ct?n[0]:n,ct.merge(this,ct.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),mt.test(r[1])&&ct.isPlainObject(n))for(r in n)ct.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(s=G.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return i.find(e);this.length=1,this[0]=s}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ct.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ct.makeArray(e,this))
},"selector":"","length":0,"toArray":function(){return st.call(this)},"get":function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},"pushStack":function(e){var t=ct.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},"each":function(e,t){return ct.each(this,e,t)},"ready":function(e){return ct.ready.promise().done(e),this},"slice":function(){return this.pushStack(st.apply(this,arguments))},"first":function(){return this.eq(0)},"last":function(){return this.eq(-1)
},"eq":function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},"map":function(e){return this.pushStack(ct.map(this,function(t,n){return e.call(t,n,t)}))},"end":function(){return this.prevObject||this.constructor(null)},"push":rt,"sort":[].sort,"splice":[].splice},ct.fn.init.prototype=ct.fn,ct.extend=ct.fn.extend=function(){var e,n,i,r,s,a,o=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l=2),"object"==typeof o||ct.isFunction(o)||(o={}),u===l&&(o=this,--l);u>l;l++)if(null!=(s=arguments[l]))for(r in s)e=o[r],i=s[r],o!==i&&(c&&i&&(ct.isPlainObject(i)||(n=ct.isArray(i)))?(n?(n=!1,a=e&&ct.isArray(e)?e:[]):a=e&&ct.isPlainObject(e)?e:{},o[r]=ct.extend(c,a,i)):i!==t&&(o[r]=i));
return o},ct.extend({"expando":"jQuery"+(nt+Math.random()).replace(/\D/g,""),"noConflict":function(t){return e.$===ct&&(e.$=Z),t&&e.jQuery===ct&&(e.jQuery=J),ct},"isReady":!1,"readyWait":1,"holdReady":function(e){e?ct.readyWait++:ct.ready(!0)},"ready":function(e){if(e===!0?!--ct.readyWait:!ct.isReady){if(!G.body)return setTimeout(ct.ready);ct.isReady=!0,e!==!0&&--ct.readyWait>0||(W.resolveWith(G,[ct]),ct.fn.trigger&&ct(G).trigger("ready").off("ready"))}},"isFunction":function(e){return"function"===ct.type(e)
},"isArray":Array.isArray||function(e){return"array"===ct.type(e)},"isWindow":function(e){return null!=e&&e==e.window},"isNumeric":function(e){return!isNaN(parseFloat(e))&&isFinite(e)},"type":function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[ot.call(e)]||"object":typeof e},"isPlainObject":function(e){var n;if(!e||"object"!==ct.type(e)||e.nodeType||ct.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1
}catch(i){return!1}if(ct.support.ownLast)for(n in e)return lt.call(e,n);for(n in e);return n===t||lt.call(e,n)},"isEmptyObject":function(e){var t;for(t in e)return!1;return!0},"error":function(e){throw new Error(e)},"parseHTML":function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var i=mt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=ct.buildFragment([e],t,r),r&&ct(r).remove(),ct.merge([],i.childNodes))},"parseJSON":function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ct.trim(t),t&&gt.test(t.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+t)():void ct.error("Invalid JSON: "+t)
},"parseXML":function(n){var i,r;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ct.error("Invalid XML: "+n),i},"noop":function(){},"globalEval":function(t){t&&ct.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},"camelCase":function(e){return e.replace(wt,"ms-").replace(xt,St)
},"nodeName":function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"each":function(e,t,i){var r,s=0,a=e.length,o=n(e);if(i){if(o)for(;a>s&&(r=t.apply(e[s],i),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],i),r===!1)break}else if(o)for(;a>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},"trim":ut&&!ut.call("\ufeff\xa0")?function(e){return null==e?"":ut.call(e)}:function(e){return null==e?"":(e+"").replace(pt,"")},"makeArray":function(e,t){var i=t||[];
return null!=e&&(n(Object(e))?ct.merge(i,"string"==typeof e?[e]:e):rt.call(i,e)),i},"inArray":function(e,t,n){var i;if(t){if(at)return at.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},"merge":function(e,n){var i=n.length,r=e.length,s=0;if("number"==typeof i)for(;i>s;s++)e[r++]=n[s];else for(;n[s]!==t;)e[r++]=n[s++];return e.length=r,e},"grep":function(e,t,n){var i,r=[],s=0,a=e.length;for(n=!!n;a>s;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r
},"map":function(e,t,i){var r,s=0,a=e.length,o=n(e),l=[];if(o)for(;a>s;s++)r=t(e[s],s,i),null!=r&&(l[l.length]=r);else for(s in e)r=t(e[s],s,i),null!=r&&(l[l.length]=r);return it.apply([],l)},"guid":1,"proxy":function(e,n){var i,r,s;return"string"==typeof n&&(s=e[n],n=e,e=s),ct.isFunction(e)?(i=st.call(arguments,2),r=function(){return e.apply(n||this,i.concat(st.call(arguments)))},r.guid=e.guid=e.guid||ct.guid++,r):t},"access":function(e,n,i,r,s,a,o){var l=0,u=e.length,c=null==i;if("object"===ct.type(i)){s=!0;
for(l in i)ct.access(e,n,l,i[l],!0,a,o)}else if(r!==t&&(s=!0,ct.isFunction(r)||(o=!0),c&&(o?(n.call(e,r),n=null):(c=n,n=function(e,t,n){return c.call(ct(e),n)})),n))for(;u>l;l++)n(e[l],i,o?r:r.call(e[l],l,n(e[l],i)));return s?e:c?n.call(e):u?n(e[0],i):a},"now":function(){return(new Date).getTime()},"swap":function(e,t,n,i){var r,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=a[s];return r}}),ct.ready.promise=function(t){if(!W)if(W=ct.Deferred(),"complete"===G.readyState)setTimeout(ct.ready);
else if(G.addEventListener)G.addEventListener("DOMContentLoaded",kt,!1),e.addEventListener("load",kt,!1);else{G.attachEvent("onreadystatechange",kt),e.attachEvent("onload",kt);var n=!1;try{n=null==e.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!ct.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}Ct(),ct.ready()}}()}return W.promise(t)},ct.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()
}),K=ct(G),function(e,t){function n(e,t,n,i){var r,s,a,o,l,u,c,d,f,m;if((t?t.ownerDocument||t:H)!==D&&E(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(R&&!i){if(r=bt.exec(e))if(a=r[1]){if(9===o){if(s=t.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&V(t,s)&&s.id===a)return n.push(s),n}else{if(r[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&k.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n
}if(k.qsa&&(!B||!B.test(e))){if(d=c=j,f=t,m=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=h(e),(c=t.getAttribute("id"))?d=c.replace(St,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+p(u[l]);f=pt.test(e)&&t.parentNode||t,m=u.join(",")}if(m)try{return et.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{c||t.removeAttribute("id")}}}return x(e.replace(ut,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>_.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];
return e}function r(e){return e[j]=!0,e}function s(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=e.length;i--;)_.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e
}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function d(){}function h(e,t){var i,r,s,a,o,l,u,c=q[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=_.preFilter;o;){(!i||(r=dt.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),i=!1,(r=ht.exec(o))&&(i=r.shift(),s.push({"value":i,"type":r[0].replace(ut," ")}),o=o.slice(i.length));
for(a in _.filter)!(r=vt[a].exec(o))||u[a]&&!(r=u[a](r))||(i=r.shift(),s.push({"value":i,"type":a,"matches":r}),o=o.slice(i.length));if(!i)break}return t?o.length:o?n.error(e):q(e,l).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=U++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,a){var o,l,u,c=z+" "+s;if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0
}else for(;t=t[i];)if(1===t.nodeType||r)if(u=t[j]||(t[j]={}),(l=u[i])&&l[0]===c){if((o=l[1])===!0||o===C)return o===!0}else if(l=u[i]=[c],l[1]=e(t,n,a)||C,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,r){for(var s,a=[],o=0,l=e.length,u=null!=t;l>o;o++)(s=e[o])&&(!n||n(s,i,r))&&(a.push(s),u&&t.push(o));return a}function v(e,t,n,i,s,a){return i&&!i[j]&&(i=v(i)),s&&!s[j]&&(s=v(s,a)),r(function(r,a,o,l){var u,c,d,h=[],p=[],f=a.length,m=r||w(t||"*",o.nodeType?[o]:o,[]),v=!e||!r&&t?m:g(m,h,e,o,l),y=n?s||(r?e:f||i)?[]:a:v;
if(n&&n(v,y,o,l),i)for(u=g(y,p),i(u,[],o,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(v[p[c]]=d));if(r){if(s||e){if(s){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(v[c]=d);s(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=s?nt.call(r,d):h[c])>-1&&(r[u]=!(a[u]=d))}}else y=g(y===a?y.splice(f,y.length):y),s?s(null,a,y,l):et.apply(a,y)})}function y(e){for(var t,n,i,r=e.length,s=_.relative[e[0].type],a=s||_.relative[" "],o=s?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return nt.call(t,e)>-1},a,!0),c=[function(e,n,i){return!s&&(i||n!==I)||((t=n).nodeType?l(e,n,i):u(e,n,i))
}];r>o;o++)if(n=_.relative[e[o].type])c=[f(m(c),n)];else{if(n=_.filter[e[o].type].apply(null,e[o].matches),n[j]){for(i=++o;r>i&&!_.relative[e[i].type];i++);return v(o>1&&m(c),o>1&&p(e.slice(0,o-1).concat({"value":" "===e[o-2].type?"*":""})).replace(ut,"$1"),n,i>o&&y(e.slice(o,i)),r>i&&y(e=e.slice(i)),r>i&&p(e))}c.push(n)}return m(c)}function b(e,t){var i=0,s=t.length>0,a=e.length>0,o=function(r,o,l,u,c){var d,h,p,f=[],m=0,v="0",y=r&&[],b=null!=c,w=I,x=r||a&&_.find.TAG("*",c&&o.parentNode||o),S=z+=null==w?1:Math.random()||.1;
for(b&&(I=o!==D&&o,C=i);null!=(d=x[v]);v++){if(a&&d){for(h=0;p=e[h++];)if(p(d,o,l)){u.push(d);break}b&&(z=S,C=++i)}s&&((d=!p&&d)&&m--,r&&y.push(d))}if(m+=v,s&&v!==m){for(h=0;p=t[h++];)p(y,f,o,l);if(r){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=J.call(u));f=g(f)}et.apply(u,f),b&&!r&&f.length>0&&m+t.length>1&&n.uniqueSort(u)}return b&&(z=S,I=w),y};return s?r(o):o}function w(e,t,i){for(var r=0,s=t.length;s>r;r++)n(e,t[r],i);return i}function x(e,t,n,i){var r,s,a,o,l,u=h(e);if(!i&&1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&k.getById&&9===t.nodeType&&R&&_.relative[s[1].type]){if(t=(_.find.ID(a.matches[0].replace(kt,Ct),t)||[])[0],!t)return n;
e=e.slice(s.shift().value.length)}for(r=vt.needsContext.test(e)?0:s.length;r--&&(a=s[r],!_.relative[o=a.type]);)if((l=_.find[o])&&(i=l(a.matches[0].replace(kt,Ct),pt.test(s[0].type)&&t.parentNode||t))){if(s.splice(r,1),e=i.length&&p(s),!e)return et.apply(n,i),n;break}}return A(e,u)(i,t,!R,n,pt.test(e)),n}var S,k,C,_,T,M,A,I,P,E,D,L,R,B,N,O,V,j="sizzle"+-new Date,H=e.document,z=0,U=0,F=i(),q=i(),$=i(),W=!1,K=function(e,t){return e===t?(W=!0,0):0},X=typeof t,Q=1<<31,G={}.hasOwnProperty,Y=[],J=Y.pop,Z=Y.push,et=Y.push,tt=Y.slice,nt=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;
return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=st.replace("w","w#"),ot="\\["+rt+"*("+st+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+rt+"*\\]",lt=":("+st+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",ut=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),dt=new RegExp("^"+rt+"*,"+rt+"*"),ht=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),pt=new RegExp(rt+"*[+~]"),ft=new RegExp("="+rt+"*([^\\]'\"]*)"+rt+"*\\]","g"),mt=new RegExp(lt),gt=new RegExp("^"+at+"$"),vt={"ID":new RegExp("^#("+st+")"),"CLASS":new RegExp("^\\.("+st+")"),"TAG":new RegExp("^("+st.replace("w","w*")+")"),"ATTR":new RegExp("^"+ot),"PSEUDO":new RegExp("^"+lt),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),"bool":new RegExp("^(?:"+it+")$","i"),"needsContext":new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/^(?:input|select|textarea|button)$/i,xt=/^h\d$/i,St=/'|\\/g,kt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),Ct=function(e,t,n){var i="0x"+t-65536;
return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{et.apply(Y=tt.call(H.childNodes),H.childNodes),Y[H.childNodes.length].nodeType}catch(_t){et={"apply":Y.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}M=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},k=n.support={},E=n.setDocument=function(e){var t=e?e.ownerDocument||e:H,n=t.defaultView;
return t!==D&&9===t.nodeType&&t.documentElement?(D=t,L=t.documentElement,R=!M(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){E()}),k.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=s(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=s(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length
}),k.getById=s(function(e){return L.appendChild(e).id=j,!t.getElementsByName||!t.getElementsByName(j).length}),k.getById?(_.find.ID=function(e,t){if(typeof t.getElementById!==X&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(kt,Ct);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(kt,Ct);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t
}}),_.find.TAG=k.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},_.find.CLASS=k.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&R?t.getElementsByClassName(e):void 0},N=[],B=[],(k.qsa=yt.test(t.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||B.push("\\["+rt+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||B.push(":checked")
}),s(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&B.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(k.matchesSelector=yt.test(O=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&s(function(e){k.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),N.push("!=",lt)
}),B=B.length&&new RegExp(B.join("|")),N=N.length&&new RegExp(N.join("|")),V=yt.test(L.contains)||L.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=L.compareDocumentPosition?function(e,n){if(e===n)return W=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);
return i?1&i||!k.sortDetached&&n.compareDocumentPosition(e)===i?e===t||V(H,e)?-1:n===t||V(H,n)?1:P?nt.call(P,e)-nt.call(P,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,r=0,s=e.parentNode,a=n.parentNode,l=[e],u=[n];if(e===n)return W=!0,0;if(!s||!a)return e===t?-1:n===t?1:s?-1:a?1:P?nt.call(P,e)-nt.call(P,n):0;if(s===a)return o(e,n);for(i=e;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?o(l[r],u[r]):l[r]===H?-1:u[r]===H?1:0},t):D
},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&E(e),t=t.replace(ft,"='$1']"),!(!k.matchesSelector||!R||N&&N.test(t)||B&&B.test(t)))try{var i=O.call(e,t);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return n(t,D,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==D&&E(e),V(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==D&&E(e);var i=_.attrHandle[n.toLowerCase()],r=i&&G.call(_.attrHandle,n.toLowerCase())?i(e,n,!R):t;
return r===t?k.attributes||!R?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,r=0;if(W=!k.detectDuplicates,P=!k.sortStable&&e.slice(0),e.sort(K),W){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},T=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;
for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=T(t);return n},_=n.selectors={"cacheLength":50,"createPseudo":r,"match":vt,"attrHandle":{},"find":{},"relative":{">":{"dir":"parentNode","first":!0}," ":{"dir":"parentNode"},"+":{"dir":"previousSibling","first":!0},"~":{"dir":"previousSibling"}},"preFilter":{"ATTR":function(e){return e[1]=e[1].replace(kt,Ct),e[3]=(e[4]||e[5]||"").replace(kt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)
},"CHILD":function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},"PSEUDO":function(e){var n,i=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&mt.test(i)&&(n=h(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},"filter":{"TAG":function(e){var t=e.replace(kt,Ct).toLowerCase();
return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},"CLASS":function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},"ATTR":function(e,t,i){return function(r){var s=n.attr(r,e);return null==s?"!="===t:t?(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s+" ").indexOf(i)>-1:"|="===t?s===i||s.slice(0,i.length+1)===i+"-":!1):!0
}},"CHILD":function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,p,f,m=s!==a?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(g){if(s){for(;m;){for(d=t;d=d[m];)if(o?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(c=g[j]||(g[j]={}),u=c[e]||[],p=u[0]===z&&u[1],h=u[0]===z&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[z,p,h];
break}}else if(y&&(u=(t[j]||(t[j]={}))[e])&&u[0]===z)h=u[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((o?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[j]||(d[j]={}))[e]=[z,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},"PSEUDO":function(e,t){var i,s=_.pseudos[e]||_.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return s[j]?s(t):s.length>1?(i=[e,e,"",t],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var i,r=s(e,t),a=r.length;a--;)i=nt.call(e,r[a]),e[i]=!(n[i]=r[a])
}):function(e){return s(e,0,i)}):s}},"pseudos":{"not":r(function(e){var t=[],n=[],i=A(e.replace(ut,"$1"));return i[j]?r(function(e,t,n,r){for(var s,a=i(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),"has":r(function(e){return function(t){return n(e,t).length>0}}),"contains":r(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),"lang":r(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(kt,Ct).toLowerCase(),function(t){var n;
do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),"target":function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},"root":function(e){return e===L},"focus":function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},"enabled":function(e){return e.disabled===!1},"disabled":function(e){return e.disabled===!0},"checked":function(e){var t=e.nodeName.toLowerCase();
return"input"===t&&!!e.checked||"option"===t&&!!e.selected},"selected":function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},"empty":function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},"parent":function(e){return!_.pseudos.empty(e)},"header":function(e){return xt.test(e.nodeName)},"input":function(e){return wt.test(e.nodeName)},"button":function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t
},"text":function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},"first":c(function(){return[0]}),"last":c(function(e,t){return[t-1]}),"eq":c(function(e,t,n){return[0>n?n+t:n]}),"even":c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),"odd":c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),"lt":c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),"gt":c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);
return e})}},_.pseudos.nth=_.pseudos.eq;for(S in{"radio":!0,"checkbox":!0,"file":!0,"password":!0,"image":!0})_.pseudos[S]=l(S);for(S in{"submit":!0,"reset":!0})_.pseudos[S]=u(S);d.prototype=_.filters=_.pseudos,_.setFilters=new d,A=n.compile=function(e,t){var n,i=[],r=[],s=$[e+" "];if(!s){for(t||(t=h(e)),n=t.length;n--;)s=y(t[n]),s[j]?i.push(s):r.push(s);s=$(e,b(r,i))}return s},k.sortStable=j.split("").sort(K).join("")===j,k.detectDuplicates=W,E(),k.sortDetached=s(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))
}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||a(it,function(e,t,n){var i;
return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),ct.find=n,ct.expr=n.selectors,ct.expr[":"]=ct.expr.pseudos,ct.unique=n.uniqueSort,ct.text=n.getText,ct.isXMLDoc=n.isXML,ct.contains=n.contains}(e);var _t={};ct.Callbacks=function(e){e="string"==typeof e?_t[e]||i(e):ct.extend({},e);var n,r,s,a,o,l,u=[],c=!e.once&&[],d=function(t){for(r=e.memory&&t,s=!0,o=l||0,l=0,a=u.length,n=!0;u&&a>o;o++)if(u[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(c?c.length&&d(c.shift()):r?u=[]:h.disable())
},h={"add":function(){if(u){var t=u.length;!function i(t){ct.each(t,function(t,n){var r=ct.type(n);"function"===r?e.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?a=u.length:r&&(l=t,d(r))}return this},"remove":function(){return u&&ct.each(arguments,function(e,t){for(var i;(i=ct.inArray(t,u,i))>-1;)u.splice(i,1),n&&(a>=i&&a--,o>=i&&o--)}),this},"has":function(e){return e?ct.inArray(e,u)>-1:!(!u||!u.length)},"empty":function(){return u=[],a=0,this},"disable":function(){return u=c=r=t,this
},"disabled":function(){return!u},"lock":function(){return c=t,r||h.disable(),this},"locked":function(){return!c},"fireWith":function(e,t){return!u||s&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):d(t)),this},"fire":function(){return h.fireWith(this,arguments),this},"fired":function(){return!!s}};return h},ct.extend({"Deferred":function(e){var t=[["resolve","done",ct.Callbacks("once memory"),"resolved"],["reject","fail",ct.Callbacks("once memory"),"rejected"],["notify","progress",ct.Callbacks("memory")]],n="pending",i={"state":function(){return n
},"always":function(){return r.done(arguments).fail(arguments),this},"then":function(){var e=arguments;return ct.Deferred(function(n){ct.each(t,function(t,s){var a=s[0],o=ct.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&ct.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},"promise":function(e){return null!=e?ct.extend(e,i):i}},r={};return i.pipe=i.then,ct.each(t,function(e,s){var a=s[2],o=s[3];
i[s[1]]=a.add,o&&a.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},"when":function(e){var t,n,i,r=0,s=st.call(arguments),a=s.length,o=1!==a||e&&ct.isFunction(e.promise)?a:0,l=1===o?e:ct.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?st.call(arguments):r,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)s[r]&&ct.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,t)):--o;
return o||l.resolveWith(i,s),l.promise()}}),ct.support=function(t){var n,i,r,s,a,o,l,u,c,d=G.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],i=d.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;s=G.createElement("select"),o=s.appendChild(G.createElement("option")),r=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!r.value,t.optSelected=o.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;
try{delete d.test}catch(h){t.deleteExpando=!1}r=G.createElement("input"),r.setAttribute("value",""),t.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),a=G.createDocumentFragment(),a.appendChild(r),t.appendChecked=r.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(c in{"submit":!0,"change":!0,"focusin":!0})d.setAttribute(l="on"+c,"t"),t[c+"Bubbles"]=l in e||d.attributes[l].expando===!1;
d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(c in ct(t))break;return t.ownLast="0"!==c,ct(function(){var n,i,r,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=G.getElementsByTagName("body")[0];a&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=d.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=u&&0===r[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ct.swap(a,null!=a.style.zoom?{"zoom":1}:{},function(){t.boxSizing=4===d.offsetWidth
}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{"width":"4px"}).width,i=d.appendChild(G.createElement("div")),i.style.cssText=d.style.cssText=s,i.style.marginRight=i.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof d.style.zoom!==X&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=d=r=i=null)
}),n=s=a=o=i=r=null,t}({});var Tt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Mt=/([A-Z])/g;ct.extend({"cache":{},"noData":{"applet":!0,"embed":!0,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},"hasData":function(e){return e=e.nodeType?ct.cache[e[ct.expando]]:e[ct.expando],!!e&&!o(e)},"data":function(e,t,n){return r(e,t,n)},"removeData":function(e,t){return s(e,t)},"_data":function(e,t,n){return r(e,t,n,!0)},"_removeData":function(e,t){return s(e,t,!0)},"acceptData":function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;
var t=e.nodeName&&ct.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ct.fn.extend({"data":function(e,n){var i,r,s=null,o=0,l=this[0];if(e===t){if(this.length&&(s=ct.data(l),1===l.nodeType&&!ct._data(l,"parsedAttrs"))){for(i=l.attributes;o<i.length;o++)r=i[o].name,0===r.indexOf("data-")&&(r=ct.camelCase(r.slice(5)),a(l,r,s[r]));ct._data(l,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){ct.data(this,e)}):arguments.length>1?this.each(function(){ct.data(this,e,n)
}):l?a(l,e,ct.data(l,e)):null},"removeData":function(e){return this.each(function(){ct.removeData(this,e)})}}),ct.extend({"queue":function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ct._data(e,t),n&&(!i||ct.isArray(n)?i=ct._data(e,t,ct.makeArray(n)):i.push(n)),i||[]):void 0},"dequeue":function(e,t){t=t||"fx";var n=ct.queue(e,t),i=n.length,r=n.shift(),s=ct._queueHooks(e,t),a=function(){ct.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!i&&s&&s.empty.fire()
},"_queueHooks":function(e,t){var n=t+"queueHooks";return ct._data(e,n)||ct._data(e,n,{"empty":ct.Callbacks("once memory").add(function(){ct._removeData(e,t+"queue"),ct._removeData(e,n)})})}}),ct.fn.extend({"queue":function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?ct.queue(this[0],e):n===t?this:this.each(function(){var t=ct.queue(this,e,n);ct._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ct.dequeue(this,e)})},"dequeue":function(e){return this.each(function(){ct.dequeue(this,e)
})},"delay":function(e,t){return e=ct.fx?ct.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},"clearQueue":function(e){return this.queue(e||"fx",[])},"promise":function(e,n){var i,r=1,s=ct.Deferred(),a=this,o=this.length,l=function(){--r||s.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";o--;)i=ct._data(a[o],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),s.promise(n)}});var At,It,Pt=/[\t\r\n\f]/g,Et=/\r/g,Dt=/^(?:input|select|textarea|button|object)$/i,Lt=/^(?:a|area)$/i,Rt=/^(?:checked|selected)$/i,Bt=ct.support.getSetAttribute,Nt=ct.support.input;
ct.fn.extend({"attr":function(e,t){return ct.access(this,ct.attr,e,t,arguments.length>1)},"removeAttr":function(e){return this.each(function(){ct.removeAttr(this,e)})},"prop":function(e,t){return ct.access(this,ct.prop,e,t,arguments.length>1)},"removeProp":function(e){return e=ct.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},"addClass":function(e){var t,n,i,r,s,a=0,o=this.length,l="string"==typeof e&&e;if(ct.isFunction(e))return this.each(function(t){ct(this).addClass(e.call(this,t,this.className))
});if(l)for(t=(e||"").match(ht)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=ct.trim(i)}return this},"removeClass":function(e){var t,n,i,r,s,a=0,o=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ct.isFunction(e))return this.each(function(t){ct(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];o>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pt," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");
n.className=e?ct.trim(i):""}return this},"toggleClass":function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ct.isFunction(e)?function(n){ct(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=ct(this),s=e.match(ht)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===X||"boolean"===n)&&(this.className&&ct._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ct._data(this,"__className__")||"")
})},"hasClass":function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pt," ").indexOf(t)>=0)return!0;return!1},"val":function(e){var n,i,r,s=this[0];{if(arguments.length)return r=ct.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=r?e.call(this,n,ct(this).val()):e,null==s?s="":"number"==typeof s?s+="":ct.isArray(s)&&(s=ct.map(s,function(e){return null==e?"":e+""})),i=ct.valHooks[this.type]||ct.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==t||(this.value=s))
});if(s)return i=ct.valHooks[s.type]||ct.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)}}}),ct.extend({"valHooks":{"option":{"get":function(e){var t=ct.find.attr(e,"value");return null!=t?t:e.text}},"select":{"get":function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:i.length,l=0>r?o:s?r:0;o>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ct.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ct.nodeName(n.parentNode,"optgroup"))){if(t=ct(n).val(),s)return t;
a.push(t)}return a},"set":function(e,t){for(var n,i,r=e.options,s=ct.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=ct.inArray(ct(i).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},"attr":function(e,n,i){var r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===X?ct.prop(e,n,i):(1===a&&ct.isXMLDoc(e)||(n=n.toLowerCase(),r=ct.attrHooks[n]||(ct.expr.match.bool.test(n)?It:At)),i===t?r&&"get"in r&&null!==(s=r.get(e,n))?s:(s=ct.find.attr(e,n),null==s?t:s):null!==i?r&&"set"in r&&(s=r.set(e,i,n))!==t?s:(e.setAttribute(n,i+""),i):void ct.removeAttr(e,n))
},"removeAttr":function(e,t){var n,i,r=0,s=t&&t.match(ht);if(s&&1===e.nodeType)for(;n=s[r++];)i=ct.propFix[n]||n,ct.expr.match.bool.test(n)?Nt&&Bt||!Rt.test(n)?e[i]=!1:e[ct.camelCase("default-"+n)]=e[i]=!1:ct.attr(e,n,""),e.removeAttribute(Bt?n:i)},"attrHooks":{"type":{"set":function(e,t){if(!ct.support.radioValue&&"radio"===t&&ct.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},"propFix":{"for":"htmlFor","class":"className"},"prop":function(e,n,i){var r,s,a,o=e.nodeType;
if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!ct.isXMLDoc(e),a&&(n=ct.propFix[n]||n,s=ct.propHooks[n]),i!==t?s&&"set"in s&&(r=s.set(e,i,n))!==t?r:e[n]=i:s&&"get"in s&&null!==(r=s.get(e,n))?r:e[n]},"propHooks":{"tabIndex":{"get":function(e){var t=ct.find.attr(e,"tabindex");return t?parseInt(t,10):Dt.test(e.nodeName)||Lt.test(e.nodeName)&&e.href?0:-1}}}}),It={"set":function(e,t,n){return t===!1?ct.removeAttr(e,n):Nt&&Bt||!Rt.test(n)?e.setAttribute(!Bt&&ct.propFix[n]||n,n):e[ct.camelCase("default-"+n)]=e[n]=!0,n
}},ct.each(ct.expr.match.bool.source.match(/\w+/g),function(e,n){var i=ct.expr.attrHandle[n]||ct.find.attr;ct.expr.attrHandle[n]=Nt&&Bt||!Rt.test(n)?function(e,n,r){var s=ct.expr.attrHandle[n],a=r?t:(ct.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return ct.expr.attrHandle[n]=s,a}:function(e,n,i){return i?t:e[ct.camelCase("default-"+n)]?n.toLowerCase():null}}),Nt&&Bt||(ct.attrHooks.value={"set":function(e,t,n){return ct.nodeName(e,"input")?void(e.defaultValue=t):At&&At.set(e,t,n)}}),Bt||(At={"set":function(e,n,i){var r=e.getAttributeNode(i);
return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},ct.expr.attrHandle.id=ct.expr.attrHandle.name=ct.expr.attrHandle.coords=function(e,n,i){var r;return i?t:(r=e.getAttributeNode(n))&&""!==r.value?r.value:null},ct.valHooks.button={"get":function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},"set":At.set},ct.attrHooks.contenteditable={"set":function(e,t,n){At.set(e,""===t?!1:t,n)}},ct.each(["width","height"],function(e,t){ct.attrHooks[t]={"set":function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0
}}})),ct.support.hrefNormalized||ct.each(["href","src"],function(e,t){ct.propHooks[t]={"get":function(e){return e.getAttribute(t,4)}}}),ct.support.style||(ct.attrHooks.style={"get":function(e){return e.style.cssText||t},"set":function(e,t){return e.style.cssText=t+""}}),ct.support.optSelected||(ct.propHooks.selected={"get":function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ct.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ct.propFix[this.toLowerCase()]=this
}),ct.support.enctype||(ct.propFix.enctype="encoding"),ct.each(["radio","checkbox"],function(){ct.valHooks[this]={"set":function(e,t){return ct.isArray(t)?e.checked=ct.inArray(ct(e).val(),t)>=0:void 0}},ct.support.checkOn||(ct.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ot=/^(?:input|select|textarea)$/i,Vt=/^key/,jt=/^(?:mouse|contextmenu)|click/,Ht=/^(?:focusinfocus|focusoutblur)$/,zt=/^([^.]*)(?:\.(.+)|)$/;ct.event={"global":{},"add":function(e,n,i,r,s){var a,o,l,u,c,d,h,p,f,m,g,v=ct._data(e);
if(v){for(i.handler&&(u=i,i=u.handler,s=u.selector),i.guid||(i.guid=ct.guid++),(o=v.events)||(o=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof ct===X||e&&ct.event.triggered===e.type?t:ct.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ht)||[""],l=n.length;l--;)a=zt.exec(n[l])||[],f=g=a[1],m=(a[2]||"").split(".").sort(),f&&(c=ct.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=ct.event.special[f]||{},h=ct.extend({"type":f,"origType":g,"data":r,"handler":i,"guid":i.guid,"selector":s,"needsContext":s&&ct.expr.match.needsContext.test(s),"namespace":m.join(".")},u),(p=o[f])||(p=o[f]=[],p.delegateCount=0,c.setup&&c.setup.call(e,r,m,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),s?p.splice(p.delegateCount++,0,h):p.push(h),ct.event.global[f]=!0);
e=null}},"remove":function(e,t,n,i,r){var s,a,o,l,u,c,d,h,p,f,m,g=ct.hasData(e)&&ct._data(e);if(g&&(c=g.events)){for(t=(t||"").match(ht)||[""],u=t.length;u--;)if(o=zt.exec(t[u])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p){for(d=ct.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=c[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)a=h[s],!r&&m!==a.origType||n&&n.guid!==a.guid||o&&!o.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(s,1),a.selector&&h.delegateCount--,d.remove&&d.remove.call(e,a));
l&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||ct.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ct.event.remove(e,p+t[u],n,i,!0);ct.isEmptyObject(c)&&(delete g.handle,ct._removeData(e,"events"))}},"trigger":function(n,i,r,s){var a,o,l,u,c,d,h,p=[r||G],f=lt.call(n,"type")?n.type:n,m=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=d=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!Ht.test(f+ct.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),o=f.indexOf(":")<0&&"on"+f,n=n[ct.expando]?n:new ct.Event(f,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:ct.makeArray(i,[n]),c=ct.event.special[f]||{},s||!c.trigger||c.trigger.apply(r,i)!==!1)){if(!s&&!c.noBubble&&!ct.isWindow(r)){for(u=c.delegateType||f,Ht.test(u+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),d=l;
d===(r.ownerDocument||G)&&p.push(d.defaultView||d.parentWindow||e)}for(h=0;(l=p[h++])&&!n.isPropagationStopped();)n.type=h>1?u:c.bindType||f,a=(ct._data(l,"events")||{})[n.type]&&ct._data(l,"handle"),a&&a.apply(l,i),a=o&&l[o],a&&ct.acceptData(l)&&a.apply&&a.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(p.pop(),i)===!1)&&ct.acceptData(r)&&o&&r[f]&&!ct.isWindow(r)){d=r[o],d&&(r[o]=null),ct.event.triggered=f;try{r[f]()}catch(g){}ct.event.triggered=t,d&&(r[o]=d)
}return n.result}},"dispatch":function(e){e=ct.event.fix(e);var n,i,r,s,a,o=[],l=st.call(arguments),u=(ct._data(this,"events")||{})[e.type]||[],c=ct.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=ct.event.handlers.call(this,e,u),n=0;(s=o[n++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,a=0;(r=s.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,i=((ct.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));
return c.postDispatch&&c.postDispatch.call(this,e),e.result}},"handlers":function(e,n){var i,r,s,a,o=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(s=[],a=0;l>a;a++)r=n[a],i=r.selector+" ",s[i]===t&&(s[i]=r.needsContext?ct(i,this).index(u)>=0:ct.find(i,this,null,[u]).length),s[i]&&s.push(r);s.length&&o.push({"elem":u,"handlers":s})}return l<n.length&&o.push({"elem":this,"handlers":n.slice(l)}),o
},"fix":function(e){if(e[ct.expando])return e;var t,n,i,r=e.type,s=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=jt.test(r)?this.mouseHooks:Vt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ct.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=s.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,s):e},"props":"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),"fixHooks":{},"keyHooks":{"props":"char charCode key keyCode".split(" "),"filter":function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e
}},"mouseHooks":{"props":"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),"filter":function(e,n){var i,r,s,a=n.button,o=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||G,s=r.documentElement,i=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?n.toElement:o),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e
}},"special":{"load":{"noBubble":!0},"focus":{"trigger":function(){if(this!==c()&&this.focus)try{return this.focus(),!1}catch(e){}},"delegateType":"focusin"},"blur":{"trigger":function(){return this===c()&&this.blur?(this.blur(),!1):void 0},"delegateType":"focusout"},"click":{"trigger":function(){return ct.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},"_default":function(e){return ct.nodeName(e.target,"a")}},"beforeunload":{"postDispatch":function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)
}}},"simulate":function(e,t,n,i){var r=ct.extend(new ct.Event,n,{"type":e,"isSimulated":!0,"originalEvent":{}});i?ct.event.trigger(r,null,t):ct.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},ct.removeEvent=G.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===X&&(e[i]=null),e.detachEvent(i,n))},ct.Event=function(e,t){return this instanceof ct.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:u):this.type=e,t&&ct.extend(this,t),this.timeStamp=e&&e.timeStamp||ct.now(),void(this[ct.expando]=!0)):new ct.Event(e,t)
},ct.Event.prototype={"isDefaultPrevented":u,"isPropagationStopped":u,"isImmediatePropagationStopped":u,"preventDefault":function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},"stopPropagation":function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},"stopImmediatePropagation":function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ct.each({"mouseenter":"mouseover","mouseleave":"mouseout"},function(e,t){ct.event.special[e]={"delegateType":t,"bindType":t,"handle":function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;
return(!r||r!==i&&!ct.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),ct.support.submitBubbles||(ct.event.special.submit={"setup":function(){return ct.nodeName(this,"form")?!1:void ct.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=ct.nodeName(n,"input")||ct.nodeName(n,"button")?n.form:t;i&&!ct._data(i,"submitBubbles")&&(ct.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ct._data(i,"submitBubbles",!0))})},"postDispatch":function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ct.event.simulate("submit",this.parentNode,e,!0))
},"teardown":function(){return ct.nodeName(this,"form")?!1:void ct.event.remove(this,"._submit")}}),ct.support.changeBubbles||(ct.event.special.change={"setup":function(){return Ot.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ct.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ct.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ct.event.simulate("change",this,e,!0)
})),!1):void ct.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ot.test(t.nodeName)&&!ct._data(t,"changeBubbles")&&(ct.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ct.event.simulate("change",this.parentNode,e,!0)}),ct._data(t,"changeBubbles",!0))})},"handle":function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},"teardown":function(){return ct.event.remove(this,"._change"),!Ot.test(this.nodeName)
}}),ct.support.focusinBubbles||ct.each({"focus":"focusin","blur":"focusout"},function(e,t){var n=0,i=function(e){ct.event.simulate(t,e.target,ct.event.fix(e),!0)};ct.event.special[t]={"setup":function(){0===n++&&G.addEventListener(e,i,!0)},"teardown":function(){0===--n&&G.removeEventListener(e,i,!0)}}}),ct.fn.extend({"on":function(e,n,i,r,s){var a,o;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(a in e)this.on(a,n,i,e[a],s);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=u;
else if(!r)return this;return 1===s&&(o=r,r=function(e){return ct().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=ct.guid++)),this.each(function(){ct.event.add(this,e,r,i,n)})},"one":function(e,t,n,i){return this.on(e,t,n,i,1)},"off":function(e,n,i){var r,s;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ct(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=u),this.each(function(){ct.event.remove(this,e,i,n)
})},"trigger":function(e,t){return this.each(function(){ct.event.trigger(e,t,this)})},"triggerHandler":function(e,t){var n=this[0];return n?ct.event.trigger(e,t,n,!0):void 0}});var Ut=/^.[^:#\[\.,]*$/,Ft=/^(?:parents|prev(?:Until|All))/,qt=ct.expr.match.needsContext,$t={"children":!0,"contents":!0,"next":!0,"prev":!0};ct.fn.extend({"find":function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(ct(e).filter(function(){for(t=0;r>t;t++)if(ct.contains(i[t],this))return!0}));
for(t=0;r>t;t++)ct.find(e,i[t],n);return n=this.pushStack(r>1?ct.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},"has":function(e){var t,n=ct(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(ct.contains(this,n[t]))return!0})},"not":function(e){return this.pushStack(h(this,e||[],!0))},"filter":function(e){return this.pushStack(h(this,e||[],!1))},"is":function(e){return!!h(this,"string"==typeof e&&qt.test(e)?ct(e):e||[],!1).length},"closest":function(e,t){for(var n,i=0,r=this.length,s=[],a=qt.test(e)||"string"!=typeof e?ct(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ct.find.matchesSelector(n,e))){n=s.push(n);
break}return this.pushStack(s.length>1?ct.unique(s):s)},"index":function(e){return e?"string"==typeof e?ct.inArray(this[0],ct(e)):ct.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},"add":function(e,t){var n="string"==typeof e?ct(e,t):ct.makeArray(e&&e.nodeType?[e]:e),i=ct.merge(this.get(),n);return this.pushStack(ct.unique(i))},"addBack":function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ct.each({"parent":function(e){var t=e.parentNode;
return t&&11!==t.nodeType?t:null},"parents":function(e){return ct.dir(e,"parentNode")},"parentsUntil":function(e,t,n){return ct.dir(e,"parentNode",n)},"next":function(e){return d(e,"nextSibling")},"prev":function(e){return d(e,"previousSibling")},"nextAll":function(e){return ct.dir(e,"nextSibling")},"prevAll":function(e){return ct.dir(e,"previousSibling")},"nextUntil":function(e,t,n){return ct.dir(e,"nextSibling",n)},"prevUntil":function(e,t,n){return ct.dir(e,"previousSibling",n)},"siblings":function(e){return ct.sibling((e.parentNode||{}).firstChild,e)
},"children":function(e){return ct.sibling(e.firstChild)},"contents":function(e){return ct.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ct.merge([],e.childNodes)}},function(e,t){ct.fn[e]=function(n,i){var r=ct.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ct.filter(i,r)),this.length>1&&($t[e]||(r=ct.unique(r)),Ft.test(e)&&(r=r.reverse())),this.pushStack(r)}}),ct.extend({"filter":function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ct.find.matchesSelector(i,e)?[i]:[]:ct.find.matches(e,ct.grep(t,function(e){return 1===e.nodeType
}))},"dir":function(e,n,i){for(var r=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!ct(s).is(i));)1===s.nodeType&&r.push(s),s=s[n];return r},"sibling":function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Kt=/ jQuery\d+="(?:null|\d+)"/g,Xt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Qt=/^\s+/,Gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Yt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,sn=/^true\/(.*)/,an=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,on={"option":[1,"<select multiple='multiple'>","</select>"],"legend":[1,"<fieldset>","</fieldset>"],"area":[1,"<map>","</map>"],"param":[1,"<object>","</object>"],"thead":[1,"<table>","</table>"],"tr":[2,"<table><tbody>","</tbody></table>"],"col":[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],"td":[3,"<table><tbody><tr>","</tr></tbody></table>"],"_default":ct.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=p(G),un=ln.appendChild(G.createElement("div"));
on.optgroup=on.option,on.tbody=on.tfoot=on.colgroup=on.caption=on.thead,on.th=on.td,ct.fn.extend({"text":function(e){return ct.access(this,function(e){return e===t?ct.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},"append":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},"prepend":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);
t.insertBefore(e,t.firstChild)}})},"before":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},"after":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},"remove":function(e,t){for(var n,i=e?ct.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||ct.cleanData(w(n)),n.parentNode&&(t&&ct.contains(n.ownerDocument,n)&&v(w(n,"script")),n.parentNode.removeChild(n));
return this},"empty":function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ct.cleanData(w(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ct.nodeName(e,"select")&&(e.options.length=0)}return this},"clone":function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ct.clone(this,e,t)})},"html":function(e){return ct.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Kt,""):t;if(!("string"!=typeof e||en.test(e)||!ct.support.htmlSerialize&&Xt.test(e)||!ct.support.leadingWhitespace&&Qt.test(e)||on[(Yt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Gt,"<$1></$2>");
try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(ct.cleanData(w(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},"replaceWith":function(){var e=ct.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),ct(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},"detach":function(e){return this.remove(e,!0)},"domManip":function(e,t,n){e=it.apply([],e);
var i,r,s,a,o,l,u=0,c=this.length,d=this,h=c-1,p=e[0],f=ct.isFunction(p);if(f||!(1>=c||"string"!=typeof p||ct.support.checkClone)&&nn.test(p))return this.each(function(i){var r=d.eq(i);f&&(e[0]=p.call(this,i,r.html())),r.domManip(e,t,n)});if(c&&(l=ct.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(a=ct.map(w(l,"script"),m),s=a.length;c>u;u++)r=l,u!==h&&(r=ct.clone(r,!0,!0),s&&ct.merge(a,w(r,"script"))),t.call(this[u],r,u);if(s)for(o=a[a.length-1].ownerDocument,ct.map(a,g),u=0;s>u;u++)r=a[u],rn.test(r.type||"")&&!ct._data(r,"globalEval")&&ct.contains(o,r)&&(r.src?ct._evalUrl(r.src):ct.globalEval((r.text||r.textContent||r.innerHTML||"").replace(an,"")));
l=i=null}return this}}),ct.each({"appendTo":"append","prependTo":"prepend","insertBefore":"before","insertAfter":"after","replaceAll":"replaceWith"},function(e,t){ct.fn[e]=function(e){for(var n,i=0,r=[],s=ct(e),a=s.length-1;a>=i;i++)n=i===a?this:this.clone(!0),ct(s[i])[t](n),rt.apply(r,n.get());return this.pushStack(r)}}),ct.extend({"clone":function(e,t,n){var i,r,s,a,o,l=ct.contains(e.ownerDocument,e);if(ct.support.html5Clone||ct.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(un.innerHTML=e.outerHTML,un.removeChild(s=un.firstChild)),!(ct.support.noCloneEvent&&ct.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ct.isXMLDoc(e)))for(i=w(s),o=w(e),a=0;null!=(r=o[a]);++a)i[a]&&b(r,i[a]);
if(t)if(n)for(o=o||w(e),i=i||w(s),a=0;null!=(r=o[a]);a++)y(r,i[a]);else y(e,s);return i=w(s,"script"),i.length>0&&v(i,!l&&w(e,"script")),i=o=r=null,s},"buildFragment":function(e,t,n,i){for(var r,s,a,o,l,u,c,d=e.length,h=p(t),f=[],m=0;d>m;m++)if(s=e[m],s||0===s)if("object"===ct.type(s))ct.merge(f,s.nodeType?[s]:s);else if(Zt.test(s)){for(o=o||h.appendChild(t.createElement("div")),l=(Yt.exec(s)||["",""])[1].toLowerCase(),c=on[l]||on._default,o.innerHTML=c[1]+s.replace(Gt,"<$1></$2>")+c[2],r=c[0];r--;)o=o.lastChild;
if(!ct.support.leadingWhitespace&&Qt.test(s)&&f.push(t.createTextNode(Qt.exec(s)[0])),!ct.support.tbody)for(s="table"!==l||Jt.test(s)?"<table>"!==c[1]||Jt.test(s)?0:o:o.firstChild,r=s&&s.childNodes.length;r--;)ct.nodeName(u=s.childNodes[r],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(ct.merge(f,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=h.lastChild}else f.push(t.createTextNode(s));for(o&&h.removeChild(o),ct.support.appendChecked||ct.grep(w(f,"input"),x),m=0;s=f[m++];)if((!i||-1===ct.inArray(s,i))&&(a=ct.contains(s.ownerDocument,s),o=w(h.appendChild(s),"script"),a&&v(o),n))for(r=0;s=o[r++];)rn.test(s.type||"")&&n.push(s);
return o=null,h},"cleanData":function(e,t){for(var n,i,r,s,a=0,o=ct.expando,l=ct.cache,u=ct.support.deleteExpando,c=ct.event.special;null!=(n=e[a]);a++)if((t||ct.acceptData(n))&&(r=n[o],s=r&&l[r])){if(s.events)for(i in s.events)c[i]?ct.event.remove(n,i):ct.removeEvent(n,i,s.handle);l[r]&&(delete l[r],u?delete n[o]:typeof n.removeAttribute!==X?n.removeAttribute(o):n[o]=null,tt.push(r))}},"_evalUrl":function(e){return ct.ajax({"url":e,"type":"GET","dataType":"script","async":!1,"global":!1,"throws":!0})
}}),ct.fn.extend({"wrapAll":function(e){if(ct.isFunction(e))return this.each(function(t){ct(this).wrapAll(e.call(this,t))});if(this[0]){var t=ct(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},"wrapInner":function(e){return this.each(ct.isFunction(e)?function(t){ct(this).wrapInner(e.call(this,t))}:function(){var t=ct(this),n=t.contents();
n.length?n.wrapAll(e):t.append(e)})},"wrap":function(e){var t=ct.isFunction(e);return this.each(function(n){ct(this).wrapAll(t?e.call(this,n):e)})},"unwrap":function(){return this.parent().each(function(){ct.nodeName(this,"body")||ct(this).replaceWith(this.childNodes)}).end()}});var cn,dn,hn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+dt+")(.*)$","i"),bn=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),wn=new RegExp("^([+-])=("+dt+")","i"),xn={"BODY":"block"},Sn={"position":"absolute","visibility":"hidden","display":"block"},kn={"letterSpacing":0,"fontWeight":400},Cn=["Top","Right","Bottom","Left"],_n=["Webkit","O","Moz","ms"];
ct.fn.extend({"css":function(e,n){return ct.access(this,function(e,n,i){var r,s,a={},o=0;if(ct.isArray(n)){for(s=dn(e),r=n.length;r>o;o++)a[n[o]]=ct.css(e,n[o],!1,s);return a}return i!==t?ct.style(e,n,i):ct.css(e,n)},e,n,arguments.length>1)},"show":function(){return C(this,!0)},"hide":function(){return C(this)},"toggle":function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){k(this)?ct(this).show():ct(this).hide()})}}),ct.extend({"cssHooks":{"opacity":{"get":function(e,t){if(t){var n=hn(e,"opacity");
return""===n?"1":n}}}},"cssNumber":{"columnCount":!0,"fillOpacity":!0,"fontWeight":!0,"lineHeight":!0,"opacity":!0,"order":!0,"orphans":!0,"widows":!0,"zIndex":!0,"zoom":!0},"cssProps":{"float":ct.support.cssFloat?"cssFloat":"styleFloat"},"style":function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,a,o,l=ct.camelCase(n),u=e.style;if(n=ct.cssProps[l]||(ct.cssProps[l]=S(u,l)),o=ct.cssHooks[n]||ct.cssHooks[l],i===t)return o&&"get"in o&&(s=o.get(e,!1,r))!==t?s:u[n];if(a=typeof i,"string"===a&&(s=wn.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(ct.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||ct.cssNumber[l]||(i+="px"),ct.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),o&&"set"in o&&(i=o.set(e,i,r))===t)))try{u[n]=i
}catch(c){}}},"css":function(e,n,i,r){var s,a,o,l=ct.camelCase(n);return n=ct.cssProps[l]||(ct.cssProps[l]=S(e.style,l)),o=ct.cssHooks[n]||ct.cssHooks[l],o&&"get"in o&&(a=o.get(e,!0,i)),a===t&&(a=hn(e,n,r)),"normal"===a&&n in kn&&(a=kn[n]),""===i||i?(s=parseFloat(a),i===!0||ct.isNumeric(s)?s||0:a):a}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},hn=function(e,n,i){var r,s,a,o=i||dn(e),l=o?o.getPropertyValue(n)||o[n]:t,u=e.style;return o&&(""!==l||ct.contains(e.ownerDocument,e)||(l=ct.style(e,n)),bn.test(l)&&vn.test(n)&&(r=u.width,s=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=o.width,u.width=r,u.minWidth=s,u.maxWidth=a)),l
}):G.documentElement.currentStyle&&(dn=function(e){return e.currentStyle},hn=function(e,n,i){var r,s,a,o=i||dn(e),l=o?o[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),bn.test(l)&&!mn.test(n)&&(r=u.left,s=e.runtimeStyle,a=s&&s.left,a&&(s.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=r,a&&(s.left=a)),""===l?"auto":l}),ct.each(["height","width"],function(e,t){ct.cssHooks[t]={"get":function(e,n,i){return n?0===e.offsetWidth&&gn.test(ct.css(e,"display"))?ct.swap(e,Sn,function(){return M(e,t,i)
}):M(e,t,i):void 0},"set":function(e,n,i){var r=i&&dn(e);return _(e,n,i?T(e,t,i,ct.support.boxSizing&&"border-box"===ct.css(e,"boxSizing",!1,r),r):0)}}}),ct.support.opacity||(ct.cssHooks.opacity={"get":function(e,t){return fn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},"set":function(e,t){var n=e.style,i=e.currentStyle,r=ct.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ct.trim(s.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=pn.test(s)?s.replace(pn,r):s+" "+r)
}}),ct(function(){ct.support.reliableMarginRight||(ct.cssHooks.marginRight={"get":function(e,t){return t?ct.swap(e,{"display":"inline-block"},hn,[e,"marginRight"]):void 0}}),!ct.support.pixelPosition&&ct.fn.position&&ct.each(["top","left"],function(e,t){ct.cssHooks[t]={"get":function(e,n){return n?(n=hn(e,t),bn.test(n)?ct(e).position()[t]+"px":n):void 0}}})}),ct.expr&&ct.expr.filters&&(ct.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ct.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ct.css(e,"display"))
},ct.expr.filters.visible=function(e){return!ct.expr.filters.hidden(e)}),ct.each({"margin":"","padding":"","border":"Width"},function(e,t){ct.cssHooks[e+t]={"expand":function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Cn[i]+t]=s[i]||s[i-2]||s[0];return r}},vn.test(e)||(ct.cssHooks[e+t].set=_)});var Tn=/%20/g,Mn=/\[\]$/,An=/\r?\n/g,In=/^(?:submit|button|image|reset|file)$/i,Pn=/^(?:input|select|textarea|keygen)/i;ct.fn.extend({"serialize":function(){return ct.param(this.serializeArray())
},"serializeArray":function(){return this.map(function(){var e=ct.prop(this,"elements");return e?ct.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ct(this).is(":disabled")&&Pn.test(this.nodeName)&&!In.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=ct(this).val();return null==n?null:ct.isArray(n)?ct.map(n,function(e){return{"name":t.name,"value":e.replace(An,"\r\n")}}):{"name":t.name,"value":n.replace(An,"\r\n")}}).get()}}),ct.param=function(e,n){var i,r=[],s=function(e,t){t=ct.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(n===t&&(n=ct.ajaxSettings&&ct.ajaxSettings.traditional),ct.isArray(e)||e.jquery&&!ct.isPlainObject(e))ct.each(e,function(){s(this.name,this.value)});else for(i in e)P(i,e[i],n,s);return r.join("&").replace(Tn,"+")},ct.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ct.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)
}}),ct.fn.extend({"hover":function(e,t){return this.mouseenter(e).mouseleave(t||e)},"bind":function(e,t,n){return this.on(e,null,t,n)},"unbind":function(e,t){return this.off(e,null,t)},"delegate":function(e,t,n,i){return this.on(t,e,n,i)},"undelegate":function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var En,Dn,Ln=ct.now(),Rn=/\?/,Bn=/#.*$/,Nn=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Hn=/^\/\//,zn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Un=ct.fn.load,Fn={},qn={},$n="*/".concat("*");
try{Dn=Q.href}catch(Wn){Dn=G.createElement("a"),Dn.href="",Dn=Dn.href}En=zn.exec(Dn.toLowerCase())||[],ct.fn.load=function(e,n,i){if("string"!=typeof e&&Un)return Un.apply(this,arguments);var r,s,a,o=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),ct.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(a="POST"),o.length>0&&ct.ajax({"url":e,"type":a,"dataType":"html","data":n}).done(function(e){s=arguments,o.html(r?ct("<div>").append(ct.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){o.each(i,s||[e.responseText,t,e])
}),this},ct.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ct.fn[t]=function(e){return this.on(t,e)}}),ct.extend({"active":0,"lastModified":{},"etag":{},"ajaxSettings":{"url":Dn,"type":"GET","isLocal":Vn.test(En[1]),"global":!0,"processData":!0,"async":!0,"contentType":"application/x-www-form-urlencoded; charset=UTF-8","accepts":{"*":$n,"text":"text/plain","html":"text/html","xml":"application/xml, text/xml","json":"application/json, text/javascript"},"contents":{"xml":/xml/,"html":/html/,"json":/json/},"responseFields":{"xml":"responseXML","text":"responseText","json":"responseJSON"},"converters":{"* text":String,"text html":!0,"text json":ct.parseJSON,"text xml":ct.parseXML},"flatOptions":{"url":!0,"context":!0}},"ajaxSetup":function(e,t){return t?L(L(e,ct.ajaxSettings),t):L(ct.ajaxSettings,e)
},"ajaxPrefilter":E(Fn),"ajaxTransport":E(qn),"ajax":function(e,n){function i(e,n,i,r){var s,d,y,b,x,k=n;2!==w&&(w=2,l&&clearTimeout(l),c=t,o=r||"",S.readyState=e>0?4:0,s=e>=200&&300>e||304===e,i&&(b=R(h,S,i)),b=B(h,b,S,s),s?(h.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(ct.lastModified[a]=x),x=S.getResponseHeader("etag"),x&&(ct.etag[a]=x)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=b.state,d=b.data,y=b.error,s=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),S.status=e,S.statusText=(n||k)+"",s?m.resolveWith(p,[d,k,S]):m.rejectWith(p,[S,k,y]),S.statusCode(v),v=t,u&&f.trigger(s?"ajaxSuccess":"ajaxError",[S,h,s?d:y]),g.fireWith(p,[S,k]),u&&(f.trigger("ajaxComplete",[S,h]),--ct.active||ct.event.trigger("ajaxStop")))
}"object"==typeof e&&(n=e,e=t),n=n||{};var r,s,a,o,l,u,c,d,h=ct.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?ct(p):ct.event,m=ct.Deferred(),g=ct.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,x="canceled",S={"readyState":0,"getResponseHeader":function(e){var t;if(2===w){if(!d)for(d={};t=On.exec(o);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},"getAllResponseHeaders":function(){return 2===w?o:null},"setRequestHeader":function(e,t){var n=e.toLowerCase();
return w||(e=b[n]=b[n]||e,y[e]=t),this},"overrideMimeType":function(e){return w||(h.mimeType=e),this},"statusCode":function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else S.always(e[S.status]);return this},"abort":function(e){var t=e||x;return c&&c.abort(t),i(0,t),this}};if(m.promise(S).complete=g.add,S.success=S.done,S.error=S.fail,h.url=((e||h.url||Dn)+"").replace(Bn,"").replace(Hn,En[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ct.trim(h.dataType||"*").toLowerCase().match(ht)||[""],null==h.crossDomain&&(r=zn.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===En[1]&&r[2]===En[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(En[3]||("http:"===En[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ct.param(h.data,h.traditional)),D(Fn,h,n,S),2===w)return S;
u=h.global,u&&0===ct.active++&&ct.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!jn.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(Rn.test(a)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Nn.test(a)?a.replace(Nn,"$1_="+Ln++):a+(Rn.test(a)?"&":"?")+"_="+Ln++)),h.ifModified&&(ct.lastModified[a]&&S.setRequestHeader("If-Modified-Since",ct.lastModified[a]),ct.etag[a]&&S.setRequestHeader("If-None-Match",ct.etag[a])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$n+"; q=0.01":""):h.accepts["*"]);
for(s in h.headers)S.setRequestHeader(s,h.headers[s]);if(h.beforeSend&&(h.beforeSend.call(p,S,h)===!1||2===w))return S.abort();x="abort";for(s in{"success":1,"error":1,"complete":1})S[s](h[s]);if(c=D(qn,h,n,S)){S.readyState=1,u&&f.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,c.send(y,i)}catch(k){if(!(2>w))throw k;i(-1,k)}}else i(-1,"No Transport");return S},"getJSON":function(e,t,n){return ct.get(e,t,n,"json")},"getScript":function(e,n){return ct.get(e,t,n,"script")
}}),ct.each(["get","post"],function(e,n){ct[n]=function(e,i,r,s){return ct.isFunction(i)&&(s=s||r,r=i,i=t),ct.ajax({"url":e,"type":n,"dataType":s,"data":i,"success":r})}}),ct.ajaxSetup({"accepts":{"script":"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},"contents":{"script":/(?:java|ecma)script/},"converters":{"text script":function(e){return ct.globalEval(e),e}}}),ct.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)
}),ct.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=G.head||ct("head")[0]||G.documentElement;return{"send":function(t,r){n=G.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||r(200,"success"))},i.insertBefore(n,i.firstChild)},"abort":function(){n&&n.onload(t,!0)
}}}});var Kn=[],Xn=/(=)\?(?=&|$)|\?\?/;ct.ajaxSetup({"jsonp":"callback","jsonpCallback":function(){var e=Kn.pop()||ct.expando+"_"+Ln++;return this[e]=!0,e}}),ct.ajaxPrefilter("json jsonp",function(n,i,r){var s,a,o,l=n.jsonp!==!1&&(Xn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=ct.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Xn,"$1"+s):n.jsonp!==!1&&(n.url+=(Rn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return o||ct.error(s+" was not called"),o[0]
},n.dataTypes[0]="json",a=e[s],e[s]=function(){o=arguments},r.always(function(){e[s]=a,n[s]&&(n.jsonpCallback=i.jsonpCallback,Kn.push(s)),o&&ct.isFunction(a)&&a(o[0]),o=a=t}),"script"):void 0});var Qn,Gn,Yn=0,Jn=e.ActiveXObject&&function(){var e;for(e in Qn)Qn[e](t,!0)};ct.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&N()||O()}:N,Gn=ct.ajaxSettings.xhr(),ct.support.cors=!!Gn&&"withCredentials"in Gn,Gn=ct.support.ajax=!!Gn,Gn&&ct.ajaxTransport(function(n){if(!n.crossDomain||ct.support.cors){var i;
return{"send":function(r,s){var a,o,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)l[o]=n.xhrFields[o];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(o in r)l.setRequestHeader(o,r[o])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(e,r){var o,u,c,d;try{if(i&&(r||4===l.readyState))if(i=t,a&&(l.onreadystatechange=ct.noop,Jn&&delete Qn[a]),r)4!==l.readyState&&l.abort();
else{d={},o=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{c=l.statusText}catch(h){c=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=d.text?200:404}}catch(p){r||s(-1,p)}d&&s(o,c,d,u)},n.async?4===l.readyState?setTimeout(i):(a=++Yn,Jn&&(Qn||(Qn={},ct(e).unload(Jn)),Qn[a]=i),l.onreadystatechange=i):i()},"abort":function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[U],si={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=ni.exec(t),s=r&&r[3]||(ct.cssNumber[e]?"":"px"),a=(ct.cssNumber[e]||"px"!==s&&+i)&&ni.exec(ct.css(n.elem,e)),o=1,l=20;
if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+i||1;do o=o||".5",a/=o,ct.style(n.elem,e,a+s);while(o!==(o=n.cur()/i)&&1!==o&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=s,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};ct.Animation=ct.extend(H,{"tweener":function(e,t){ct.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],si[n]=si[n]||[],si[n].unshift(t)},"prefilter":function(e,t){t?ri.unshift(e):ri.push(e)}}),ct.Tween=F,F.prototype={"constructor":F,"init":function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(ct.cssNumber[n]?"":"px")
},"cur":function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},"run":function(e){var t,n=F.propHooks[this.prop];return this.pos=t=this.options.duration?ct.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={"_default":{"get":function(e){var t;
return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ct.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},"set":function(e){ct.fx.step[e.prop]?ct.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ct.cssProps[e.prop]]||ct.cssHooks[e.prop])?ct.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={"set":function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ct.each(["toggle","show","hide"],function(e,t){var n=ct.fn[t];
ct.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,r)}}),ct.fn.extend({"fadeTo":function(e,t,n,i){return this.filter(k).css("opacity",0).show().end().animate({"opacity":t},e,n,i)},"animate":function(e,t,n,i){var r=ct.isEmptyObject(e),s=ct.speed(t,n,i),a=function(){var t=H(this,ct.extend({},e),s);(r||ct._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||s.queue===!1?this.each(a):this.queue(s.queue,a)},"stop":function(e,n,i){var r=function(e){var t=e.stop;
delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=ct.timers,a=ct._data(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&ii.test(n)&&r(a[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(i),t=!1,s.splice(n,1));(t||!i)&&ct.dequeue(this,e)})},"finish":function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ct._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=ct.timers,a=i?i.length:0;
for(n.finish=!0,ct.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ct.each({"slideDown":q("show"),"slideUp":q("hide"),"slideToggle":q("toggle"),"fadeIn":{"opacity":"show"},"fadeOut":{"opacity":"hide"},"fadeToggle":{"opacity":"toggle"}},function(e,t){ct.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ct.speed=function(e,t,n){var i=e&&"object"==typeof e?ct.extend({},e):{"complete":n||!n&&t||ct.isFunction(e)&&e,"duration":e,"easing":n&&t||t&&!ct.isFunction(t)&&t};
return i.duration=ct.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ct.fx.speeds?ct.fx.speeds[i.duration]:ct.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ct.isFunction(i.old)&&i.old.call(this),i.queue&&ct.dequeue(this,i.queue)},i},ct.easing={"linear":function(e){return e},"swing":function(e){return.5-Math.cos(e*Math.PI)/2}},ct.timers=[],ct.fx=F.prototype.init,ct.fx.tick=function(){var e,n=ct.timers,i=0;for(Zn=ct.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);
n.length||ct.fx.stop(),Zn=t},ct.fx.timer=function(e){e()&&ct.timers.push(e)&&ct.fx.start()},ct.fx.interval=13,ct.fx.start=function(){ei||(ei=setInterval(ct.fx.tick,ct.fx.interval))},ct.fx.stop=function(){clearInterval(ei),ei=null},ct.fx.speeds={"slow":600,"fast":200,"_default":400},ct.fx.step={},ct.expr&&ct.expr.filters&&(ct.expr.filters.animated=function(e){return ct.grep(ct.timers,function(t){return e===t.elem}).length}),ct.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ct.offset.setOffset(this,e,t)
});var n,i,r={"top":0,"left":0},s=this[0],a=s&&s.ownerDocument;if(a)return n=a.documentElement,ct.contains(n,s)?(typeof s.getBoundingClientRect!==X&&(r=s.getBoundingClientRect()),i=$(a),{"top":r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),"left":r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},ct.offset={"setOffset":function(e,t,n){var i=ct.css(e,"position");"static"===i&&(e.style.position="relative");var r,s,a=ct(e),o=a.offset(),l=ct.css(e,"top"),u=ct.css(e,"left"),c=("absolute"===i||"fixed"===i)&&ct.inArray("auto",[l,u])>-1,d={},h={};
c?(h=a.position(),r=h.top,s=h.left):(r=parseFloat(l)||0,s=parseFloat(u)||0),ct.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(d.top=t.top-o.top+r),null!=t.left&&(d.left=t.left-o.left+s),"using"in t?t.using.call(e,d):a.css(d)}},ct.fn.extend({"position":function(){if(this[0]){var e,t,n={"top":0,"left":0},i=this[0];return"fixed"===ct.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ct.nodeName(e[0],"html")||(n=e.offset()),n.top+=ct.css(e[0],"borderTopWidth",!0),n.left+=ct.css(e[0],"borderLeftWidth",!0)),{"top":t.top-n.top-ct.css(i,"marginTop",!0),"left":t.left-n.left-ct.css(i,"marginLeft",!0)}
}},"offsetParent":function(){return this.map(function(){for(var e=this.offsetParent||Y;e&&!ct.nodeName(e,"html")&&"static"===ct.css(e,"position");)e=e.offsetParent;return e||Y})}}),ct.each({"scrollLeft":"pageXOffset","scrollTop":"pageYOffset"},function(e,n){var i=/Y/.test(n);ct.fn[e]=function(r){return ct.access(this,function(e,r,s){var a=$(e);return s===t?a?n in a?a[n]:a.document.documentElement[r]:e[r]:void(a?a.scrollTo(i?ct(a).scrollLeft():s,i?s:ct(a).scrollTop()):e[r]=s)},e,r,arguments.length,null)
}}),ct.each({"Height":"height","Width":"width"},function(e,n){ct.each({"padding":"inner"+e,"content":n,"":"outer"+e},function(i,r){ct.fn[r]=function(r,s){var a=arguments.length&&(i||"boolean"!=typeof r),o=i||(r===!0||s===!0?"margin":"border");return ct.access(this,function(n,i,r){var s;return ct.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):r===t?ct.css(n,i,o):ct.style(n,i,r,o)
},n,a?r:t,a,null)}})}),ct.fn.size=function(){return this.length},ct.fn.andSelf=ct.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ct:(e.jQuery=e.$=ct,"function"==typeof define&&define.amd&&define("jquery-lib",[],function(){return ct}))}(window),define("jquery",["underscore","jquery-lib"],function(e,t){t.support.cors||t.ajaxPrefilter(function(t){if(t.crossDomain&&t.async){var n=t.type.toUpperCase();!t.data||"GET"!=n&&"HEAD"!=n||(t.url+="?"+t.data,delete t.data),t.headers||(t.headers={});
var i="X-Plex-",r=e.filter(e.keys(t.headers),function(e){return 0===e.lastIndexOf(i,0)});e.each(r,function(e){t.headers["X-Plex-Proxy-"+e.slice(i.length)]=t.headers[e],delete t.headers[e]}),t.headers["X-Plex-Url"]=t.url,t.url="/system/proxy",t.crossDomain=!1,t.headers["X-Plex-Proxy-Token"]&&(t.headers["X-Plex-Token"]=t.headers["X-Plex-Proxy-Token"])}});var n=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma","Location"],i=t.ajaxSettings.xhr;return t.ajaxSettings.xhr=function(){var t=i(),r=t.getAllResponseHeaders;
return t.getAllResponseHeaders=function(){var i=r.apply(t);if(i)return i;var s=[];return e.each(n,function(e){var n=t.getResponseHeader(e);n&&s.push(e+": "+n)}),s.join("\n")},t},t.ajaxPrefilter(function(e){return e.crossDomain&&!e.skipCorsWithRedirect?"cors_with_redirect":void 0}),t.ajaxTransport("cors_with_redirect",function(n,i,r){n.dataTypes.shift();var s,a=e.extend({},i,{"skipCorsWithRedirect":!0,"complete":null,"error":null,"success":null});return{"send":function(n,i){a.error=function(t,n){e.extend(r,t),i(t.status,n,{"alreadyConverted":t.responseText},t.getAllResponseHeaders())
},a.success=function(n,o,l){e.extend(r,l);var u=l.getResponseHeader("Location");200==l.status&&u?(a.url=u,s=t.ajax(a)):i(l.status,o,{"alreadyConverted":l.responseText},l.getAllResponseHeaders())},s=t.ajax(a)},"abort":function(){s&&s.abort()}}}),t.fn.selectText=function(){var e,t=this[0];if(document.body.createTextRange)e=document.body.createTextRange(),e.moveToElementText(t),e.select();else if(window.getSelection){var n=window.getSelection();e=document.createRange(),e.selectNodeContents(t),n.removeAllRanges(),n.addRange(e)
}},t.fn.isDisabled=function(){return this.hasClass("disabled")||this.hasClass("active")||this.hasClass("hidden")},t}),function(e,t){if("function"==typeof define&&define.amd)define("backbone-lib",["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var r=e.Backbone,s=[],a=(s.push,s.slice);s.splice}t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=r,this
},t.emulateHTTP=!1,t.emulateJSON=!1;var o=t.Events={"on":function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({"callback":t,"context":n,"ctx":n||this}),this},"once":function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var r=this,s=n.once(function(){r.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},"off":function(e,t,i){var r,s,a,o,l,c,d,h;if(!this._events||!u(this,"off",e,[t,i]))return this;
if(!e&&!t&&!i)return this._events=void 0,this;for(o=e?[e]:n.keys(this._events),l=0,c=o.length;c>l;l++)if(e=o[l],a=this._events[e]){if(this._events[e]=r=[],t||i)for(d=0,h=a.length;h>d;d++)s=a[d],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[e]}return this},"trigger":function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this
},"stopListening":function(e,t,i){var r=this._listeningTo;if(!r)return this;var s=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var a in r)e=r[a],e.off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),a=0,o=s.length;o>a;a++)e[t].apply(e,[s[a]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,r=e.length,s=t[0],a=t[1],o=t[2];
switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},d={"listenTo":"on","listenToOnce":"once"};n.each(d,function(e,t){o[t]=function(t,i,r){var s=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=n.uniqueId("l"));return s[a]=t,r||"object"!=typeof i||(r=this),t[e](i,r,this),this
}}),o.bind=o.on,o.unbind=o.off,n.extend(t,o);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,o,{"changed":null,"validationError":null,"idAttribute":"id","initialize":function(){},"toJSON":function(){return n.clone(this.attributes)},"sync":function(){return t.sync.apply(this,arguments)
},"get":function(e){return this.attributes[e]},"escape":function(e){return n.escape(this.get(e))},"has":function(e){return null!=this.get(e)},"set":function(e,t,i){var r,s,a,o,l,u,c,d;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;a=i.unset,l=i.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);
for(r in s)t=s[r],n.isEqual(d[r],t)||o.push(r),n.isEqual(c[r],t)?delete this.changed[r]:this.changed[r]=t,a?delete d[r]:d[r]=t;if(!l){o.length&&(this._pending=i);for(var h=0,p=o.length;p>h;h++)this.trigger("change:"+o[h],this,d[o[h]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},"unset":function(e,t){return this.set(e,void 0,n.extend({},t,{"unset":!0}))},"clear":function(e){var t={};for(var i in this.attributes)t[i]=void 0;
return this.set(t,n.extend({},e,{"unset":!0}))},"hasChanged":function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},"changedAttributes":function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(r[s],t=e[s])||((i||(i={}))[s]=t);return i},"previous":function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},"previousAttributes":function(){return n.clone(this._previousAttributes)
},"fetch":function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},O(this,e),this.sync("read",this,e)},"save":function(e,t,i){var r,s,a,o=this.attributes;if(null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({"validate":!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},o,r)),void 0===i.parse&&(i.parse=!0);
var l=this,u=i.success;return i.success=function(e){l.attributes=o;var t=l.parse(e,i);return i.wait&&(t=n.extend(r||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(u&&u(l,e,i),void l.trigger("sync",l,e,i))},O(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=r),a=this.sync(s,this,i),r&&i.wait&&(this.attributes=o),a},"destroy":function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&r(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)
},this.isNew())return e.success(),!1;O(this,e);var s=this.sync("delete",this,e);return e.wait||r(),s},"url":function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},"parse":function(e){return e},"clone":function(){return new this.constructor(this.attributes)},"isNew":function(){return!this.has(this.idAttribute)},"isValid":function(e){return this._validate({},n.extend(e||{},{"validate":!0}))},"_validate":function(e,t){if(!t.validate||!this.validate)return!0;
e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{"validationError":i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({"silent":!0},t))
},m={"add":!0,"remove":!0,"merge":!0},g={"add":!0,"remove":!1};n.extend(f.prototype,o,{"model":h,"initialize":function(){},"toJSON":function(e){return this.map(function(t){return t.toJSON(e)})},"sync":function(){return t.sync.apply(this,arguments)},"add":function(e,t){return this.set(e,n.extend({"merge":!1},t,g))},"remove":function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var r,s,a,o;for(r=0,s=e.length;s>r;r++)o=e[r]=this.get(e[r]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,t.silent||(t.index=a,o.trigger("remove",o,this,t)),this._removeReference(o,t));
return i?e[0]:e},"set":function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var r,s,a,o,l,u,c,d=t.at,p=this.model,f=this.comparator&&null==d&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,x=t.merge,S=t.remove,k=!f&&w&&S?[]:!1;for(r=0,s=e.length;s>r;r++){if(l=e[r]||{},a=l instanceof h?o=l:l[p.prototype.idAttribute||"id"],u=this.get(a))S&&(b[u.cid]=!0),x&&(l=l===o?o.attributes:l,t.parse&&(l=u.parse(l,t)),u.set(l,t),f&&!c&&u.hasChanged(g)&&(c=!0)),e[r]=u;
else if(w){if(o=e[r]=this._prepareModel(l,t),!o)continue;v.push(o),this._addReference(o,t)}o=u||o,!k||!o.isNew()&&b[o.id]||k.push(o),b[o.id]=!0}if(S){for(r=0,s=this.length;s>r;++r)b[(o=this.models[r]).cid]||y.push(o);y.length&&this.remove(y,t)}if(v.length||k&&k.length)if(f&&(c=!0),this.length+=v.length,null!=d)for(r=0,s=v.length;s>r;r++)this.models.splice(d+r,0,v[r]);else{k&&(this.models.length=0);var C=k||v;for(r=0,s=C.length;s>r;r++)this.models.push(C[r])}if(c&&this.sort({"silent":!0}),!t.silent){for(r=0,s=v.length;s>r;r++)(o=v[r]).trigger("add",o,this,t);
(c||k&&k.length)&&this.trigger("sort",this,t)}return i?e[0]:e},"reset":function(e,t){t||(t={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({"silent":!0},t)),t.silent||this.trigger("reset",this,t),e},"push":function(e,t){return this.add(e,n.extend({"at":this.length},t))},"pop":function(e){var t=this.at(this.length-1);return this.remove(t,e),t},"unshift":function(e,t){return this.add(e,n.extend({"at":0},t))
},"shift":function(e){var t=this.at(0);return this.remove(t,e),t},"slice":function(){return a.apply(this.models,arguments)},"get":function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},"at":function(e){return this.models[e]},"where":function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},"findWhere":function(e){return this.where(e,!0)},"sort":function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");
return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},"pluck":function(e){return n.invoke(this.models,"get",e)},"fetch":function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},O(this,e),this.sync("read",this,e)},"create":function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;
t.wait||this.add(e,t);var i=this,r=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),r&&r(e,n,t)},e.save(null,t),e},"parse":function(e){return e},"clone":function(){return new this.constructor(this.models)},"_reset":function(){this.length=0,this.models=[],this._byId={}},"_prepareModel":function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},"_addReference":function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)
},"_removeReference":function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},"_onModelEvent":function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];
n.each(v,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){f.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];
n.extend(b.prototype,o,{"tagName":"div","$":function(e){return this.$el.find(e)},"initialize":function(){},"render":function(){return this},"remove":function(){return this.$el.remove(),this.stopListening(),this},"setElement":function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},"delegateEvents":function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(w),s=r[1],a=r[2];
i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===a?this.$el.on(s,i):this.$el.on(s,a,i)}}return this},"undelegateEvents":function(){return this.$el.off(".delegateEvents"+this.cid),this},"_ensureElement":function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,r){var s=k[e];
n.defaults(r||(r={}),{"emulateHTTP":t.emulateHTTP,"emulateJSON":t.emulateJSON});var a={"type":s,"dataType":"json"};if(r.url||(a.url=n.result(i,"url")||N()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{"model":a.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",r.emulateJSON&&(a.data._method=s);var o=r.beforeSend;
r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1),"PATCH"===a.type&&S&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,l,r),l};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={"create":"POST","update":"PUT","patch":"PATCH","delete":"DELETE","read":"GET"};
t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,M=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,o,{"initialize":function(){},"route":function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return t.history.route(e,function(n){var a=s._extractParameters(e,n);s.execute(r,a),s.trigger.apply(s,["route:"+i].concat(a)),s.trigger("route",i,a),t.history.trigger("route",s,i,a)
}),this},"execute":function(e,t){e&&e.apply(this,t)},"navigate":function(e,n){return t.history.navigate(e,n),this},"_bindRoutes":function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},"_routeToRegExp":function(e){return e=e.replace(A,"\\$&").replace(_,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},"_extractParameters":function(e,t){var i=e.exec(t).slice(1);
return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var I=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,D=/msie [\w.]+/,L=/\/$/,R=/#.*$/;I.started=!1,n.extend(I.prototype,o,{"interval":50,"atRoot":function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},"getHash":function(e){var t=(e||this).location.href.match(/#(.*)$/);
return t?t[1]:""},"getFragment":function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(L,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(P,"")},"start":function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=n.extend({"root":"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);
var i=this.getFragment(),r=document.documentMode,s=D.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(E,"/"),s&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;
var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},"stop":function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1
},"route":function(e,t){this.handlers.unshift({"route":e,"callback":t})},"checkUrl":function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},"loadUrl":function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},"navigate":function(e,t){if(!I.started)return!1;t&&t!==!0||(t={"trigger":!!t});
var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0
}},"_updateHash":function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new I;var B=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};h.extend=f.extend=C.extend=b.extend=I.extend=B;var N=function(){throw new Error('A "url" property or function must be specified')
},O=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("plex/base/utils/BaseClass",["underscore"],function(e){function t(){e.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}var n=function(t,n){var i,r=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)||null},e.extend(i,r,n);var s=function(){this.constructor=i};if(s.prototype=r.prototype,i.prototype=new s,t&&t.hasOwnProperty("mixins")){var a=t.mixins;
delete t.mixins,e.isArray(a)||(a=[a]),e.each(a,function(t){e.extend(i.prototype,t)})}return t&&e.extend(i.prototype,t),i.__super__=r.prototype,i};return t.extend=n,t}),define("plex/base/mixins/EventMixin",["underscore"],function(e){var t=/\s+/,n=function(e,n,i,r){if(!i)return!0;if("object"==typeof i){for(var s in i)e[n].apply(e,[s,i[s]].concat(r));return!1}if(t.test(i)){for(var a=i.split(t),o=0,l=a.length;l>o;o++)e[n].apply(e,[a[o]].concat(r));return!1}return!0},i=function(e,t){var n,i=-1,r=e.length,s=t[0],a=t[1],o=t[2];
switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},r={"on":function(e,t,i){if(!n(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({"callback":t,"context":i,"ctx":i||this}),this
},"once":function(t,i,r){if(!n(this,"once",t,[i,r])||!i)return this;var s=this,a=e.once(function(){s.off(t,a),i.apply(this,arguments)});return a._callback=i,this.on(t,a,r)},"off":function(t,i,r){var s,a,o,l,u,c,d,h;if(!this._events||!n(this,"off",t,[i,r]))return this;if(!t&&!i&&!r)return this._events=void 0,this;for(l=t?[t]:e.keys(this._events),u=0,c=l.length;c>u;u++)if(t=l[u],o=this._events[t]){if(this._events[t]=s=[],i||r)for(d=0,h=o.length;h>d;d++)a=o[d],(i&&i!==a.callback&&i!==a.callback._callback||r&&r!==a.context)&&s.push(a);
s.length||delete this._events[t]}return this},"trigger":function(e){if(!this._events)return this;var t=[].slice.call(arguments,1);if(!n(this,"trigger",e,t))return this;var r=this._events[e],s=this._events.all;return r&&i(r,t),s&&i(s,arguments),this},"stopListening":function(t,n,i){var r=this._listeningTo;if(!r)return this;var s=!n&&!i;i||"object"!=typeof n||(i=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(n,i,this),(s||e.isEmpty(t._events))&&delete this._listeningTo[a];return this}},s={"listenTo":"on","listenToOnce":"once"};
return e.each(s,function(t,n){r[n]=function(n,i,r){var s=this._listeningTo||(this._listeningTo={}),a=n._listenId||(n._listenId=e.uniqueId("l"));return s[a]=n,r||"object"!=typeof i||(r=this),n[t](i,r,this),this}}),r.bind=r.on,r.unbind=r.off,r}),define("plex/base/utils/Dispatcher",["underscore","plex/base/utils/BaseClass","plex/base/mixins/EventMixin"],function(e,t,n){var i=t.extend({"mixins":n});return new i}),define("backbone",["underscore","jquery","backbone-lib","plex/base/utils/Dispatcher","plex/base/utils/BaseClass"],function(e,t,n,i,r){n=n.noConflict();
var s=n.sync,a=[],o=!1;return n.sync=function(t,n,i){var r=i.server||n.server||n,l=i.cancelable;i.url||(n.syncUrl?i.url=e.result(n,"syncUrl"):n.url&&(i.url=e.result(n,"url"))),e.defaults(i,{"headers":{},"dataType":"text","processData":!1,"timeout":6e4}),e.isFunction(r.resolveUrl)&&(i.url=r.resolveUrl(i.url),"cloudsync"===r.get("platform")&&(i.url+=i.url.indexOf("?")>-1?"&":"?",i.url+="redirect=0"),e.extend(i.headers,r.getHeaders()));var u=s(t,n,i);return l&&(u._scope=e.isBoolean(l)?null:l,a.push(u),u.always(function(){if(!o){var t=e.indexOf(a,u);
a.splice(t,1)}})),u.fail(function(e){o||0!==e.status||r.trigger("error:connection",r)}),u},n.abort=function(e){o=!0;for(var t=a.length-1;t>-1;t--){var n=a[t];(null==e||e===n._scope)&&(n.abort(),a.splice(t,1))}o=!1},n.wrapError=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}},e.extend(n.View.prototype,{"bindToModel":function(){this.bindings&&e.each(e.keys(this.bindings),function(t){var n=this.bindings[t],i=this[n.model]||this[this.bindingsModel]||this.model,r=n.modelAttribute,s=n.modelListeners||[r],a=this.$(t),o=e.bind(function(t){var i=n.formatter,s=n.autohide,o=t.get(r);
if(i&&(o=i.call(this,o,a)),s){var l=e.isFunction(s)?s.call(this,o):o;a.toggleClass("hidden",!l)}n.manual||a.html(o)},this);e.each(s,function(e){this.listenTo(i,"change:"+e,o)},this),o(i)},this)}}),n.Model.extend=r.extend,n.Collection.extend=r.extend,n.Router.extend=r.extend,n.View.extend=r.extend,n.History.extend=r.extend,n}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone");module.exports=t(n,i)}else"function"==typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],t)
}(this,function(e,t){return t.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{"setHandlers":function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},"setHandler":function(e,t,n){var i={"callback":t,"context":n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)
},"hasHandler":function(e){return!!this._wreqrHandlers[e]},"getHandler":function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},"removeHandler":function(e){delete this._wreqrHandlers[e]},"removeAllHandlers":function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{"getCommands":function(e){var t=this._commands[e];
return t||(t={"command":e,"instances":[]},this._commands[e]=t),t},"addCommand":function(e,t){var n=this.getCommands(e);n.instances.push(t)},"clearCommands":function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({"storageType":e.CommandStorage,"constructor":function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)
},"execute":function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},"_executeCommands":function(e,t,i){var r=this.storage.getCommands(e);n.each(r.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},"_initializeStorage":function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({"request":function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);
return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone");module.exports=t(n,i)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)
};t.extend(n.prototype,{"add":function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},"findByModel":function(e){return this.findByModelCid(e.cid)},"findByModelCid":function(e){var t=this._indexByModel[e];return this.findByCid(t)},"findByCustom":function(e){var t=this._indexByCustom[e];return this.findByCid(t)},"findByIndex":function(e){return t.values(this._views)[e]},"findByCid":function(e){return this._views[e]
},"remove":function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},"call":function(e){this.apply(e,t.tail(arguments))},"apply":function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},"_updateLength":function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];
return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone"),r=require("backbone.wreqr"),s=require("backbone.babysitter");module.exports=t(n,i,r,s)}else"function"==typeof define&&define.amd&&define("marionette-lib",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){!function(e,t,n){function i(e,t){var n=new Error(e);
throw n.name=t||"Error",n}var r={};t.Marionette=r,r.$=t.$;var s=Array.prototype.slice;return r.extend=t.Model.extend,r.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},r.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,r){t=e,n.isFunction(t)||(t=this[t]),t&&(i[r]=t)},this),i},r.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(t,e),s=this[r];
return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(s)?s.apply(this,n.tail(arguments)):void 0};return i}(),r.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,r(e)}function i(e){e._isRendered=!0,r(e)}function r(e){e._isShown&&e._isRendered&&s(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,r,s){var a=s.split(/\s+/);
n.each(a,function(n){var s=e[n];s||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,r,s)})}function r(e,t,n,i){e.listenTo(t,n,i)}function s(e,t,i,r){var s=r.split(/\s+/);n.each(s,function(n){var r=e[n];e.stopListening(t,i,r)})}function a(e,t,n,i){e.stopListening(t,n,i)}function o(e,t,i,r,s){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,a){n.isFunction(i)?r(e,t,a,i):s(e,t,a,i)}))}e.bindEntityEvents=function(e,n,i){o(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){o(e,t,n,a,s)
}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},n.extend(r.Callbacks.prototype,{"add":function(e,t){this._callbacks.push({"cb":e,"ctx":t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},"run":function(e,t){this._deferred.resolve(t,e)},"reset":function(){var e=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.triggerMethod=r.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)
},r.Controller.extend=r.extend,n.extend(r.Controller.prototype,t.Events,{"close":function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(e){if(this.options=e||{},this.el=r.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},n.extend(r.Region,{"buildRegion":function(e,t){var r=n.isString(e),s=n.isString(e.selector),a=n.isUndefined(e.regionType),o=n.isFunction(e);
o||r||s||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,u;r&&(l=e),e.selector&&(l=e.selector,delete e.selector),o&&(u=e),!o&&a&&(u=t),e.regionType&&(u=e.regionType,delete e.regionType),(r||o)&&(e={}),e.el=l;var c=new u(e);return e.parentEl&&(c.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),c}}),n.extend(r.Region.prototype,t.Events,{"show":function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;
i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,r.triggerMethod.call(this,"show",e),r.triggerMethod.call(e,"show")},"ensureEl":function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},"getEl":function(e){return r.$(e)},"open":function(e){this.$el.empty().append(e.el)},"close":function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),r.triggerMethod.call(this,"close",e),delete this.currentView)},"attachView":function(e){this.currentView=e
},"reset":function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(e){var t=e.Controller.extend({"constructor":function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},"addRegions":function(e,t){var i={};return n.each(e,function(e,r){n.isString(e)&&(e={"selector":e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(r,e);i[r]=s},this),i},"addRegion":function(t,i){var r,s=n.isObject(i),a=n.isString(i),o=!!i.selector;return r=a||s&&o?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,r),this.triggerMethod("region:add",t,r),r
},"get":function(e){return this._regions[e]},"removeRegion":function(e){var t=this._regions[e];this._remove(e,t)},"removeRegions":function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},"closeRegions":function(){n.each(this._regions,function(e){e.close()},this)},"close":function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},"_store":function(e,t){this._regions[e]=t,this._setLength()},"_remove":function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)
},"_setLength":function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(r),r.TemplateCache=function(e){this.templateId=e},n.extend(r.TemplateCache,{"templateCaches":{},"get":function(e){var t=this.templateCaches[e];
return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},"clear":function(){var e,t=s.call(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(r.TemplateCache.prototype,{"load":function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},"loadTemplate":function(e){var t=r.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t
},"compileTemplate":function(e){return n.template(e)}}),r.Renderer={"render":function(e,t){e||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var n;return(n="function"==typeof e?e:r.TemplateCache.get(e))(t)}},r.View=t.View.extend({"constructor":function(e){n.bindAll(this,"render"),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)
},"triggerMethod":r.triggerMethod,"normalizeMethods":r.normalizeMethods,"getTemplate":function(){return r.getOption(this,"template")},"mixinTemplateHelpers":function(e){e=e||{};var t=r.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},"normalizeUIKeys":function(e){var t=this;if("undefined"!=typeof e)return n.each(n.keys(e),function(i){var r=/@ui.[a-zA-Z_$0-9]*/g;i.match(r)&&(e[i.replace(r,function(e){return n.result(t,"ui")[e.slice(4)]})]=e[i],delete e[i])}),e
},"configureTriggers":function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var r=n.isObject(t),s=r?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,a=r?t.preventDefault:n,o=r?t.stopPropagation:i;a&&n&&n.apply(e),o&&i&&i.apply(e)}var l={"view":this,"model":this.model,"collection":this.collection};this.triggerMethod(s,l)}},this),e}},"delegateEvents":function(e){this._delegateDOMEvents(e),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))
},"_delegateDOMEvents":function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},r=this.configureTriggers();n.extend(i,e,r),t.View.prototype.delegateEvents.call(this,i)},"undelegateEvents":function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},"onShowCalled":function(){},"close":function(){if(!this.isClosed){var e=this.triggerMethod("before:close");
e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},"bindUIElements":function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},"unbindUIElements":function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),r.ItemView=r.View.extend({"constructor":function(){r.View.prototype.constructor.apply(this,arguments)
},"serializeData":function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={"items":this.collection.toJSON()}),e},"render":function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=r.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},"close":function(){this.isClosed||(this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))
}}),r.CollectionView=r.View.extend({"itemViewEventPrefix":"itemview","constructor":function(){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},"initRenderBuffer":function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},"startBuffering":function(){this.initRenderBuffer(),this.isBuffering=!0},"endBuffering":function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()
},"_triggerShowBufferedChildren":function(){this._isShown&&(n.each(this._bufferedChildren,function(e){r.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},"_initialEvents":function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},"addChildView":function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)
},"onShowCalled":function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},"triggerBeforeRender":function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},"triggerRendered":function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},"render":function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},"_renderChildren":function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()
},"showCollection":function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},"showEmptyView":function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},"closeEmptyView":function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},"getEmptyView":function(){return r.getOption(this,"emptyView")},"getItemView":function(){var e=r.getOption(this,"itemView");
return e||i("An `itemView` must be specified","NoItemViewError"),e},"addItemView":function(e,t,i){var s=r.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var a=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,i),this._isShown&&!this.isBuffering&&r.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a),a},"addChildViewEventForwarding":function(e){var t=r.getOption(this,"itemViewEventPrefix");
this.listenTo(e,"all",function(){var i=s.call(arguments),a=i[0],o=this.normalizeMethods(this.getItemEvents());i[0]=t+":"+a,i.splice(1,0,e),"undefined"!=typeof o&&n.isFunction(o[a])&&o[a].apply(this,i),r.triggerMethod.apply(this,i)},this)},"getItemEvents":function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},"renderItemView":function(e,t){e.render(),this.appendHtml(this,e,t)},"buildItemView":function(e,t,i){var r=n.extend({"model":e},i);return new t(r)},"removeItemView":function(e){var t=this.children.findByModel(e);
this.removeChildView(t),this.checkEmpty()},"removeChildView":function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},"isEmpty":function(){return!this.collection||0===this.collection.length},"checkEmpty":function(){this.isEmpty(this.collection)&&this.showEmptyView()},"appendBuffer":function(e,t){e.$el.append(t)},"appendHtml":function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)
},"_initChildViewStorage":function(){this.children=new t.ChildViewContainer},"close":function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,arguments))},"closeChildren":function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({"constructor":function(){r.CollectionView.prototype.constructor.apply(this,arguments)
},"_initialEvents":function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},"getItemView":function(){var e=r.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},"serializeData":function(){var e={};return this.model&&(e=this.model.toJSON()),e},"render":function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();
var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},"_renderChildren":function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},"renderModel":function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);
var t=this.getTemplate();return r.Renderer.render(t,e)},"appendBuffer":function(e,t){var n=this.getItemViewContainer(e);n.append(t)},"appendHtml":function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},"getItemViewContainer":function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,s=r.getOption(e,"itemViewContainer");if(s){var a=n.isFunction(s)?s.call(this):s;t=e.$(a),t.length<=0&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")
}else t=e.$el;return e.$itemViewContainer=t,t},"resetItemViewContainer":function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({"regionType":r.Region,"constructor":function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.prototype.constructor.call(this,e)},"render":function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),r.ItemView.prototype.render.apply(this,arguments)
},"close":function(){this.isClosed||(this.regionManager.close(),r.ItemView.prototype.close.apply(this,arguments))},"addRegion":function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},"addRegions":function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},"removeRegion":function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},"_buildRegions":function(e){var t=this,n={"regionType":r.getOption(this,"regionType"),"parentEl":function(){return t.$el}};
return this.regionManager.addRegions(e,n)},"_initializeRegions":function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},"_reInitializeRegions":function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},"_initRegionManager":function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)
})}}),r.AppRouter=t.Router.extend({"constructor":function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var n=r.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},"appRoute":function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},"processAppRoutes":function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},"_getController":function(){return r.getOption(this,"controller")},"_addAppRoute":function(e,t,r){var s=e[r];
s||i("Method '"+r+"' was not found on the controller"),this.route(t,r,n.bind(s,e))}}),r.Application=function(e){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=r.triggerMethod},n.extend(r.Application.prototype,t.Events,{"execute":function(){this.commands.execute.apply(this.commands,arguments)},"request":function(){return this.reqres.request.apply(this.reqres,arguments)
},"addInitializer":function(e){this._initCallbacks.add(e)},"start":function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},"addRegions":function(e){return this._regionManager.addRegions(e)},"closeRegions":function(){this._regionManager.closeRegions()},"removeRegion":function(e){this._regionManager.removeRegion(e)},"getRegion":function(e){return this._regionManager.get(e)},"module":function(e,t){var n=r.Module.getClass(t),i=s.call(arguments);
return i.unshift(this),n.create.apply(n,i)},"_initRegionManager":function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),r.Application.extend=r.extend,r.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=r.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)
},r.Module.extend=r.extend,n.extend(r.Module.prototype,t.Events,{"initialize":function(){},"addInitializer":function(e){this._initializerCallbacks.add(e)},"addFinalizer":function(e){this._finalizerCallbacks.add(e)},"start":function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},"stop":function(){this._isInitialized&&(this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()
}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop"))},"addDefinition":function(e,t){this._runModuleDefinition(e,t)},"_runModuleDefinition":function(e,i){if(e){var s=n.flatten([this,this.app,t,r,r.$,n,i]);e.apply(this,s)}},"_setupInitializersAndFinalizers":function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),n.extend(r.Module,{"create":function(e,t,i){var r=e,a=s.call(arguments);
a.splice(0,3),t=t.split(".");var o=t.length,l=[];return l[o-1]=i,n.each(t,function(t,n){var s=r;r=this._getModule(s,t,e,i),this._addModuleDefinition(s,r,l[n],a)},this),r},"_getModule":function(e,t,i,r){var s=n.extend({},r),a=this.getClass(r),o=e[t];return o||(o=new a(t,i,s),e[t]=o,e.submodules[t]=o),o},"getClass":function(e){var t=r.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},"_addModuleDefinition":function(e,t,i,s){var a,o;!n.isFunction(i)||i.prototype instanceof r.Module?n.isObject(i)?(a=i.define,o=n.isUndefined(i.startWithParent)?!0:i.startWithParent):o=!0:(a=i,o=!0),a&&t.addDefinition(a,s),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)
}))}}),r}(this,t,e);return t.Marionette}),+function(e){function t(){var e=document.createElement("bootstrap"),t={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"};for(var n in t)if(void 0!==e.style[n])return{"end":t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this
},e(function(){e.support.transition=t()})}(window.jQuery),define("transition",function(){}),+function(e){function t(){e(i).remove(),e(r).each(function(t){var i=n(e(this));i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown")),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)
};s.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var s=n(r),a=s.hasClass("open");if(t(),!a){if("ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t),s.trigger(i=e.Event("show.bs.dropdown")),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown"),r.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),a=s.hasClass("open");
if(!a||a&&27==t.keyCode)return 27==t.which&&s.find(r).focus(),i.click();var o=e("[role=menu] li:not(.divider):visible a",s);if(o.length){var l=o.index(o.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus()}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this
},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu]",s.prototype.keydown)}(window.jQuery),define("dropdown",function(){}),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={"animation":!0,"placement":"top","selector":!1,"template":'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',"trigger":"hover focus","title":"","delay":0,"html":!1,"container":!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);
for(var r=this.options.trigger.split(" "),s=r.length;s--;){var a=r[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focus",l="hover"==a?"mouseleave":"blur";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{"trigger":"manual","selector":""}):this.fixTitle()
},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={"show":t.delay,"hide":t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()
},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,s=r.test(i);s&&(i=i.replace(r,"")||"top"),n.detach().css({"top":0,"left":0,"display":"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);
var a=this.getPosition(),o=n[0].offsetWidth,l=n[0].offsetHeight;if(s){var u=this.$element.parent(),c=i,d=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:u.outerWidth(),p="body"==this.options.container?window.innerHeight:u.outerHeight(),f="body"==this.options.container?0:u.offset().left;i="bottom"==i&&a.top+a.height+l-d>p?"top":"top"==i&&a.top-d-l<0?"bottom":"right"==i&&a.right+o>h?"left":"left"==i&&a.left-o<f?"right":i,n.removeClass(c).addClass(i)
}var m=this.getCalculatedOffset(i,a,o,l);this.applyPlacement(m,i),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top=e.top+a,e.left=e.left+o,i.offset(e).addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;if("top"==t&&u!=s&&(n=!0,e.top=e.top+s-u),/bottom|top/.test(t)){var c=0;e.left<0&&(c=-2*e.left,e.left=0,i.offset(e),l=i[0].offsetWidth,u=i[0].offsetHeight),this.replaceArrow(c-r+l,l,"left")
}else this.replaceArrow(u-s,u,"top");n&&i.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this)
},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{"width":t.offsetWidth,"height":t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{"top":t.top+t.height,"left":t.left+t.width/2-n/2}:"top"==e?{"top":t.top-i,"left":t.left+t.width/2-n/2}:"left"==e?{"top":t.top+t.height/2-i/2,"left":t.left-n}:{"top":t.top+t.height/2-i/2,"left":t.left+t.width}
},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0
},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),s="object"==typeof n&&n;
r||i.data("bs.tooltip",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),define("tooltip",function(){}),+function(e){var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i)};t.DEFAULTS={"loadingText":"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.is("input")?"val":"html",r=n.data();e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)
},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var t=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===t.prop("type")&&e.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("bs.button"),s="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)
})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(window.jQuery),define("button",function(){}),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={"backdrop":!0,"keyboard":!0,"show":!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)
},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{"relatedTarget":t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();
var r=e.Event("shown.bs.modal",{"relatedTarget":t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())
},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")
})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))
},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var r=e(this),s=r.data("bs.modal"),a=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);
s||r.data("bs.modal",s=new t(this,a)),"string"==typeof n?s[n](i):a.show&&s.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":e.extend({"remote":!/#/.test(i)&&i},r.data(),n.data());t.preventDefault(),r.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()
})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(window.jQuery),define("modal",function(){}),define("marionette",["underscore","marionette-lib","transition","dropdown","tooltip","button","modal"],function(e,t){var n={"constructor":function(){this.wrapAfterRender(),t.View.prototype.constructor.apply(this,arguments)},"wrapAfterRender":function(){e.isArray(this.onlyAfterRender)&&e.each(this.onlyAfterRender,function(t){this[t]=e.wrap(this[t],e.bind(function(n){var i=e.toArray(arguments).slice(1);
return this._isRendered&&!this.isClosed?n.apply(this,i):void(this.isClosed||this.listenToOnce(this,"render",e.bind(function(){this[t].apply(this,i)},this)))},this))},this)},"render":function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var n=this.getTemplate(),i=t.Renderer.render(n,e);return this.$el.html(i),this.bindUIElements(),this.bindToModel(),this._isRendered=!0,this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this
}},i={"rebase":function(t){return this.stopListening(this.collection),this.collection=t,this._initialEvents(),e.isFunction(this._renderChildren)?this._renderChildren():this.render(),this}},r={"render":function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.bindToModel(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this
}},s={"append":function(n,i,r){var s=n.isClosed||e.isUndefined(n.$el),a=n!==this.currentView;return a&&this.close(),n.render(),(a||s)&&(i||(i=this.getEl(this.el)),r?i.prepend(n.el):i.append(n.el)),this.attachView(n),t.triggerMethod.call(this,"show",n),t.triggerMethod.call(n,"show"),this},"prepend":function(e,t){return this.append(e,t,!0)}};return e.extend(t.ItemView.prototype,n),e.extend(t.CollectionView.prototype,i),e.extend(t.CompositeView.prototype,n,r),e.extend(t.Region.prototype,s),t}),define("plex/base/utils/Browser",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=/version\/(\d+(\.\d+)?)/i,i=/(?:chrome|crios)\/(\d+(\.\d+)?)/i,r=/firefox[ \/](\d+(\.\d+)?)/i,s=/(msie |rv:)(\d+(\.\d+)?)/i,a=/(?:applewebkit|safari)\/(\d+(\.\d+)?)/i,o=t.extend({"browsers":[{"id":"wiiu","name":"Wii U","msie":!0,"regex":/wiiu/i,"versionRegex":a},{"id":"ps3","name":"Mystery 3","webkit":!0,"regex":/\(PlayStation 3\)/,"versionRegex":a},{"id":"ps4","name":"Mystery 4","webkit":!0,"regex":/\(PlayStation 4\)/,"versionRegex":a},{"id":"ie","name":"Internet Explorer","msie":!0,"regex":/(msie|trident)/i,"versionRegex":s,"versionMatchIndex":2},{"id":"opera","name":"Opera","presto":!0,"regex":/opera/i,"versionRegex":n},{"id":"opera","name":"Opera","webkit":!0,"regex":/OPR\//,"versionRegex":/OPR\/(\d+(\.\d+)?)/},{"id":"chrome","name":"Chrome","webkit":!0,"regex":/(chrome|crios)/i,"versionRegex":i},{"id":"firefox","name":"Firefox","gecko":!0,"regex":/firefox/i,"versionRegex":r},{"id":"safari","name":"Safari","webkit":!0,"regex":/os x.+safari/i,"versionRegex":n},{"id":"safari","name":"Safari","webkit":!0,"regex":/applewebkit.+version/i,"versionRegex":/applewebkit.+version\/(\d+(\.\d+)?)/i},{"id":"safari","name":"Safari","webkit":!0,"regex":/applewebkit/i,"versionRegex":/(?:applewebkit|safari)\/(\d+(\.\d+)?)/i}],"platforms":[{"id":"ios","name":"iOS","mobile":!0,"regex":/(iphone|ipad|ipod)/i},{"id":"android","name":"Android","mobile":!0,"regex":/android/i},{"id":"windowsphone","name":"Windows Phone","mobile":!0,"regex":/windows phone/i},{"id":"webos","name":"WebOS","mobile":!0,"predicate":function(e){return/web[o0]s/i.test(e)&&!/large screen/i.test(e)
}},{"id":"webos","name":"WebOS","tv":!0,"predicate":function(e){return/web[o0]s/i.test(e)&&/large screen/i.test(e)}},{"id":"netcast","name":"NetCast","tv":!0,"regex":/netcast/i},{"id":"blackberry","name":"Blackberry","mobile":!0,"regex":/BlackBerry|RIM|BB10/},{"id":"ps3","name":"PlayStation 3","tv":!0,"regex":/P(lay)?S(tation )?3/},{"id":"ps4","name":"PlayStation 4","tv":!0,"regex":/P(lay)?S(tation )?4/},{"id":"wiiu","name":"Wii U","tv":!0,"regex":/Nintendo WiiU/},{"id":"smarthub","name":"SmartHub","tv":!0,"regex":/smarthub/i},{"id":"operatvstore","name":"Opera TV Store","tv":!0,"predicate":function(e){var t=/(opera tv)|(opera\/\d+\.\d+ \(linux (mips|armv\w+))/i;
return t.test(e)&&"undefined"!=typeof VK_ENTER}},{"id":"operatv","name":"Opera TV","tv":!0,"predicate":function(e){var t=/opera\/\d+\.\d+ \(linux (mips|armv\w+)/i;return t.test(e)}},{"id":"linux","name":"Linux","context":"platform","regex":/linux/i},{"id":"osx","name":"OSX","context":"platform","regex":/mac/i},{"id":"windows","name":"Windows","context":"platform","regex":/win/i}],"id":"unknown","name":"Unknown Browser","platform":"Unknown Platform","version":"0","platformModifierKey":"ctrl","webkit":!1,"gecko":!1,"msie":!1,"presto":!1,"constructor":function(e){var t="",n="";
e?(t=e.userAgent,n=e.platform):null!=navigator&&(t=navigator.userAgent,n=navigator.platform),this.detect({"userAgent":t,"platform":n})},"detect":function(e){var t=this.runTests(this.browsers,e),n=this.runTests(this.platforms,e);t&&(this.id=t.id,this.name=t.name,this.version=this.getVersion(e.userAgent,t.versionRegex,t.versionMatchIndex||1),this.webkit=!!t.webkit,this.gecko=!!t.gecko,this.msie=!!t.msie,this.presto=!!t.presto),n&&(this.platform=n.name,this.mobile=!!n.mobile,this.tv=!!n.tv,("OSX"===n.name||"iOS"===n.name)&&(this.platformModifierKey="command"))
},"runTests":function(e,t){for(var n,i,r,s=0;i!==!0&&(r=e[s++]);)n=t[r.context||"userAgent"],r.regex?i=r.regex.test(n):r.predicate&&(i=r.predicate(n));return r},"getVersion":function(e,t,n){var i=e.match(t);return i&&i.length>n&&i[n]||"0"}});return new o}),define("plex/base/utils/Capabilities",["underscore","plex/base/utils/Browser"],function(e,t){return{"hasConsole":function(){return!!(window.console&&window.console.log&&window.console.log.call)}(),"hasWebSocket":function(){return!!window.WebSocket
}(),"hasReplaceState":function(){return!(!window.history||!window.history.replaceState)}(),"hasFileUpload":function(){return!!(window.File&&window.FileList&&window.FileReader)}(),"hasMediaSource":function(){return!(!window.MediaSource&&!window.WebKitMediaSource)}(),"hasObjectUrl":function(){var e=window.opera&&window.opera.version?parseInt(window.opera.version().split(".")[0],10)<15:!1;if(e)return!1;var n="ie"===t.id&&11===parseInt(t.version,10);return n?!1:!!(window.URL&&window.URL.createObjectURL&&window.URL.revokeObjectURL)
}(),"hasBlob":function(){try{return!!new Blob}catch(e){return!1}}(),"hasFullscreen":function(){var e=document.createElement("div");return!!(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen)}(),"hasCanvas":function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),"hasTouchScreen":function(){return!!("ontouchstart"in window)}(),"isChromeApp":function(){return!(!window.chrome||!window.chrome.storage)}()}}),define("plex/base/models/ConfigModel",["underscore","backbone"],function(e,t){var n=t.Model.extend({"defaults":e.extend({"env":"production","bundled":!1,"hosted":!0,"flash":!0,"playerDiscovery":!0,"colorizeLogs":!0,"defaultTarget":"_self"},window.PLEXWEB)});
return new n}),define("plex/base/utils/Logger",["underscore","plex/base/utils/BaseClass","plex/base/utils/Capabilities","plex/base/mixins/EventMixin","plex/base/models/ConfigModel"],function(e,t,n,i,r){var s=t.extend({"mixins":i,"log":function(t){e.isString(t)&&(t={"message":t});var i=t.type||"log",s=t.message||"";if(this.trigger("add",{"type":i,"message":s}),n.hasConsole){var a=t.logFn,o=t.color;a=a in console?console[a]:console.log,o&&r.get("colorizeLogs")&&(s="%c"+s,o="color: "+o+";")}},"success":function(e){this.log({"type":"success","message":e,"color":"green"})
},"info":function(e){this.log({"type":"info","message":e,"logFn":"info","color":"blue"})},"warn":function(e){this.log({"type":"warning","message":e,"logFn":"warn","color":"#ff6600"})},"error":function(e){this.log({"type":"error","message":e,"logFn":"error","color":"red"})},"group":function(e,t){console.group&&console.group(e);for(var n=0,i=t.length;i>n;n++)this.log(t[n]);console.groupEnd&&console.groupEnd()}});return new s}),define("plex/base/adapters/Adapter",["plex/base/utils/BaseClass"],function(e){var t=e.extend({"register":function(e){this.instance=e
},"get":function(){if(this.instance)return this.instance;throw new Error("Nothing has been registered to this adapter.")}});return t}),define("plex/base/adapters/LocalizerAdapter",["plex/base/adapters/Adapter"],function(e){return new e}),define("plex/base/utils/formatters/StringUtil",["underscore","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=t.extend({"encode64":function(e){var t,n,i,s,a,o="",l="",u="",c=0;
do t=e.charCodeAt(c++),n=e.charCodeAt(c++),l=e.charCodeAt(c++),i=t>>2,s=(3&t)<<4|n>>4,a=(15&n)<<2|l>>6,u=63&l,isNaN(n)?a=u=64:isNaN(l)&&(u=64),o=o+r.charAt(i)+r.charAt(s)+r.charAt(a)+r.charAt(u),t=n=l="",i=s=a=u="";while(c<e.length);return o},"decode64":function(e){var t,i,s,a,o,l="",u="",c="",d=0,h=/[^A-Za-z0-9\+\/\=]/g;h.exec(e)&&n.warn('There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, "+", "/", and "="\nExpect errors in decoding.'),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");
do s=r.indexOf(e.charAt(d++)),a=r.indexOf(e.charAt(d++)),o=r.indexOf(e.charAt(d++)),c=r.indexOf(e.charAt(d++)),t=s<<2|a>>4,i=(15&a)<<4|o>>2,u=(3&o)<<6|c,l+=String.fromCharCode(t),64!=o&&(l+=String.fromCharCode(i)),64!=c&&(l+=String.fromCharCode(u)),t=i=u="",s=a=o=c="";while(d<e.length);return unescape(l)},"toUtf8":function(e){for(var t="",n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);128>r||(2048>r?(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(192|r>>>6),t+=String.fromCharCode(128|63&r)):(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(224|r>>>12),t+=String.fromCharCode(128|r>>>6&63),t+=String.fromCharCode(128|63&r)))
}return n>0&&n<e.length&&(t+=e.substring(n)),0===n?e:t},"truncate":function(e,t){if(!e)return"";if(e.length>t){for(var n=e.substring(0,t-3);/\S/.test(n.charAt(n.length-1))===!1&&n.length>1;)n=n.slice(0,-1);return n+"..."}return e},"truncateMiddle":function(e,t,n){if(!e)return"";if(e.length>t){n=n||Math.floor((t-3)/2);var i=t-3-n;return e.substr(0,n)+"..."+e.substr(e.length-i)}return e},"pluralize":function(e,t,n){return null==n&&(n=e+"s"),1===t?e:n},"formatLabel":function(e){for(var t="",n=0,i=e.length;i>n;n++){var r=e.charAt(n),s=r.toUpperCase();
t+=0===n?s:r===s?" "+s:r}return t},"formatBoolean":function(e){var t=i.get();return t.t(e&&0!==parseInt(e,10)?"Yes":"No")},"upperCase":function(e){return(e||"").toUpperCase()},"titleCase":function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},"getLastSegment":function(t){return e.first(/[^\/\\]+$/.exec(t||"")||[])},"random":function(){return Math.random().toString(36).substr(2)}});return new s}),define("plex/base/adapters/StorageAdapter",["plex/base/adapters/Adapter"],function(e){return new e
}),define("plex/base/initializers/AppInitializer",["jquery","plex/base/utils/formatters/StringUtil","plex/base/adapters/StorageAdapter"],function(e,t,n){return{"init":function(i){var r=e.Deferred(),s=e("#plex-script");if(s.length){var a=/version=([\.\w]+)$/.exec(s[0].src);a&&i.set("version",a[1])}var o=n.get(),l=o.get({"key":"clientID"});return l.done(function(e){i.set("clientID",e)}),l.fail(function(){var e=t.random();o.set({"key":"clientID","value":e}),i.set("clientID",e)}),l.always(function(){r.resolve()
}),r.promise()}}}),define("plex/base/models/StorageModel",["underscore","backbone","plex/base/adapters/StorageAdapter"],function(e,t,n){var i=t.Model.extend({"save":function(i,r,s){var a,o=this.attributes;if(null==i||"object"==typeof i?(a=i,s=r):(a={})[i]=r,s=e.extend({"validate":!0},s),a&&!s.wait){if(!this.set(a,s))return!1}else if(!this._validate(a,s))return!1;a&&s.wait&&(this.attributes=e.extend({},o,a)),void 0===s.parse&&(s.parse=!0);var l=this,u=s.success;s.success=function(){l.attributes=o,u&&u(l,o,s),l.trigger("sync",l,o,s)
},t.wrapError(this,s);var c=n.get(),d=c.set({"key":e.result(this,"storageKey"),"value":JSON.stringify(this.attributes)});return d.done(s.success).fail(s.error),a&&s.wait&&(this.attributes=o),d},"populate":function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise},"fetch":function(i){i=i?e.clone(i):{},void 0===i.parse&&(i.parse=!0);var r=this,s=i.success;i.success=function(e){return r.set(r.parse(e,i),i)?(s&&s(r,e,i),void r.trigger("sync",r,e,i)):!1},t.wrapError(this,i);
var a=n.get(),o=a.get({"key":e.result(this,"storageKey")});return o.done(i.success).fail(i.error),this.populatePromise=o,o},"destroy":function(i){i=i?e.clone(i):{};var r=this,s=i.success,a=function(){r.trigger("destroy",r,r.collection,i)};i.success=function(e){i.wait&&a(),s&&s(r,e,i),r.trigger("sync",r,e,i)},t.wrapError(this,i);var o=n.get(),l=o.remove({"key":e.result(this,"storageKey")});return l.done(i.success).fail(i.error),i.wait||a(),l},"parse":function(e){return JSON.parse(e)}});return i}),define("plex/base/models/SettingsModel",["plex/base/utils/Browser","plex/base/models/StorageModel"],function(e,t){var n=window.navigator.language||window.navigator.userLanguage||"en";
n=n.split("-")[0];var i=t.extend({"storageKey":"settingsv2","plexPassSettings":["syncVideoQuality","syncAudioQuality","syncPictureQuality"],"defaults":{"language":n,"playThemeMusic":!1,"keyboardShortcuts":!0,"showUnwatchedIcons":!1,"debugLevel":0,"dashboardPriorityOnDeck":1,"dashboardPriorityRecentlyAdded":2,"dashboardPriorityChannels":3,"dashboardPriorityQueue":4,"dashboardPriorityRecommendations":5,"dashboardOnDeckEnabled":!0,"dashboardRecentlyAddedEnabled":!0,"dashboardChannelsEnabled":!0,"dashboardQueueEnabled":!0,"dashboardRecommendationsEnabled":!0,"sharedSearch":!0,"channelSearch":!0,"localQuality":9,"remoteQuality":7,"channelQuality":7,"dash":!0,"directPlay":!0,"directStream":!0,"autoResolution":!0,"preferAAC":"wiiu"===e.id,"allowAC3":!1,"subtitleSize":100,"audioBoost":100,"syncVideoQuality":"medium","syncAudioQuality":"medium","syncPictureQuality":"medium","sidebarOpen":!1,"videoPlayerVolume":100,"musicPlayerVolume":100,"announcementsLastReadTimestamp":0}});
return new i}),define("plex/base/models/server/ServerStorageModel",["underscore","plex/base/adapters/StorageAdapter","plex/base/models/StorageModel"],function(e,t,n){var i=n.extend({"storageKey":"connections","defaults":function(){return{"users":[]}},"addConnection":function(n,i){if(!n.server||n.server.get("cloud")){var r=t.get(),s=r.get({"key":"myPlexAccessToken"});s.done(e.bind(function(t){var r,s=this.get("users"),a=e.findWhere(s,{"accessToken":t});a?r=a.servers:(r=[],s.push({"accessToken":t,"servers":r}));
var o=e.findWhere(r,{"machineIdentifier":n.id}),l=e.pick(i,"scheme","address","port","accessToken");o?e.extend(o,n.toLiteJSON()):(o=n.toLiteJSON(),o.connections=[],r.push(o));var u=o.connections,c=e.findWhere(u,{"address":i.address,"port":i.port});c?e.extend(c,l):u.push(l),this.save()},this))}}});return new i}),define("plex/base/initializers/SettingsInitializer",["jquery","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/SettingsModel","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,r){return{"init":function(){var s=e.Deferred(),a=n.get();
a.remove({"key":"settings"}),a.remove({"key":"servers"});var o=i.populate({"reset":!0}),l=r.populate({"reset":!0});return e.when(o,l).always(function(){var e=i.get("language");t.get().load(e).always(function(){s.resolve()})}),s.promise()}}}),define("plex/tv/initializers/SettingsDefaultsInitializer",["underscore","plex/base/models/SettingsModel"],function(e,t){var n={"localQuality":12,"remoteQuality":12,"channelQuality":12,"allowAC3":!1,"allowDCA":!1,"subtitleSize":80};return{"init":function(){t.defaults=e.extend({},e.result(t,"defaults"),n),t.set(n)
}}}),define("plex/base/managers/ServerConnectionManager",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter","plex/base/mixins/EventMixin","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,r,s,a,o){var l=i.extend({"mixins":a,"browserConnectionChangeDelay":2e3,"unavailableServersDelay":3e4,"initialize":function(n){e.bindAll(this,"checkUnavailableServer","onBrowserConnectionChange","onConnectionTestSuccess","onConnectionTestError","onImageTestSuccess"),this.servers=n.servers,this.listenTo(this.servers,{"add":this.onServerAdd,"remove":this.onServerRemove,"reset":this.onServersReset,"error:connection":this.onServerConnectionError,"change:connections":this.onServerConnectionsChange,"change:connected":this.onServerConnectedChange}),t(window).on("online",this.onBrowserConnectionChange),t(window).on("offline",this.onBrowserConnectionChange),this.testAllPendingConnections()
},"testAllServers":function(){this.servers.each(this.testAllConnections,this)},"testAllConnections":function(t){this.resetServerAvailability(t),e.each(t.connections,function(e){e.available=null,this.testConnection(t,e)},this)},"testAllPendingConnections":function(){this.servers.each(this.testPendingConnections,this)},"testPendingConnections":function(t){var n=e.where(t.connections,{"pending":!0});e.each(n,function(e){this.testConnection(t,e)},this)},"testConnection":function(t,i){if(i.pending=!1,e.isFunction(t.testConnection))return void t.testConnection(i);
var r={"server":t,"connection":i};n.trigger("command","testServerConnection",r,e.bind(function(e){e.done(this.onConnectionTestSuccess),e.fail(this.onConnectionTestError)},this))},"findBestConnection":function(t){var n=e.where(t.connections,{"available":!0}),i=null;return e.each(n,function(e){(!i||!i.isLocalAddress&&e.isLocalAddress)&&(i=e)}),i},"resetServerAvailability":function(e){e.populatePromise=t.Deferred(),e.set({"available":null,"authorized":null})},"addUnavailableServer":function(t){this.unavailableServersLoop||(this.unavailableServersLoop=[]),e.contains(this.unavailableServersLoop,t)||(this.unavailableServersLoop.push(t),this.unavailableServersInterval||(this.unavailableServersPosition=-1,this.unavailableServersInterval=setInterval(this.checkUnavailableServer,this.unavailableServersDelay)))
},"checkUnavailableServer":function(){this.unavailableServersPosition++,this.unavailableServersPosition>=this.unavailableServersLoop.length&&(this.unavailableServersPosition=0);var e=this.unavailableServersLoop[this.unavailableServersPosition];this.testAllConnections(e)},"removeUnavailableServer":function(t){if(this.unavailableServersLoop){var n=e.indexOf(this.unavailableServersLoop,t);n>-1&&(this.unavailableServersLoop.splice(n,1),this.unavailableServersLoop.length||(this.unavailableServersInterval=clearInterval(this.unavailableServersInterval)))
}},"abortConnectionTests":function(t){var n=t.connections;e.each(n,function(e){e.test&&"pending"===e.test.state()&&(e.aborting=!0,e.test.abort(),e.aborting=!1)})},"onServerAdd":function(e){e.connections.length&&this.testPendingConnections(e)},"onServerRemove":function(e){this.abortConnectionTests(e),this.removeUnavailableServer(e)},"onServersReset":function(t,n){var i=n.previousModels;e.each(i,function(e){t.contains(e)||(this.abortConnectionTests(e),this.removeUnavailableServer(e))},this)},"onServerConnectionError":function(e){this.testAllConnections(e)
},"onServerConnectionsChange":function(e){this.testPendingConnections(e)},"onServerConnectedChange":function(e,t){if(null!=t&&null!=e.previous("connected")){var i,r=s.get();i=t?r.t("Found {1}",e.get("friendlyName")):r.t("{1} went away",e.get("friendlyName")),n.trigger("show:status",e,i)}},"onBrowserConnectionChange":function(){r.info("Online status: "+window.navigator.onLine),clearTimeout(this.browserConnectionChangeTimeout),this.browserConnectionChangeTimeout=setTimeout(e.bind(this.testAllServers,this),this.browserConnectionChangeDelay)
},"onConnectionTestSuccess":function(t,n,i){n.available=!0;var s=this.findBestConnection(t);r.success("Setting active connection for "+t.get("friendlyName")+" ("+s.address+")"),t.set("activeConnection",s),e.extend(i,{"connected":!0,"available":!0,"authorized":!0,"mixedContent":!1}),t.populatePromise.resolveWith(t,[t,i]),t.set(i),this.removeUnavailableServer(t),o.addConnection(t,n)},"onConnectionTestError":function(t,i,s){if(!i.aborting&&(i.available=!1,!t.get("available")&&"pending"===t.populatePromise.state())){if(!i.isLocalAddress&&t.useHostedHttps){var a={"server":t,"connection":i};
n.trigger("command","testServerImage",a,e.bind(function(e){e.done(this.onImageTestSuccess)},this))}var o=e.where(t.connections,{"available":!1}),l=t.get("friendlyName");401===s.status||403===s.status?(r.error("Authorization for "+l+" failed"),t.set({"connected":!1,"available":!0,"authorized":!1}),t.populatePromise.rejectWith(t,[t,s]),this.removeUnavailableServer(t)):t.connections.length===o.length&&(r.error("All connections for "+l+" failed"),t.set({"connected":!1,"available":!1,"authorized":null}),t.populatePromise.rejectWith(t,[t,s]),this.addUnavailableServer(t))
}},"onImageTestSuccess":function(e,t){t.mixedContent=!0,e.get("authorized")||e.set("mixedContent",!0)}});return l}),define("x2js",function(e){return function(){var t;return t||e.X2JS}}(this)),define("plex/base/utils/Parser",["underscore","x2js"],function(e,t){function n(t,n){e.isArray(n)?e.each(n,t):t(n)}var i=new t(!1,"",!0);return{"parseXML":function(e){return i.xml_str2json(e)},"parseEncodedString":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];e[t]=null==n?"":decodeURIComponent(n)
}}e&&n(i,t)},"parseInteger":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];e[t]=null==n?0:parseInt(n,10)}}e&&n(i,t)},"parseBoolean":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];e[t]=n===!0||"true"==n||"1"==n}}e&&n(i,t)},"parseArray":function(t,i){function r(n){if(t.hasOwnProperty(n)){var i=t[n];e.isArray(i)||(t[n]=[i])}else t[n]=[]}t&&n(r,i)}}}),define("plex/base/utils/cache/Cache",["underscore","plex/base/utils/BaseClass","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/mixins/EventMixin"],function(e,t,n,i,r){var s=t.extend({"mixins":r,"maxCycles":3,"maxSize":50,"isListening":!1,"initialize":function(){this._cache={},this.size=0,this.cycle()
},"startListening":function(){this.isListening||(this.isListening=!0,this.listenTo(n,{"cycle:cache":this.cycle,"clear:cache":this.removeAll}))},"get":function(t){var n=this._cache[t];return n&&n._cacheCycle&&this.setItemCycle(n,t,e.first(this.cycles)),n},"store":function(t,n){n||(n=this.getItemCacheKey(t)),this.remove(t),n&&(this.startListening(),t._cacheKey=n,this._cache[n]=t,this.size++,t.persistInCache||this.setItemCycle(t,n,e.first(this.cycles)))},"getItemCacheKey":function(t){return e.result(t,"cacheKey")
},"setItemCycle":function(e,t,n){var i=e._cacheCycle;i&&i.hasOwnProperty(t)&&delete i[t],e._cacheCycle=n,n[t]=e},"cycle":function(){this.cycles||(this.cycles=[]),this.size>this.maxSize&&(i.warn("Cache overflow, size: "+this.size),e.each(this.cycles.slice(1),this.removeCycle,this)),this.cycles.unshift({}),this.cycles.length>Math.max(this.maxCycles,1)&&this.removeCycle(e.last(this.cycles))},"remove":function(e){if(e&&e._cacheKey){var t=e._cacheKey;this._cache.hasOwnProperty(t)&&(delete this._cache[t],this.size--),e._cacheCycle&&(e._cacheCycle.hasOwnProperty(t)&&delete e._cacheCycle[t],delete e._cacheCycle),delete e._cacheKey
}},"removeCycle":function(t){e.each(e.values(t),this.remove,this);var n=e.indexOf(this.cycles,t);this.cycles.splice(n,1)},"removeAll":function(){e.each(e.values(this._cache),this.remove,this),this.cycles.length=0,this.cycle(),this.stopListening(),this.isListening=!1}});return s}),define("plex/base/utils/cache/CollectionCache",["underscore","plex/base/utils/cache/Cache"],function(e,t){var n=t.extend({"maxCycles":3,"maxSize":20,"get":function(){var e=t.prototype.get.apply(this,arguments);return e&&e.every(function(e){return e.cache&&e.cache.isListening?(e.cache.store(e),!0):!1
}),e},"getItemCacheKey":function(t){var n=e.result(t,"url");return t.server?t.server.getScopedKey(n):n}});return n}),define("plex/base/models/BaseCollection",["underscore","backbone","jquery","plex/base/utils/Parser","plex/base/utils/cache/CollectionCache"],function(e,t,n,i,r){var s=t.Collection.extend({"cache":new r,"constructor":function(e,n){if(n||(n={}),this.server=n.server,this.section=n.section,this.channel=n.channel,this.device=n.device,this.parent=n.parent,this.allowInCache=n.allowInCache,this.skipCache=n.skipCache,n.url&&(this.url=n.url),n.path&&(this.path=n.path),(null!=n.pageStart||null!=n.pageSize)&&(this.pageStart=n.pageStart||0,this.pageSize=n.pageSize||0),!n.allowInCache)return void t.Collection.prototype.constructor.apply(this,arguments);
this.initialize.apply(this,arguments);var i=this.cache.getItemCacheKey(this),r=this.cache.get(i);return r?r:n.onlyIfCached?{}:(t.Collection.prototype.constructor.apply(this,arguments),void this.cache.store(this,i))},"populate":function(){return this.populatePromise||this.fetch.apply(this,arguments),this.populatePromise},"fetch":function(){var i=t.Collection.prototype.fetch.apply(this,arguments),r=n.Deferred();return i.done(e.bind(function(e){r.resolveWith(this,[this,e]),this.populatePromise=n.Deferred().resolveWith(this,[this]).promise()
},this)),i.fail(e.bind(function(e){r.rejectWith(this,[this,e]),this.populatePromise=n.Deferred().rejectWith(this,[this]).promise()},this)),this.populatePromise=r.promise(),this.populatePromise},"sync":function(){return this.allowInCache&&this.cache.store(this),t.sync.apply(this,arguments)},"syncUrl":function(){var t="";if(this.url&&(t=e.result(this,"url")),this.path){var i=e.result(this,"path");t+="/"!==t.substr(t.length-1)?"/":"",t+="/"===i[0]?i.substr(1):i}if(null!=this.pageStart||null!=this.pageSize){var r=this.pageStart||0,s=this.pageSize||0,a={};
a["X-Plex-Container-Start"]=r,a["X-Plex-Container-Size"]=s;var o=t.indexOf("?"),l=t.length;t+=o>-1?l-1>o?"&":"":"?",t+=n.param(a,!0)}return t},"convert":function(t,n){var r=e.isObject(t)?t:i.parseXML(t);if(!n)return r;var s=r[n];return s?(e.isArray(s)||(s=[s]),s):[]},"clone":function(e){var t={"server":this.server,"section":this.section,"parent":this.parent,"url":this.url};return e||(e=this.models),new this.constructor(e,t)},"clear":function(){this.reset([],{"silent":!0}),this.populatePromise=null
}});return s.extend=function(){var e=t.Collection.extend.apply(this,arguments);return e.prototype.cache=new r,e},s}),define("plex/base/utils/cache/ModelCache",["underscore","plex/base/utils/cache/Cache"],function(e,t){var n=t.extend({"maxCycles":5,"maxSize":100,"getItemCacheKey":function(t,n){return e.isFunction(t.cacheKey)?(n||(n=t.toJSON()),t.cacheKey(n)):void 0}});return n}),define("plex/base/models/BaseModel",["underscore","backbone","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/utils/cache/ModelCache"],function(e,t,n,i,r,s){var a=t.Model.extend({"cache":new s,"constructor":function(e,n){e||(e={}),n||(n={}),this.server=this.findOption(n,"server"),this.section=this.findOption(n,"section"),this.channel=this.findOption(n,"channel"),this.device=this.findOption(n,"device"),this.parent=this.findOption(n,"parent");
var i=this.findOption(n,"skipCache");if(i)return void t.Model.prototype.constructor.apply(this,arguments);var r=this.cache.getItemCacheKey(this,e),s=this.cache.get(r);if(s)return n.parse&&(e=s.parse.call(s,e)),/\/children(\?.*)?$/.test(n.url)||s.set(e),s.server=this.server||s.server,s.section=this.section||s.section,s.channel=this.channel||s.channel,s.device=this.device||s.device,s.parent=this.parent||s.parent,s;var a=this.findOption(n,"onlyIfCached");return a?{}:(t.Model.prototype.constructor.apply(this,arguments),void this.cache.store(this,r))
},"findOption":function(e,t){return e[t]||e.collection&&e.collection[t]},"clone":function(){var e={"server":this.server,"section":this.section,"channel":this.channel,"parent":this.parent,"skipCache":!0};return new this.constructor(this.attributes,e)||null},"convert":function(t){var n=e.isObject(t)?t:r.parseXML(t);return n},"parse":function(t){var n=this.convert(t);return this.whitelistedAttrs&&(n=e.pick(n,this.whitelistedAttrs)),n},"populate":function(){return this.populatePromise||this.fetch.apply(this,arguments),this.populatePromise
},"fetch":function(){var i=t.Model.prototype.fetch.apply(this,arguments),r=n.Deferred();return i.done(e.bind(function(e){r.resolveWith(this,[this,e]),this.populatePromise=n.Deferred().resolveWith(this,[this]).promise()},this)),i.fail(e.bind(function(e){r.rejectWith(this,[this,e]),this.populatePromise=n.Deferred().rejectWith(this,[this]).promise()},this)),this.populatePromise=r.promise(),this.populatePromise},"save":function(i,r,s){var a,o,l,u=this.attributes;null==i||"object"==typeof i?(a=i,s=r):(a={})[i]=r,s=e.extend({"validate":!0},s);
var c=this.getSaveParams(a,s);if(e.extend(c,s.data),a&&!s.wait){if(!this.set(a,s))return!1}else if(!this._validate(a,s))return!1;if(a&&s.wait&&(this.attributes=e.extend({},u,a)),e.isEmpty(c))return s.success&&s.success(this),n.Deferred().resolve(this);void 0===s.parse&&(s.parse=!0);var d=this,h=s.success;s.success=function(t){if(d.attributes=u,t){var n=d.parse(t,s);if(s.wait&&(n=e.extend(a||{},n)),e.isObject(n)&&!d.set(n,s))return!1;d.cache.store(d)}h&&h(d,t,s),d.trigger("sync",d,t,s)},t.wrapError(this,s),o=this.isNew()?"create":s.patch?"patch":"update","patch"===o&&(s.attrs=a);
var p=e.result(this,"url");return s.url=p+"?"+n.param(c,!0),s.data="",l=this.sync(o,this,s),a&&s.wait&&(this.attributes=u),l},"getSaveParams":function(e){return this.isNew()?e||this.toJSON():this.changedAttributes(e)||{}},"getScopedKey":function(t){return null!=t&&e.isFunction(this.cacheKey)?this.cacheKey(this.attributes)+"!"+t:t}});return a.extend=function(){var e=t.Model.extend.apply(this,arguments);return e.prototype.cache=new s,e},a}),define("plex/base/models/AnnouncementModel",["underscore","plex/base/models/BaseModel","plex/base/models/SettingsModel"],function(e,t,n){var i=t.extend({"whitelistedAttrs":["promo","timestamp","link","thumb","title","description"],"initialize":function(){this.listenTo(n,"change:announcementsLastReadTimestamp",this.onTimestampChange),this.onTimestampChange()
},"parse":function(t){return e.pick(t,this.whitelistedAttrs)},"onTimestampChange":function(){this.set("isUnread",this.get("timestamp")>n.get("announcementsLastReadTimestamp"))}});return i}),define("plex/base/models/AnnouncementCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/AnnouncementModel"],function(e,t,n){var i=t.extend({"model":n,"url":"https://plex.r.worldssl.net/announcements/announcements.json?cb="+(new Date).getTime(),"parse":function(e){return JSON.parse(e)
}});return i}),define("plex/base/models/debug/DebugModel",["underscore","backbone","plex/base/utils/Browser"],function(e,t,n){var i=t.Model.extend({"initialize":function(){this.set("host",window.location.host),this.set("userAgent",window.navigator.userAgent),this.set("browser",n)},"toJSON":function(){var n=this.parent.get("primaryServer"),i=this.parent.get("user"),r=i.get("features");return this.set("version",this.parent.get("version")),n&&(this.set("primaryServerUrl",n.url()),this.set("primaryServerAuthToken",!!n.get("accessToken")),this.set("primaryServerVersion",n.get("versionFull"))),this.set("username",i.get("username")),this.set("cloudUrl",i.server.get("connections")),this.set("cloudAccessToken",!!i.server.get("accessToken")),r&&this.set("userFeatures",e.keys(r).join(", ")),t.Model.prototype.toJSON.apply(this,arguments)
}});return new i}),define("plex/base/models/debug/LogModel",["backbone"],function(e){var t=e.Model.extend({"initialize":function(){this.set("time",new Date)}});return t}),define("plex/base/models/debug/LogCollection",["underscore","jquery","backbone","plex/base/utils/Logger","plex/base/models/SettingsModel","plex/base/models/debug/DebugModel","plex/base/models/debug/LogModel"],function(e,t,n,i,r,s,a){var o=/(auth_token=|accessToken=|X-Plex-Token=)(\"?\w+\"?)/g,l=/(email=)(\"?[^&]+\"?)/g,u=/(password=)([^&]+)/,c=/(address=|host=)(\"?[^&]+\"?)/g,d=function(e){return e=e.replace(o,"$1TOKEN"),e.replace(u,"$1PASSWORD")
},h=function(e){return e&&e.hasOwnProperty("X-Plex-Token")&&(e["X-Plex-Token"]="TOKEN"),e&&e.hasOwnProperty("Authorization")&&(e.Authorization="BASIC AUTHORIZATION"),e},p=function(e){return e?(e=e.replace(o,'$1"TOKEN"'),e=e.replace(l,'$1"EMAIL"'),e=e.replace(c,'$1"IP ADRRESS"')):void 0},f=n.Collection.extend({"model":a,"initialize":function(t,n){e.bindAll(this,"onAjaxComplete"),this.parent=n.parent,s.parent=n.parent,r.on("change:debugLevel",this.onDebugLevelChange,this),r.get("debugLevel")>0&&this.startListening()
},"startListening":function(){this.enabled||(i.on("add",this.onLogAdd,this),n.history.on("route",this.onRoute,this),t(document).on("ajaxComplete",this.onAjaxComplete),this.enabled=!0)},"stopListening":function(){i.off("add",this.onLogAdd,this),n.history.off("route",this.onRoute,this),t(document).off("ajaxComplete",this.onAjaxComplete),this.reset(),this.enabled=!1},"add":function(){this.length>200&&this.shift(),n.Collection.prototype.add.apply(this,arguments)},"toJSON":function(){var t=n.Collection.prototype.toJSON.apply(this,arguments);
return t.unshift(e.extend({"type":"info"},s.toJSON())),t},"toJSONString":function(){return JSON.stringify(this.toJSON(),null,2)},"onDebugLevelChange":function(e,t){0===t?this.stopListening():this.startListening()},"onLogAdd":function(e){this.add(e)},"onRoute":function(e,t,n){var i={"type":"navigation","route":t,"args":n,"fragment":window.location.hash};this.add(i)},"onAjaxComplete":function(t,n,i){var s={"type":"ajax","url":d(i.url),"status":n.status};e.isEmpty(i.headers)||(s.headers=h(i.headers)),e.isEmpty(i.data)||(s.params=i.data),200===n.status?2===r.get("debugLevel")?s.response=p(n.responseText):s.responseLength=n.responseText.length:(s.statusText=n.statusText,s.response=p(n.responseText)),this.add(s)
}});return f}),define("plex/base/adapters/DimensionsAdapter",["plex/base/adapters/Adapter"],function(e){return new e}),define("plex/base/mixins/ServerMixin",["underscore","plex/base/adapters/DimensionsAdapter","plex/base/utils/Parser"],function(e,t,n){var i={"idAttribute":"machineIdentifier","defaults":function(){return{"friendlyName":"Unknown","cloud":!1,"bundled":!1,"shared":!1,"synced":!1,"mixedContent":!1,"isCloudSync":!1,"protocolCapabilities":[],"transcoderVideoBitrates":[],"transcoderVideoQualities":[],"transcoderVideoResolutions":[]}
},"whitelistedAttrs":["machineIdentifier","name","friendlyName","sourceTitle","accessToken","superToken","version","createdAt","updatedAt","protocol","protocolCapabilities","platform","platformVersion","startState","serverClass","synced","sync","multiuser","allowMediaDeletion","transcoderActiveVideoSessions","transcoderAudio","transcoderVideo","transcoderVideoBitrates","transcoderVideoQualities","transcoderVideoResolutions","flashInstalled","silverlightInstalled","soundflowerInstalled","myPlex","myPlexMappingState","myPlexSigninState","myPlexSubscription","myPlexUsername"],"features":{"splitApart":"0.9.7.0","merge":"0.9.7.0","batchEdit":"0.9.7.0","search":"0.9.7.0","advancedFilters":"0.9.7.0","cleanBundles":"0.9.7.0","timelineState":"0.9.7.2","firstRunPref":"0.9.7.3","artworkUpload":"0.9.7.9","sync":"0.9.7.10","universalTranscoder":"0.9.7.17","universalMusicTranscoder":"0.9.8.3","syncNotifications":"0.9.7.23","sharedSettings":"0.9.7.23","specificMediaDeletion":"0.9.7.23","dash":"0.9.8.6","chunkedHTTP":"0.9.9.3","streamingMKV":"0.9.9.4","hubFilters":"0.9.9.2","desktopStreamingMKV":"0.9.9.6","sectionSettings":"0.9.9.6","playQueues":"0.9.9.6","cancelAllUpdates":"0.9.9.10","hubFilterSigns":"0.9.9.12"},"cacheKey":function(e){return e.machineIdentifier
},"url":function(e){e||(e=this.get("activeConnection"));var t=e.scheme||"http",n=e.address,i=e.port;this.useHostedHttps&&this.isLocalAddress(n)&&(t="https",n=e.address.replace(/\./g,"-")+".hub.plex.tv",i=32443);var r=t+"://"+n;return i&&(r+=":"+i),r+"/"},"useHostedHttps":function(){var e="https:"===window.location.protocol,t=/plex\.tv$/.test(window.location.hostname);return e&&t}(),"convert":function(t){var i=e.isObject(t)?t:n.parseXML(t);return n.parseInteger(i,["createdAt","updatedAt","transcoderActiveVideoSessions"]),n.parseBoolean(i,["synced","sync","multiuser","allowMediaDeletion","transcoderAudio","transcoderVideo","flashInstalled","silverlightInstalled","soundflowerInstalled","myPlex","myPlexSubscription"]),i&&"undefined"==typeof i.startState&&(i.startState=null),i
},"parse":function(t){var n=this.convert(t);if(!n||!n.machineIdentifier)return null;var i=(this.server&&this.server.get("cloud"),n.scheme),r=n.address,s=parseInt(n.port,10),a=n.localAddresses;n=e.pick(n,this.whitelistedAttrs),this.get("shared")&&!n.sourceTitle?delete n.friendlyName:n.sourceTitle?(n.shared=!0,n.friendlyName=n.sourceTitle):n.friendlyName||(n.friendlyName=n.name),n.fullVersion=n.version;var o=/(\d+\.){2,3}\d+/.exec(n.version);return o&&(n.version=o[0]),n.transcoderVideoBitrates&&(n.transcoderVideoBitrates=n.transcoderVideoBitrates.split(",").reverse()),n.transcoderVideoQualities&&(n.transcoderVideoQualities=n.transcoderVideoQualities.split(",").reverse()),n.transcoderVideoResolutions&&(n.transcoderVideoResolutions=n.transcoderVideoResolutions.split(",").reverse()),n.protocolCapabilities&&(n.protocolCapabilities=n.protocolCapabilities.split(",")),"secondary"===n.serverClass&&(n.synced=!0),"cloudsync"===n.platform&&(n.isCloudSync=!0),n.accessToken&&this.set("accessToken",n.accessToken),r&&s&&this.addConnection({"scheme":i,"address":r,"port":s,"accessToken":n.accessToken}),a&&(a=a.split(","),e.each(a,function(e){this.addConnection({"address":e,"port":32400,"accessToken":n.accessToken})
},this)),n},"resolveUrl":function(e,t){if(t||(t={}),/^\w+:\/\//.test(e))return e;var n=this.get("accessToken"),i=t.useLoopback?"http://127.0.0.1:32400/":this.url(t.connection,t);return e&&(i+="/"===e[0]?e.substr(1):e),t.appendToken&&n?(i+=i.indexOf("?")>0?"&":"?",i+="X-Plex-Token="+n):i},"getXHROptions":function(e){var t={};return t.url=this.resolveUrl(e),t.dataType="text",t.headers=this.getHeaders(),t},"getHeaders":function(){var n=t.get(),i=this.parent,r=i.get("user"),s=this.get("accessToken"),a=e.clone(n);
return s&&(a["X-Plex-Token"]=s),r&&r.get("username")&&(a["X-Plex-Username"]=r.get("username")),a},"isLocalAddress":function(e){return/^(localhost|10\.|192\.168\.|127\.0\.0\.)/.test(e)},"supports":function(e){var t=this.features[e];return this.isVersionOrNewer(t)},"isVersionOrNewer":function(e){var t=this.get("version");if(e&&t){e=e.split("."),t=t.split(".");for(var n=0,i=e.length;i>n;n++)if(n<t.length){var r=parseInt(e[n],10),s=parseInt(t[n],10);if(s>r)return!0;if(r>s)return!1}return!0}return!0}};
return i}),define("plex/base/utils/types/SubsetTypes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"types":[{"key":"all","title":"All"},{"key":"unwatched","title":"Unwatched"},{"key":"newest","title":"Recently Released"},{"key":"recentlyAdded","title":"Recently Added"},{"key":"recentlyViewed","title":"Recently Viewed"},{"key":"recentlyViewedShows","title":"Recently Viewed Shows"},{"key":"onDeck","title":"On Deck"},{"key":"folder","title":"By Folder"}],"initialize":function(){this.byKey=e.reduce(this.types,function(e,t){return e[t.key]=t,e
},{})},"getSubsetType":function(e){return this.byKey[e]}});return new n}),define("plex/base/models/library/section/SectionSubsetModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","secondary"],"whitelistedPrimarySubsets":["all","recentlyAdded","recentlyViewed","recentlyViewedShows","onDeck","newest","folder"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,"secondary"),i
},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.primary=!n.secondary&&e.contains(this.whitelistedPrimarySubsets,n.key),"all"===n.key&&(n.title="All"),n}});return i}),define("plex/base/models/library/section/SectionSubsetCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/SectionSubsetModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return e.result(this.section,"url")},"parse":function(e){return this.convert(e,"Directory")
},"filterPrimaries":function(){var e=this.filter(function(e){return e.get("primary")});return this.clone(e)}});return i}),define("plex/base/models/library/section/MediaTypeModel",["underscore","plex/base/models/BaseModel"],function(e,t){var n=t.extend({"defaults":{"selected":!1},"whitelistedAttrs":["id","typeString","title","element"],"parse":function(t){var n=e.pick(t,this.whitelistedAttrs);return n}});return n}),define("plex/base/models/library/section/MediaTypeCollection",["plex/base/models/BaseCollection","plex/base/models/library/section/MediaTypeModel"],function(e,t){var n=e.extend({"model":t});
return n}),define("plex/base/models/library/section/FilterOptionModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","type","title"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/section/FilterOptionCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/FilterOptionModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){var t=e.result(this.section,"url"),n=t+"/"+this.parent.id;
return this.standalone||(n+="?"+this.getUrlParams()),n},"initialize":function(e,t){this.standalone=t.standalone},"getUrlParams":function(){var t={},n=[],i=this.section.get("currentType"),r=this.section.get("currentFilters");i&&(t.type=i.id),e.each(r,function(e){e.key!==this.parent.id&&e.values.length&&(t[e.key]=e.values.join(","))},this);for(var s in t)n.push("unviewedLeafCount"===s?s+">="+t[s]:s+"="+t[s]);return n.join("&")},"parse":function(e){return this.convert(e,"Directory")},"search":function(e){var t=this.filter(function(t){return t.get("title").toLowerCase().indexOf(e.toLowerCase())>-1
});return this.clone(t)}});return i}),define("plex/base/models/library/section/FilterModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/section/FilterOptionCollection"],function(e,t,n,i){var r=n.extend({"idAttribute":"filter","whitelistedAttrs":["filter","filterType","key","title"],"initialize":function(e){e||(e={}),this.set("options",new i([],{"server":this.server,"section":this.section,"parent":this,"standalone":e.standalone}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return r}),define("plex/base/models/library/section/FilterCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/FilterModel"],function(e,t,n,i){var r=n.extend({"model":i,"comparator":"filterType","url":function(){var n=e.result(this.section,"url")+"/filters",i=this.section.get("currentType"),r={"includeAdvanced":1};return i&&(r.type=i.id),n+"?"+t.param(r,!0)
},"parse":function(e){return this.convert(e,"Directory")}});return r}),define("plex/base/models/library/section/LinearFilterModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/section/FilterOptionCollection"],function(e,t,n,i){var r=n.extend({"idAttribute":"key","whitelistedAttrs":["secondary","key","title"],"initialize":function(){this.set("options",new i([],{"server":this.server,"section":this.section,"parent":this}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseBoolean(i,"secondary"),i},"parse":function(t){var n=this.convert(t);return n.title=n.title.replace("By ",""),n=e.pick(n,this.whitelistedAttrs)}});return r}),define("plex/base/models/library/section/LinearFilterCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/LinearFilterModel"],function(e,t,n,i){var r=n.extend({"model":i,"url":function(){var t=e.result(this.section,"url");return t},"parse":function(e){return this.convert(e,"Directory")
},"filterBySecondary":function(){var e=this.filter(function(e){return e.get("secondary")});return this.clone(e)}});return r}),define("plex/base/models/library/section/SortModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","defaults":{"selected":!1},"whitelistedAttrs":["key","title","defaultDirection"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i},"parse":function(t){var n=this.convert(t);return n.defaultDirection=n["default"],n=e.pick(n,this.whitelistedAttrs)
}});return i}),define("plex/base/models/library/section/SortCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/SortModel"],function(e,t,n,i){var r=n.extend({"model":i,"url":function(){var n=e.result(this.section,"url")+"/sorts",i=this.section.get("currentType"),r={};return i&&(r.type=i.id),n+"?"+t.param(r,!0)},"parse":function(e){return this.convert(e,"Directory")}});return r}),define("plex/base/models/library/section/AlphanumericModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","size"],"url":function(){return"/library/sections/"+this.section.id+"/firstCharacter/"+this.id
},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,"size"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/section/AlphanumericCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/AlphanumericModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){var t=e.result(this.section,"url"),n=t+"/firstCharacter?"+this.getUrlParams();return n
},"getUrlParams":function(){var t={},n=[],i=this.section.get("currentType"),r=this.section.get("currentFilters");t.type=i.id,e.each(r,function(e){e.values.length&&(t[e.key]=e.values.join(","))},this);for(var s in t)n.push("unviewedLeafCount"===s?s+">="+t[s]:s+"="+t[s]);return n.join("&")},"parse":function(e){return this.convert(e,"Directory")}});return i}),define("plex/base/utils/types/MediaTypes",["underscore","plex/base/utils/BaseClass","plex/base/utils/formatters/StringUtil"],function(e,t,n){var i=t.extend({"types":[{"id":1,"typeString":"movie","title":"Movie","plural":n.pluralize("Movie"),"element":"video"},{"id":2,"typeString":"show","title":"Show","plural":n.pluralize("TV Show"),"element":"directory","related":[3,4]},{"id":3,"typeString":"season","title":"Season","plural":n.pluralize("Season"),"element":"directory","related":[2,4]},{"id":4,"typeString":"episode","title":"Episode","plural":n.pluralize("Episode"),"element":"video","related":[2,3]},{"id":5,"typeString":"trailer","title":"Trailer","plural":n.pluralize("Trailer"),"element":"video"},{"id":6,"typeString":"comic","title":"Comic","plural":n.pluralize("Comic"),"element":"photo"},{"id":7,"typeString":"person","title":"Person","plural":n.pluralize("Person",null,"People"),"element":"directory"},{"id":8,"typeString":"artist","title":"Artist","plural":n.pluralize("Artist"),"element":"directory","related":[9,10]},{"id":9,"typeString":"album","title":"Album","plural":n.pluralize("Album"),"element":"directory","related":[8,10]},{"id":10,"typeString":"track","title":"Track","plural":n.pluralize("Track"),"element":"audio","related":[8,9]},{"id":11,"typeString":"photoAlbum","title":"Photo Album","plural":n.pluralize("Photo Album"),"element":"directory","related":[12,13]},{"id":12,"typeString":"picture","title":"Picture","plural":n.pluralize("Picture"),"element":"photo","related":[11]},{"id":13,"typeString":"photo","title":"Photo","plural":n.pluralize("Photo"),"element":"photo","related":[11]},{"id":14,"typeString":"clip","title":"Clip","plural":n.pluralize("Clip"),"element":"video"},{"id":15,"typeString":"playlistItem","title":"Clip","plural":n.pluralize("Clip"),"element":"video"}],"initialize":function(){this.byID=e.reduce(this.types,function(e,t){return e[t.id]=t,e
},{}),this.byType=e.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{})},"getMediaType":function(e){return this.byID[e]},"getMediaTypeByString":function(e){return this.byType[e]},"getRelatedMediaTypes":function(t){var n=this.byType[t],i=e.map(n.related,e.bind(function(e){return this.byID[e]},this));return i.unshift(n),i},"getChildMediaType":function(t){var n,i=this.byType[t],r=e.map(i.related,e.bind(function(e){return this.byID[e]},this));return r&&r.length&&(n=e.last(r)),n&&n.id>i.id?n:i
}});return new i}),define("plex/base/utils/RangeUtil",["underscore","plex/base/utils/BaseClass"],function(e,t){function n(t){var n=e.clone(t);return"undefined"!=typeof n.last?(n.end=n.last+1,n.size=n.end-n.start):"undefined"!=typeof n.size?(n.end=n.start+n.size,n.last=n.end-1):"undefined"!=typeof n.end&&(n.last=n.end-1,n.size=n.end-n.start),n}function i(t,i){return e.filter(e.map(t,n),function(e){return i?e.size>=0:e.size>0})}var r=t.extend({"difference":function(e,t,r){e=n(e),t=n(t);var s=[{"start":e.start,"last":Math.min(e.last,t.start-1)},{"start":Math.max(e.start,t.end),"last":e.last}];
return i(s,r)},"union":function(e,t,r){if(e=n(e),t=n(t),e.start>t.start){var s=e;e=t,t=s}var a=[e];return t.start<=e.end?a[0].last=Math.max(t.last,e.last):a.push(t),i(a,r)},"degap":function(e,t){var i=n(e);return t=n(t),t.size?(i.start>t.end&&(i={"start":t.end,"end":i.end}),i.end<t.start&&(i={"start":i.start,"end":t.start}),n(i)):i},"each":function(e,t,i){e=n(e);for(var r=Math.min(e.start,e.end),s=Math.max(e.start,e.end);s>=r;r++)t.call(i,r)},"roundByPage":function(e,t){return e=n(e),n({"start":Math.floor(e.start/t)*t,"end":Math.ceil(e.end/t)*t})
}});return new r}),define("plex/base/mixins/PaginationMixin",["underscore","jquery","plex/base/utils/RangeUtil"],function(e,t,n){var i={"fetchRange":function(e){return e.remove=!1,e.cancelable=!0,e.prepend&&(e.at=0),this.pageStart=e.start,this.pageSize=e.size,this.fetch(e).promise()},"populateRange":function(i){var r=t.Deferred();if(this.populatePromise&&"pending"===this.populatePromise.state())return r.reject().promise();this.populatedRange||(this.populatedRange={"start":0,"end":0});var s=n.difference(i,this.populatedRange)[0];
if(!s)return r.resolve().promise();s=n.degap(s,this.populatedRange);var a=e.extend(i,s);a.prepend=s.start<this.populatedRange.start;var o=this.fetchRange(a);return o.done(e.bind(function(e){this.populatedRange={"start":n.union(this.populatedRange,s)[0].start,"size":e.length},r.resolve(e)},this)),o.fail(r.reject),r.promise()},"remove":function(t){var n=e.isArray(t)?t.length:1;this.populatedRange&&this.populatedRange.end&&(this.populatedRange.end-=n)}};return i}),function(e){function t(e,t){return function(n){return l(e.call(this,n),t)
}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function r(e){w(e),a(this,e)}function s(e){var t=f(e),n=t.year||0,i=t.month||0,r=t.week||0,s=t.day||0,a=t.hour||0,o=t.minute||0,l=t.second||0,u=t.millisecond||0;this._input=e,this._milliseconds=+u+1e3*l+6e4*o+36e5*a,this._days=+s+7*r,this._months=+i+12*n,this._data={},this._bubble()}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e
}function o(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function u(e,t,n,i){var r,s,a=t._milliseconds,o=t._days,l=t._months;a&&e._d.setTime(+e._d+a*n),(o||l)&&(r=e.minute(),s=e.hour()),o&&e.date(e.date()+o*n),l&&e.month(e.month()+l*n),a&&!i&&tt.updateOffset(e),(o||l)&&(e.minute(r),e.hour(s))}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date
}function h(e,t,n){var i,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&a++;return a+s}function p(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Nt[e]||Ot[t]||t}return e}function f(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=p(n),t&&(i[t]=e[n]));return i}function m(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}tt[t]=function(r,s){var a,o,l=tt.fn._lang[t],u=[];
if("number"==typeof r&&(s=r,r=e),o=function(e){var t=tt().utc().set(i,e);return l.call(tt.fn._lang,t,r||"")},null!=s)return o(s);for(a=0;n>a;a++)u.push(o(a));return u}}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function y(e){return b(e)?366:365}function b(e){return 0===e%4&&0!==e%100||0===e%400}function w(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[at]<0||e._a[at]>11?at:e._a[ot]<1||e._a[ot]>v(e._a[st],e._a[at])?ot:e._a[lt]<0||e._a[lt]>23?lt:e._a[ut]<0||e._a[ut]>59?ut:e._a[ct]<0||e._a[ct]>59?ct:e._a[dt]<0||e._a[dt]>999?dt:-1,e._pf._overflowDayOfYear&&(st>t||t>ot)&&(t=ot),e._pf.overflow=t)
}function x(e){e._pf={"empty":!1,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":!1,"invalidMonth":null,"invalidFormat":!1,"userInvalidated":!1,"iso":!1}}function S(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e
}function C(e,t){return t.abbr=e,ht[e]||(ht[e]=new i),ht[e].set(t),ht[e]}function _(e){delete ht[e]}function T(e){var t,n,i,r,s=0,a=function(e){if(!ht[e]&&pt)try{require("./lang/"+e)}catch(t){}return ht[e]};if(!e)return tt.fn._lang;if(!c(e)){if(n=a(e))return n;e=[e]}for(;s<e.length;){for(r=k(e[s]).split("-"),t=r.length,i=k(e[s+1]),i=i?i.split("-"):null;t>0;){if(n=a(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&h(r,i,!0)>=t-1)break;t--}s++}return tt.fn._lang}function M(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")
}function A(e){var t,n,i=e.match(vt);for(t=0,n=i.length;n>t;t++)i[t]=zt[i[t]]?zt[i[t]]:M(i[t]);return function(r){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(r,e):i[t];return s}}function I(e,t){return e.isValid()?(t=P(t,e.lang()),Vt[t]||(Vt[t]=A(t)),Vt[t](e)):e.lang().invalidDate()}function P(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(yt.lastIndex=0;i>=0&&yt.test(e);)e=e.replace(yt,n),yt.lastIndex=0,i-=1;return e}function E(e,t){var n;switch(e){case"DDDD":return xt;
case"YYYY":case"GGGG":case"gggg":return St;case"YYYYY":case"GGGGG":case"ggggg":return kt;case"S":case"SS":case"SSS":case"DDD":return wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return _t;case"a":case"A":return T(t._l)._meridiemParse;case"X":return At;case"Z":case"ZZ":return Tt;case"T":return Mt;case"SSSS":return Ct;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return bt;
default:return n=new RegExp(j(V(e.replace("\\","")),"i"))}}function D(e){var t=(Tt.exec(e)||[])[0],n=(t+"").match(Lt)||["-",0,0],i=+(60*n[1])+g(n[2]);return"+"===n[0]?-i:i}function L(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[at]=g(t)-1);break;case"MMM":case"MMMM":i=T(n._l).monthsParse(t),null!=i?r[at]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[ot]=g(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=g(t));break;case"YY":r[st]=g(t)+(g(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":r[st]=g(t);
break;case"a":case"A":n._isPm=T(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[lt]=g(t);break;case"m":case"mm":r[ut]=g(t);break;case"s":case"ss":r[ct]=g(t);break;case"S":case"SS":case"SSS":case"SSSS":r[dt]=g(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=D(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)
}}function R(e){var t,n,i,r,s,a,o,l,u,c,d=[];if(!e._d){for(i=N(e),e._w&&null==e._a[ot]&&null==e._a[at]&&(s=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[st]?tt().weekYear():e._a[st]},a=e._w,null!=a.GG||null!=a.W||null!=a.E?o=Q(s(a.GG),a.W||1,a.E,4,1):(l=T(e._l),u=null!=a.d?$(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,c=parseInt(a.w,10)||1,null!=a.d&&u<l._week.dow&&c++,o=Q(s(a.gg),c,u,l._week.doy,l._week.dow)),e._a[st]=o.year,e._dayOfYear=o.dayOfYear),e._dayOfYear&&(r=null==e._a[st]?i[st]:e._a[st],e._dayOfYear>y(r)&&(e._pf._overflowDayOfYear=!0),n=q(r,0,e._dayOfYear),e._a[at]=n.getUTCMonth(),e._a[ot]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=i[t];
for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[lt]+=g((e._tzm||0)/60),d[ut]+=g((e._tzm||0)%60),e._d=(e._useUTC?q:F).apply(null,d)}}function B(e){var t;e._d||(t=f(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],R(e))}function N(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function O(e){e._a=[],e._pf.empty=!0;var t,n,i,r,s,a=T(e._l),o=""+e._i,l=o.length,u=0;for(i=P(e._f,a).match(vt)||[],t=0;t<i.length;t++)r=i[t],n=(E(r,e).exec(o)||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),u+=n.length),zt[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),L(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);
e._pf.charsLeftOver=l-u,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[lt]<12&&(e._a[lt]+=12),e._isPm===!1&&12===e._a[lt]&&(e._a[lt]=0),R(e),w(e)}function V(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function j(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e){var t,n,i,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)s=0,t=a({},e),x(t),t._f=e._f[r],O(t),S(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==i||i>s)&&(i=s,n=t));
a(e,n||t)}function z(e){var t,n=e._i,i=It.exec(n);if(i){for(e._pf.iso=!0,t=4;t>0;t--)if(i[t]){e._f=Et[t-1]+(i[6]||" ");break}for(t=0;4>t;t++)if(Dt[t][1].exec(n)){e._f+=Dt[t][0];break}Tt.exec(n)&&(e._f+="Z"),O(e)}else e._d=new Date(n)}function U(t){var n=t._i,i=ft.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?z(t):c(n)?(t._a=n.slice(0),R(t)):d(n)?t._d=new Date(+n):"object"==typeof n?B(t):t._d=new Date(n)}function F(e,t,n,i,r,s,a){var o=new Date(e,t,n,i,r,s,a);return 1970>e&&o.setFullYear(e),o
}function q(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function $(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function W(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function K(e,t,n){var i=rt(Math.abs(e)/1e3),r=rt(i/60),s=rt(r/60),a=rt(s/24),o=rt(a/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===s&&["h"]||22>s&&["hh",s]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",rt(a/30)]||1===o&&["y"]||["yy",o];
return l[2]=t,l[3]=e>0,l[4]=n,W.apply({},l)}function X(e,t,n){var i,r=n-t,s=n-e.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=tt(e).add("d",s),{"week":Math.ceil(i.dayOfYear()/7),"year":i.year()}}function Q(e,t,n,i,r){var s,a,o=new Date(Date.UTC(e,0)).getUTCDay();return n=null!=n?n:r,s=r-o+(o>i?7:0),a=7*(t-1)+(n-r)+s+1,{"year":a>0?e:e-1,"dayOfYear":a>0?a:y(e-1)+a}}function G(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&x(e),null===t?tt.invalid({"nullInput":!0}):("string"==typeof t&&(e._i=t=T().preparse(t)),tt.isMoment(t)?(e=a({},t),e._d=new Date(+t._d)):n?c(n)?H(e):O(e):U(e),new r(e))
}function Y(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),tt.updateOffset(this),this):this._d["get"+n+t]()}}function J(e){tt.duration.fn[e]=function(){return this._data[e]}}function Z(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(e){var t=!1,n=tt;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)
}:tt)}for(var tt,nt,it="2.4.0",rt=Math.round,st=0,at=1,ot=2,lt=3,ut=4,ct=5,dt=6,ht={},pt="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,mt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bt=/\d\d?/,wt=/\d{1,3}/,xt=/\d{3}/,St=/\d{1,4}/,kt=/[+\-]?\d{1,6}/,Ct=/\d+/,_t=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/i,Mt=/T/i,At=/[\+\-]?\d+(\.\d{1,3})?/,It=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Pt="YYYY-MM-DDTHH:mm:ssZ",Et=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Dt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Lt=/([\+\-]|\d\d)/gi,Rt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Bt={"Milliseconds":1,"Seconds":1e3,"Minutes":6e4,"Hours":36e5,"Days":864e5,"Months":2592e6,"Years":31536e6},Nt={"ms":"millisecond","s":"second","m":"minute","h":"hour","d":"day","D":"date","w":"week","W":"isoWeek","M":"month","y":"year","DDD":"dayOfYear","e":"weekday","E":"isoWeekday","gg":"weekYear","GG":"isoWeekYear"},Ot={"dayofyear":"dayOfYear","isoweekday":"isoWeekday","isoweek":"isoWeek","weekyear":"weekYear","isoweekyear":"isoWeekYear"},Vt={},jt="DDD w W M D d".split(" "),Ht="M D H h m s w W".split(" "),zt={"M":function(){return this.month()+1
},"MMM":function(e){return this.lang().monthsShort(this,e)},"MMMM":function(e){return this.lang().months(this,e)},"D":function(){return this.date()},"DDD":function(){return this.dayOfYear()},"d":function(){return this.day()},"dd":function(e){return this.lang().weekdaysMin(this,e)},"ddd":function(e){return this.lang().weekdaysShort(this,e)},"dddd":function(e){return this.lang().weekdays(this,e)},"w":function(){return this.week()},"W":function(){return this.isoWeek()},"YY":function(){return l(this.year()%100,2)
},"YYYY":function(){return l(this.year(),4)},"YYYYY":function(){return l(this.year(),5)},"gg":function(){return l(this.weekYear()%100,2)},"gggg":function(){return this.weekYear()},"ggggg":function(){return l(this.weekYear(),5)},"GG":function(){return l(this.isoWeekYear()%100,2)},"GGGG":function(){return this.isoWeekYear()},"GGGGG":function(){return l(this.isoWeekYear(),5)},"e":function(){return this.weekday()},"E":function(){return this.isoWeekday()},"a":function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)
},"A":function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},"H":function(){return this.hours()},"h":function(){return this.hours()%12||12},"m":function(){return this.minutes()},"s":function(){return this.seconds()},"S":function(){return g(this.milliseconds()/100)},"SS":function(){return l(g(this.milliseconds()/10),2)},"SSS":function(){return l(this.milliseconds(),3)},"SSSS":function(){return l(this.milliseconds(),3)},"Z":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(e/60),2)+":"+l(g(e)%60,2)
},"ZZ":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(10*e/6),4)},"z":function(){return this.zoneAbbr()},"zz":function(){return this.zoneName()},"X":function(){return this.unix()}},Ut=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];jt.length;)nt=jt.pop(),zt[nt+"o"]=n(zt[nt],nt);for(;Ht.length;)nt=Ht.pop(),zt[nt+nt]=t(zt[nt],2);for(zt.DDDD=t(zt.DDD,3),a(i.prototype,{"set":function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},"_months":"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"months":function(e){return this._months[e.month()]
},"_monthsShort":"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"monthsShort":function(e){return this._monthsShort[e.month()]},"monthsParse":function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=tt.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},"_weekdays":"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"weekdays":function(e){return this._weekdays[e.day()]
},"_weekdaysShort":"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"weekdaysShort":function(e){return this._weekdaysShort[e.day()]},"_weekdaysMin":"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"weekdaysMin":function(e){return this._weekdaysMin[e.day()]},"weekdaysParse":function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=tt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t
},"_longDateFormat":{"LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D YYYY","LLL":"MMMM D YYYY LT","LLLL":"dddd, MMMM D YYYY LT"},"longDateFormat":function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},"isPM":function(e){return"p"===(e+"").toLowerCase().charAt(0)},"_meridiemParse":/[ap]\.?m?\.?/i,"meridiem":function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"
},"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"calendar":function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"relativeTime":function(e,t,n,i){var r=this._relativeTime[n];
return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},"pastFuture":function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},"ordinal":function(e){return this._ordinal.replace("%d",e)},"_ordinal":"%d","preparse":function(e){return e},"postformat":function(e){return e},"week":function(e){return X(e,this._week.dow,this._week.doy).week},"_week":{"dow":0,"doy":6},"_invalidDate":"Invalid date","invalidDate":function(){return this._invalidDate}}),tt=function(t,n,i,r){return"boolean"==typeof i&&(r=i,i=e),G({"_i":t,"_f":n,"_l":i,"_strict":r,"_isUTC":!1})
},tt.utc=function(t,n,i,r){var s;return"boolean"==typeof i&&(r=i,i=e),s=G({"_useUTC":!0,"_isUTC":!0,"_l":i,"_i":t,"_f":n,"_strict":r}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var n,i,r,a=tt.isDuration(e),o="number"==typeof e,l=a?e._input:o?{}:e,u=null;return o?t?l[t]=e:l.milliseconds=e:(u=mt.exec(e))?(n="-"===u[1]?-1:1,l={"y":0,"d":g(u[ot])*n,"h":g(u[lt])*n,"m":g(u[ut])*n,"s":g(u[ct])*n,"ms":g(u[dt])*n}):(u=gt.exec(e))&&(n="-"===u[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));
return(isNaN(t)?0:t)*n},l={"y":r(u[2]),"M":r(u[3]),"d":r(u[4]),"h":r(u[5]),"m":r(u[6]),"s":r(u[7]),"w":r(u[8])}),i=new s(l),a&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},tt.version=it,tt.defaultFormat=Pt,tt.updateOffset=function(){},tt.lang=function(e,t){var n;return e?(t?C(k(e),t):null===t?(_(e),e="en"):ht[e]||T(e),n=tt.duration.fn._lang=tt.fn._lang=T(e),n._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),T(e)},tt.isMoment=function(e){return e instanceof r
},tt.isDuration=function(e){return e instanceof s},nt=Ut.length-1;nt>=0;--nt)m(Ut[nt]);for(tt.normalizeUnits=function(e){return p(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?a(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},a(tt.fn=r.prototype,{"clone":function(){return tt(this)},"valueOf":function(){return+this._d+6e4*(this._offset||0)},"unix":function(){return Math.floor(+this/1e3)},"toString":function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
},"toDate":function(){return this._offset?new Date(+this):this._d},"toISOString":function(){return I(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},"toArray":function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},"isValid":function(){return S(this)},"isDSTShifted":function(){return this._a?this.isValid()&&h(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},"parsingFlags":function(){return a({},this._pf)},"invalidAt":function(){return this._pf.overflow
},"utc":function(){return this.zone(0)},"local":function(){return this.zone(0),this._isUTC=!1,this},"format":function(e){var t=I(this,e||tt.defaultFormat);return this.lang().postformat(t)},"add":function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),u(this,n,1),this},"subtract":function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),u(this,n,-1),this},"diff":function(e,t,n){var i,r,s=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),a=6e4*(this.zone()-s.zone());
return t=p(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),r+=(this-tt(this).startOf("month")-(s-tt(s).startOf("month")))/i,r-=6e4*(this.zone()-tt(this).startOf("month").zone()-(s.zone()-tt(s).startOf("month").zone()))/i,"year"===t&&(r/=12)):(i=this-s,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:o(r)},"from":function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)
},"fromNow":function(e){return this.from(tt(),e)},"calendar":function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},"isLeapYear":function(){return b(this.year())},"isDST":function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},"day":function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();
return null!=e?(e=$(e,this.lang()),this.add({"d":e-t})):t},"month":function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+n+"Month"]()},"startOf":function(e){switch(e=p(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);
case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},"endOf":function(e){return e=p(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},"isAfter":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},"isBefore":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},"isSame":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)
},"min":function(e){return e=tt.apply(null,arguments),this>e?this:e},"max":function(e){return e=tt.apply(null,arguments),e>this?this:e},"zone":function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=D(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&u(this,tt.duration(t-e,"m"),1,!0),this)},"zoneAbbr":function(){return this._isUTC?"UTC":""},"zoneName":function(){return this._isUTC?"Coordinated Universal Time":""},"parseZone":function(){return"string"==typeof this._i&&this.zone(this._i),this
},"hasAlignedHourOffset":function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},"daysInMonth":function(){return v(this.year(),this.month())},"dayOfYear":function(e){var t=rt((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},"weekYear":function(e){var t=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},"isoWeekYear":function(e){var t=X(this,1,4).year;return null==e?t:this.add("y",e-t)},"week":function(e){var t=this.lang().week(this);
return null==e?t:this.add("d",7*(e-t))},"isoWeek":function(e){var t=X(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},"weekday":function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},"isoWeekday":function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},"get":function(e){return e=p(e),this[e]()},"set":function(e,t){return e=p(e),"function"==typeof this[e]&&this[e](t),this},"lang":function(t){return t===e?this._lang:(this._lang=T(t),this)}}),nt=0;nt<Rt.length;nt++)Y(Rt[nt].toLowerCase().replace(/s$/,""),Rt[nt]);
Y("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,a(tt.duration.fn=s.prototype,{"_bubble":function(){var e,t,n,i,r=this._milliseconds,s=this._days,a=this._months,l=this._data;l.milliseconds=r%1e3,e=o(r/1e3),l.seconds=e%60,t=o(e/60),l.minutes=t%60,n=o(t/60),l.hours=n%24,s+=o(n/24),l.days=s%30,a+=o(s/30),l.months=a%12,i=o(a/12),l.years=i},"weeks":function(){return o(this.days()/7)},"valueOf":function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)
},"humanize":function(e){var t=+this,n=K(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},"add":function(e,t){var n=tt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},"subtract":function(e,t){var n=tt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},"get":function(e){return e=p(e),this[e.toLowerCase()+"s"]()},"as":function(e){return e=p(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()
},"lang":tt.fn.lang,"toIsoString":function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"}});for(nt in Bt)Bt.hasOwnProperty(nt)&&(Z(nt,Bt[nt]),J(nt.toLowerCase()));Z("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()
},tt.lang("en",{"ordinal":function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),pt?(module.exports=tt,et(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,i){return i.config().noGlobal!==!0&&et(i.config().noGlobal===e),tt}):et()}.call(this),define("plex/base/utils/formatters/NumberUtil",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"leadingZero":function(t){if(t=parseInt(t,10),e.isNaN(t))return"";
var n=10>t?"0":"";return n+t},"bytesToSize":function(t,n){if(t=parseInt(t,10),n=n||1,e.isNaN(t))return"";if(0===t)return"0 Bytes";var i=["Bytes","KB","MB","GB","TB"],r=parseInt(Math.floor(Math.log(t)/Math.log(1024)),10);return(t/Math.pow(1024,r)).toFixed(n)+" "+i[r]}});return new n}),define("plex/base/utils/MediaUtil",["underscore","jquery","moment","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/formatters/NumberUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,r,s,a){var o=i.extend({"capabilities":"protocols=http-live-streaming,http-mp4-streaming,http-streaming-video,http-streaming-video-720p,http-mp4-video,http-mp4-video-720p;videoDecoders=h264{profile:high&resolution:1080&level:51};audioDecoders=mp3,aac{bitrate:160000}","bitrates":["64","96","208","320","720","1500","2000","3000","4000","8000","10000","12000","20000"],"resolutions":["220x180","220x128","284x160","420x240","576x320","720x480","1024x768","1280x720","1280x720","1920x1080","1920x1080","1920x1080","1920x1080"],"qualities":["10","20","30","30","40","60","60","75","100","60","75","90","100"],"genericBitrates":{"1080":1e4,"720":3e3,"480":1500,"sd":720},"timelineDelay":1e4,"pingDelay":3e4,"playbackDelay":1e3,"timeline":function(n){var i=n.item,s=n.media,a=n.part,o=i.get("ratingKey"),l=i.get("type");
if(!o)return t.Deferred().resolve().promise();var u={"ratingKey":o,"key":i.get("key"),"state":n.state};if(n.continuing&&(u.continuing="1"),i.get("playQueueItemID")&&(u.playQueueItemID=i.get("playQueueItemID")),!("photo"===l||s&&a))return t.Deferred().resolve().promise();if("photo"!==l){var c=i.get("viewOffset")||0,d=s.duration;if(e.isNumber(n.position)&&(c=n.position,c=this.getAbsoluteOffset(s,a,c)),d||e.isNumber(n.duration)&&(d=n.duration,s.duration=d),!d)return t.Deferred().resolve().promise();
c>d&&(c=d),u.time=c,u.duration=d,"track"!==l&&i.isLibraryItem()&&this.setViewOffset(i,c,d)}var h="timeline: "+u.state;null!=u.time&&(h+=", "+u.time+"/"+u.duration),r.log(h);var p="/:/timeline?"+t.param(u,!0);return t.ajax(i.server.getXHROptions(p))},"setViewOffset":function(e,t,n){6e4>t||(t>.9*n?(e.set("viewOffset",0),e.set("viewCount",1)):e.set("viewOffset",t))},"ping":function(e,n){if(!n)return t.Deferred().resolve().promise();r.log("ping transcoder");var i;return i=e.supports("universalTranscoder")?"/video/:/transcode/universal/ping?session="+n:"/video/:/transcode/segmented/ping?session="+n,t.ajax(e.getXHROptions(i))
},"stop":function(e,n){if(!n)return t.Deferred().resolve().promise();r.log("stop transcoder");var i;return i=e.supports("universalTranscoder")?"/video/:/transcode/universal/stop?session="+n:"/video/:/transcode/segmented/stop?session="+n,t.ajax(e.getXHROptions(i))},"getMediaIndex":function(t,n){var i=t.get("Media");return e.indexOf(i,n)},"getPartIndex":function(t,n){return t?e.indexOf(t.Part,n):-1},"getPartCount":function(e){return e?e.Part.length:0},"getStreams":function(t,n){var i=[];if(t){var r=e.first(t.Part);
r&&r.Stream&&i.push.apply(i,e.where(r.Stream,n))}return i},"getMissingParts":function(t){var n=[];return e.isArray(t)||(t=[t]),e.each(t,function(t){var i=t.Part;i&&e.each(i,function(e){(e.exists===!1||e.accessible===!1)&&n.push(e)})}),n},"getMediaByBitrate":function(t,n){if(!t||!t.length)return!1;if(1===t.length)return t[0];for(var i=e.sortBy(t,e.bind(function(e){var t=e.bitrate;return!t&&e.videoResolution&&(t=this.genericBitrates[e.videoResolution],e.bitrate=t),-1*t},this)),r=0,s=i.length;s>r;r++){var a=i[r];
if(a.bitrate<=n)return a}return e.last(t)},"getRelativeOffset":function(e,t,n){var i=n;if(e.Part.length>1)for(var r=0,s=e.Part.length;s>r;r++){var a=e.Part[r];if(!a.duration)break;if(t.key===a.key)break;i-=a.duration}return i},"getAbsoluteOffset":function(e,t,n){var i=n;if(e.Part.length>1)for(var r=0,s=e.Part.length;s>r;r++){var a=e.Part[r];if(!a.duration)break;if(t.key===a.key)break;i+=a.duration}return i},"getPartByAbsoluteOffset":function(t,n){var i;if(t.Part.length>1)for(var r=0,s=0,a=t.Part.length;a>s&&(i=t.Part[s],i.duration)&&(r+=i.duration,!(r>n));s++);else i=e.first(t.Part);
return i},"getQualityInfo":function(e,t){var n;n=e.isLibraryItem()?e.server.hasLocalConnection()?"localQuality":"remoteQuality":"channelQuality";var i=t.get(n);(0>i||i>=this.bitrates.length)&&(r.warn("quality "+i+" is out of bounds"),i=t.defaults[n],t.save(n,i));var s=this.qualities[i],a=this.resolutions[i],o=this.bitrates[i];return r.info("playing video at "+a+", "+o),{"attribute":n,"index":i,"quality":s,"resolution":a,"bitrate":o}},"getScreenshotIndex":function(t,n){if(t.indexes){var i=t.indexes.split(",");
if(i.length)return e.indexOf(i,n)>-1?n:i[0]}},"getScreenshotUrl":function(e,t,n){var i=this.getPartByAbsoluteOffset(e,t);if(n=this.getScreenshotIndex(i,n)){var r=this.getRelativeOffset(e,i,t);return i.key.replace(/[^\/]*$/,"")+"indexes/"+n+"/"+r}},"getSeasonIndex":function(e){var t=a.get(),n=e.seasonPrefix||"S{1}",i=e.seasonIndex;return i>1e3?i:(e.noLeadingZero||(i=s.leadingZero(i)),t.t(n,i))},"getSeasonEpisodeIndex":function(e){var t=a.get(),i=e.seasonPrefix||"S{1}",r=e.episodePrefix||"E{1}",o=e.seasonIndex,l=e.episodeIndex;
return l>0&&1e3>o?(e.noLeadingZero||(o=s.leadingZero(o),l=s.leadingZero(l)),t.t(i,o)+t.t(r,l)):e.date?n(e.date).format("M/D/YY"):""},"getEpisodeIndex":function(e){var t=a.get(),i=e.episodePrefix||"E{1}",r=e.episodeIndex||0;return r>0?(e.noLeadingZero||(r=s.leadingZero(r)),t.t(i,r)):e.date?n(e.date).format("M/D/YY"):""}});return new o}),define("plex/base/utils/types/StreamTypes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"types":[{"id":1,"typeString":"video","title":"Video"},{"id":2,"typeString":"audio","title":"Audio"},{"id":3,"typeString":"subtitles","title":"Subtitles"}],"initialize":function(){this.byID=e.reduce(this.types,function(e,t){return e[t.id]=t,e
},{}),this.byType=e.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{})},"getStreamType":function(e){return this.byID[e]},"getStreamTypeByString":function(e){return this.byType[e]}});return new n}),define("plex/base/models/library/MetadataModel",["require","underscore","jquery","plex/base/utils/Parser","plex/base/utils/MediaUtil","plex/base/utils/types/MediaTypes","plex/base/utils/types/StreamTypes","plex/base/adapters/LocalizerAdapter","plex/base/models/BaseModel"],function(e,t,n,i,r,s,a,o,l){var u=l.extend({"idAttribute":"ratingKey","defaults":{"title":"","titleSort":"","tagline":"","rating":"","summary":"","year":"","studio":"","contentRating":"","originallyAvailableAt":"","originalTitle":"","thumb":"","banner":"","art":""},"omittedSaveAttrs":["updatedAt","thumb","banner","art","Media","Location"],"subcollections":["Media","Genre","Collection","Field","Writer","Director","Role","Country","Location"],"url":function(){return this.get("key")
},"urlRoot":function(){return this.get("key")},"cacheKey":function(e){e.identifier&&!this.isLibraryItem(e)&&(e=this.normalizeKey(e));var t=this.normalizeChildrenKey(e.key);return this.server&&this.server.getScopedKey(t.key)},"initialize":function(){this.listenTo(this,"socket:timeline",function(e){5===e.state?this.fetch():9===e.state&&this.trigger("destroy",this,this.collection)})},"convert":function(e){var n=t.isObject(e)?e:i.parseXML(e);if(!n.ratingKey&&!n.key&&!n.id){var r=n.Directory||n.Video||n.Track||n.Photo||n;
r.identifier=n.identifier,r.mediaTagPrefix=n.mediaTagPrefix,r.mediaTagVersion=n.mediaTagVersion,r.allowSync=n.allowSync,r.librarySectionID=n.librarySectionID,r.librarySectionUUID=n.librarySectionUUID,n=r}i.parseBoolean(n,["allowSync","selected"]),i.parseInteger(n,["index","parentIndex","duration","viewOffset","viewCount","leafCount","viewedLeafCount","lastViewedAt","addedAt","updatedAt"]),i.parseArray(n,this.subcollections);var s=n.Media;return t.each(s,function(e){i.parseBoolean(e,["indirect","optimizedForStreaming"]),i.parseInteger(e,["id","duration","width","height","bitrate"]),i.parseArray(e,"Part");
var n=e.Part;t.each(n,function(e){i.parseBoolean(e,"optimizedForStreaming"),i.parseInteger(e,["id","duration","size"]),i.parseArray(e,"Stream"),e.exists="0"!==e.exists,e.accessible="0"!==e.accessible;var n=e.Stream;t.each(n,function(e){i.parseBoolean(e,"selected"),i.parseInteger(e,["id","index","streamType","duration","width","height","bitrate","bitDepth","samplingRate"])})})}),n},"parse":function(n){var i=this.convert(n);if(!i.key)return i;this.isLibraryItem(i)||(i=this.normalize(i)),"photo"===i.type&&/\/children$/.test(i.key)&&(i.type="photoAlbum"),"photoalbum"===i.type&&(i.type="photoAlbum"),i.isFolder=/\/folder\?parent\=/.test(i.key);
var s=this.normalizeChildrenKey(i.key);if(s.hasChildren){if(!this.get("children")){var l=e("plex/base/models/library/MetadataCollection"),u=new l([],{"server":this.server,"section":this.section,"parent":this});u.url=s.previousKey,this.set("children",u)}i.key=s.key}null!=i.viewedLeafCount&&(i.unviewedLeafCount=i.leafCount-i.viewedLeafCount);var c=i.Media,d=a.getStreamTypeByString("subtitles");return t.each(c,function(e){var n=t.first(e.Part);if(n&&n.Stream){var i=n.Stream,s=r.getStreams(e,{"streamType":d.id,"selected":!0}),a={"id":0,"streamType":d.id,"language":o.get().t("None")};
s.length||(a.selected=!0),i.unshift(a)}}),t.defaults(i,this.defaults),i},"normalize":function(e){return e=this.normalizeKey(e),e=this.normalizeType(e),e=this.normalizeMetadata(e)},"normalizeChildrenKey":function(e){var t=/(.*)\/children$/.exec(e),n=e;return t&&(e=t[1]),{"key":e,"previousKey":n,"hasChildren":!!t}},"normalizeKey":function(e){var t=e.key.split("/");return 1===t.length&&e.containerKey&&(e.hasInvalidKey=!0,e.originalKey=e.key,e.key=e.containerKey+"/"+e.key),e.ratingKey||(e.ratingKey=e.originalKey||e.key),e
},"normalizeType":function(e){return e.mediaType&&!e.type&&(e.type=e.mediaType,delete e.mediaType),e.elementName&&!e.type&&(e.type=e.elementName.toLowerCase()),/image/i.test(e.type)?e.type="photo":/(movie|episode|video)/i.test(e.type)&&(e.type="clip"),s.getMediaTypeByString(e.type)||(e.type="channelDirectory"),e},"normalizeMetadata":function(e){return e.label?(e.title=e.label,delete e.label):e.artist&&(e.track?(e.title=e.track,e.originalTitle=e.artist,e.parentTitle=e.album,e.grandparentTitle=e.albumArtist):e.album?(e.title=e.album,e.parentTitle=e.artist):e.title=e.artist,delete e.track,delete e.album,delete e.albumArtist,delete e.artist),e.totalTime&&(e.duration=e.totalTime,delete e.totalTime),e
},"resolveIndirect":function(e,i){var r=n.Deferred(),s=t.bind(function(){r.resolve(this)},this),a=t.bind(function(){r.reject(this)},this);if(e&&e.indirect)if(i)if(i.postURL){var o=this.server.get("cloud")||this.server.get("synced"),l=o?this.server.parent.get("primaryServer"):this.server,u=this.server.getXHROptions(i.postURL);l?(u.headers=u.headers||{},u.headers["X-Plex-Url"]=u.url,u.url=l.resolveUrl("/system/proxy"),n.ajax(u).done(t.bind(function(r,o,c){var d=c.getAllResponseHeaders()+"\r\n"+r;u=l.getXHROptions(i.key+"&postURL="+encodeURIComponent(i.postURL)),u.type="POST",u.headers=u.headers||{},u.headers["X-Plex-Url"]=u.url,u.url=l.resolveUrl("/system/proxy"),u.data=d,n.ajax(u).done(t.bind(function(t){this.mergeIndirectResponse(t,e,i)?s():a()
},this)).fail(a)},this)).fail(a)):a()}else{var c=this.server.getXHROptions(i.key);n.ajax(c).done(t.bind(function(t){this.mergeIndirectResponse(t,e,i)?s():a()},this)).fail(a)}else a();else s();return r.promise()},"mergeIndirectResponse":function(e,n,r){var s=i.parseXML(e);if(!(s&&s.Video&&s.Video.Media&&s.Video.Media.Part))return!1;var a=this.parse(s.Video),o=t.first(a.Media),l=t.first(o.Part);if(o.Part.length>1){var u=t.indexOf(n.Part,r);u<o.Part.length&&(l=o.Part[u])}if(!o||!l)return!1;if(o.indirect=!1,t.extend(n,t.omit(o,"Part")),t.extend(r,l),s.httpHeaders){for(var c,d=new RegExp("([^=]+)=([^&]+)&?","g"),h={};c=d.exec(s.httpHeaders);)c[1]in h?(t.isArray(h[c[1]])||(h[c[1]]=[h[c[1]]]),h[c[1]].push(c[2])):h[c[1]]=c[2];
this.set("indirectHttpHeaders",h,{"silent":!0})}return!0},"getSaveParams":function(e){return t.each(e.Field,function(t){e[t.name+".locked"]=t.locked}),delete e.Field,t.each(["Collection","Director","Writer","Genre","Country"],function(n){n in e&&(t.isEmpty(e[n])?e[n.toLowerCase()+"[]"]="":t.each(e[n],function(t,i){e[n.toLowerCase()+"["+i+"].tag.tag"]=t.tag}),delete e[n])}),e},"batchAdd":function(e,i,r){var s=t.pluck(e,"id").join(","),a="/library/metadata/"+s+"/"+i+"/add?tag="+encodeURIComponent(r),o=t.extend(this.server.getXHROptions(a),{"type":"PUT"});
return n.ajax(o)},"getDownloadUrl":function(){var e=t.first(this.get("Media"));if(e){var n=t.first(e.Part);if(n&&n.key)return this.server.resolveUrl(n.key,{"appendToken":!0})}return""},"getFilepath":function(){var e=t.first(this.get("Media"));if(e){var n=t.first(e.Part);if(n)return n.file}return null},"getLocation":function(){var e=t.first(this.get("Location"));return e?e.path:this.getFilepath()},"getMediaKey":function(){var e=t.first(this.get("Media")),n=this.get("key");if(e){var i=t.first(e.Part);
if(i)return i.key}return n},"isLibraryItem":function(e){var t=e?e.identifier:this.get("identifier");if(t)return"com.plexapp.plugins.library"===t;var n=e?e.key:this.get("key");return/^(\/sync\/[A-Za-z0-9-\/]*)?\/library\//.test(n)}});return u}),define("plex/base/models/library/MetadataCollection",["underscore","plex/base/utils/Parser","plex/base/mixins/PaginationMixin","plex/base/models/BaseCollection","plex/base/models/library/MetadataModel"],function(e,t,n,i,r){var s=i.extend({"mixins":n,"model":r,"subcollections":["Directory","Video","Track","Photo"],"collectionProperties":["key","totalSize","viewGroup","allowSync","title","grandparentTitle","art"],"url":function(){var t=this.section||this.parent;
return t?e.result(t,"url"):""},"initialize":function(e,t){t||(t={}),this.allowAllLeaves=t.allowAllLeaves,this.populatedRange={"start":0,"end":0}},"parse":function(n){if(e.isString(n)){var i=this.subcollections.join("|"),r=new RegExp("<("+i+")","g"),s=new RegExp("</("+i+")>","g");n=n.replace(r,'<Metadata elementName="$1"'),n=n.replace(s,"</Metadata>")}var a=this.convert(n);null==a.totalSize&&(a.totalSize=a.size),t.parseInteger(a,"totalSize"),t.parseBoolean(a,"allowSync"),t.parseArray(a,"Metadata"),e.each(this.collectionProperties,function(e){var t=this[e],n=a[e],i=this.section?this.section.get("currentSubset").id:null,r=i&&"all"!==i&&"folder"!==i;
r&&"totalSize"===e&&n>200&&(n=200),void 0!==n&&t!==n&&(this[e]=n,this.trigger("change:"+e,this,n))},this);var o=e.result(this,"url");return e.each(a.Metadata,function(e){e.containerKey=o,a.identifier&&(e.identifier=a.identifier),a.mediaTagPrefix&&(e.mediaTagPrefix=a.mediaTagPrefix),a.mediaTagVersion&&(e.mediaTagVersion=a.mediaTagVersion)},this),this.allowAllLeaves?a.Metadata:e.reject(a.Metadata,function(e){var t=/\/allLeaves$/.test(e.key);return t&&this.totalSize&&(this.totalSize-=1),t},this)},"remove":function(){i.prototype.remove.apply(this,arguments),n.remove.apply(this,arguments)
},"clear":function(){i.prototype.clear.apply(this,arguments),this.totalSize=null,this.populatedRange={"start":0,"end":0}},"splitByType":function(){var e={};return this.each(function(t){var n=t.get("type");e.hasOwnProperty(n)?e[n].push(t):e[n]=[t]}),e},"filterByType":function(e){var t=this.filter(function(t){return t.get("type")===e});return this.clone(t)}});return s}),define("plex/base/models/library/SectionMetadataCollection",["underscore","plex/base/utils/types/MediaTypes","plex/base/models/library/MetadataCollection","plex/base/models/library/section/MediaTypeModel"],function(e,t,n,i){var r=n.extend({"pageStart":0,"pageSize":0,"url":function(){var t=this.section.get("currentFolderKey");
if(t)return t;var n=e.result(this.section,"url"),i=this.section.get("currentSubset"),r=i.id;if(!this.section.get("allowAdvancedFilters")){var s=this.section.get("currentFilters");return s.length?s[0].values[0]:n+"/"+r}("recentlyAdded"===r||"newest"===r)&&(r="all");var a=n+"/"+r;return a+=a.indexOf("?")>-1?"&":"?",a+=this.getUrlParams()},"initialize":function(){n.prototype.initialize.apply(this,arguments),this.server.get("synced")&&(this.pageStart=null,this.pageSize=null)},"clear":function(){n.prototype.clear.apply(this,arguments),this.server.get("synced")?(this.pageStart=null,this.pageSize=null):(this.pageStart=0,this.pageSize=0)
},"getUrlParams":function(){var e=this.getFilterUrlParams({"sendType":!0});return this.section.get("refreshing")&&this.server.supports("timelineState")&&e.push("timelineState=1"),e.length?e.join("&"):""},"getFilterUrlParams":function(n){n||(n={});var i={},r=[],s=this.getMediaType().id;n.sendType&&s&&s!==t.getMediaTypeByString("photo").id&&(i.type=s);var a=this.section.get("currentFilters");e.each(a,function(e){e.values.length&&(i[e.key]=e.values.join(","))});var o=this.getSort();o&&(i.sort=o);for(var l in i)r.push("unviewedLeafCount"===l?l+">="+i[l]:l+"="+i[l]);
return r},"getMediaType":function(){var e=this.section.get("currentType"),n=this.section.get("currentSubset");if(e||(e=t.getMediaTypeByString(this.section.get("type")),this.section.set("currentType",new i(e))),/^(onDeck|recentlyAdded|recentlyViewed|newest)$/.test(n.id)){if(e.id===t.getMediaTypeByString("show").id)return t.getMediaTypeByString("episode");if(e.id===t.getMediaTypeByString("artist").id)return t.getMediaTypeByString("album")}return this.parent&&"season"===this.parent.get("type")?t.getMediaTypeByString("episode"):e
},"getSort":function(){var e=this.section.get("currentSort"),t=this.section.get("currentSubset").id;return"recentlyAdded"===t?"addedAt:desc":"newest"===t?"originallyAvailableAt:desc":e?e.id+":"+e.get("direction"):!1}});return r}),define("plex/base/models/library/section/SectionModel",["underscore","plex/base/utils/Parser","plex/base/utils/types/SubsetTypes","plex/base/models/BaseModel","plex/base/models/library/section/SectionSubsetModel","plex/base/models/library/section/SectionSubsetCollection","plex/base/models/library/section/MediaTypeCollection","plex/base/models/library/section/FilterCollection","plex/base/models/library/section/LinearFilterCollection","plex/base/models/library/section/SortCollection","plex/base/models/library/section/AlphanumericCollection","plex/base/models/library/SectionMetadataCollection"],function(e,t,n,i,r,s,a,o,l,u,c,d){var h=i.extend({"idAttribute":"key","persistInCache":!0,"defaults":function(){return{"selecting":!1,"selectedModels":[],"currentType":null,"currentFilters":[],"currentSort":null,"currentFirstCharacter":null,"currentFolderKey":null}
},"url":function(){if(this.isNew())return e.result(this,"urlRoot")||e.result(this.collection,"url");var t=/\D+/.test(this.id),n=t?this.id:"/library/sections/"+this.id;return n},"whitelistedAttrs":["key","uuid","title","type","thumb","art","language","agent","scanner","createdAt","updatedAt","allowAdvancedFilters","refreshing","Location"],"whitelistedSaveAttrs":["name","title","type","agent","scanner","language","Location"],"cacheKey":function(e){return this.server&&this.server.getScopedKey(e.key)
},"initialize":function(){var t={"server":this.server,"section":this},i=this.get("allowAdvancedFilters")?o:l;this.set("currentSubset",new r(n.getSubsetType("all"),t)),this.set("subsets",new s([],t)),this.set("types",new a([],t)),this.set("filters",new i([],t)),this.set("sorts",new u([],t)),this.set("alphanumeric",new c([],t));var h=new d([],t);h.on("change:allowSync",e.bind(function(e,t){this.set("allowSync",t)},this)),this.set("items",h)},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseBoolean(i,["filters","refreshing"]),t.parseInteger(i,["createdAt","updatedAt"]),t.parseArray(i,"Location"),i},"parse":function(t){var n=this.convert(t);return n.allowAdvancedFilters=n.filters,n=e.pick(n,this.whitelistedAttrs)},"changedAttributes":function(){var t=i.prototype.changedAttributes.apply(this,arguments);return t&&(t=e.pick(t,this.whitelistedSaveAttrs)),t},"getSaveParams":function(){var t=i.prototype.getSaveParams.apply(this,arguments);return t=e.pick(t,this.whitelistedSaveAttrs),"title"in t&&(t.name=t.title,delete t.title),e.isObject(t.type)&&(t.type=t.type.typeString),"Location"in t&&(t.location=e.map(t.Location,function(e){return e.path
}),delete t.Location),t},"getSyncTitle":function(t){var n=this.get("title"),i=[],r=this.get("currentSubset"),s=this.get("currentFilters");return t?(e.each(t,function(e){i.push(e.get("title"))}),i=i.join(", "),n+": "+i):"all"!==r.id?n+": "+r.get("title"):s.length?(e.each(s,function(e){i.push(e.titles.join(", "))}),n+": "+i.join(",")):n}});return h}),define("plex/base/models/library/section/SectionCollection",["plex/base/models/BaseCollection","plex/base/models/library/section/SectionModel"],function(e,t){var n=e.extend({"model":t,"url":"/library/sections","parse":function(e){return this.convert(e,"Directory")
}});return n}),define("plex/base/models/library/PlayQueueMetadataModel",["underscore","plex/base/models/library/MetadataModel"],function(e,t){var n=t.extend({"idAttribute":"playQueueItemID","propagatedAttributes":["viewOffset","viewCount"],"cacheKey":function(e){return this.server&&this.server.getScopedKey(e.playQueueItemID)},"initialize":function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"change",function(){var n=this.changedAttributes(),i=e.intersection(e.keys(n),this.propagatedAttributes);
e.each(i,function(n){var i=new t({"key":this.get("key")},{"server":this.server,"onlyIfCached":!0});e.isEmpty(i)||i.set(n,this.get(n))},this)})}});return n}),define("plex/base/models/library/LocalPlayQueueMetadataCollection",["underscore","jquery","backbone","plex/base/utils/Parser","plex/base/utils/types/MediaTypes","plex/base/models/BaseCollection","plex/base/models/library/PlayQueueMetadataModel"],function(e,t,n,i,r,s,a){var o=function(t){return t instanceof n.Collection?e(t.models):t.get("children")
},l=function(e){var t=e.get("type"),n="channelDirectory"===t,i=n||t&&"directory"===r.getMediaTypeByString(t).element,s=void 0===e.length;return s&&!i},u=function(t){var n=this._nextPlayQueueItemID++,i=e.extend({},t.attributes,{"playQueueItemID":n}),r=new a(i,{"server":t.server,"parent":t.parent});return r},c=s.extend({"model":a,"initialize":function(){this.playQueueSelectedItemID=null,this._nextPlayQueueItemID=0,this.hasUserAdditions=!1},"isItemQueueable":function(t){if(t.get("currentSubset")&&"photo"!==t.viewGroup)return!1;
if("photoAlbum"===t.get("type")&&!t.isLibraryItem())return!1;var n=["track","episode","movie","photo","clip","playlistItem","photoAlbum","album","season"],i=e(n).contains(t.get("type")),r=o(t),s=r&&r.any(l);return i||s},"supports":function(e){var t=e&&e.unwatched;return!t},"addContent":function(n,i){i||(i={});var r=t.Deferred().resolve().promise();return this.isItemQueueable(n)&&(n.get("children")&&e.result(n.get("children"),"url")&&(r=r.then(function(){return n.get("children").populate()})),r=r.done(e.bind(function(){this.lastAddedItem=n,this.length&&(this.hasUserAdditions=!0);
var t=this.indexOf(this.selectedItem());-1===t&&(t=0);var r=i.next?{"at":t+1}:{},s=o(n);if(s){var a=s.filter(l);i.shuffle&&(a=e(a).shuffle());var c=e.map(a,e.bind(u,this));if(this.add(c,r),i.firstItem){var d=e.find(c,function(e){return e.get("ratingKey")===i.firstItem.get("ratingKey")});d&&(this.playQueueSelectedItemID=d.get("playQueueItemID"))}}else this.add(u.apply(this,[n]),r);!this.playQueueSelectedItemID&&this.first()&&(this.playQueueSelectedItemID=this.first().get("playQueueItemID"))},this))),r
},"removeItem":function(e){e.playQueueItemID!==this.playQueueSelectedItemID&&(this.hasUserAdditions=!0,this.remove(e))},"moveItem":function(e,t){if(e!==this.playQueueSelectedItemID){var n=this.findWhere({"playQueueItemID":e});this.remove(n);var i=t||this.playQueueSelectedItemID,r=this.findWhere({"playQueueItemID":i}),s=this.indexOf(r)+1;this.hasUserAdditions=!0,this.add(n,{"at":s})}},"fetch":function(){},"selectedItem":function(){return this.findWhere({"playQueueItemID":this.playQueueSelectedItemID})
},"setSelectedItem":function(e){this.playQueueSelectedItemID=e.get("playQueueItemID")},"yieldOwnership":function(){var n=this.lastAddedItem,i=e.result(n.get("children")||n,"url");return t.Deferred().resolve(i).promise()},"takeOwnership":function(){return t.Deferred().resolve().promise()}});return c}),define("plex/base/models/library/PlayQueueMetadataCollection",["underscore","jquery","plex/base/utils/Parser","plex/base/models/BaseCollection","plex/base/models/library/PlayQueueMetadataModel"],function(e,t,n,i,r){var s={"audio":"Track","photo":"Photo","video":"Video"},a=i.extend({"model":r,"url":function(){return"/playQueues/"+this.playQueueID
},"isItemQueueable":function(t){var n=-1!==e(t).result("url").indexOf("/library/"),i=-1!==e(t).result("url").indexOf("/folder"),r=t.get("type")&&("photoAlbum"===t.get("type")||"photo"===t.get("type")),s="photo"===t.viewGroup||r,a=!1;return t.get("currentSubset")&&(a="all"!==t.get("currentSubset").id),n&&!i&&!s&&!a},"supports":function(){return!0},"initialize":function(e,t){this.mediaType=t.type,this.allowedElement=s[t.type],this.hasUserAdditions=!1,this.owned=!0,this.playQueueVersion=0},"parse":function(t){var i=this.convert(t);
if(n.parseInteger(i,"playQueueVersion"),i.playQueueVersion>this.playQueueVersion){var r=function(e){var t="playQueue"+e;this[t]=i[t]};e.each(["ID","Version","SelectedItemID"],r,this)}return n.parseArray(i,this.allowedElement),i[this.allowedElement]},"_ajax":function(n,i){var r=e.extend(this.server.getXHROptions(i),{"type":n}),s=t.ajax(r),a=function(e){this.reset(e,{"parse":!0})};return s.done(e.bind(a,this)),s},"addContent":function(n,i){i||(i={});var r=n.get("librarySectionUUID")||n.get("uuid");
if(!r){var s=n.server.getSectionForItem(n);e.isEmpty(s)||(r=s.get("uuid"))}var a="library://"+r,o=e(n).result("url");if(n.get("items")){var l=n.get("items").getFilterUrlParams(),u=l.indexOf("unwatchedLeaves=1");u>-1&&l.splice(u,1,"unwatched=1"),l.push("sourceType="+n.get("currentType").id);var c=n.get("currentSubset").id;a+="/directory/"+encodeURIComponent(o),a+=encodeURIComponent("/"+c+"?"+l.join("&"))}else i.unwatched?(o+="show"===n.get("type")?"/allLeaves?unwatched=1":"/children?unwatched=1",a+="/directory/"+encodeURIComponent(o)):a+=o.match("/children")?"/directory/"+encodeURIComponent(o):"/item/"+encodeURIComponent(o);
var d={"uri":a,"type":this.mediaType};return i.firstItem&&(d.key=i.firstItem.get("key")),d.shuffle=i.shuffle?1:0,i.continuous&&"episode"===n.get("type")&&(d.continuous=1),this.playQueueID?(d.next=i.next?1:0,this.hasUserAdditions=!0,this._addContentPromise=this._ajax("PUT",this.url()+"?"+t.param(d,!0))):this._addContentPromise=this._ajax("POST","/playQueues?"+t.param(d,!0)),this._addContentPromise},"removeItem":function(e){if(e.get("playQueueItemID")!==this.playQueueSelectedItemID){this.hasUserAdditions=!0;
var t=this.url()+"/items/"+e.get("playQueueItemID");return this._ajax("DELETE",t)}},"moveItem":function(e,n){if(e!==this.playQueueSelectedItemID){this.hasUserAdditions=!0;var i={"after":n||this.playQueueSelectedItemID},r=this.url()+"/items/"+e+"/move?"+t.param(i);return this._ajax("PUT",r)}},"selectedItem":function(){return this.findWhere({"playQueueItemID":this.playQueueSelectedItemID})},"setSelectedItem":function(e){this.playQueueSelectedItemID=e.get("playQueueItemID")},"yieldOwnership":function(){return this.owned=!1,this._addContentPromise.then(e.bind(function(){return this.length>0?e.result(this,"url")+"?own=1&window=200":null
},this))},"takeOwnership":function(){var n=t.Deferred().resolve().promise();if(!this.owned){this.owned=!0;var i=e.result(this,"url")+"?own=1";n=this._ajax("GET",i)}return n}});return a}),define("plex/base/models/library/PlayQueues",["underscore","plex/base/utils/BaseClass","plex/base/mixins/EventMixin","plex/base/utils/types/MediaTypes","plex/base/models/library/LocalPlayQueueMetadataCollection","plex/base/models/library/PlayQueueMetadataCollection"],function(e,t,n,i,r,s){var a=t.extend({"mixins":n,"initialize":function(e){this.server=e.server,this._queues={"audio":null,"photo":null,"video":null},this.canCreateOnLocal=r.prototype.isItemQueueable,this.doesLocalSupport=r.prototype.supports
},"createFor":function(e,t){t=t||e;var n=i.getChildMediaType(t.get("type")).element;return this.canCreateOnServer(e)?this._queues[n]=new s([],{"type":n,"server":this.server}):this.canCreateOnLocal(e)&&(this._queues[n]=new r),this.trigger("change"),this._queues[n]},"getFor":function(e){var t=e.get("type");if(!t||"channelDirectory"===t)return null;var n=i.getChildMediaType(t).element,r=this._queues[n];return r&&r.isItemQueueable(e)?r:null},"remove":function(e){this._queues[e]=null,this.trigger("change")
},"removeAll":function(){e.each(e.keys(this._queues),this.remove,this)},"canCreateOnServer":function(e){return this.server.supports("playQueues")&&!this.server.get("synced")&&s.prototype.isItemQueueable(e)},"doesServerSupport":function(e){return this.server.supports("playQueues")&&s.prototype.supports(e)},"canCreateFor":function(e,t){return this.canCreateOnServer(e)&&this.doesServerSupport(t)||this.canCreateOnLocal(e)&&this.doesLocalSupport(t)}});return a}),define("plex/base/models/server/ServerCloudAccountModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"url":"/myplex/account","whitelistedAttrs":["username","mappingState","mappingError","mappingErrorMessage","signInState","publicAddress","publicPort","privateAddress","privatePort","subscriptionActive","subscriptionState"],"isNew":function(){return!this.get("signedIn")
},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i&&"undefined"==typeof i.mappingError&&(i.mappingError=null),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),"ok"===n.signInState?n.signedIn=!0:(n.signedIn=!1,n.username="",n.password=""),n}});return i}),define("plex/base/models/server/ServerSettingModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"id","url":"/:/prefs","defaults":{"type":"string","summary":"","label":"","group":""},"whitelistedAttrs":["id","label","default","summary","value","type","group","advanced","option","hidden","enumValues","values"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return"bool"===i.type?t.parseBoolean(i,"value"):"int"===i.type&&t.parseInteger(i,"value"),t.parseBoolean(i,["advanced","hidden"]),i},"parse":function(t){var n=this.convert(t);if(n=e.pick(n,this.whitelistedAttrs),n.enumValues&&!e.isArray(n.enumValues)&&(n.enumValues=e.map(n.enumValues.split("|"),function(e){var t=e.indexOf(":");return t>0?{"label":e.slice(t+1),"value":e.slice(0,t)}:{"label":e,"value":e}})),"enum"===n.type&&n.values&&!e.isArray(n.values)){var i=0;n.enumValues=e.map(n.values.split("|"),function(e){return{"label":e,"value":i++}
})}return n},"getSaveParams":function(t){if(e.has(t,"FriendlyName")&&this.server.set("friendlyName",t.FriendlyName),e.has(t,"allowMediaDeletion")&&this.server.set("allowMediaDeletion","1"==t.allowMediaDeletion),e.isEmpty(t)){var n={};return n[this.get("id")]=this.get("value"),n}return"value"in t&&(t[this.get("id")]=t.value,delete t.value),t}});return i}),define("plex/base/models/server/ServerSettingCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/ServerSettingModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/:/prefs","initialize":function(){this.server.on("socket:setting",function(e){var t=this.get(e.id);
t&&(e=t.parse(e),t.set("value",e.value),"FriendlyName"===e.id&&e.value?this.server.set("friendlyName",e.value):"allowMediaDeletion"===e.id&&this.server.set("allowMediaDeletion",e.value))},this)},"parse":function(t){var n=this.convert(t,"Setting");return e.filter(n,function(e){return e.id})}});return i}),define("plex/base/models/PaginatedCollection",["plex/base/models/BaseCollection"],function(e){var t=e.extend({"pageSize":10,"pages":function(){return Math.max(Math.ceil(this.length/this.pageSize),1)
},"page":function(e,t){t||(t={});var n,i=0;return n=t.reverse?this.length-e*this.pageSize:e*this.pageSize-this.pageSize,0>n&&(i=n,n=0),this.models.slice(n,n+this.pageSize+i)}});return t}),define("plex/base/models/server/ServerAlertModel",["plex/base/models/BaseModel"],function(e){var t=0,n=e.extend({"idAttribute":"id","parse":function(e){var n=e;return n.time=new Date,n.id="evt"+t++,"preference"==n._type&&(n.value=n.value.toString()),n}});return n}),define("plex/base/models/server/ServerAlertCollection",["underscore","plex/base/models/PaginatedCollection","plex/base/models/server/ServerAlertModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/servers","pageSize":20,"limit":1e3,"initialize":function(){this.startTime=new Date,this.listenTo(this.server,"socket:setting",this.onSettingChange),this.listenTo(this.server,"socket:timeline",this.onTimeline),this.listenTo(this.server,"socket:status",this.onStatus),this.listenTo(this.server,"socket:playing",this.onPlaying),this.listenTo(this.server,"socket:websocket",this.onWebSocket)
},"add":function(){this.length+1>this.limit&&this.remove(this.at(0)),t.prototype.add.apply(this,arguments)},"onSettingChange":function(t){this.add(e.extend({"_type":"setting"},t),{"parse":!0})},"onTimeline":function(t){1!==t.state&&this.add(e.extend({"_type":"timeline"},t),{"parse":!0})},"onStatus":function(t){"ProgressNotification"!==t._elementType&&this.add(e.extend({"_type":"status"},t),{"parse":!0})},"onPlaying":function(t){this.add(e.extend({"_type":"playing"},t),{"parse":!0})},"onWebSocket":function(t){this.add(e.extend({"_type":"websocket"},t),{"parse":!0})
}});return i}),define("plex/base/models/server/TranscodeJobModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"syncItemId","whitelistedAttrs":["syncItemId","syncItemTitle","key","type","progress","speed","remaining","size","title","thumb"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,["syncItemId","speed"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)
}});return i}),define("plex/base/models/server/TranscodeJobCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/TranscodeJobModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/sync/transcodeQueue","parse":function(e){return this.convert(e,"TranscodeJob")}});return i}),define("plex/base/models/server/SessionModel",["underscore","plex/base/utils/Parser","plex/base/models/library/MetadataModel"],function(e,t,n){var i=n.extend({"idAttribute":"sessionKey","cacheKey":function(e){return this.server&&this.server.getScopedKey(e.sessionKey)
}});return i}),define("plex/base/models/server/SessionCollection",["underscore","plex/base/models/library/MetadataCollection","plex/base/models/server/SessionModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/status/sessions"});return i}),define("plex/base/models/server/ServerModel",["underscore","jquery","backbone","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/mixins/ServerMixin","plex/base/models/BaseModel","plex/base/models/library/section/SectionModel","plex/base/models/library/section/SectionCollection","plex/base/models/library/PlayQueues","plex/base/models/server/ServerCloudAccountModel","plex/base/models/server/ServerSettingCollection","plex/base/models/server/ServerAlertCollection","plex/base/models/server/TranscodeJobCollection","plex/base/models/server/SessionCollection"],function(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f){var m=a.extend({"mixins":s,"persistInCache":!0,"defaults":function(){return e.extend(s.defaults.apply(this,arguments),{"cloudAccount":new c({},{"server":this}),"sections":new l([],{"server":this}),"settings":new d([],{"server":this}),"alerts":new h([],{"server":this}),"transcodeJobs":new p([],{"server":this}),"sessions":new f([],{"server":this}),"playQueues":new u({"server":this})})
},"constructor":function(){return this.connections=[],this.populatePromise=t.Deferred(),a.prototype.constructor.apply(this,arguments)||null},"initialize":function(){this.listenTo(this,"change:machineIdentifier",this.onMachineIdentifierChange)},"fetch":function(){return n.Model.prototype.fetch.apply(this,arguments)},"merge":function(t){t.get("bundled")&&this.set("bundled",!0),e.each(t.connections,function(t){r.log("Merging connection ("+t.address+") into "+this.get("friendlyName")),this.addConnection(e.pick(t,"scheme","address","port","accessToken"))
},this),this.collection&&(this.collection.remove(t.cid),this.collection._byId[this.id]=this),this.cache.remove(t)},"toLiteJSON":function(){return this.pick(["friendlyName","machineIdentifier","accessToken","cloud","shared","synced"])},"addConnection":function(n){var i=e.findWhere(this.connections,{"address":n.address,"port":n.port});if(i){if(i.available||i.accessToken||!n.accessToken)return i;i.pending=!0,i.accessToken=n.accessToken,n=i}else n.pending=!0,n.isLocalAddress=this.isLocalAddress(n.address),this.connections.push(n);
return"rejected"===this.populatePromise.state()&&(this.populatePromise=new t.Deferred,this.set("authorized",null)),this.trigger("change:connections",this,this.connections),n},"hasLocalConnection":function(){var e=this.get("activeConnection");return e?e.isLocalAddress:null},"canBePrimary":function(e){return this.get("synced")||this.get("cloud")?!1:this.get("shared")&&!this.get("multiuser")?!1:this.get("available")&&this.get("authorized")&&!this.get("mixedContent")?this.isVersionOrNewer(e):!1},"getSectionForItem":function(e){if(e.section)return e.section;
var t=new o({"key":e.get("librarySectionID")},{"server":e.server,"onlyIfCached":!0});return t},"onMachineIdentifierChange":function(){this.collection?this.listenToOnce(this.collection,"change:machineIdentifier",this.onMachineIdentifierChanged):this.onMachineIdentifierChanged()},"onMachineIdentifierChanged":function(){var e=this.cacheKey(this.attributes),t=this.cache.get(e);t?t.get("connected")?t.merge(this):(this.merge(t),this.cache.store(this)):this.cache.store(this,e)}});return m}),define("plex/base/models/server/ServerCollection",["plex/base/models/BaseCollection","plex/base/models/server/ServerModel"],function(e,t){var n=e.extend({"model":t,"url":"/servers","parse":function(e){return this.convert(e,"Server")
},"comparator":function(e){var t=e.get("friendlyName")||"",n=e.get("shared"),i=e.get("synced"),r=n?"1":"0";return r+=i?"1":"0",r+=t.toLowerCase()},"toLiteJSON":function(){return this.map(function(e){return e.toLiteJSON()})}});return n}),define("plex/base/models/server/CloudServerModel",["underscore","jquery","plex/base/utils/Logger","plex/base/models/server/ServerModel","plex/base/models/library/PlayQueues"],function(e,t,n,i,r){var s=i.extend({"serversUrl":"/pms/servers.xml?includeLite=1","defaults":function(){return{"machineIdentifier":"myPlex","friendlyName":"Cloud","cloud":!0,"downForMaintenance":!1,"plexPassUrl":"https://plex.tv/subscription/about","accountUrl":"https://plex.tv/users/edit","cloudSyncUrl":"https://plex.tv/cloudsync/providers","appsUrl":"https://plex.tv/downloads","helpUrl":"http://support.plex.tv/hc/en-us","playQueues":new r({"server":this})}
},"initialize":function(){},"testConnection":function(i){var r=this.get("friendlyName"),s=this.resolveUrl("/pms/:/ip",{"connection":i}),a=t.ajax(this.getXHROptions(s));n.info("Testing connection to "+r+" at "+s),a.done(e.bind(function(){n.success("Setting active connection for "+r+" ("+s+")"),this.set({"connected":!0,"available":!0,"downForMaintenance":!1,"activeConnection":i})},this)),a.fail(e.bind(function(e){n.error(r+" is unavailable at "+s+" (Status "+e.status+")"),this.set({"connected":!1,"available":!1,"downForMaintenance":503===e.status}),this.populatePromise.rejectWith(this,[this,e])
},this))}});return s.prototype.cache=i.prototype.cache,s}),define("plex/base/models/player/PlexPlayerModel",["plex/base/models/server/ServerModel","plex/base/models/library/MetadataCollection"],function(e,t){var n=e.extend({"cacheKey":null,"initialize":function(){this.set("activeConnection",this.connections[0]),this.set("nowPlaying",new t([],{"server":this.server}))}});return n}),define("plex/base/models/player/PlexPlayerCollection",["plex/base/models/server/ServerCollection","plex/base/models/player/PlexPlayerModel"],function(e,t){var n=e.extend({"model":t,"url":"/clients"});
return n}),define("plex/base/models/player/CastPlayerModel",["underscore","jquery","plex/base/models/BaseModel","plex/base/models/library/MetadataCollection"],function(e,t,n,i){var r=n.extend({"whitelistedAttrs":["id","ipAddress","isTabProjected","name"],"initialize":function(){this.set("nowPlaying",new i([],{"server":this.server}))},"parse":function(n){var i=e.pick(n,this.whitelistedAttrs);return i.name=t("<div/>").html(i.name).text(),i.protocol="cast",i}});return r}),define("plex/base/models/player/CastPlayerCollection",["plex/base/models/BaseCollection","plex/base/models/player/CastPlayerModel"],function(e,t){var n=e.extend({"model":t});
return n}),define("plex/base/models/user/SyncItemModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"whitelistedAttrs":["id","version","rootTitle","title","metadataType","clientIdentifier","Server","Status","MediaSettings","Policy","Location"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,["id","version"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.Location&&n.Location.uri&&(n.isDirectory=/library\:\/\/([\w-]+)\/directory\//.test(n.Location.uri)),n
}});return i}),define("plex/base/models/user/SyncItemCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/user/SyncItemModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return this.device?"/devices/"+this.device.get("clientIdentifier")+"/sync_items":"/servers/"+this.parent.id+"/sync_lists"},"parse":function(t){var n=this.convert(t),i=[],r=function(t,n){n&&(e.isArray(n)||(n=[n]),e.each(n,function(e){e.clientIdentifier=t,i.push(e)}))};return n.SyncList&&!e.isArray(n.SyncList)&&(n.SyncList=[n.SyncList]),e.each(n.SyncList,function(e){r(e.clientIdentifier,e.SyncItems.SyncItem)
}),n.SyncItems&&r(n.clientIdentifier,n.SyncItems.SyncItem),i},"filterByServer":function(e){var t=this.filter(function(t){var n=t.get("Server");return n&&n.machineIdentifier===e});return this.clone(t)}});return i}),define("plex/base/models/user/DeviceModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/user/SyncItemCollection"],function(e,t,n,i){var r=n.extend({"whitelistedAttrs":["id","clientIdentifier","name","product","productVersion","platform","platformVersion","device","model","provides","screenResolution","screenDensity","lastSeenAt","SyncList"],"url":function(){return"/devices/"+this.id+".xml"
},"initialize":function(){this.set("syncItems",new i([],{"server":this.server,"device":this}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,"lastSeenAt"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.isCloudSync="cloudsync"===n.platform,n.provides=n.provides?n.provides.split(","):[],n},"supports":function(t){var n=this.get("provides");return e.indexOf(n,t)>-1}});return r}),define("plex/base/models/user/DeviceCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/user/DeviceModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/devices.xml","parse":function(e){return this.convert(e,"Device")
},"filterSyncDevices":function(){var t=this.filter(function(e){return e.supports("sync-target")}),n=e.sortBy(t,function(e){return!e.get("isCloudSync")});return this.clone(n)},"filterByProducts":function(t){var n=this.filter(function(n){return e.contains(t,n.get("product"))});return this.clone(n)},"products":function(){var t=this.map(function(e){return e.get("product")});return e.uniq(t)}});return i}),define("plex/base/models/user/FriendModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"urlRoot":"/pms/friends","whitelistedAttrs":["id","title","username","email","thumb","recommendationsPlaylistId"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseInteger(i,"id"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/user/FriendCollection",["plex/base/models/BaseCollection","plex/base/models/user/FriendModel"],function(e,t){var n=e.extend({"model":t,"url":function(){return"/pms/friends/"+this.subset},"initialize":function(e,t){this.subset=t.subset||"all"},"parse":function(e){return this.convert(e,"User")}});return n}),define("plex/base/models/user/SocialNetworkModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","linked","maxLength"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseBoolean(i,["linked","maxLength"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/user/SocialNetworkCollection",["plex/base/models/BaseCollection","plex/base/models/user/SocialNetworkModel"],function(e,t){var n=e.extend({"model":t,"url":"/pms/social/networks","parse":function(e){return this.convert(e,"Directory")}});return n}),define("plex/base/models/user/UserModel",["underscore","jquery","plex/base/utils/Logger","plex/base/utils/Parser","plex/base/adapters/StorageAdapter","plex/base/models/BaseModel","plex/base/models/user/DeviceCollection","plex/base/models/user/FriendCollection","plex/base/models/user/SocialNetworkCollection"],function(e,t,n,i,r,s,a,o,l){var u=s.extend({"url":"/users/account","defaults":{"signedIn":null,"subscription":!1},"whitelistedAttrs":["id","username","email","thumb","queueUid","queueEmail","accessToken"],"initialize":function(){this.listenTo(this,"change:signedIn",this.onSignedInChange),this.listenTo(this.server,"change:available",this.onServerAvailableChange);
var t={"server":this.server,"parent":this};this.set("devices",new a([],t)),this.set("friends",new o([],t)),this.set("friendRequests",new o([],e.extend({"subset":"requests"},t))),this.set("friendsRequested",new o([],e.extend({"subset":"requested"},t))),this.set("socialNetworks",new l([],t))},"convert":function(t){var n=e.isObject(t)?t:i.parseXML(t),r=n.subscription;return i.parseInteger(n,"id"),i.parseArray(n,"roles"),r&&(i.parseBoolean(r,"active"),i.parseArray(r,"feature")),n},"parse":function(t){var i=this.convert(t),r=i.roles,s=i.subscription,a=[];
if(i.accessToken=i.authenticationToken,i=e.pick(i,this.whitelistedAttrs),i.signedIn=!0,s){var o=s.feature;i.subscription=s.active,i.plan=s.plan,a.push("subscription: "+i.plan),i.features=e.reduce(o,function(e,t){return e[t.id]=!0,e},{}),a.push("features: "+e.keys(i.features).join(", "))}else a.push("subscription: none"),i.features=void 0,i.plan=void 0,i.subscription=void 0;return r&&r.length?(r=r[0].role,i.roles=e.reduce(r,function(e,t){return e[t.id]=!0,e},{}),a.push("roles: "+e.keys(i.roles).join(", "))):i.roles=void 0,n.group(i.username,a),i
},"resolveServerPromise":function(e){"pending"!==this.server.populatePromise.state()&&(this.server.populatePromise=t.Deferred()),e?this.server.populatePromise.resolveWith(this,[this]):this.server.populatePromise.rejectWith(this,[this]),this.server.set("authorized",e)},"isEmployee":function(){var e=this.get("roles");return!!(e&&"employee"in e)},"isNinja":function(){var e=this.get("roles");return this.isEmployee()||!!(e&&"ninja"in e)},"hasPlexPass":function(){var e=this.get("features");return!!(e&&"pass"in e)
},"hasSync":function(){var e=this.get("features");return!!(e&&"sync"in e)},"onSignedInChange":function(e,t){t&&this.resolveServerPromise(t)},"onServerAvailableChange":function(t,n){if(null!=n){if(n===!1)return this.set("signedIn",!1),void this.resolveServerPromise(!1);var i=r.get(),s=i.get({"key":"myPlexAccessToken","session":!0}),a=e.bind(function(e){this.server.set("accessToken",e),this.fetch().fail(function(){this.set("signedIn",!1),this.resolveServerPromise(!1)})},this),o=e.bind(function(){this.set("signedIn",!1),this.resolveServerPromise(!1)
},this);s=s.then(function(e){return e},function(){return i.get({"key":"myPlexAccessToken"})}),s.done(a).fail(o)}}});return u}),define("plex/base/models/AppModel",["backbone","plex/base/models/AnnouncementCollection","plex/base/models/debug/LogCollection","plex/base/models/server/ServerCollection","plex/base/models/server/CloudServerModel","plex/base/models/player/PlexPlayerCollection","plex/base/models/player/CastPlayerCollection","plex/base/models/user/UserModel"],function(e,t,n,i,r,s,a,o){var l=e.Model.extend({"defaults":function(){return{"version":"dev","updateStatus":"none","authorized":!1,"multiserver":!1,"multiplayer":!1,"history":[],"forwardHistory":[]}
},"initialize":function(){var e=new r({"machineIdentifier":"myPlex"},{"parent":this});this.set("servers",new i([e],{"parent":this})),this.set("plexPlayers",new s([],{"parent":this})),this.set("castPlayers",new a),this.set("user",new o({},{"server":e})),this.set("announcements",new t),this.set("logs",new n([],{"parent":this}))}});return new l}),define("plex/base/adapters/AnalyticsAdapter",["plex/base/adapters/Adapter"],function(e){var t=e.extend({"register":function(e){this.analytics=e},"init":function(e,t){return this.instance=new this.analytics(e,t),this.instance
}});return new t}),define("plex/base/managers/PrimaryServerManager",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/mixins/EventMixin","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/adapters/AnalyticsAdapter"],function(e,t,n,i,r,s,a,o,l){var u=i.extend({"mixins":s,"bundleUpdatesDelay":36e5,"waitingForServers":!1,"initialize":function(t){e.bindAll(this,"checkPendingServers"),t||(t={}),this.lastPrimaryServerID=t.lastPrimaryServerID,this.servers=a.get("servers"),this.startListening()
},"startListening":function(){this.listenTo(this.servers,"add",this.checkPendingServers),this.listenTo(this.servers,"change:connected",this.onServerConnectedChange),this.listenTo(a,"change:primaryServer",this.onPrimaryServerChange)},"checkPendingServers":function(){if(this.servers.populatePromise){if("pending"===this.servers.populatePromise.state()){if(this.waitingForServers)return;return r.log("Primary server is waiting for servers to populate"),this.waitingForServers=!0,void this.servers.populate().always(this.checkPendingServers)
}if(!a.get("primaryServer")){this.waitingForServers=!1;var t=this.servers.filter(function(e){return null==e.get("connected")}),n=e.filter(t,function(e){return!e.get("shared")&&!e.get("synced")});if(this.primaryCandidate){var i=this.servers.get(this.lastPrimaryServerID),s=this.primaryCandidate.get("shared")&&!!n.length,o=!1;if(this.lastPrimaryServerID&&i&&(o="pending"===i.populatePromise.state()),!t.length||!o&&!s)return void this.setPrimaryServer(this.primaryCandidate)}t.length||(this.setPrimaryServer(!1),l.get().enable())
}}},"findBestPrimaryServer":function(){var t=this.servers.filter(function(e){return e.canBePrimary(o.get("minServerVersion"))});if(!t.length)return!1;var n=e.findWhere(t,{"id":this.lastPrimaryServerID});if(this.lastPrimaryServerID&&n)return n;var i=e.sortBy(t,function(e){return e.get("shared")});return e.first(i)},"setPrimaryServer":function(e){a.set("primaryServer",e)},"onServerConnectedChange":function(e){if(!a.get("primaryServer")){if(!e.canBePrimary(o.get("minServerVersion")))return void this.checkPendingServers();
var t=e.id===this.lastPrimaryServerID,n=!this.lastPrimaryServerID&&!e.get("shared");if(t||n)return r.log("Setting primary server immediately to "+e.get("friendlyName")),void this.setPrimaryServer(e);(!this.primaryCandidate||this.primaryCandidate.get("shared")&&!e.get("shared"))&&(r.log("Setting primary server candidate to "+e.get("friendlyName")),this.primaryCandidate=e),this.checkPendingServers()}},"onPrimaryServerChange":function(e,t){if(this.stopListening(),this.startListening(),null==t?this.checkPendingServers():t?r.success("Setting primary server to "+t.get("friendlyName")):r.warn("No primary server"),t){this.primaryCandidate=null,this.listenTo(t,"change:connected",this.onPrimaryServerConnectedChange);
var i=t.get("shared");if(!i){if(o.get("playerDiscovery")){var s=e.get("plexPlayers");s.server=t,s.fetch({"reset":!0})}var a=t.get("sessions");a.fetch({"reset":!0})}if(o.get("bundled")&&!this.bundleUpdatesInterval&&(n.trigger("command","checkForBundleUpdates"),this.bundleUpdatesInterval=setInterval(function(){n.trigger("command","checkForBundleUpdates")},this.bundleUpdatesDelay)),!i||t.supports("sharedSettings")){var l=t.get("settings");this.listenTo(l,"reset",this.onPrimaryServerSettingsReset),l.populate({"reset":!0})
}}},"onPrimaryServerSettingsReset":function(e){var t=e.server.get("shared"),i=e.get("AcceptedEULA"),r=e.get("collectUsageData");!t&&i&&i.get("value")===!1&&n.trigger("command","showTermsOfService",{"collection":e}),r&&r.get("value")===!0?l.get().enable():l.get().disable()},"onPrimaryServerConnectedChange":function(e,t){t||(r.warn("The primary server lost its connection"),this.setPrimaryServer(this.findBestPrimaryServer()))}});return u}),define("plex/base/initializers/ServerInitializer",["underscore","jquery","plex/base/utils/Logger","plex/base/adapters/StorageAdapter","plex/base/managers/ServerConnectionManager","plex/base/managers/PrimaryServerManager","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/models/SettingsModel","plex/base/models/server/ServerStorageModel","plex/base/models/server/ServerCollection","plex/base/models/server/ServerModel"],function(e,t,n,i,r,s,a,o,l,u,c,d){function h(){var e=f.populatePromise;
if("pending"===e.state()){if(g.length)return void n.log("Waiting to resolve servers promise, secondary servers requests = "+g.length);var t=f.filter(function(e){return!e.server&&"pending"===e.populatePromise.state()});if(t.length)return void n.log("Waiting to resolve servers promise, pending initial servers = "+t.length);var i=f.where({"available":!0});n.log("Resolving servers promise, available servers = "+i.length),i.length?e.resolveWith(f,[f]):e.rejectWith(f,[f])}}function p(t,i){var r=f.where({"authorized":!0,"cloud":!1});
if(a.set("multiserver",r.length>1),!i)return void h();a.set("authorized",!0),t.get("cloud")&&f.reset(f.reject(function(e){return e.get("authorized")===!1}));var s=t.server&&!t.server.get("cloud");if(!(s||t.secondaryServersPromise||t.get("shared")||t.get("synced"))){var o=new c([],{"server":t,"parent":a,"url":t.serversUrl}),l=t.get("name")||e.result(t,"url"),u=o.populate();t.secondaryServersPromise=u,g.push(u),n.log("Requesting secondary servers through "+l),u.done(function(){f.add(o.models)}),u.always(function(){n.log("Secondary servers requested through "+l),g.splice(e.indexOf(g,u),1),h()
})}}var f=a.get("servers"),m=(new r({"servers":f}),new s),g=[];return f.on("change:authorized",p),{"init":function(){f.populatePromise=t.Deferred(),m.lastPrimaryServerID=u.get("lastPrimaryServerID"),m.checkPendingServers();var n=i.get(),r=n.get({"key":"myPlexAccessToken"});r.done(function(t){var n=u.get("users");e.each(n,function(n){if(t===n.accessToken){var i=n.servers;e.each(i,function(t){var n=new d(e.omit(t,"connections"),{"parent":a}),i=t.connections;f.add(n),e.each(i,function(t){n.addConnection(e.clone(t))
})})}})});var s=f.findWhere({"cloud":!0}),c=s.addConnection({"scheme":o.get("myPlexScheme")||"https","address":o.get("myPlexUrl")||l.get("myPlexUrl")||"plex.tv"});s.set("activeConnection",c);var h=o.get("primaryServer");if(h||o.get("bundled")){var p,g={"parent":a},v={"bundled":!0};if(h)g.parse=!0,e.extend(v,h);else{var y;y="production"===o.get("env")?window.location.port:"32400",p={"scheme":window.location.protocol.replace(":",""),"address":window.location.hostname,"port":y}}var b=new d(v,g);f.add(b),p&&b.addConnection(p)
}}}}),define("plex/base/adapters/BugsenseAdapter",["plex/base/adapters/Adapter"],function(e){return new e}),define("plex/base/adapters/LoggingAnalytics",["underscore","plex/base/utils/BaseClass","plex/base/utils/Logger"],function(e,t,n){var i=!0,r=t.extend({"enable":function(){i&&n.info("Analytics enabled")},"disable":function(){i&&n.info("Analytics disabled")},"set":function(e){i&&n.info("Analytics set options "+JSON.stringify(e,null,2))},"trackView":function(e){i&&n.info('Analytics tracked view "'+e+'"')
},"trackEvent":function(e){i&&n.info("Analytics tracked event "+JSON.stringify(e,null,2))},"initAndStartSession":function(){i&&n.info("Bugsense enabled")},"addExtraData":function(e){i&&n.info("Bugsense set option "+JSON.stringify(e,null,2))},"notify":function(e,t){i&&(n.error(e),n.info("Bugsense tracked error "+JSON.stringify(t,null,2)))}});return r}),define("plex/base/models/SessionStatsModel",["underscore","plex/base/models/StorageModel"],function(e,t){var n=t.extend({"storageKey":"sessionstats","incPlaybackCount":function(){this.save("playbackCount",this.get("playbackCount")+1)
},"startSession":function(){var t=(new Date).getTime();this.save({"playbackCount":0,"startTime":t,"heartbeatTime":t}),setInterval(e.bind(function(){this.save("heartbeatTime",(new Date).getTime())},this),1e4)}});return new n}),define("plex/base/initializers/AnalyticsInitializer",["underscore","plex/base/adapters/DimensionsAdapter","plex/base/adapters/BugsenseAdapter","plex/base/adapters/AnalyticsAdapter","plex/base/adapters/LoggingAnalytics","plex/base/models/ConfigModel","plex/base/models/SessionStatsModel"],function(e,t,n,i,r,s,a){var o="UA-6111912-18",l="98ba6d60";
return{"init":function(){var e=t.get();"production"!==s.get("env")&&n.register(new r);var u=n.get();u.initAndStartSession({"apiKey":l,"appver":e["X-Plex-Version"]}),u.addExtraData("X-Plex-Product",e["X-Plex-Product"]),u.addExtraData("X-Plex-Platform",e["X-Plex-Platform"]),u.addExtraData("X-Plex-Platform-Version",e["X-Plex-Platform-Version"]),"production"!==s.get("env")&&i.register(r);var c=i.init(o,{"name":e["X-Plex-Product"],"version":e["X-Plex-Version"]});return c.set({"dimension1":e["X-Plex-Product"],"dimension2":e["X-Plex-Client-Identifier"],"dimension3":e["X-Plex-Platform"],"dimension4":e["X-Plex-Platform-Version"],"dimension5":e["X-Plex-Device-Name"],"dimension6":e["X-Plex-Version"]}),a.populate().done(function(){var e=Math.round((a.get("heartbeatTime")-a.get("startTime"))/1e3),t=a.get("playbackCount");
c.trackEvent({"eventCategory":"App","eventAction":"Shutdown","eventValue":e,"metric1":t})}),a.populate().always(function(){a.startSession(),c.trackEvent({"eventCategory":"App","eventAction":"Start","eventValue":1,"sessionControl":"start"})}),{"bugsense":u,"analytics":c}}}}),define("plex/base/routes/BaseRouter",["underscore","backbone","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/adapters/AnalyticsAdapter"],function(e,t,n,i,r,s){var a=n.AppRouter.extend({"initialize":function(){this.uniqueRoutes=e.uniq(e.values(this.appRoutes)),this.fragments=e.invert(this.appRoutes),this.listenTo(this,"route",this.onRoute),this.listenTo(i,"navigate",this.onNavigate)
},"resolveUrlFragment":function(t,n){var i=t.match(/:\w+/g);return i&&e.each(i,function(e){var i=e.slice(1),r=n[i];if(null==r){var s=new RegExp("\\([^\\)]*"+e+"[^\\)]*\\)","g");t=t.replace(s,"")}else t=t.replace(e,encodeURIComponent(r))}),t.replace(/\(|\)/g,"")},"onRoute":function(n){var i=r.get("history"),a=r.get("forwardHistory"),o=t.history.getFragment();o===a[0]?i.push(a.shift()):o!==e.last(i)&&(i.push(o),a.splice(0)),s.get().trackView(n),r.trigger("change:history",r,i)},"onNavigate":function(t,n){if(-1!==e.indexOf(this.uniqueRoutes,t)){n||(n={});
var i=!1;if(null!=n.silent&&(i=n.silent,delete n.silent),null==n.trigger&&(n.trigger=!0),i)this.controller[t].apply(this.controller,e.values(n));else{var r=this.resolveUrlFragment(this.fragments[t],n);this.navigate(r,{"trigger":n.trigger})}}}});return a}),define("plex/base/routes/BaseAppRouter",["underscore","backbone","plex/base/utils/Dispatcher","plex/base/routes/BaseRouter","plex/base/models/AppModel"],function(e,t,n,i,r){var s=i.extend({"initialize":function(){i.prototype.initialize.apply(this,arguments),this.listenTo(n,{"navigate:back":this.onNavigateBack,"navigate:forward":this.onNavigateForward,"navigate:refresh":this.onNavigateRefresh})
},"onNavigateBack":function(){var t=r.get("history"),n=r.get("forwardHistory");return t.length<2?this.navigate("",{"trigger":!0}):(n.unshift(t.pop()),void this.navigate(e.last(t),{"trigger":!0}))},"onNavigateForward":function(){var e=r.get("forwardHistory");e.length&&this.navigate(e[0],{"trigger":!0})},"onNavigateRefresh":function(){t.history.loadUrl(t.history.getFragment())}});return s}),define("plex/base/models/channel/ChannelModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/MetadataCollection"],function(e,t,n,i){var r=n.extend({"idAttribute":"key","subcollections":["Directory","Video","Track","Photo","Artist","Album","Playlist"],"url":function(){return this.id?this.id:"/:/plugins/"+this.get("identifier")+"/root"
},"initialize":function(){this.set("items",new i([],{"server":this.server,"channel":this.channel||this,"parent":this,"skipCache":!0}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,["installed","noCache","allowSync","hasPrefs","hasStoreServices","share"]),t.parseInteger(i,["size","lastAccessedAt"]),t.parseArray(i,"Metadata"),i},"parse":function(t){if(e.isString(t)){var n=this.subcollections.join("|"),i=new RegExp("<("+n+")","g"),r=new RegExp("</("+n+")>","g");
t=t.replace(i,'<Metadata elementName="$1"'),t=t.replace(r,"</Metadata>")}var s=this.convert(t),a=this.toJSON();if(a&&(a.key&&(s.key=a.key),a.identifier&&(s.identifier=a.identifier)),"none"===s.key&&delete s.key,s.title2?(s.title=s.title2,delete s.title2):s.title1?(s.title=s.title1,delete s.title1):s.name&&(s.title=s.name,delete s.name),s.prefsKey&&(s.settingsKey=s.prefsKey,delete s.prefsKey),s.key){var o=/^\/(\w+)\//,l=s.key.match(o);l&&(s.type=l[1])}for(var u=s.Metadata.length-1;u>-1;u--){var c=s.Metadata[u];
c.isChannel=!0,c.allowSync=s.allowSync,s.identifier&&(c.identifier=s.identifier),s.mediaTagPrefix&&(c.mediaTagPrefix=s.mediaTagPrefix),s.mediaTagVersion&&(c.mediaTagVersion=s.mediaTagVersion),c.settings?(s.settingsKey=c.key,s.Metadata.splice(u,1)):c.search&&(s.searchKey=c.key,s.Metadata.splice(u,1))}var d=this.get("items");return d&&(d.reset({"Metadata":s.Metadata},{"parse":!0}),delete s.Metadata),s}});return r}),define("plex/base/routes/BaseController",["underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/models/library/MetadataModel","plex/base/models/channel/ChannelModel"],function(e,t,n,i,r,s,a,o){var l,u=!1,c=i.Controller.extend({"populateView":function(e){e||(e={}),r.trigger("show:loading"),l&&"pending"===l.state()&&(u=!0),n.abort();
var i={"options":e},s=this.populateServer(e,i);return e.primaryServer&&(s=this.populatePrimaryServer(s,i)),e.sectionID&&(s=this.populateSection(e,s,i)),e.key&&(s=this.populateMetadata(e,s,i)),e.channelID&&(s=this.populateChannel(e,s,i)),e.channelKey&&(s=this.populateChannelMetadata(e,s,i)),s=s.then(function(){return t.Deferred().resolve(i)},function(){return u?u=!1:r.trigger("navigate","unauthorized",{"result":i,"silent":!0}),t.Deferred().reject(i)}),l=s,s},"populateServer":function(e,t){var n=e.serverID;
if(!n)return this.findServers();var i=this.findServer(n);return i=i.then(function(e){return t.server=e,e.populate()})},"hasAuthorizedServer":function(){var e=s.get("servers");return!!e.findWhere({"authorized":!0})},"findServers":function(){function n(e,t){t&&(r.off("change:authorized",n),i.resolve())}var i=t.Deferred(),r=s.get("servers");return this.hasAuthorizedServer()?i.resolve().promise():(r.on("change:authorized",n),r.populate().always(e.bind(function(){r.off("change:authorized",n),"pending"===i.state()&&(this.hasAuthorizedServer()?i.resolve():i.reject())
},this)),i.promise())},"findServer":function(e){function n(t,s){t.id===e&&(s.off("add",n),s.off("change:machineIdentifier",i),r.resolve(t))}function i(t,s){s===e&&(a.off("add",n),a.off("change:machineIdentifier",i),r.resolve(t))}var r=t.Deferred(),a=s.get("servers"),o=a.get(e);return o?r.resolve(o).promise():(a.on("add",n),a.on("change:machineIdentifier",i),a.populate().always(function(){a.off("add",n),a.off("change:machineIdentifier",i),"pending"===r.state()&&r.reject()}),r.promise())},"populatePrimaryServer":function(e,n){return e=e.then(function(){function e(e,t){t?(n.server=t,i.resolve()):i.reject()
}var i=t.Deferred(),r=s.get("primaryServer");return r?(n.server=r,i.resolve().promise()):r===!1?i.reject().promise():(s.on("change:primaryServer",e),i.promise())})},"populateSection":function(e,n,i){return n=n.then(function(){return i.server.get("sections").populate()}),n=n.then(function(n){var r=i.item,s=e.sectionID;if(r&&(s=r.get("librarySectionID"),!s||i.server.get("synced")))return t.Deferred().resolve();var a=n.get(s);if(!a)return t.Deferred().reject();if(i.section=a,r){r.section=a;var o=r.get("children");
o&&(o.section=a)}return t.Deferred().resolve(a)})},"populateMetadata":function(e,t,n){return t=t.then(function(){var t=new a({"key":e.key},{"server":n.server});return n.item=t,t.fetch({"cancelable":!0,"data":"checkFiles=1"})}),t=this.populateSection(e,t,n)},"populateChannel":function(e,t,n){return t=t.then(function(){var t=e.channelID,i={};/^\/\w+\//.test(t)?i.key=t:i.identifier=t;var r=new o(i,{"server":n.server});return n.channel=r,r.fetch({"cancelable":!0})})},"populateChannelMetadata":function(e,t,n){return t=t.then(function(){var t=new o({"key":e.channelKey},{"server":n.server,"channel":n.channel});
return n.channelItem=t,t.fetch({"cancelable":!0})})}});return c});var Handlebars=function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e){return e instanceof a?e.toString():e||0===e?(e=""+e,u.test(e)?e.replace(l,t):e):""}function r(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var s={},a=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;
s.extend=n;var c=Object.prototype.toString;s.toString=c;var d=function(e){return"function"==typeof e};d(/x/)&&(d=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var d;s.isFunction=d;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===c.call(e):!1};return s.isArray=h,s.escapeExpression=i,s.isEmpty=r,s}(e),n=function(){function e(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<n.length;t++)this[n[t]]=e[n[t]]}var t,n=["description","fileName","lineNumber","message","name","number","stack"];
return e.prototype=new Error,t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},r=n.fn;return h(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?i(this):d(t)?t.length>0?e.helpers.each(t,n):i(this):r(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,r=t.inverse,s=0,a="";
if(h(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(d(e))for(var o=e.length;o>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===e.length-1),a+=i(e[s],{"data":n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l),a+=i(e[l],{"data":n}),s++);return 0===s&&(a=r(this)),a}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{"fn":n.inverse,"inverse":n.fn,"hash":n.hash})
}),e.registerHelper("with",function(e,t){return h(e)&&(e=e.call(this)),a.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function r(e,t){m.log(e,t)}var s={},a=e,o=t,l="1.1.2";s.VERSION=l;var u=4;s.COMPILER_REVISION=u;var c={"1":"<= 1.0.rc.2","2":"== 1.0.0-rc.3","3":"== 1.0.0-rc.4","4":">= 1.0.0"};s.REVISION_CHANGES=c;var d=a.isArray,h=a.isFunction,p=a.toString,f="[object Object]";s.HandlebarsEnvironment=n,n.prototype={"constructor":n,"logger":m,"log":r,"registerHelper":function(e,t,n){if(p.call(e)===f){if(n||t)throw new o("Arg not supported with multiple helpers");
a.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},"registerPartial":function(e,t){p.call(e)===f?a.extend(this.partials,e):this.partials[e]=t}};var m={"methodMap":{"0":"debug","1":"info","2":"warn","3":"error"},"DEBUG":0,"INFO":1,"WARN":2,"ERROR":3,"level":3,"log":function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};s.logger=m,s.log=r;var g=function(e){var t={};return a.extend(t,e),t};return s.createFrame=g,s}(t,n),r=function(e,t,n){function i(e){var t=e&&e[0]||1,n=h;
if(t!==n){if(n>t){var i=p[n],r=p[t];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new Error("No environment passed to template");var n;n=t.compile?function(e,n,i,r,s,a){var l=o.apply(this,arguments);
if(l)return l;var u={"helpers":r,"partials":s,"data":a};return s[n]=t.compile(e,{"data":void 0!==a},t),s[n](i,u)}:function(e,t){var n=o.apply(this,arguments);if(n)return n;throw new d("The partial "+t+" could not be compiled when running in runtime-only mode")};var r={"escapeExpression":c.escapeExpression,"invokePartial":n,"programs":[],"program":function(e,t,n){var i=this.programs[e];return n?i=a(e,t,n):i||(i=this.programs[e]=a(e,t)),i},"merge":function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n
},"programWithDepth":s,"noop":l,"compilerInfo":null};return function(n,s){s=s||{};var a,o,l=s.partial?s:t;s.partial||(a=s.helpers,o=s.partials);var u=e.call(r,l,n,a,o,s.data);return s.partial||i(r.compilerInfo),u}}function s(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r}function a(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,r,s){var a={"partial":!0,"helpers":i,"partials":r,"data":s};
if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function l(){return""}var u={},c=e,d=t,h=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.template=r,u.programWithDepth=s,u.program=a,u.invokePartial=o,u.noop=l,u}(t,n,i),s=function(e,t,n,i,r){var s,a=e,o=t,l=n,u=i,c=r,d=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=o,e.Exception=l,e.Utils=u,e.VM=c,e.template=function(t){return c.template(t,e)},e},h=d();return h.create=d,s=h
}(i,e,n,t,r),a=function(e){function t(e,n,i){this.type="program",this.statements=e,this.strip={},i?(this.inverse=new t(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)}function n(e,t,n,i){this.type="mustache",this.hash=t,this.strip=i;var r=n[3]||n[2];this.escaped="{"!==r&&"&"!==r;var s=this.id=e[0],a=this.params=e.slice(1),o=this.eligibleHelper=s.isSimple;this.isHelper=o&&(a.length||t)}function i(e,t,n){this.type="partial",this.partialName=e,this.context=t,this.strip=n}function r(e,t,n,i){if(e.id.original!==i.path.original)throw new m(e.id.original+" doesn't match "+i.path.original);
this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip={"left":e.strip.left,"right":i.strip.right},(t||n).strip.left=e.strip.right,(n||t).strip.right=i.strip.left,n&&!t&&(this.isInverse=!0)}function s(e){this.type="content",this.string=e}function a(e){this.type="hash",this.pairs=e}function o(e){this.type="ID";for(var t="",n=[],i=0,r=0,s=e.length;s>r;r++){var a=e[r].part;if(t+=(e[r].separator||"")+a,".."===a||"."===a||"this"===a){if(n.length>0)throw new m("Invalid path: "+t);".."===a?i++:this.isScoped=!0
}else n.push(a)}this.original=t,this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===e.length&&!this.isScoped&&0===i,this.stringModeValue=this.string}function l(e){this.type="PARTIAL_NAME",this.name=e.original}function u(e){this.type="DATA",this.id=e}function c(e){this.type="STRING",this.original=this.string=this.stringModeValue=e}function d(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)}function h(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e
}function p(e){this.type="comment",this.comment=e}var f={},m=e;return f.ProgramNode=t,f.MustacheNode=n,f.PartialNode=i,f.BlockNode=r,f.ContentNode=s,f.HashNode=a,f.IdNode=o,f.PartialNameNode=l,f.DataNode=u,f.StringNode=c,f.IntegerNode=d,f.BooleanNode=h,f.CommentNode=p,f}(n),o=function(){var e,t=function(){function e(e,t){return{"left":"~"===e[2],"right":"~"===t[0]||"~"===t[1]}}function t(){this.yy={}}var n={"trace":function(){},"yy":{},"symbols_":{"error":2,"root":3,"statements":4,"EOF":5,"program":6,"simpleInverse":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"CLOSE_UNESCAPED":24,"OPEN_PARTIAL":25,"partialName":26,"partial_option0":27,"inMustache_repetition0":28,"inMustache_option0":29,"dataName":30,"param":31,"STRING":32,"INTEGER":33,"BOOLEAN":34,"hash":35,"hash_repetition_plus0":36,"hashSegment":37,"ID":38,"EQUALS":39,"DATA":40,"pathSegments":41,"SEP":42,"$accept":0,"$end":1},"terminals_":{"2":"error","5":"EOF","14":"CONTENT","15":"COMMENT","16":"OPEN_BLOCK","18":"CLOSE","19":"OPEN_INVERSE","20":"OPEN_ENDBLOCK","22":"OPEN","23":"OPEN_UNESCAPED","24":"CLOSE_UNESCAPED","25":"OPEN_PARTIAL","32":"STRING","33":"INTEGER","34":"BOOLEAN","38":"ID","39":"EQUALS","40":"DATA","42":"SEP"},"productions_":[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],"performAction":function(t,n,i,r,s,a){var o=a.length-1;
switch(s){case 1:return new r.ProgramNode(a[o-1]);case 2:return new r.ProgramNode([]);case 3:this.$=new r.ProgramNode([],a[o-1],a[o]);break;case 4:this.$=new r.ProgramNode(a[o-2],a[o-1],a[o]);break;case 5:this.$=new r.ProgramNode(a[o-1],a[o],[]);break;case 6:this.$=new r.ProgramNode(a[o]);break;case 7:this.$=new r.ProgramNode([]);break;case 8:this.$=new r.ProgramNode([]);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new r.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o]);
break;case 12:this.$=new r.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o]);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new r.ContentNode(a[o]);break;case 16:this.$=new r.CommentNode(a[o]);break;case 17:this.$=new r.MustacheNode(a[o-1][0],a[o-1][1],a[o-2],e(a[o-2],a[o]));break;case 18:this.$=new r.MustacheNode(a[o-1][0],a[o-1][1],a[o-2],e(a[o-2],a[o]));break;case 19:this.$={"path":a[o-1],"strip":e(a[o-2],a[o])};break;case 20:this.$=new r.MustacheNode(a[o-1][0],a[o-1][1],a[o-2],e(a[o-2],a[o]));
break;case 21:this.$=new r.MustacheNode(a[o-1][0],a[o-1][1],a[o-2],e(a[o-2],a[o]));break;case 22:this.$=new r.PartialNode(a[o-2],a[o-1],e(a[o-3],a[o]));break;case 23:this.$=e(a[o-1],a[o]);break;case 24:this.$=[[a[o-2]].concat(a[o-1]),a[o]];break;case 25:this.$=[[a[o]],null];break;case 26:this.$=a[o];break;case 27:this.$=new r.StringNode(a[o]);break;case 28:this.$=new r.IntegerNode(a[o]);break;case 29:this.$=new r.BooleanNode(a[o]);break;case 30:this.$=a[o];break;case 31:this.$=new r.HashNode(a[o]);
break;case 32:this.$=[a[o-2],a[o]];break;case 33:this.$=new r.PartialNameNode(a[o]);break;case 34:this.$=new r.PartialNameNode(new r.StringNode(a[o]));break;case 35:this.$=new r.PartialNameNode(new r.IntegerNode(a[o]));break;case 36:this.$=new r.DataNode(a[o]);break;case 37:this.$=new r.IdNode(a[o]);break;case 38:a[o-2].push({"part":a[o],"separator":a[o-1]}),this.$=a[o-2];break;case 39:this.$=[{"part":a[o]}];break;case 42:this.$=[];break;case 43:a[o-1].push(a[o]);break;case 46:this.$=[a[o]];break;
case 47:a[o-1].push(a[o])}},"table":[{"3":1,"4":2,"5":[1,3],"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"22":[1,13],"23":[1,14],"25":[1,15]},{"1":[3]},{"5":[1,16],"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"22":[1,13],"23":[1,14],"25":[1,15]},{"1":[2,2]},{"5":[2,9],"14":[2,9],"15":[2,9],"16":[2,9],"19":[2,9],"20":[2,9],"22":[2,9],"23":[2,9],"25":[2,9]},{"4":20,"6":18,"7":19,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,8],"22":[1,13],"23":[1,14],"25":[1,15]},{"4":20,"6":22,"7":19,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,8],"22":[1,13],"23":[1,14],"25":[1,15]},{"5":[2,13],"14":[2,13],"15":[2,13],"16":[2,13],"19":[2,13],"20":[2,13],"22":[2,13],"23":[2,13],"25":[2,13]},{"5":[2,14],"14":[2,14],"15":[2,14],"16":[2,14],"19":[2,14],"20":[2,14],"22":[2,14],"23":[2,14],"25":[2,14]},{"5":[2,15],"14":[2,15],"15":[2,15],"16":[2,15],"19":[2,15],"20":[2,15],"22":[2,15],"23":[2,15],"25":[2,15]},{"5":[2,16],"14":[2,16],"15":[2,16],"16":[2,16],"19":[2,16],"20":[2,16],"22":[2,16],"23":[2,16],"25":[2,16]},{"17":23,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":29,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":30,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":31,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"21":33,"26":32,"32":[1,34],"33":[1,35],"38":[1,28],"41":26},{"1":[2,1]},{"5":[2,10],"14":[2,10],"15":[2,10],"16":[2,10],"19":[2,10],"20":[2,10],"22":[2,10],"23":[2,10],"25":[2,10]},{"10":36,"20":[1,37]},{"4":38,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,7],"22":[1,13],"23":[1,14],"25":[1,15]},{"7":39,"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,6],"22":[1,13],"23":[1,14],"25":[1,15]},{"17":23,"18":[1,40],"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"10":41,"20":[1,37]},{"18":[1,42]},{"18":[2,42],"24":[2,42],"28":43,"32":[2,42],"33":[2,42],"34":[2,42],"38":[2,42],"40":[2,42]},{"18":[2,25],"24":[2,25]},{"18":[2,37],"24":[2,37],"32":[2,37],"33":[2,37],"34":[2,37],"38":[2,37],"40":[2,37],"42":[1,44]},{"21":45,"38":[1,28],"41":26},{"18":[2,39],"24":[2,39],"32":[2,39],"33":[2,39],"34":[2,39],"38":[2,39],"40":[2,39],"42":[2,39]},{"18":[1,46]},{"18":[1,47]},{"24":[1,48]},{"18":[2,40],"21":50,"27":49,"38":[1,28],"41":26},{"18":[2,33],"38":[2,33]},{"18":[2,34],"38":[2,34]},{"18":[2,35],"38":[2,35]},{"5":[2,11],"14":[2,11],"15":[2,11],"16":[2,11],"19":[2,11],"20":[2,11],"22":[2,11],"23":[2,11],"25":[2,11]},{"21":51,"38":[1,28],"41":26},{"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,3],"22":[1,13],"23":[1,14],"25":[1,15]},{"4":52,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,5],"22":[1,13],"23":[1,14],"25":[1,15]},{"14":[2,23],"15":[2,23],"16":[2,23],"19":[2,23],"20":[2,23],"22":[2,23],"23":[2,23],"25":[2,23]},{"5":[2,12],"14":[2,12],"15":[2,12],"16":[2,12],"19":[2,12],"20":[2,12],"22":[2,12],"23":[2,12],"25":[2,12]},{"14":[2,18],"15":[2,18],"16":[2,18],"19":[2,18],"20":[2,18],"22":[2,18],"23":[2,18],"25":[2,18]},{"18":[2,44],"21":56,"24":[2,44],"29":53,"30":60,"31":54,"32":[1,57],"33":[1,58],"34":[1,59],"35":55,"36":61,"37":62,"38":[1,63],"40":[1,27],"41":26},{"38":[1,64]},{"18":[2,36],"24":[2,36],"32":[2,36],"33":[2,36],"34":[2,36],"38":[2,36],"40":[2,36]},{"14":[2,17],"15":[2,17],"16":[2,17],"19":[2,17],"20":[2,17],"22":[2,17],"23":[2,17],"25":[2,17]},{"5":[2,20],"14":[2,20],"15":[2,20],"16":[2,20],"19":[2,20],"20":[2,20],"22":[2,20],"23":[2,20],"25":[2,20]},{"5":[2,21],"14":[2,21],"15":[2,21],"16":[2,21],"19":[2,21],"20":[2,21],"22":[2,21],"23":[2,21],"25":[2,21]},{"18":[1,65]},{"18":[2,41]},{"18":[1,66]},{"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,4],"22":[1,13],"23":[1,14],"25":[1,15]},{"18":[2,24],"24":[2,24]},{"18":[2,43],"24":[2,43],"32":[2,43],"33":[2,43],"34":[2,43],"38":[2,43],"40":[2,43]},{"18":[2,45],"24":[2,45]},{"18":[2,26],"24":[2,26],"32":[2,26],"33":[2,26],"34":[2,26],"38":[2,26],"40":[2,26]},{"18":[2,27],"24":[2,27],"32":[2,27],"33":[2,27],"34":[2,27],"38":[2,27],"40":[2,27]},{"18":[2,28],"24":[2,28],"32":[2,28],"33":[2,28],"34":[2,28],"38":[2,28],"40":[2,28]},{"18":[2,29],"24":[2,29],"32":[2,29],"33":[2,29],"34":[2,29],"38":[2,29],"40":[2,29]},{"18":[2,30],"24":[2,30],"32":[2,30],"33":[2,30],"34":[2,30],"38":[2,30],"40":[2,30]},{"18":[2,31],"24":[2,31],"37":67,"38":[1,68]},{"18":[2,46],"24":[2,46],"38":[2,46]},{"18":[2,39],"24":[2,39],"32":[2,39],"33":[2,39],"34":[2,39],"38":[2,39],"39":[1,69],"40":[2,39],"42":[2,39]},{"18":[2,38],"24":[2,38],"32":[2,38],"33":[2,38],"34":[2,38],"38":[2,38],"40":[2,38],"42":[2,38]},{"5":[2,22],"14":[2,22],"15":[2,22],"16":[2,22],"19":[2,22],"20":[2,22],"22":[2,22],"23":[2,22],"25":[2,22]},{"5":[2,19],"14":[2,19],"15":[2,19],"16":[2,19],"19":[2,19],"20":[2,19],"22":[2,19],"23":[2,19],"25":[2,19]},{"18":[2,47],"24":[2,47],"38":[2,47]},{"39":[1,69]},{"21":56,"30":60,"31":70,"32":[1,57],"33":[1,58],"34":[1,59],"38":[1,28],"40":[1,27],"41":26},{"18":[2,32],"24":[2,32],"38":[2,32]}],"defaultActions":{"3":[2,2],"16":[2,1],"50":[2,41]},"parseError":function(e){throw new Error(e)
},"parse":function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],a=this.table,o="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;s.push(d);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,w,x,S={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=a[m]&&a[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";
if(!c){x=[];for(y in a[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{"text":this.lexer.match,"token":this.terminals_[p]||p,"line":this.lexer.yylineno,"loc":d,"expected":x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);
switch(g[0]){case 1:i.push(p),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],S.$=r[r.length-b],S._$={"first_line":s[s.length-(b||1)].first_line,"last_line":s[s.length-1].last_line,"first_column":s[s.length-(b||1)].first_column,"last_column":s[s.length-1].last_column},h&&(S._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(S,o,u,l,this.yy,g[1],r,s),"undefined"!=typeof v)return v;
b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),s=s.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(S.$),s.push(S._$),w=a[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var e={"EOF":1,"parseError":function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},"setInput":function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={"first_line":1,"first_column":0,"last_line":1,"last_column":0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this
},"input":function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},"unput":function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={"first_line":this.yylloc.first_line,"last_line":this.yylineno+1,"first_column":this.yylloc.first_column,"last_column":n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this
},"more":function(){return this._more=!0,this},"less":function(e){this.unput(this.match.slice(e))},"pastInput":function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},"upcomingInput":function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},"showPosition":function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"
},"next":function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={"first_line":this.yylloc.last_line,"last_line":this.yylineno+1,"first_column":this.yylloc.last_column,"last_column":r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{"text":"","token":null,"line":this.yylineno})
},"lex":function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},"begin":function(e){this.conditionStack.push(e)},"popState":function(){return this.conditionStack.pop()},"_currentRules":function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},"topState":function(){return this.conditionStack[this.conditionStack.length-2]},"pushState":function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)
}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&r(0,1),14;case 3:return r(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return r(3,5),this.popState(),15;
case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return t.yytext=r(1,2).replace(/\\"/g,'"'),32;case 22:return t.yytext=r(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return t.yytext=r(1,2),38;case 29:return"INVALID";case 30:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={"mu":{"rules":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"inclusive":!1},"emu":{"rules":[2],"inclusive":!1},"com":{"rules":[3],"inclusive":!1},"INITIAL":{"rules":[0,1,30],"inclusive":!0}},e
}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){function n(e){return e.constructor===s.ProgramNode?e:(r.yy=s,r.parse(e))}var i={},r=e,s=t;return i.parser=r,i.parse=n,i}(o,a),u=function(e){function t(e){this.value=e}function n(){}var i,r=e.COMPILER_REVISION,s=e.REVISION_CHANGES,a=e.log;n.prototype={"nameLookup":function(e,t){var i,r;return 0===e.indexOf("depth")&&(i=!0),r=/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+r+")":r
},"appendToBuffer":function(e){return this.environment.isSimple?"return "+e+";":{"appendToBuffer":!0,"content":e,"toString":function(){return"buffer += "+e+";"}}},"initializeBuffer":function(){return this.quotedString("")},"namespace":"Handlebars","compile":function(e,t,n,i){this.environment=e,this.options=t||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{"programs":[],"environments":[],"aliases":{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={"list":[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);
var r,s=e.opcodes;this.i=0;for(var o=s.length;this.i<o;this.i++)r=s[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(i)},"preamble":function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)
}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},"createFunctionContext":function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");
for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,l=this.environment.depths.list.length;l>o;o++)i.push("depth"+this.environment.depths.list[o]);var u=this.mergeSource();if(!this.isChild){var c=r,d=s[c];u="this.compilerInfo = ["+c+",'"+d+"'];\n"+u}if(e)return i.push(u),Function.apply(this,i);var h="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return a("debug",h+"\n\n"),h},"mergeSource":function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];
r.appendToBuffer?e=e?e+"\n    + "+r.content:r.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=r+"\n  ")}return t},"blockValue":function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},"ambiguousBlockValue":function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();
e.splice(1,0,t),e[e.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},"appendContent":function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},"strip":function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},"append":function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")
},"appendEscaped":function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},"getContext":function(e){this.lastContext!==e&&(this.lastContext=e)},"lookupOnContext":function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},"pushContext":function(){this.pushStackLiteral("depth"+this.lastContext)},"resolvePossibleLambda":function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e
})},"lookup":function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},"lookupData":function(){this.push("data")},"pushStringParam":function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},"emptyHash":function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},"pushHash":function(){this.hash={"values":[],"types":[],"contexts":[]}
},"popHash":function(){var e=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},"pushString":function(e){this.pushStackLiteral(this.quotedString(e))},"push":function(e){return this.inlineStack.push(e),e},"pushLiteral":function(e){this.pushStackLiteral(e)},"pushProgram":function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)
},"invokeHelper":function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+i),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+")"})},"invokeKnownHelper":function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},"invokeAmbiguous":function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");
var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),r=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.pushSource("if ("+s+" = "+i+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.pushSource("else { "+s+" = "+r+"; "+s+" = typeof "+s+" === functionType ? "+s+".call("+n.callParams+") : "+s+"; }")},"invokePartial":function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")
},"assignToHash":function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var r=this.hash;t&&r.contexts.push("'"+e+"': "+t),n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+i+")")},"compiler":n,"compileChildren":function(e,t){for(var n,i,r=e.children,s=0,a=r.length;a>s;s++){n=r[s],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)
}},"matchExistingProgram":function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},"programExpression":function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,r=[n.index,n.name,"data"],s=0,a=i.length;a>s;s++)t=i[s],r.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},"register":function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")
},"useRegister":function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},"pushStackLiteral":function(e){return this.push(new t(e))},"pushSource":function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},"pushStack":function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},"replaceStack":function(e){var n,i="",r=this.isInline();
if(r){var s=this.popStack(!0);if(s instanceof t)n=s.value;else{var a=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(a)+" = "+s+"),",n=this.topStack()}}else n=this.topStack();var o=e.call(this,n);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+o+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+i+o+");")),n},"nextStack":function(){return this.pushStack()},"incrStack":function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()
},"topStackName":function(){return"stack"+this.stackSlot},"flushInline":function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var n=0,i=e.length;i>n;n++){var r=e[n];r instanceof t?this.compileStack.push(r):this.pushStack(r)}}},"isInline":function(){return this.inlineStack.length},"popStack":function(e){var n=this.isInline(),i=(n?this.inlineStack:this.compileStack).pop();return!e&&i instanceof t?i.value:(n||this.stackSlot--,i)},"topStack":function(e){var n=this.isInline()?this.inlineStack:this.compileStack,i=n[n.length-1];
return!e&&i instanceof t?i.value:i},"quotedString":function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},"setupHelper":function(e,t,n){var i=[];this.setupParams(e,i,n);var r=this.nameLookup("helpers",t,"helper");return{"params":i,"name":r,"callParams":["depth0"].concat(i).join(", "),"helperMissingParams":n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},"setupParams":function(e,t,n){var i,r,s,a=[],o=[],l=[];
a.push("hash:"+this.popStack()),r=this.popStack(),s=this.popStack(),(s||r)&&(s||(this.context.aliases.self="this",s="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),a.push("inverse:"+r),a.push("fn:"+s));for(var u=0;e>u;u++)i=this.popStack(),t.push(i),this.options.stringParams&&(l.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(a.push("contexts:["+o.join(",")+"]"),a.push("types:["+l.join(",")+"]"),a.push("hashContexts:hashContexts"),a.push("hashTypes:hashTypes")),this.options.data&&a.push("data:data"),a="{"+a.join(",")+"}",n?(this.register("options",a),t.push("options")):t.push(a),t.join(", ")
}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},u=0,c=o.length;c>u;u++)l[o[u]]=!0;return n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1
},i=n}(i),c=function(e,t,n,i){function r(){}function s(e,t){if(null==e||"string"!=typeof e&&e.constructor!==d.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=u(e),i=(new r).compile(n,t);return(new c).compile(i,t)}function a(e,t,n){function i(){var i=u(e),s=(new r).compile(i,t),a=(new c).compile(s,t,void 0,!0);return n.template(a)}if(null==e||"string"!=typeof e&&e.constructor!==d.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);
t=t||{},"data"in t||(t.data=!0);var s;return function(e,t){return s||(s=i()),s.call(this,e,t)}}var o={},l=e,u=t.parse,c=n,d=i;return o.Compiler=r,r.prototype={"compiler":r,"disassemble":function(){for(var e,t,n,i=this.opcodes,r=[],s=0,a=i.length;a>s;s++)if(e=i[s],"DECLARE"===e.opcode)r.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);r.push(e.opcode+" "+t.join(" "))}return r.join("\n")},"equals":function(e){var t=this.opcodes.length;
if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var s=0;s<i.args.length;s++)if(i.args[s]!==r.args[s])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},"guid":0,"compile":function(e,t){this.opcodes=[],this.children=[],this.depths={"list":[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={"helperMissing":!0,"blockHelperMissing":!0,"each":!0,"if":!0,"unless":!0,"with":!0,"log":!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];
return this.accept(e)},"accept":function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},"program":function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},"compileProgram":function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,s=n.depths.list.length;s>r;r++)t=n.depths.list[r],2>t||this.addDepth(t-1);
return i},"block":function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(t);"helper"===r?this.helperMustache(t,n,i):"simple"===r?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")
},"hash":function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var r=0,s=i.length;s>r;r++)t=i[r],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},"partial":function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")
},"content":function(e){this.opcode("appendContent",e.string)},"mustache":function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),this.opcode(e.escaped&&!t.noEscape?"appendEscaped":"append")},"ambiguousMustache":function(e,t,n){var i=e.id,r=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,s)},"simpleMustache":function(e){var t=e.id;
"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},"helperMustache":function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),r=e.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)
}},"ID":function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},"DATA":function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new l("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},"STRING":function(e){this.opcode("pushString",e.string)
},"INTEGER":function(e){this.opcode("pushLiteral",e.integer)},"BOOLEAN":function(e){this.opcode("pushLiteral",e.bool)},"comment":function(){},"opcode":function(e){this.opcodes.push({"opcode":e,"args":[].slice.call(arguments,1)})},"declare":function(e,t){this.opcodes.push({"opcode":"DECLARE","name":e,"value":t})},"addDepth":function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},"classifyMustache":function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;
if(n&&!t){var r=e.id.parts[0];i.knownHelpers[r]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},"pushParams":function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},"setupMustacheParams":function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},"setupFullMustacheParams":function(e,t,n){var i=e.params;
return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},o.precompile=s,o.compile=a,o}(n,l,u,a),d=function(e,t,n,i,r){var s,a=e,o=t,l=n.parser,u=n.parse,c=i.Compiler,d=i.compile,h=i.precompile,p=r,f=a.create,m=function(){var e=f();return e.compile=function(t,n){return d(t,n,e)},e.precompile=h,e.AST=o,e.Compiler=c,e.JavaScriptCompiler=p,e.Parser=l,e.parse=u,e};return a=m(),a.create=m,s=a}(s,a,l,c,u);return d}();define("handlebars-lib",function(e){return function(){var t;
return t||e.Handlebars}}(this)),define("plex/base/utils/formatters/DateTimeUtil",["underscore","moment","plex/base/utils/BaseClass","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){var r=n.extend({"formatHoursMinutes":function(e){var n=i.get(),r=t.duration(e),s=r.get("hours"),a=r.get("minutes"),o=r.get("seconds");return s&&a?n.t("{1} hr {2} min",s,a):s?n.t("{1} hr",s):a?n.t("{1} min",a):n.t("{1} sec",o)},"formatDate":function(e,n){return n||(n="MMMM D, YYYY"),e?t(e).format(n):""},"formatTimestamp":function(e,n){return n||(n="MMMM D, YYYY"),e?t.unix(e).format(n):""
},"formatDuration":function(n){if(!e.isNumber(n))return"0:00";var i=t.duration(n),r=i.seconds(),s=i.minutes(),a=i.hours(),o="";return o=10>r?":0"+r:":"+r,o=10>s&&a>0?"0"+s+o:s+o,a>0&&(o=a+":"+o),o},"formatMinutesRemaining":function(e){if(!e)return"";var t=i.get();if(60>e)return 1===e?t.t("{1} second left",e):t.t("{1} seconds left",e);var n=Math.ceil(e/60);return 1===n?t.t("{1} minute left",n):t.t("{1} minutes left",n)}});return new r}),define("plex/base/utils/formatters/MetadataUtil",["underscore","plex/base/utils/BaseClass","plex/base/adapters/LocalizerAdapter"],function(e,t,n){var i=t.extend({"formatBitrate":function(e,t){var n=["bps","kbps","Mbps","Gbps","Tbps"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);
return(e/Math.pow(1024,i)).toFixed(t)+" "+n[i+1]},"formatVideoQuality":function(e){var t=e[1],n=e[2],i=this.formatBitrate(t,1500==t?1:0);return t>=1e3&&n&&(i+=" "+n+"p"),i},"formatBytes":function(e){var t=["B","KB","MB","GB","TB"],n=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,n)).toFixed(2)+" "+t[n]},"formatVideoLevel":function(e){return e=parseInt(e,10),(e/10).toFixed(1)},"formatResolution":function(t){if(!t)return"";if("4k"===t)return"4K";var n=parseInt(t,10);return e.isNaN(n)?t.toUpperCase():t+"p"
},"formatAudioCodec":function(e){return e?"dca"===e?"DTS":e.toUpperCase():""},"formatAudioChannels":function(e){if(e=parseInt(e,10),!e)return"";var t=n.get();return 2>e?t.t("Mono"):3>e?t.t("Stereo"):(e-1).toString()+".1"}});return new i}),define("handlebars",["underscore","handlebars-lib","moment","plex/base/utils/formatters/StringUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/MetadataUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,r,s,a){t.registerHelper("if_eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)
}),t.registerHelper("if_neq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)}),t.registerHelper("t",function(){var e=a.get(),n=[].splice.call(arguments,0,arguments.length-1);return new t.SafeString(e.t.apply(e,n))}),t.registerHelper("csl",function(e){return e.join(", ")}),t.registerHelper("encodeUrl",function(e){return encodeURIComponent(e||"")}),t.registerHelper("tags",function(t){return e.pluck(t,"tag").join(",")});var o=[{"util":i,"helpers":["truncate","truncateMiddle","formatLabel","formatBoolean","upperCase","getLastSegment"]},{"util":s,"helpers":["formatBitrate","formatVideoQuality","formatBytes","formatVideoLevel","formatResolution","formatAudioCodec","formatAudioChannels"]},{"util":r,"helpers":["formatDate","formatTimestamp","formatDuration"]}];
return e.each(o,function(n){e.each(n.helpers,function(i){t.registerHelper(i,function(){return n.util[i].apply(n.util,e.initial(arguments))})})}),t.registerHelper("partial",function(n,i){var r=t.partials[n],s=i.hash.context?e.extend({},i.hash.context,i.hash):e.extend({},this,i.hash);return new t.SafeString(r(s))}),t}),define("text",["module"],function(e){var t,n,i,r,s,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),d=u&&location.hostname,h=u&&(location.port||void 0),p={},f=e.config&&e.config()||{};
return t={"version":"2.0.10","strip":function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},"jsEscape":function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},"createXhr":f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];
try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},"parseName":function(e){var t,n,i,r=!1,s=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!a||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,i=n||t,s=i.indexOf("!"),-1!==s&&(r="strip"===i.substring(s+1),i=i.substring(0,s),n?n=i:t=i),{"moduleName":t,"ext":n,"strip":r}},"xdRegExp":/^((\w+)\:)?\/\/([^\/\\]+)/,"useXhr":function(e,n,i,r){var s,a,o,l=t.xdRegExp.exec(e);return l?(s=l[2],a=l[3],a=a.split(":"),o=a[1],a=a[0],!(s&&s!==n||a&&a.toLowerCase()!==i.toLowerCase()||(o||a)&&o!==r)):!0
},"finishLoad":function(e,n,i,r){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),r(i)},"load":function(e,n,i,r){if(r.isBuild&&!r.inlineText)return void i();f.isBuild=r.isBuild;var s=t.parseName(e),a=s.moduleName+(s.ext?"."+s.ext:""),o=n.toUrl(a),l=f.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void i():void(!u||l(o,c,d,h)?t.get(o,function(n){t.finishLoad(e,s.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,i)}))},"write":function(e,n,i){if(p.hasOwnProperty(n)){var r=t.jsEscape(p[n]);
i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},"writeFile":function(e,n,i,r,s){var a=t.parseName(n),o=a.ext?"."+a.ext:"",l=a.moduleName+o,u=i.toUrl(a.moduleName+o)+".js";t.load(l,i,function(){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},t.write(e,l,n,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");
0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(s){i(s)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,r){var s,a=t.createXhr();if(a.open("GET",e,!0),r)for(s in r)r.hasOwnProperty(s)&&a.setRequestHeader(s.toLowerCase(),r[s]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(){var t,r;4===a.readyState&&(t=a.status,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=a,i(r)):n(a.responseText),f.onXhrComplete&&f.onXhrComplete(a,e))},a.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",s=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),l="";
try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{o.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,o,l={};
s&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(o,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),t(l.value)}catch(u){throw new Error((o&&o.path||"")+": "+u)}}),t}),define("hb",["underscore","handlebars-lib","text"],function(e,t,n){var i={},r=function(r,s,a,o){if(o.isBuild&&"undefined"!=typeof process&&process.versions&&process.versions.node){var l=require.nodeRequire("fs"),u=e.chain(o.templatePathPrefixs).map(function(e){return e+r+".tpl"
}).filter(function(e){return l.existsSync(e)}).map(function(e){return l.readFileSync(e,"utf8")}).first().value(),c=t.precompile(u);i[r]=c,a(c)}else n.get(s.toUrl(r+".tpl"),function(e){var n=t.compile(e);a(n)})},s=function(e,t,n){if(t in i){var r=i[t];n('define("'+e+"!"+t+'", ["handlebars"], function (Handlebars){return Handlebars.template('+r+");});\n")}},a=function(e,t){return".tpl"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)};return{"load":r,"write":s,"normalize":a}}),define("hb!plex/tv/views/globals/TVAppView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="content"></div>\n<div id="modals"></div>\n'
})}),define("plex/tv/adapters/KeyMappingAdapter",["plex/base/adapters/Adapter"],function(e){return new e}),define("plex/tv/views/globals/TVAppView",["hb!./TVAppView","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/tv/adapters/KeyMappingAdapter"],function(e,t,n,i,r,s){var a=i.Layout.extend({"el":".TVApp","template":e,"regions":{"content":"#content"},"ui":{"modals":"#modals"},"events":{"focus :focus":"onFocus","focusout":"onBlur","keydown #modals":"onModalKeydown"},"initialize":function(){t.bindAll(this,"onWindowFocus"),this.modals=[],this.listenTo(r,"show:view",this.onShowView),this.listenTo(r,"show:modal",this.onShowModal),this.listenTo(r,"close:modals",this.onCloseModals),this.focusCursorEnabled=!0,this.listenTo(r,"cursor:enable",this.onEnableCursor),this.listenTo(r,"cursor:disable",this.onDisableCursor),window.PLEXWEB.devmode&&this.listenTo(r,"key:green",this.onReload),n(window).on("focus",this.onWindowFocus)
},"onShowView":function(e){r.trigger("cycle:cache"),this.content.show(e),r.trigger("hide:loading"),n.freefocus("cache")},"onFocus":function(e){if(this.focusCursorEnabled){var t=n(e.target);t.length&&r.trigger("cursor:move",t.freefocus("dimensions"))}},"onBlur":function(e){this.focusCursorEnabled&&n(e.target).is(n.freefocus.selector)&&(this.lastFocusedElement=e.target,t.defer(t.bind(function(){n(":focus").length||r.trigger("cursor:hide"),n(document.activeElement).is(n.freefocus.selector)||n(this.lastFocusedElement).trigger("prefocus").trigger("focus")
},this)))},"onWindowFocus":function(){this.lastFocusedElement&&t.defer(t.bind(function(){n(":focus").length||n(this.lastFocusedElement).trigger("prefocus").trigger("focus")},this))},"onEnableCursor":function(){this.focusCursorEnabled=!0},"onDisableCursor":function(){this.focusCursorEnabled=!1},"onShowModal":function(e,i,r){this.ui.modals.show(),this.modals.length&&t.last(this.modals).$el.hide(),this.modals.push(e),this.listenToOnce(e,"close",function(){this.modals.pop(),t.defer(t.bind(function(){if(t.isFunction(i)&&i.call(r),this.modals.length){var e=this.ui.modals.children().last();
e.show(),n.freefocus.selectorContext=e}else this.ui.modals.hide(),n.freefocus.selectorContext=void 0},this))}),n.freefocus.selectorContext=e.el,e.render(),this.ui.modals.append(e.el)},"onModalKeydown":function(e){var n=s.get()[e.which];"back"===n&&(e.preventDefault(),e.stopPropagation(),t.last(this.modals).close())},"onCloseModals":function(){for(;this.modals.length;)t.last(this.modals).close()},"onClose":function(){n(window).off("focus",this.onWindowFocus)},"onReload":function(){location.reload(!0)
}});return a}),define("plex/tv/views/globals/FocusCursorView",["underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/Logger"],function(e,t,n,i,r){var s=n.View.extend({"el":".FocusCursor","initialize":function(){this.listenTo(i,"cursor:hide",this.onCursorHide),this.listenTo(i,"cursor:show",this.onCursorShow),this.listenTo(i,"cursor:move",this.onCursorMove),this.listenTo(i,"focus:element",this.onFocusElement),this.cursorVisible=!1},"onCursorHide":function(){this.cursorVisible&&(this.cursorVisible=!1,this.$el.css({"display":"none"}))
},"onCursorShow":function(){this.cursorVisible||(this.cursorVisible=!0,this.$el.css({"display":""}))},"onCursorMove":function(e,t){t&&(e={"left":e.left-t,"top":e.top-t,"width":e.width+2*t,"height":e.height+2*t}),this.$el.css(e),this.onCursorShow()},"isFocusable":function(e){return e=e instanceof t?e:t(e),e&&e.length>0&&document.body.contains(e[0])&&e.is(t.freefocus.selector)&&e.is(":visible")&&e.is(":disabled")===!1},"onFocusElement":function(e){var n=this.isFocusable;setTimeout(function(){n(e)||(e=e.find(t.freefocus.selector).filter(function(e,t){return n(t)
}).first()),e.length>0?e.trigger("prefocus").trigger("focus"):r.warn("Nothing to focus")},0)}});return s}),define("hb!plex/tv/views/globals/LoadingIndicatorView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},"<h1>Loading...</h1>\n"})}),define("plex/tv/views/globals/LoadingIndicatorView",["hb!./LoadingIndicatorView","underscore","jquery","marionette","plex/base/utils/Dispatcher"],function(e,t,n,i,r){var s=i.ItemView.extend({"el":".LoadingIndicator","template":e,"initialize":function(){this.listenTo(r,"show:loading",this.onShowLoading),this.listenTo(r,"hide:loading",this.onHideLoading)
},"onShowLoading":function(){r.trigger("cursor:hide"),this.$el.show()},"onHideLoading":function(){this.$el.hide(),this.$el.removeClass("splash")}});return s}),define("hb!plex/tv/views/screens/system/ErrorView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,o="",l=n.helperMissing,u=this.escapeExpression;return o+="<h1>",a={"hash":{},"data":r},o+=u((s=n.t||t&&t.t,s?s.call(t,t&&t.title,a):l.call(t,"t",t&&t.title,a)))+"</h1>\n\n<p>",a={"hash":{},"data":r},o+=u((s=n.t||t&&t.t,s?s.call(t,t&&t.message,a):l.call(t,"t",t&&t.message,a)))+'</p>\n\n<p>\n  <button class="try-again">Try Again</button>\n  <button class="go-home">Go Home</button>\n</p>\n'
})}),define("plex/tv/views/screens/system/ErrorView",["hb!./ErrorView","underscore","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/tv/adapters/KeyMappingAdapter"],function(e,t,n,i,r,s){var a=n.ItemView.extend({"className":"Error","template":e,"events":{"click .try-again":"onTryAgainClick","click .go-home":"onGoHomeClick","keydown *":"onKeydown"},"initialize":function(e){t.extend(this,t.pick(e,"title","message"))},"serializeData":function(){return{"title":this.title,"message":this.message}
},"onRender":function(){i.trigger("focus:element",this.$el)},"onTryAgainClick":function(){location.reload(!0)},"onGoHomeClick":function(){i.trigger("navigate","redirectToServer")},"onKeydown":function(e){var t=s.get()[e.which];"back"===t&&(e.preventDefault(),e.stopPropagation())}});return a}),define("hb!plex/tv/views/screens/system/SignInWithPINView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return"\n      From your browser, go to\n      http://plex.tv/pin\n      and enter this code:\n    "
}function a(){return"\n      The PIN has expired.\n      Please 'Refresh' to try again.\n    "}function o(e){var t="";return t+='\n      <span class="digit">'+p(typeof e===h?e.apply(e):e)+"</span>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,u,c,d="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;return d+='<div class="chevron chevron-bg"></div>\n\n<div class="container ',(l=n.status)?l=l.call(t,{"hash":{},"data":r}):(l=t&&t.status,l=typeof l===h?l.call(t,{"hash":{},"data":r}):l),d+=p(l)+'">\n  <h1>Welcome to Plex</h1>\n\n  <div id="message">\n    ',c={"hash":{},"inverse":f.noop,"fn":f.program(1,s,r),"data":r},l=n.if_eq||t&&t.if_eq,u=l?l.call(t,t&&t.status,"pending",c):m.call(t,"if_eq",t&&t.status,"pending",c),(u||0===u)&&(d+=u),d+="\n    ",c={"hash":{},"inverse":f.noop,"fn":f.program(3,a,r),"data":r},l=n.if_eq||t&&t.if_eq,u=l?l.call(t,t&&t.status,"expired",c):m.call(t,"if_eq",t&&t.status,"expired",c),(u||0===u)&&(d+=u),d+='\n  </div>\n\n  <div id="pin">\n    ',u=n.each.call(t,t&&t.digits,{"hash":{},"inverse":f.noop,"fn":f.program(5,o,r),"data":r}),(u||0===u)&&(d+=u),d+='\n  </div>\n\n  <button id="refresh">Refresh</button>\n</div>\n'
})}),define("plex/base/models/user/PINModel",["underscore","jquery","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"url":function(){return this.isNew()?"/pins.json":"pins/"+this.id+".json"},"whitelistedAttrs":["id","code","expires_at","auth_token"],"convert":function(e){return t.parseJSON(e).pin},"sync":function(e,t,i){return this.isNew()&&"read"===e&&(e="create"),n.prototype.sync.call(this,e,t,i)}});return i}),define("plex/base/commands/server/TestServerConnectionCommand",["underscore","jquery","plex/base/utils/Logger"],function(e,t,n){function i(i){var r=i.server,s=i.connection,a=r.get("friendlyName"),o=r.url(s),l=t.Deferred();
s.test&&"pending"===s.test.state()&&(s.aborting=!0,s.test.abort(),s.aborting=!1),n.info("Testing connection to "+a+" at "+o);var u=e.extend(r.getXHROptions(o),{"timeout":1e4});u.data=e.extend(u.headers,u.data||{}),delete u.headers;var c=t.ajax(u);return s.test=c,c.always(function(){s.test=null}),c.done(function(e,t,i){var u=r.parse(e),c=u&&u.machineIdentifier;!c||r.id&&u.machineIdentifier!==r.id?(n.warn(a+" is unavailable at "+o+" (Invalid Response)"),l.reject(r,s,i)):(n.success(a+" is available at "+o),l.resolve(r,s,u,o))
}),c.fail(function(e){n.warn(a+" is unavailable at "+o+" (Status "+e.status+")"),l.reject(r,s,e)}),l.promise()}return i}),define("plex/base/commands/server/TestServerImageCommand",["underscore","jquery","plex/base/utils/Logger"],function(e,t,n){function i(e){var i,r=e.server,s=e.connection,a=r.get("friendlyName"),o=(new Date).getTime(),l=r.resolveUrl("/web/img/blank.png?cb="+o,{"connection":s}),u=t.Deferred();n.info("Testing image for "+a+" at "+l);var c=new Image;return c.onload=function(){c.onload=c.onerror=c.onabort=null,i=clearTimeout(i),n.success("Image test for "+a+" was successful. Show mixed content warning."),u.resolve(r,s)
},c.onerror=c.onabort=function(){c.onload=c.onerror=c.onabort=null,i=clearTimeout(i),n.warn(a+" is unavailable at "+l),u.reject(r,s)},i=setTimeout(function(){c.onload=c.onerror=c.onabort=null,c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n.warn(a+" is unavailable at "+l+" (Timeout)"),u.reject(r,s)},5e3),c.src=l,u.promise()}return i}),define("plex/base/commands/user/RecommendCommand",["jquery","underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,r){function s(s){var a=r.get("user"),o=s.item.get("url"),l=[],u={"url":o,"message":s.message};
t.each(s.playlistIDs,function(n){var i="/pms/playlists/"+n+"/items?"+e.param(u),r=t.extend(a.server.getXHROptions(i),{"type":"POST"});l.push(e.ajax(r))});var c=e.when.apply(e,l);return c.fail(function(){var e,t=i.get();e=t.t("There was a problem recommending this item."),n.trigger("show:alert",{"type":"error","message":e})}),c.promise()}return s}),define("plex/base/commands/user/SignInCommand",["jquery","plex/base/utils/Dispatcher","plex/base/utils/formatters/StringUtil","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/AppModel"],function(e,t,n,i,r,s){function a(a){var o,l=s.get("user");
if(a.username&&a.password){o=l.server.getXHROptions("/users/sign_in.xml"),o.type="POST";var u="Basic "+n.encode64(n.toUtf8(a.username+":"+a.password));o.headers.Authorization=u,c=e.ajax(o)}else o=l.server.getXHROptions("/users/account.xml?auth_token="+a.accessToken),o.type="GET";var c=e.ajax(o);return c.done(function(t){var n=r.get(),i=l.parse(t),o=i.accessToken,u=s.get("servers");u.populatePromise=e.Deferred(),s.get("primaryServer")===!1&&s.set("primaryServer",null),l.server.set("accessToken",o),l.set(i),n.set({"key":"myPlexAccessToken","value":o,"session":!a.remember})
}),c.fail(function(e){var n,r=i.get();n=r.t(401===e.status&&a.username&&a.password?"The username or password is incorrect.":"There was a problem connecting to Plex."),t.trigger("show:alert",{"type":"error","message":n})}),c.promise()}return a}),define("plex/base/commands/user/SignUpCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/AppModel"],function(e,t,n,i,r,s,a){function o(o){var l=a.get("user"),u=e.pick(o,"username","email","password");
o.birthday&&(u.birthday_str=o.birthday.format("YYYY/MM/DD"));var c=l.server.getXHROptions("/users?format=xml");c.type="POST",c.data=u;var d=t.ajax(c);return d.done(function(e){var t=s.get(),n=l.parse(e),i=n.accessToken;l.server.set("accessToken",i),l.set(n),t.set({"key":"myPlexAccessToken","value":i,"session":!o.remember})}),d.fail(function(t){var s,a=r.get();if(422===t.status){var o=t.responseText,l=i.parseXML(o);i.parseArray(l,"error"),s=a.t(l.error.length?e.first(l.error):"This account information is invalid.")
}else s=a.t("There was a problem connecting to Plex.");n.trigger("show:alert",{"type":"error","message":s})}),d.promise()}return o}),define("plex/base/commands/user/SignOutCommand",["underscore","jquery","backbone","plex/base/models/ConfigModel","plex/base/utils/Dispatcher","plex/base/initializers/ServerInitializer","plex/base/adapters/StorageAdapter","plex/base/models/AppModel","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,r,s,a,o,l){function u(){var n=a.get(),u=o.get("user"),c=o.get("servers"),d=u.server;
return n.clear({"session":!0}),n.remove({"key":"myPlexAccessToken"}),l.clear(),l.save(e.result(l,"defaults")),i.get("hosted")?(window.location="/users/sign_out",t.Deferred().reject().promise()):(o.set({"primaryServer":null,"history":[]}),u.stopListening(),u.clear(),u.set(e.result(u,"defaults")),u.initialize(),d.secondaryServersPromise=null,d.connections=[],d.clear(),d.set(e.result(d,"defaults")),r.trigger("clear:cache"),c.reset([d]),d.cache.store(d),o.set("authorized",!1),r.trigger("disconnect:websocket"),s.init(),t.Deferred().resolve().promise())
}return u}),define("plex/base/commands/user/ShareCommand",["jquery","underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,r){function s(s){var a=r.get("user"),o=s.item.get("url"),l=[],u={"url":o,"message":s.message};t.each(s.networkIDs,function(n){var i="/pms/social/networks/"+n+"/share?"+e.param(u),r=t.extend(a.server.getXHROptions(i),{"type":"POST"});l.push(e.ajax(r))});var c=e.when.apply(e,l);return c.fail(function(){var e,t=i.get();
e=t.t("There was a problem sharing this item."),n.trigger("show:alert",{"type":"error","message":e})}),c.promise()}return s}),define("plex/base/commands/library/SelectStreamCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,r){function s(s){var a=t.Deferred(),o=s.type,l=s.item,u=s.streamID,c=e.first(l.get("Media"));if(!c)return a.reject().promise();var d=e.first(c.Part);if(!d)return a.reject().promise();
var h=2===o?"audioStreamID":"subtitleStreamID",p="/library/parts/"+d.id+"?"+h+"="+u,f=e.extend(l.server.getXHROptions(p),{"type":"PUT"}),m=t.ajax(f);return m.done(function(){var t=i.getStreams(c,{"streamType":o});e.each(t,function(e){e.selected=e.id===u}),l.trigger("change:streams"),a.resolve()}),m.fail(function(e){var t=r.get();n.trigger("show:alert",{"type":"error","message":t.t("There was a problem selecting the stream for this item.")}),a.reject(e)}),a.promise()}return s}),define("plex/base/commands/Commands",["underscore","plex/base/utils/Dispatcher","plex/base/commands/server/TestServerConnectionCommand","plex/base/commands/server/TestServerImageCommand","plex/base/commands/user/RecommendCommand","plex/base/commands/user/SignInCommand","plex/base/commands/user/SignUpCommand","plex/base/commands/user/SignOutCommand","plex/base/commands/user/ShareCommand","plex/base/commands/library/SelectStreamCommand"],function(e,t,n,i,r,s,a,o,l,u){var c={"map":{"testServerConnection":n,"testServerImage":i,"signIn":s,"signUp":a,"signOut":o,"share":l,"recommend":r,"selectStream":u},"execute":function(t){var n=c.map,i=e.toArray(arguments).slice(1);
return n.hasOwnProperty(t)?n[t].apply(c,i):!1}};return t.on("command",function(t,n,i){var r=c.execute.apply(this,arguments);e.isFunction(i)&&i(r)}),c}),define("plex/tv/views/screens/system/SignInWithPINView",["hb!./SignInWithPINView","underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/models/user/PINModel","plex/base/commands/Commands"],function(e,t,n,i,r,s,a,o,l){var u=r.ItemView.extend({"className":"SignInWithPIN","template":e,"events":{"click    #refresh":"onRefreshPressed","keypress #refresh":"onRefreshPressed"},"pinCheckInterval":5e3,"initialize":function(){t.bindAll(this,"checkPIN"),this.listenTo(a.get("user"),"change:signedIn",this.onUserSignedInChanged),this.createPIN()
},"serializeData":function(){var e=this.pin.get("code")||"";return{"status":this.status,"digits":e.split("")}},"createPIN":function(){this.pin&&this.stopListening(this.pin,"change",this.onPINChange),this.pin=new o({},{"server":a.get("user").server}),this.listenTo(this.pin,"change",this.onPINChange),this.pin.populate({"reset":!0}),this.status="loading",this.pinTimeout=setTimeout(this.checkPIN,this.pinCheckInterval)},"checkPIN":function(){delete this.pinTimeout;var e=this.pin.fetch();e.done(t.bind(function(){this.pin.get("auth_token")?l.execute("signIn",{"accessToken":this.pin.get("auth_token"),"remember":!0}):this.pinTimeout=setTimeout(this.checkPIN,this.pinCheckInterval)
},this)),e.fail(t.bind(function(){this.status="expired",this.isClosed||this.render()},this))},"onRender":function(){s.trigger("focus:element",this.$el)},"onRefreshPressed":function(){("keypress"!==event.type||13===event.which)&&(this.createPIN(),this.render())},"onUserSignedInChanged":function(e){e.get("signedIn")&&s.trigger("navigate:refresh")},"onPINChange":function(){this.status="pending",this.render()},"onClose":function(){this.pinTimeout&&(clearTimeout(this.pinTimeout),delete this.pinTimeout)
}});return u}),define("hb!plex/tv/views/screens/system/SubscriptionGateView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="chevron chevron-bg"></div>\n\n<div class="container">\n  <h1>You\'re almost there!</h1>\n\n  <div id="message">\n    <p>This screen will self destruct after you purchase a Plex Pass</p>\n  </div>\n\n</div>\n'})}),define("plex/tv/utils/deviceManufacturer",["plex/base/utils/BaseClass"],function(e){var t="undefined"!=typeof window,n=e.extend({"tests":[{"id":"sony","name":"Sony","predicate":function(e){return/playstation|sony/i.test(e.userAgent)
}},{"id":"nintendo","name":"Nintendo","predicate":function(e){return/nintendo/i.test(e.userAgent)}},{"id":"tivo","name":"TiVo","predicate":function(e){var n=t&&void 0!==window.tivo;return n||/tivo/i.test(e.userAgent)}},{"id":"lg","name":"LG","predicate":function(e){var t=e.userAgent;return/netcast/i.test(t)||/web[o0]s/i.test(t)&&/large screen/i.test(t)}},{"id":"samsung","name":"Samsung","predicate":function(e){return/Samsung|SmartHub|SMART-TV/.test(e.userAgent)}},{"id":"wd","name":"WD","predicate":function(e){var t=e.userAgent;
return/QtEmbedded/.test(t)&&/SigmaDesigns/.test(t)}},{"id":"generic","name":"Generic Smart TV","predicate":function(e){var t=e.userAgent;return/smart-?tv/i.test(t)||/large screen/i.test(t)||/hbbtv/i.test(t)}}],"id":"unknown","name":"Unknown Manufacturer","constructor":function(e){var t="",n="";e?(t=e.userAgent,n=e.platform):null!=navigator&&(t=navigator.userAgent,n=navigator.platform),this.detect({"userAgent":t,"platform":n})},"detect":function(e){var t=this.runTests(this.tests,e);t&&(this.id=t.id,this.name=t.name)
},"runTests":function(e,t){for(var n=0,i=e.length;i>n;n++){var r=e[n];if(r.predicate(t))return r}}});return new n}),define("plex/tv/models/SubscriptionGateModel",["underscore","jquery","backbone","plex/base/models/AppModel","plex/base/utils/Browser","plex/tv/utils/deviceManufacturer"],function(e,t,n,i){var r=i.get("user"),s=[function(){return!0}],a=[function(){return r.get("signedIn")===!0},function(){return r.hasPlexPass()===!1}],o=function(e){return e()};return n.Model.extend({"fetch":function(){var n=t.Deferred(),i=r.fetch.apply(r,arguments);
return i.done(e.bind(function(e){n.resolveWith(this,[this,e])},this)),i.fail(e.bind(function(e){n.rejectWith(this,[this,e])},this)),n.promise()},"shouldDisplayToDevice":function(){var e=s.some(o);return e},"shouldDisplayToUser":function(){var e=a.every(o);return e},"shouldDisplay":function(){return this.shouldDisplayToUser()&&this.shouldDisplayToDevice()}})}),define("plex/tv/views/screens/system/SubscriptionGateView",["hb!./SubscriptionGateView","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/tv/models/SubscriptionGateModel"],function(e,t,n,i,r,s){return n.ItemView.extend({"className":"SubscriptionGateView","template":e,"checkInterval":5e3,"checkTimeout":null,"initialize":function(){this.subscriptionGateModel=new s
},"startPolling":function(){this.clearPolling(),this.checkTimeout=setTimeout(t.bind(this.onPoll,this),this.checkInterval)},"clearPolling":function(){this.checkTimeout&&(this.checkTimeout=clearTimeout(this.checkTimeout))},"onPoll":function(){var e=this.subscriptionGateModel,n=t.bind(function(){e.shouldDisplay()?this.startPolling():i.trigger("navigate:refresh")},this);e.fetch().fail(function(){r.warn("Subscription check failed")}).always(n)},"onRender":function(){this.startPolling(),i.trigger("focus:element",this.$el)
},"onClose":function(){this.clearPolling()}})}),define("plex/tv/routes/TVAppController",["underscore","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/routes/BaseController","plex/tv/views/globals/TVAppView","plex/tv/views/globals/FocusCursorView","plex/tv/views/globals/LoadingIndicatorView","plex/tv/views/screens/system/ErrorView","plex/tv/views/screens/system/SignInWithPINView","plex/tv/views/screens/system/SubscriptionGateView","plex/tv/models/SubscriptionGateModel","plex/base/commands/Commands"],function(e,t,n,i,r,s,a,o,l,u,c,d){var h=i.extend({"initialize":function(){this.appView=new r,this.appView.render(),this.focusCursor=new s,this.focusCursor.render(),this.loadingIndicator=new a,this.loadingIndicator.render(),this.gateModel=new c,t.on("key:back",function(){t.trigger("navigate:back")
})},"redirectToServer":function(){var n=e.bind(this.populateView,this),i=this.gateModel;n({"serverID":"myPlex"}).then(function(){return n({"primaryServer":!0})}).done(function(e){i.shouldDisplay()?t.trigger("navigate","subscriptionGate",{"silent":!0}):t.trigger("navigate","serverDashboard",{"serverID":e.server.id})})},"login":function(){t.trigger("show:view",new l)},"logout":function(){d.execute("signOut"),t.trigger("navigate:back")},"subscriptionGate":function(){t.trigger("show:view",new u)},"unauthorized":function(e){var i=n.get("user").get("signedIn"),r=n.get("servers"),s=r.findWhere({"authorized":!0}),a=e.server,l=e.options;
if(!s){var u=r.findWhere({"available":!0});if(u&&!i)return void t.trigger("navigate","login",{"silent":!0});var c=r.findWhere({"cloud":!0});return void(c.get("downForMaintenance")?t.trigger("show:view",new o({"title":"Plex is down for maintenance.","message":"Don't worry, it'll be back soon."})):t.trigger("show:view",new o({"title":"Plex is not reachable.","message":"Make sure your server has an internet connection and any firewalls or other programs are set to allow access."})))}if(!a)return void(l.primaryServer?t.trigger("show:view",new o({"title":"You don't have any media servers yet.","message":"Download it from plex.tv, install and try again."})):t.trigger("show:view",new o({"title":"Media server not found.","message":"The server you're trying to access doesn't seem to exist."})));
if(!a.get("available"))return void t.trigger("show:view",new o({"title":"Server unavailable.","message":"We couldn't reach this server. Make sure it's online and try again."}));if(!a.get("authorized")){if(!i)return void t.trigger("navigate","login",{"silent":!0});t.trigger("show:view",new o({"title":"No soup for you!","message":"The server you're trying to access doesn't want to let you in. Make sure you're signed in as a user with access to this server."}))}l.channelID?t.trigger("show:view",new o({"title":"This channel is not responding."})):t.trigger("show:view",new o({"title":"Media not found.","message":"The media you're trying to access doesn't seem to exist."}))
},"error":function(){t.trigger("show:view",new o({"title":"You must be lost.","message":"This page doesn't exist."}))}});return h}),define("plex/tv/routes/TVAppRouter",["plex/base/routes/BaseAppRouter","./TVAppController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"":"redirectToServer","!/login":"login","!/logout":"logout","!/unauthorized":"unauthorized","!/subscriptionGate":"subscriptionGate","*404":"error"}});return n}),define("plex/base/utils/PosterSizes",[],function(){return{"sizes":{"movie":"portrait","show":"portrait","season":"portrait","episode":"landscape","artist":"square","album":"square","track":"square","photo":"square","photoAlbum":"square","clip":"landscape","playlistItem":"landscape","channel":"square","channelDirectory":"square","folder":"portrait","friend":"square","poster":"portrait","art":"landscape","banner":"banner","homevideo":"landscape"},"ratios":{"portrait":1/1.5,"square":1,"landscape":16/9,"banner":5.2},"getRatioByType":function(e){return this.ratios[this.sizes[e]]
},"getPosterWidth":function(e,t){return t*this.getRatioByType(e)},"getPosterHeight":function(e,t){return t/this.getRatioByType(e)}}}),define("plex/base/models/user/PlaylistItemModel",["underscore","plex/base/utils/Parser","plex/base/models/library/MetadataModel"],function(e,t,n){var i=n.extend({"idAttribute":"id","url":function(){return"/pms/playlists/"+this.get("playlist")+"/items/"+this.id},"initialize":function(e,t){this.set("playlist",t.playlist||this.collection.key)},"convert":function(){var e=n.prototype.convert.apply(this,arguments);
return t.parseInteger(e,"id"),e},"parse":function(){var e=n.prototype.parse.apply(this,arguments);if(e.type="playlistItem",e.ratingKey=e.url,e.thumb){var i=/\?(\d+)$/.exec(e.thumb);i&&(e.addedAt=i[1],t.parseInteger(e,"addedAt"))}return e}});return i}),define("plex/base/models/user/PlaylistItemCollection",["underscore","plex/base/utils/Parser","plex/base/models/ConfigModel","plex/base/models/BaseCollection","plex/base/models/user/PlaylistItemModel"],function(e,t,n,i,r){var s=i.extend({"model":r,"url":function(){return"/pms/playlists/"+this.key+"/"+this.subset
},"initialize":function(e,t){this.key=t.key,this.label=t.label||"queue"===this.key?"Queue":"Recommended",this.subset=t.subset||"all","queue"===this.key&&(this.helpRoute=n.get("bundled")||n.get("hosted")?"#!/playlist/"+this.key+"/help":this.server.resolveUrl("/queue/help"))},"parse":function(n){var i=this.convert(n);return t.parseArray(i,"Video"),e.each(i.Video,function(t){t.identifier=i.identifier,t.containerKey=e.result(this,"url")},this),i.Video},"filterWatched":function(){var e=this.filter(function(e){return!!e.get("viewCount")
});return this.clone(e)},"filterUnwatched":function(){var e=this.filter(function(e){return!e.get("viewCount")});return this.clone(e)}});return s}),define("hb!plex/tv/views/screens/library/DashboardView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="topBar">\n  <div class="logo"></div>\n  <div class="user-menu-container"></div>\n  <div class="server-select-container">\n    <a href="#/" class="home-link">\n      <span>Go Home</span>\n      <i class="pms-logo"></i>\n    </a>\n  </div>\n</div>\n\n<div class="scroller-container"></div>\n\n<div class="info-container"></div>\n'
})}),define("plex/tv/utils/ThrottledTaskQueue",["underscore"],function(e){function t(r,o){a=setTimeout(function(){a=null,n(),e.times(o,i),s.length&&t(r,o)},r)}function n(){var t=(new Date).getTime();s=e.filter(s,function(e){return e.expire>t})}function i(){for(var e=0;e<s.length;e++){var t=s[e],n=!1;try{n=t.fn.apply(t.thisArg)}catch(i){console.error(i),n=!0}if(n){s.splice(e,1);break}}}var r={"wait":100,"batchSize":1,"timeout":3e4,"enqueue":function(e,n,i,r){var o={"fn":e,"thisArg":n,"cancelToken":i,"expire":(new Date).getTime()+this.timeout};
r?s.unshift(o):s.push(o),a||t(this.wait,this.batchSize)},"cancel":function(t){s=e.reject(s,function(e){return e.cancelToken===t})}},s=[],a=null;return r}),define("plex/tv/utils/PageStorage",["underscore","backbone"],function(e,t){function n(e){var n=t.history.getFragment(),i=r[n];return!i&&e&&(i=r[n]={}),i||s}var i={"set":function(e,t){n(!0)[e]=t},"get":function(e){return n()[e]}},r={},s={};return i}),define("plex/tv/views/components/library/ViewContainerView",["underscore","marionette"],function(e,t){var n=t.View.extend({"initialize":function(e){this.children=e.children
},"render":function(){var t=document.createDocumentFragment();e.each(this.children,function(e){e.render(),t.appendChild(e.el)},this),this.$el.append(t)},"onClose":function(){e.each(this.children,function(e){e.close()}),this.children=[]}});return n}),define("plex/tv/views/components/library/ScrollerView",["underscore","jquery","marionette","plex/base/utils/Dispatcher","./ViewContainerView"],function(e,t,n,i,r){var s=r.extend({"className":"Scroller","events":{"focus :focus":"onFocus"},"viewScrolling":"focusedFirstHideFirst","viewScrollingScale":"child","hideFirstLeftMargin":325,"initialize":function(e){r.prototype.initialize.apply(this,arguments),this.lastOffsetLeft=e.initialOffset||0
},"render":function(){r.prototype.render.apply(this,arguments),e.defer(e.bind(this.initDimensions,this)),this.$el.translate(this.lastOffsetLeft,0)},"findChildByElement":function(e){var t=e.parentsUntil(this.$el).last();return t.length?t:e},"initDimensions":function(){this.width=this.$el.outerWidth(),this.parentWidth=this.$el.parent().outerWidth(),this.firstLeft=this.$(t.freefocus.selector).first().offset().left-this.lastOffsetLeft,this.focusables=this.$(t.freefocus.selector),this.storeDimensions(this.focusables),"child"===this.viewScrollingScale&&this.storeDimensions(this.$el.children())
},"storeDimensions":function(e){var n=this.lastOffsetLeft;e.each(function(){var e=t(this).freefocus("dimensions");e.left-=n,t(this).data("scroller-dimensions",e)})},"initFocus":function(e){if(e){var n=e[0],r=e[1],s=this.$el.children();n>s.length-1&&(n=s.length-1);var a=s[n];if(a){var o=t(a).find(t.freefocus.selector);r>o.length-1&&(r=o.length-1);var l=o[r];if(l)return void i.trigger("focus:element",t(l))}}i.trigger("focus:element",this.$el)},"centerFocused":function(e,t){var n=t.left+t.width/2,i=Math.round(this.parentWidth/2-n);
return i},"focusedFirst":function(e,t){return this.firstLeft-t.left},"focusedFirstHideFirst":function(e,t){return e.is(":nth-child(2)")?this.firstLeft-t.left:this.hideFirstLeftMargin-t.left},"shiftByFocused":function(e,t){return t.left+t.width>this.parentWidth-this.firstLeft-this.lastOffsetLeft?this.parentWidth-(t.left+t.width)-this.firstLeft:t.left<this.firstLeft-this.lastOffsetLeft?this.firstLeft-t.left:this.lastOffsetLeft},"onFocus":function(n){var r=t(n.target),s=r.data("scroller-dimensions"),a=this.findChildByElement(r),o=this.$el.children().index(a),l=a.find(t.freefocus.selector).index(r);
if(this.trigger("focus",[o,l]),e.defer(e.bind(function(){this.$el.scrollLeft(0),(this.tvApp||(this.tvApp=t(".TVApp"))).scrollLeft(0)},this)),this.width){var u="child"===this.viewScrollingScale?a:r,c=u.data("scroller-dimensions"),d=this[this.viewScrolling](u,c);d<this.parentWidth-this.width&&(d=this.parentWidth-this.width),d>0&&(d=0),d!==this.lastOffsetLeft&&(this.$el.translate(d,0),this.lastOffsetLeft=d,this.focusables.freefocus("moved"),this.trigger("moved",d)),n.stopPropagation(),i.trigger("cursor:move",{"top":s.top,"left":s.left+d,"width":s.width,"height":s.height},1)
}}});return s}),define("hb!plex/tv/views/components/library/ServerSelectView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="\n    <ul>\n      ",i=n.each.call(e,e,{"hash":{},"inverse":f.noop,"fn":f.program(2,a,t),"data":t}),(i||0===i)&&(r+=i),r+="\n    </ul>\n  "}function a(e,t){var i,r="";return r+="\n        <li>\n          ",i=n["if"].call(e,e&&e.available,{"hash":{},"inverse":f.program(6,u,t),"fn":f.program(3,o,t),"data":t}),(i||0===i)&&(r+=i),r+="\n        </li>\n      "
}function o(e,t){var i,r="";return r+='\n            <a href="',(i=n.url)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.url,i=typeof i===h?i.call(e,{"hash":{},"data":t}):i),r+=p(i)+'" class="',i=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":f.noop,"fn":f.program(4,l,t),"data":t}),(i||0===i)&&(r+=i),r+='">\n              <i class="server-available"></i>\n              <span class="title">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===h?i.call(e,{"hash":{},"data":t}):i),r+=p(i)+'</span>\n              <i class="server-selected glyphicon ok-2"></i>\n            </a>\n          '
}function l(){return"selected"}function u(e,t){var i,r="";return r+='\n            <span>\n            <i class="server-unavailable"></i>\n            <span class="title">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===h?i.call(e,{"hash":{},"data":t}):i),r+=p(i)+'</span>\n            <span class="availability-details">',(i=n.availabilityDetails)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.availabilityDetails,i=typeof i===h?i.call(e,{"hash":{},"data":t}):i),r+=p(i)+"</span>\n          </span>\n          "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,d="",h="function",p=this.escapeExpression,f=this;return d+="<button>\n  <span>",(c=n.currentServerName)?c=c.call(t,{"hash":{},"data":r}):(c=t&&t.currentServerName,c=typeof c===h?c.call(t,{"hash":{},"data":r}):c),d+=p(c)+'</span>\n  <i class="pms-logo"></i>\n  <i class="dropdown-arrow"></i>\n</button>\n\n<div class="triangle menu"></div>\n\n<div class="menu">\n  ',c=n.each.call(t,t&&t.chunks,{"hash":{},"inverse":f.noop,"fn":f.program(1,s,r),"data":r}),(c||0===c)&&(d+=c),d+="\n</div>\n"
})}),define("hb!plex/tv/views/components/library/DropdownSelectView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='\n    <li>\n      <a href="',(i=n.url)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.url,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+'">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+"</a>\n    </li>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};
var a,o="",l="function",u=this.escapeExpression,c=this;return o+="<button>",(a=n.buttonHTML)?a=a.call(t,{"hash":{},"data":r}):(a=t&&t.buttonHTML,a=typeof a===l?a.call(t,{"hash":{},"data":r}):a),(a||0===a)&&(o+=a),o+='</button>\n<ul class="menu">\n  ',a=n.each.call(t,t&&t.items,{"hash":{},"inverse":c.noop,"fn":c.program(1,s,r),"data":r}),(a||0===a)&&(o+=a),o+="\n</ul>\n"})}),define("plex/tv/views/components/library/DropdownSelectView",["hb!./DropdownSelectView","underscore","jquery","marionette","plex/base/utils/Dispatcher"],function(e,t,n,i,r){var s=i.ItemView.extend({"className":"DropdownSelect","template":e,"isMenuVisible":!1,"ui":{"button":"button","menu":".menu"},"events":{"click button":"onButtonClick","focusout ul":"onMenuBlur"},"showMenu":function(){this.isMenuVisible=!0,this.render(),r.trigger("focus:element",this.ui.button),t.defer(t.bind(function(){this.ui.menu.show(),r.trigger("focus:element",this.ui.menu)
},this))},"hideMenu":function(){this.isMenuVisible=!1,this.ui.menu.hide()},"onRender":function(){this.isMenuVisible&&this.$(n.freefocus.selector).each(t.bind(function(e,t){t.id=this.cid+"_focusable_"+e,t.style.navUp="#"+this.cid+"_focusable_"+(e-1),t.style.navDown="#"+this.cid+"_focusable_"+(e+1)},this))},"onButtonClick":function(){this.showMenu()},"onMenuBlur":function(){setTimeout(t.bind(function(){this.ui.menu.find(":focus").length||this.hideMenu()},this),10)}});return s}),define("plex/tv/views/components/library/ServerSelectView",["hb!./ServerSelectView","underscore","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/models/server/ServerCollection","plex/base/utils/Logger","./DropdownSelectView"],function(e,t,n,i,r,s,a,o){var l=o.extend({"className":"DropdownSelect ServerSelect","template":e,"chunkLimit":10,"serializeData":function(){var e=[];
if(this.showMenu){var s=r.get("minServerVersion"),o=i.get("servers").filter(function(e){return e&&e.get("name")?e.get("cloud")||e.get("synced")?!1:e.get("shared")&&!e.get("authorized")?!1:!0:(a.warn("Invalid server skipped"),!1)});o.sort(function(e,t){return e.get("shared")&&!t.get("shared")?1:t.get("shared")&&!e.get("shared")?-1:e.get("authorized")&&!t.get("authorized")?-1:!e.get("authorized")&&t.get("authorized")?1:e.isVersionOrNewer(s)&&!t.isVersionOrNewer(s)?-1:!e.isVersionOrNewer(s)&&t.isVersionOrNewer(s)?1:e.get("name").toLowerCase()<t.get("name").toLowerCase()?-1:e.get("name").toLowerCase()>t.get("name").toLowerCase()?1:0
});var l=n.get();t.each(o,function(t){var n=!0,i="";t.get("authorized")?t.isVersionOrNewer(s)||(n=!1,i=l.t("server version {1} or higher required",s)):(n=!1,i=l.t("offline")),e.push({"url":"#!/server/"+encodeURIComponent(t.id)+"?rand="+Math.random(),"title":this.getFullName(t),"available":n,"availabilityDetails":i,"selected":t===this.model})},this)}var u=t.toArray(t.groupBy(e,function(e,t){return Math.floor(t/this.chunkLimit)},this));return{"currentServerName":this.getFullName(this.model),"chunks":u}
},"getFullName":function(e){var t=e.get("name");return e.get("shared")&&(t+=" ("+e.get("sourceTitle")+")"),t}});return l}),define("hb!plex/tv/views/components/library/UserMenuView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",o="function",l=this.escapeExpression;return a+="<button>\n  <span>",(s=n.username)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.username,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+'</span>\n  <i class="thumb"></i>\n  <i class="dropdown-arrow"></i>\n</button>\n\n<div class="triangle menu"></div>\n\n<div class="menu">\n  <ul>\n    <li>\n      <a class="settings-link" href="">Settings</a>\n    </li>\n    <li>\n      <a href="#!/logout">Sign Out</a>\n    </li>\n  </ul>\n</div>\n'
})}),define("plex/base/utils/PosterPlaceholders",[],function(){var e="placeholder-standard",t="placeholder-square",n="placeholder-widescreen",i="placeholder-folder",r="placeholder-friend";return{"movie":e,"show":e,"season":e,"episode":n,"artist":t,"album":t,"track":t,"photo":t,"photoAlbum":t,"clip":n,"playlistItem":n,"channel":t,"channelDirectory":t,"folder":i,"friend":r,"device":t,"poster":e,"art":n,"banner":n}}),define("plex/base/utils/Transcoder",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/MediaUtil"],function(e,t,n,i){var r={"dash":".mpd","hls":".m3u8","http":""},s=n.extend({"image":function(e,n,i){if(!n)return"";
var r=i.fallbackServer,s=r&&(e.get("cloud")||e.get("synced")),a=s?r:e,o=a.id===e.id;e.get("cloud")&&(n=r?r.resolveUrl(n,{"appendToken":!0}):e.resolveUrl(n,{"appendToken":!0,"connection":{"address":"node.plexapp.com","port":"32400"}}));var l={"url":e.resolveUrl(n,{"useLoopback":o}),"width":parseInt(i.width,10),"height":parseInt(i.height,10)};i.minSize&&(l.minSize=1);var u="/photo/:/transcode?"+t.param(l,!0);return a.resolveUrl(u,{"appendToken":!0})},"music":function(n,i,r){var s=e.first(i.get("Media"));
if(s){var a=e.first(s.Part);if(a){var o,l;return n.supports("universalMusicTranscoder")?(o=e.extend({"path":n.resolveUrl(i.get("key"),{"useLoopback":!0}),"mediaIndex":0,"partIndex":0},r),l="/music/:/transcode/universal/start.mp3"):(o={"identifier":i.get("identifier"),"url":n.resolveUrl(a.key,{"useLoopback":!0}),"format":"mp3","audioCodec":"libmp3lame","audioBitrate":320,"audioSamples":44100},l="/music/:/transcode/generic.mp3"),o=e.extend(o,n.getHeaders()),n.resolveUrl(l+"?"+t.param(o,!0))}}},"video":function(n,s,a,o,l){var u=e.indexOf(s.get("Media"),a),c=e.indexOf(a.Part,o);
l||(l={});var d=n.id===s.server.id,h=e.extend({"path":s.server.resolveUrl(s.get("key"),{"useLoopback":d,"appendToken":!d}),"mediaIndex":u,"partIndex":c,"protocol":"hls","offset":0,"fastSeek":1,"directPlay":0,"directStream":1,"videoQuality":i.qualities[12],"videoResolution":i.resolutions[12],"maxVideoBitrate":i.bitrates[12],"subtitleSize":100,"audioBoost":100},l);h.path=h.path.replace(/^http[s]?:\/\/node.plexapp.com:[\d]+\//,n.url());var p=s.get("indirectHttpHeaders");p&&(h.httpCookies=p.Cookie,h.userAgent=p["User-Agent"]),h=e.extend(h,n.getHeaders());
var f=r[h.protocol],m="/video/:/transcode/universal/start"+f;return n.resolveUrl(m+"?"+t.param(h,!0))}});return new s}),define("plex/base/utils/cache/ImageCache",["underscore","plex/base/utils/Capabilities","plex/base/utils/cache/Cache"],function(e,t,n){var i=n.extend({"maxCycles":3,"maxSize":50,"imageParamsRegex":/&?(width|height|minSize)=([^&]+)/g,"_infoMemo":{},"store":function(t,n){if(n||(n=this.getItemCacheKey(t)),n){var i=t.url,r=this.getImageInfo(i),s={"url":i,"blobUrl":t.blobUrl,"size":r.size},a=this.get(n);
if(a){if(!a.images.hasOwnProperty(i)){var o=a.sizes;a.images[i]=s;var l=e.sortedIndex(o,s,"size");o.splice(l,0,s)}}else a={"images":{},"sizes":[s]},a.images[i]=s,this.startListening(),a._cacheKey=n,this._cache[n]=a,this.size++,t.persistInCache||this.setItemCycle(a,n,e.first(this.cycles))}},"getItemCacheKey":function(e){var t=this.getImageInfo(e.url);return t.key},"getImageInfo":function(e){if(this._infoMemo.hasOwnProperty(e))return this._infoMemo[e];var t={"width":0,"height":0,"minSize":0},n=e.replace(this.imageParamsRegex,function(e,n,i){return t[n]=parseInt(i,10),""
}),i={"key":n,"size":t.width*t.height+t.minSize};return this._infoMemo[e]=i,i},"removeImageInfo":function(e){this._infoMemo.hasOwnProperty(e)&&delete this._infoMemo[e]},"getBlobUrl":function(e){var t=this.getImageInfo(e),n=this.get(t.key);if(n){var i=n.images[e];if(i)return i.blobUrl}},"getPlaceholder":function(t){var n=this.getImageInfo(t),i=this.get(n.key);if(i){if(i.images[t])return;var r=e.last(i.sizes);return r.blobUrl}},"remove":function(i){n.prototype.remove.apply(this,arguments),e.each(i.sizes,function(e){this.removeImageInfo(e.url),t.hasObjectUrl&&window.URL.revokeObjectURL(e.blobUrl)
},this)}});return i}),define("plex/base/views/images/BaseImage",["underscore","jquery","marionette","plex/base/utils/Capabilities","plex/base/utils/Transcoder","plex/base/utils/cache/ImageCache","plex/base/models/AppModel"],function(e,t,n,i,r,s,a){var o=window.devicePixelRatio?window.devicePixelRatio:1,l=n.ItemView.extend({"tagName":"img","background":!1,"pixelRatio":o,"cache":new s,"initialize":function(t){t||(t={}),e.bindAll(this,"onLoad","loadImage"),this.url=t.url,this.server=t.server,this.placeholder=t.placeholder,this.placeholderClass=t.placeholderClass,this.modelAttribute=t.modelAttribute,t.background&&(this.background=t.background),e.isFunction(t.getUrl)&&(this.getUrl=t.getUrl),this.setup(t)
},"setup":function(e){this.setDimensions(e),this.setModel(e.model,e)},"setDimensions":function(e){e.width&&e.height&&(this.transcode=!0,this.width=e.width*this.pixelRatio,this.height=e.height*this.pixelRatio)},"setModel":function(e,t){t||(t={}),this.stopListening(),this.model=e,e&&(this.server||(this.server=e.server),t.url||e&&this.modelAttribute&&(this.url=this.getUrl(e.get(this.modelAttribute)),this.listenTo(e,"change:"+this.modelAttribute,this.onChange)))},"setElement":function(){n.ItemView.prototype.setElement.apply(this,arguments),this.render({"force":!0})
},"render":function(e){return e||(e={}),this.url||this.placeholder||this.placeholderClass?this.src?void(e.force&&this.showImage(this.src)):(this.isPlaceholderRendered&&this.url||this.showPlaceholder(),this.url&&this.load(this.url,this.transcode).then(this.onLoad,null,this.onLoad),this):this},"showPlaceholder":function(){return this.isPlaceholderRendered=!0,this.placeholderClass?(this.$el.addClass(this.placeholderClass),void this.$el.removeAttr("style")):this.placeholder||this.background?this.placeholder?this.showImage(this.placeholder):void 0:this.showImage("img/blank.png")
},"showImage":function(e){return this.background?this.showBackgroundImage(e):void this.$el.attr("src",e).removeAttr("width").removeAttr("height")},"showBackgroundImage":function(e){this.$el.css("background-image","url("+e+")")},"load":function(e){if(!e)return t.Deferred().reject().promise();if(this.server&&this.transcode&&(e=r.image(this.server,e,{"fallbackServer":a.get("primaryServer"),"width":this.width,"height":this.height,"minSize":this.minSize})),i.hasBlob&&i.hasObjectUrl){var n=this.loadBlob(e);
return n=n.then(this.loadImage,null,this.loadImage)}return this.loadImage(e)},"loadBlob":function(n){var i=t.Deferred();this.cancel();var r=this.cache.getBlobUrl(n);if(r)return i.resolve(r),i.promise();var s=this.cache.getPlaceholder(n);s&&i.notify(s,!0);var a=new XMLHttpRequest;return a.open("GET",n,!0),a.responseType="arraybuffer",this.xhr=a,a.onreadystatechange=e.bind(function(){if(4===a.readyState)if(a.onreadystatechange=null,this.xhr=null,200===a.status){var e=new Blob([a.response],{"type":"image/jpeg"}),t=window.URL.createObjectURL(e);
this.cache.store({"url":n,"blobUrl":t}),i.resolve(t)}else i.reject()},this),a.send(),i.promise()},"loadImage":function(e,n){var i=t.Deferred(),r=new Image;return r.onload=function(){r.onload=r.onabort=r.onerror=null,n?i.notify(e):i.resolve(e)},r.onabort=r.onerror=function(){r.onload=r.onabort=r.onerror=null,i.reject()},r.src=e,i.promise()},"cancel":function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.abort(),this.xhr=null)},"getUrl":function(e){return e},"onLoad":function(e){this.src=e,this.placeholderClass&&this.$el.removeClass(this.placeholderClass),this.showImage(e),this.trigger("load",e)
},"onClose":function(){this.cancel()},"onChange":function(e,t){return t=this.getUrl(t),this.url===t?this:(this.url=t,this.src=null,void this.render())}});return l}),define("plex/base/views/images/MediaPosterImage",["underscore","plex/base/utils/PosterSizes","plex/base/utils/PosterPlaceholders","plex/base/views/images/BaseImage"],function(e,t,n,i){var r=i.extend({"background":!0,"setup":function(e){this.minSize=!0,this.type=e.type,this.modelAttribute=e.modelAttribute||"thumb",this.placeholderClass=this.model&&this.model.get("isFolder")?n.folder:n[this.type],i.prototype.setup.apply(this,arguments)
},"setDimensions":function(e){e.width?e.height=t.getPosterHeight(this.type,e.width):e.height&&(e.width=t.getPosterWidth(this.type,e.height)),i.prototype.setDimensions.call(this,e)},"setModel":function(){i.prototype.setModel.apply(this,arguments),this.model&&this.model.get("isFolder")&&(this.placeholderClass=n.folder)}});return r}),define("plex/base/views/images/GravatarImage",["plex/base/views/images/MediaPosterImage"],function(e){var t=e.extend({"getUrl":function(e){var t;return e&&(t=e+(e.indexOf("?")>0?"&":"?"),t+="size="+this.width),t
}});return t}),define("hb!plex/tv/views/components/system/SettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='\n        <li><button data-group="',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),r+=f(i)+" Streaming Quality</button></li>\n      "}function a(e,t){var i,r="";
return r+='\n          <li>\n            <button data-type="radio" data-key="language" data-value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),r+=f(i)+'</button>\n            <i class="selected glyphicon ok-2"></i>\n          </li>\n        '}function o(e,t){var i,r,s="";return s+='\n          <li>\n            <button data-type="radio" data-key="audioBoost" data-value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'">',r={"hash":{},"data":t},s+=f((i=n.t||e&&e.t,i?i.call(e,e&&e.title,r):m.call(e,"t",e&&e.title,r)))+'</button>\n            <i class="selected glyphicon ok-2"></i>\n          </li>\n        '
}function l(e,t,i){var r,s="";return s+='\n        <ul data-group="',(r=n.key)?r=r.call(e,{"hash":{},"data":t}):(r=e&&e.key,r=typeof r===p?r.call(e,{"hash":{},"data":t}):r),s+=f(r)+'">\n          ',r=n.each.call(e,i&&i.videoQualities,{"hash":{},"inverse":g.noop,"fn":g.programWithDepth(8,u,t,e),"data":t}),(r||0===r)&&(s+=r),s+="\n        </ul>\n      "}function u(e,t,i){var r,s,a="";return a+='\n            <li>\n              <button data-type="radio" data-key="'+f((r=i&&i.key,typeof r===p?r.apply(e):r))+'" data-value="'+f((r=e&&e[0],typeof r===p?r.apply(e):r))+'">',s={"hash":{},"data":t},a+=f((r=n.formatVideoQuality||e&&e.formatVideoQuality,r?r.call(e,e,s):m.call(e,"formatVideoQuality",e,s)))+'</button>\n              <i class="selected glyphicon ok-2"></i>\n            </li>\n          '
}function c(e,t){var i,r,s="";return s+='\n          <li>\n            <button data-type="radio" data-key="subtitleSize" data-value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'">',r={"hash":{},"data":t},s+=f((i=n.t||e&&e.t,i?i.call(e,e&&e.title,r):m.call(e,"t",e&&e.title,r)))+'</button>\n            <i class="selected glyphicon ok-2"></i>\n          </li>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};
var d,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<h1>Settings</h1>\n\n<div class="content">\n  <div class="menu">\n    <h2>General</h2>\n    <ul>\n      <li><button data-group="language">Language</button></li>\n    </ul>\n\n    <h2>Audio</h2>\n    <ul>\n      <li><button data-group="audio-capabilities">Receiver Capabilities</button></li>\n      <li><button data-group="audio-boost">Volume Boost</button></li>\n    </ul>\n\n    <h2>Video</h2>\n    <ul>\n      ',d=n.each.call(t,t&&t.videoQualityKeys,{"hash":{},"inverse":g.noop,"fn":g.program(1,s,r),"data":r}),(d||0===d)&&(h+=d),h+='\n\n      <li><button data-group="subtitleSize">Subtitles Size</button></li>\n    </ul>\n  </div>\n\n  <div class="list scrollable-container">\n    <div class="scrollable-content">\n      <ul data-group="language">\n        ',d=n.each.call(t,t&&t.languages,{"hash":{},"inverse":g.noop,"fn":g.program(3,a,r),"data":r}),(d||0===d)&&(h+=d),h+='\n      </ul>\n\n      <ul data-group="audio-capabilities">\n        <li>\n          <button data-type="checkbox" data-key="allowAC3" data-value="true">Dolby Digital (AC3)</button>\n          <i class="selected glyphicon ok-2"></i>\n        </li>\n        <li>\n          <button data-type="checkbox" data-key="allowDCA" data-value="true">DTS (DCA)</button>\n          <i class="selected glyphicon ok-2"></i>\n        </li>\n      </ul>\n\n      <ul data-group="audio-boost">\n        ',d=n.each.call(t,t&&t.audioLevels,{"hash":{},"inverse":g.noop,"fn":g.program(5,o,r),"data":r}),(d||0===d)&&(h+=d),h+="\n      </ul>\n\n      ",d=n.each.call(t,t&&t.videoQualityKeys,{"hash":{},"inverse":g.noop,"fn":g.programWithDepth(7,l,r,t),"data":r}),(d||0===d)&&(h+=d),h+='\n\n\n      <ul data-group="subtitleSize">\n        ',d=n.each.call(t,t&&t.subtitleSizes,{"hash":{},"inverse":g.noop,"fn":g.program(10,c,r),"data":r}),(d||0===d)&&(h+=d),h+='\n      </ul>\n    </div>\n\n    <div class="scrollable-bar-pad">\n      <div class="scrollable-bar-position"></div>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/base/utils/LanguageUtil",["plex/base/utils/BaseClass"],function(e){var t=e.extend({"languages":{"aa":"Afaraf","af":"Afrikaans","ab":"Abkhazian","ak":"Akan","sq":"Shqip","am":"Amharic","ar":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629","an":"Aragon\xe9s","hy":"\u0540\u0561\u0575\u0565\u0580\u0565\u0576","as":"Assamese","av":"\u0430\u0432\u0430\u0440 \u043c\u0430\u0446\u04c0","ae":"avesta","ay":"aymar aru","az":"az\u0259rbaycan dili","ba":"\u0431\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435","bm":"bamanankan","eu":"euskara","be":"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f","bn":"Bengali","bh":"\u092d\u094b\u091c\u092a\u0941\u0930\u0940","bi":"Bislama","bs":"bosanski jezik","br":"brezhoneg","bg":"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a","my":"Burmese","ca":"Catal\xe0","ch":"Chamoru","ce":"\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442","cu":"\u0469\u0437\u044b\u043a\u044a \u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a","cv":"\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438","kw":"Kernewek","co":"corsu","cr":"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423","dv":"Divehi","dz":"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41","en":"English","en-GB":"English (UK)","eo":"Esperanto","et":"eesti","ee":"E\u028begbe","fo":"f\xf8royskt","fj":"vosa Vakaviti","fy":"Frysk","ff":"Fulfulde","ka":"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8","gd":"G\xe0idhlig","ga":"Gaeilge","gl":"Galego","gv":"Gaelg","gn":"Ava\xf1e&apos;\u1ebd","gu":"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0","ht":"Krey\xf2l ayisyen","ha":"\u0647\u064e\u0648\u064f\u0633\u064e","hz":"Otjiherero","hi":"\u0939\u093f\u0928\u094d\u0926\u0940","ho":"Hiri Motu","hr":"hrvatski","ig":"As\u1ee5s\u1ee5 Igbo","is":"\xcdslenska","io":"Ido","ii":"\ua188\ua320\ua4bf Nuosuhxop","iu":"\u1403\u14c4\u1483\u144e\u1450\u1466","ie":"Interlingue","ia":"Interlingua","id":"Bahasa Indonesia","ik":"I\xf1upiaq","jv":"basa Jawa","kl":"kalaallisut","kn":"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1","ks":"\u0915\u0936\u094d\u092e\u0940\u0930\u0940","kr":"Kanuri","kk":"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456","km":"Khmer","ki":"G\u0129k\u0169y\u0169","rw":"Ikinyarwanda","ky":"\u043a\u044b\u0440\u0433\u044b\u0437 \u0442\u0438\u043b\u0438","kv":"\u043a\u043e\u043c\u0438 \u043a\u044b\u0432","kg":"KiKongo","kj":"Kuanyama","ku":"Kurd\xee","lo":"Lao","la":"latine","lv":"latvie\u0161u valoda","li":"Limburgs","ln":"Ling\xe1la","lt":"lietuvi\u0173 kalba","lb":"L\xebtzebuergesch","lu":"Luba-Katanga","lg":"Luganda","mk":"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a","mh":"Kajin M\u0327aje\u013c","ml":"Malayalam","mi":"te reo M\u0101ori","mr":"\u092e\u0930\u093e\u0920\u0940","ms":"bahasa Melayu","mg":"Malagasy fiteny","mt":"Malti","mo":"Moldavian","mn":"\u043c\u043e\u043d\u0433\u043e\u043b","na":"Ekakair\u0169 Naoero","nv":"Din\xe9 bizaad","nr":"isiNdebele (North)","nd":"isiNdebele (South)","ng":"Owambo","ne":"\u0928\u0947\u092a\u093e\u0932\u0940","nn":"Norsk nynorsk","nb":"Norsk bokm\xe5l","ny":"chiChe\u0175a","oc":"Occitan","oj":"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0","or":"Oriya","om":"Afaan Oromoo","os":"\u0438\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433","pa":"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40","pi":"\u092a\u093e\u0934\u093f","ps":"\u067e\u069a\u062a\u0648","qu":"Runa Simi","rm":"rumantsch grischun","ro":"rom\xe2n\u0103","rn":"kiRundi","sg":"y\xe2ng\xe2 t\xee s\xe4ng\xf6","sa":"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d","sr":"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a","si":"Sinhala","sk":"sloven\u010dina","sl":"Sloven\u0161\u010dina","se":"Davvis\xe1megiella","sm":"gagana fa&apos;a Samoa","sn":"chiShona","sd":"\u0938\u093f\u0928\u094d\u0927\u0940","so":"Soomaaliga","st":"Sesotho","sc":"sardu","ss":"SiSwati","su":"Basa Sunda","sw":"Kiswahili","ty":"Reo Tahiti","ta":"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd","tt":"\u0442\u0430\u0442\u0430\u0440\u0447\u0430","te":"Telugu","tg":"\u0442\u043e\u04b7\u0438\u043a\u04e3","tl":"Wikang Tagalog","th":"\u0e44\u0e17\u0e22","bo":"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42","ti":"Tigrinya","to":"faka Tonga","tn":"Setswana","ts":"Xitsonga","tk":"T\xfcrkmen","tw":"Twi","ug":"Uy\u01a3urq\u0259","uk":"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430","ur":"\u0627\u0631\u062f\u0648","uz":"O&apos;zbek","ve":"Tshiven\u1e13a","vi":"Ti\u1ebfng Vi\u1ec7t","vo":"Volap\xfck","cy":"Cymraeg","wa":"Walon","wo":"Wollof","xh":"isiXhosa","yi":"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9","yo":"Yor\xf9b\xe1","za":"Sa\u026f cue\u014b\u0185","zu":"isiZulu","pb":"Portugu\xeas (Brasil)","fr":"Fran\xe7ais","de":"Deutsch","sv":"Svenska","no":"Norsk","da":"Dansk","fi":"Suomeksi","nl":"Nederlands","it":"Italiano","es":"Espa\xf1ol","es-419":"Espa\xf1ol (Latinoam\xe9rica)","pl":"Polski","hu":"Magyar","el":"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac","tr":"T\xfcrk\xe7e","zh":"\u4e2d\u6587","zh-TW":"\u81fa\u8a9e","ru":"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a","he":"\u05e2\u05d1\u05e8\u05d9\u05ea","ja":"\u65e5\u672c\u8a9e","pt":"Portugu\xeas","pt-BR":"Portugu\xeas Brasileiro","ko":"\ud55c\uad6d\uc5b4","cs":"\u010de\u0161tina","fa":"\u0641\u0627\u0631\u0633\u06cc","xx":"Unknown","xn":"None"},"getLanguageName":function(e){return this.languages[e]||""
}});return new t}),define("plex/tv/views/mixins/ScrollableContent",["underscore","jquery"],function(e,t){return{"initScrollableContent":function(){e.defer(e.bind(function(){var e=this.$(".scrollable-content"),t=this.$(".scrollable-container"),n=this.$(".scrollable-bar-pad"),i=this.$(".scrollable-bar-position");this.scrollableContainerHeight=t.height(),this.scrollableContentHeight=e.height(),this.scrollableEnabled=this.scrollableContentHeight>this.scrollableContainerHeight,this.scrollableEnabled?(this.scrollableScrollTop=t.scrollTop(),n.height(this.scrollableContentHeight),this.scrollableBarHeight=this.scrollableContainerHeight*this.scrollableContainerHeight/this.scrollableContentHeight,this.scrollableBarPositionRatio=(this.scrollableContainerHeight-this.scrollableBarHeight)/(this.scrollableContentHeight-this.scrollableContainerHeight),i.height(this.scrollableBarHeight),n.show()):(this.scrollableScrollTop=0,t.scrollTop(0),i.css("top",0),n.hide())
},this))},"onScrollableContentItemFocus":function(e){if(this.scrollableEnabled){var n=t(e.target),i=this.$(".scrollable-container"),r=this.$(".scrollable-bar-position"),s=n.position().top,a=n.outerHeight(!0),o=this.scrollableScrollTop;if(s<this.scrollableScrollTop&&(this.scrollableScrollTop=s),s+a>this.scrollableScrollTop+this.scrollableContainerHeight&&(this.scrollableScrollTop=s+a-this.scrollableContainerHeight),this.scrollableScrollTop!==o){i.scrollTop(this.scrollableScrollTop);var l=this.scrollableScrollTop*this.scrollableBarPositionRatio;
r.css("top",this.scrollableScrollTop+l)}}}}}),define("plex/tv/views/components/system/SettingsView",["hb!./SettingsView","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/LanguageUtil","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/tv/adapters/KeyMappingAdapter","plex/tv/views/mixins/ScrollableContent"],function(e,t,n,i,r,s,a,o,l,u,c){var d=[{"value":40,"title":"Tiny"},{"value":60,"title":"Small"},{"value":80,"title":"Normal"},{"value":100,"title":"Large"},{"value":150,"title":"Huge"}],h=[{"value":100,"title":"None"},{"value":150,"title":"Small"},{"value":200,"title":"Large"},{"value":250,"title":"Huge"}],p=[{"key":"localQuality","title":"Local"},{"key":"remoteQuality","title":"Remote"},{"key":"channelQuality","title":"Channel"}],f=i.ItemView.extend({"mixins":[c],"className":"Settings ScrollableContent","template":e,"ui":{"menu":".menu","list":".list"},"events":{"focus .menu button":"onMenuButtonFocus","keydown .menu button":"onMenuButtonKeydown","click .menu button":"onMenuButtonClick","keydown .list button":"onListButtonKeydown","click .list button":"onListButtonClick","focus button":"onScrollableContentItemFocus","prefocus button":"onScrollableContentItemFocus"},"onlyAfterRender":["updateSelectedMarks"],"initialize":function(){this.listenTo(l,"change",this.updateSelectedMarks)
},"serializeData":function(){var e=[],n=[],i=o.get("primaryServer");if(i){var r=i.get("transcoderVideoQualities"),l=i.get("transcoderVideoBitrates");n=t.filter(t.zip(r,l),function(e){return e[1]>300})}return t.each(t.keys(a.get().languages),function(t){e.push({"value":t,"title":s.getLanguageName(t)})}),{"languages":e,"videoQualities":n,"subtitleSizes":d,"audioLevels":h,"videoQualityKeys":p}},"updateSelectedMarks":function(){this.$("li.selected").removeClass("selected"),this.$("button").each(function(){var e=n(this),t=e.data("key"),i=e.data("value");
l.get(t)===i&&e.parent().addClass("selected")})},"openGroup":function(e,t,i){if(this.ui.menu.find(".selected").removeClass("selected"),this.ui.menu.find("[data-group="+e+"]").addClass("selected"),t&&(this.ui.list.find("[data-group]").hide(),this.ui.list.find("[data-group="+e+"]").show(),this.initScrollableContent()),i){var s=this.ui.list.find("[data-group="+e+"] li.selected");s.length?r.trigger("focus:element",s):r.trigger("focus:element",this.ui.list.find("[data-group="+e+"]")),n.freefocus.selectorContext=this.ui.list
}},"onRender":function(){r.trigger("cursor:disable"),r.trigger("cursor:hide"),r.trigger("focus:element",this.$el),n.freefocus.selectorContext=this.ui.menu,this.updateSelectedMarks(),this.initScrollableContent()},"onClose":function(){r.trigger("cursor:enable")},"onMenuButtonFocus":function(e){var t=n(e.target).data("group");this.openGroup(t,!0,!1)},"onMenuButtonKeydown":function(e){var t=u.get()[e.which];if("enter"===t||"right"===t){e.stopPropagation(),e.preventDefault();var i=n(e.target).data("group");
this.openGroup(i,!1,!0)}},"onMenuButtonClick":function(e){var t=n(e.target).data("group");this.openGroup(t,!0,!0)},"onListButtonKeydown":function(e){var t=u.get()[e.which];if("enter"===t&&(e.stopPropagation(),e.preventDefault(),this.onListButtonSelect(n(e.target))),"back"===t||"left"===t){e.stopPropagation(),e.preventDefault();var i=n(e.target).parentsUntil(this.ui.list,"[data-group]").data("group");r.trigger("focus:element",this.ui.menu.find("[data-group="+i+"]")),n.freefocus.selectorContext=this.ui.menu
}},"onListButtonClick":function(e){var t=n(e.target);this.onListButtonSelect(t),r.trigger("focus:element",t)},"onListButtonSelect":function(e){var t=e.data("type"),n=e.data("key");if("radio"===t){var i=e.data("value");l.save(n,i)}else"checkbox"===t&&l.save(n,!l.get(n))}});return f}),define("plex/tv/views/components/library/UserMenuView",["hb!./UserMenuView","underscore","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/views/images/GravatarImage","plex/tv/views/components/system/SettingsView","./DropdownSelectView"],function(e,t,n,i,r,s,a){var o=a.extend({"className":"DropdownSelect UserMenu","template":e,"events":t.extend({},a.prototype.events,{"click .settings-link":"onSettingsLinkClick"}),"ui":t.extend({},a.prototype.ui,{"thumb":"button .thumb"}),"initialize":function(){this.thumb=new r({"model":i.get("user"),"type":"friend","width":26})
},"serializeData":function(){return{"username":i.get("user").get("username")}},"onRender":function(){this.thumb.setElement(this.ui.thumb)},"onSettingsLinkClick":function(e){e.preventDefault(),n.trigger("show:modal",new s,function(){this.showMenu(),n.trigger("focus:element",e.target)},this)}});return o}),define("hb!plex/tv/views/components/library/ButtonListView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+="<ul>\n  ",i=n.each.call(e,e,{"hash":{},"inverse":d.noop,"fn":d.program(2,a,t),"data":t}),(i||0===i)&&(r+=i),r+="\n</ul>"
}function a(e,t){var i,r="";return r+='\n    <li class="item"><a\n      id="',(i=n.prefix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.prefix,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i),(i=n.index)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.index,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i)+'"\n      style="nav-down: #',(i=n.prefix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.prefix,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i),(i=n.nextIndex)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.nextIndex,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i)+"; nav-up: #",(i=n.prefix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.prefix,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i),(i=n.prevIndex)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.prevIndex,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i)+'"\n      href="',(i=n.link)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.link,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i)+'"\n      >',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),r+=c(i)+"</a></li>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,l="",u="function",c=this.escapeExpression,d=this;return o=n.each.call(t,t&&t.chunks,{"hash":{},"inverse":d.noop,"fn":d.program(1,s,r),"data":r}),(o||0===o)&&(l+=o),l+="\n"})}),define("plex/tv/views/components/library/ButtonListView",["hb!./ButtonListView","underscore","marionette"],function(e,t,n){var i=n.ItemView.extend({"className":"ButtonList","template":e,"chunkLimit":5,"initialize":function(e){t.extend(this,t.pick(e,"chunkLimit"))
},"serializeData":function(){var e=t.map(this.collection,function(e,t){return{"title":e.title,"link":e.link,"prefix":this.cid+"_item_","index":t,"nextIndex":t+1,"prevIndex":t-1}},this),n=t.toArray(t.groupBy(e,function(e,t){return Math.floor(t/this.chunkLimit)},this));return{"chunks":n}}});return i}),define("hb!plex/tv/views/components/library/HubView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='\n  <a href="',(i=n.link)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.link,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+'" class="more">More</a>\n'
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,o="",l="function",u=this.escapeExpression,c=this;return o+='<div class="header">\n  <span>',(a=n.title)?a=a.call(t,{"hash":{},"data":r}):(a=t&&t.title,a=typeof a===l?a.call(t,{"hash":{},"data":r}):a),o+=u(a)+'</span>\n</div>\n<div class="items"></div>\n',a=n["if"].call(t,t&&t.link,{"hash":{},"inverse":c.noop,"fn":c.program(1,s,r),"data":r}),(a||0===a)&&(o+=a),o+="\n"})}),define("hb!plex/tv/views/components/library/MediaCellView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="image">\n  <a href=""></a>\n</div>\n<div class="progress">\n  <div class="bar"></div>\n</div>\n<div class="title"></div>\n<span class="unwatched"></span>\n<span class="badge"></span>\n'
})}),define("plex/tv/views/components/library/MediaCellView",["hb!./MediaCellView","underscore","marionette","plex/base/utils/MediaUtil","plex/base/utils/Transcoder","plex/base/models/AppModel"],function(e,t,n,i,r,s){var a=n.ItemView.extend({"className":"MediaCell","template":e,"ui":{"image":".image","a":"a","badge":"span.badge","progress":".progress","progressBar":".progress .bar","title":".title","unwatched":".unwatched"},"pixelRatio":1,"titleHeight":{"over":30,"under":40},"defaultImage":{"portrait":"img/posters/standard.png","landscape":"img/posters/widescreen.png","square":"img/posters/square.png"},"initialize":function(e){if(t.extend(this,t.pick(e,"width","height","layout","parentType","type")),this.showTitle=!1,this.titleClass="big","season"===this.parentType?this.showTitle="under":"show"===this.parentType?this.showTitle="over":"landscape"===this.layout?(this.showTitle="over",this.titleClass="small"):"artist"===this.type?this.showTitle="over":"portrait"===this.layout&&"episode"===this.type&&(this.showTitle="over"),"under"===this.showTitle){var n=this.width/this.height;
this.imageHeight=this.height-this.titleHeight[this.showTitle],this.imageWidth=Math.round(this.imageHeight*n),this.width=this.imageWidth}else this.imageHeight=this.height,this.imageWidth=this.width;this.$el.css({"width":this.width,"height":this.height})},"update":function(){var e=this.serializeData();this.ui.a.attr("href",e.link),this.ui.image.css("background-image",e.imageUrl.length?"url("+e.imageUrl+")":""),e.unwatchedEpisodes&&this.ui.badge.text(e.unwatchedEpisodes),this.ui.badge.css("visibility",e.unwatchedEpisodes?"visible":"hidden"),e.progress>0&&this.ui.progressBar.css("width",e.progress+"%"),this.ui.progress.css("visibility",e.progress?"visible":"hidden"),this.showTitle&&(this.ui.title.text(e.title),"under"===this.showTitle&&this.ui.unwatched.css("visibility",e.unwatched?"visible":"hidden"))
},"serializeData":function(){return this.model?{"link":this.getLink(),"imageUrl":this.getImageUrl(),"unwatchedEpisodes":this.getUnwatchedEpisodes(),"progress":this.getProgress(),"unwatched":this.getUnwatched(),"title":this.getTitle()}:{"link":"","imageUrl":"","unwatchedEpisodes":0,"progress":0,"unwatched":!1,"title":""}},"getImageUrl":function(){var e=this.model.get(this.getImageAttr());return e&&e.length?r.image(this.model.server,e,{"fallbackServer":s.get("primaryServer"),"width":this.imageWidth*this.pixelRatio,"height":this.imageHeight*this.pixelRatio,"minSize":!0}):this.defaultImage[this.layout]
},"getImageAttr":function(){if("episode"===this.model.get("type")){if("season"===this.parentType)return"thumb";if("portrait"===this.layout)return this.model.has("grandparentThumb")&&this.model.get("grandparentThumb").length?"grandparentThumb":"parentThumb"}return"landscape"===this.layout&&this.model.has("art")&&this.model.get("art").length?"art":"thumb"},"getLink":function(){return["#!","server",encodeURIComponent(this.model.server.id),"details",encodeURIComponent(this.model.get("key"))].join("/")
},"getUnwatchedEpisodes":function(){return"show"!==this.model.get("type")&&"season"!==this.model.get("type")?0:this.model.server.get("shared")&&!this.model.server.get("multiuser")?0:this.model.get("unviewedLeafCount")},"getProgress":function(){var e=this.model.get("viewOffset")||0,t=this.model.get("duration")||Number.MAX_VALUE;return Math.round(e/t*100)},"getUnwatched":function(){return this.model.server.get("shared")&&!this.model.server.get("multiuser")?!1:t.contains(["movie","episode","playlistItem"],this.model.get("type"))?!this.model.get("viewCount")&&!this.model.get("viewOffset"):!1
},"getTitle":function(){return"episode"===this.model.get("type")?"season"===this.parentType?i.getEpisodeIndex({"episodePrefix":"Episode {1}","episodeIndex":this.model.get("index"),"noLeadingZero":!0}):"portrait"===this.layout?i.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":this.model.get("index"),"seasonPrefix":"S{1}","episodePrefix":" \u2022 E{1}","noLeadingZero":!0}):this.model.get("grandparentTitle"):"season"===this.model.get("type")?i.getSeasonIndex({"seasonIndex":this.model.get("index"),"noLeadingZero":!0}):this.model.get("title")
},"onRender":function(){this.ui.image.css({"width":this.imageWidth,"height":this.imageHeight}),this.showTitle&&("under"===this.showTitle&&this.ui.title.css("height",this.titleHeight[this.showTitle]),this.ui.title.addClass(this.showTitle+" "+this.titleClass).show(),this.ui.progress.css("bottom",this.titleHeight[this.showTitle]))}});return a}),define("plex/tv/views/components/library/HubViewLayout",["plex/base/utils/PosterSizes"],function(e){function t(t,n){var i=[0,434,212,138][n];return{"height":i,"width":Math.round(i*e.ratios[t])}
}var n=10,i=function(){var e=t("portrait",1),i=t("portrait",2);return[{"width":e.width,"items":[]},{"width":e.width,"items":[[0,0,e]]},{"width":e.width+n+e.width,"items":[[0,0,e],[0,e.width+n,e]]},{"width":e.width+n+i.width,"items":[[0,0,e],[0,e.width+n,i],[i.height+n,e.width+n,i]]},{"width":i.width+n+i.width,"items":[[0,0,i],[0,i.width+n,i],[i.height+n,0,i],[i.height+n,i.width+n,i]]},{"width":e.width+n+i.width+n+i.width,"items":[[0,0,e],[0,e.width+n,i],[0,i.width+n+e.width+n,i],[i.height+n,e.width+n,i],[i.height+n,i.width+n+e.width+n,i]]}]
}(),r=function(){var e=t("landscape",2),i=t("landscape",3),r={"width":2*i.width+n,"height":2*i.height+n};return[{"width":e.width,"items":[]},{"width":r.width,"items":[[0,0,r]]},{"width":e.width,"items":[[0,0,e],[e.height+n,0,e]]},{"width":r.width,"items":[[0,0,r],[r.height+n,0,i],[r.height+n,i.width+n,i]]},{"width":e.width+n+e.width,"items":[[0,0,e],[e.height+n,0,e],[0,e.width+n,e],[e.height+n,e.width+n,e]]},{"width":e.width+n+i.width,"items":[[0,0,e],[e.height+n,0,e],[0,e.width+n,i],[i.height+n,e.width+n,i],[i.height+n+i.height+n,e.width+n,i]]},{"width":r.width+n+i.width,"items":[[0,0,r],[r.height+n,0,i],[r.height+n,i.width+n,i],[0,r.width+n,i],[i.height+n,r.width+n,i],[r.height+n,r.width+n,i]]}]
}(),s=function(){var e=t("landscape",3);return[{"width":e.width,"items":[]},{"width":e.width,"items":[[0,0,e]]},{"width":e.width,"items":[[0,0,e],[e.height+n,0,e]]},{"width":e.width,"items":[[0,0,e],[e.height+n,0,e],[2*(e.height+n),0,e]]}]}(),a=function(){var e=t("square",2),i=t("square",3),r={"width":2*i.width+n,"height":2*i.height+n};return[{"width":e.width,"items":[]},{"width":r.width,"items":[[0,0,r]]},{"width":e.width,"items":[[0,0,e],[e.height+n,0,e]]},{"width":r.width,"items":[[0,0,r],[r.height+n,0,i],[r.height+n,i.width+n,i]]},{"width":e.width+n+e.width,"items":[[0,0,e],[e.height+n,0,e],[0,e.width+n,e],[e.height+n,e.width+n,e]]},{"width":e.width+n+i.width,"items":[[0,0,e],[e.height+n,0,e],[0,e.width+n,i],[i.height+n,e.width+n,i],[i.height+n+i.height+n,e.width+n,i]]},{"width":r.width+n+i.width,"items":[[0,0,r],[r.height+n,0,i],[r.height+n,i.width+n,i],[0,r.width+n,i],[i.height+n,r.width+n,i],[r.height+n,r.width+n,i]]}]
}();return{"portrait":i,"landscape":r,"landscapeInOneColumn":s,"square":a}}),define("plex/tv/views/components/library/HubItemsListView",["underscore","jquery","plex/tv/utils/ThrottledTaskQueue","./ViewContainerView","./MediaCellView","./HubViewLayout"],function(e,t,n,i,r,s){var a=i.extend({"tagName":"ul","className":"HubItemsList","initialize":function(n){i.prototype.initialize.apply(this,arguments);var a=n.items.first(s[n.layout+n.variant].length-1);this.layout=s[n.layout+n.variant][a.length],this.children=e.map(a,function(e,t){var i=this.layout.items[t][2];
return new r({"model":e,"tagName":"li","width":i.width,"height":i.height,"layout":n.layout,"type":a[t].get("type")})},this),e.each(this.children,function(n){n.$el.on("focus",t.freefocus.selector,e.bind(this.triggerMethod,this,"focus",n.model)),n.$el.on("blur",t.freefocus.selector,e.bind(this.triggerMethod,this,"blur",n.model))},this)},"render":function(){i.prototype.render.apply(this,arguments),this.$el.css("width",this.layout.width),e.each(this.children,function(e,t){var i=this.layout.items[t];e.$el.css({"top":i[0],"left":i[1]}),n.enqueue(function(){return e.update(),!0
},this,this.cid)},this)},"onClose":function(){n.cancel(this.cid)}});return a}),define("plex/tv/views/components/library/HubView",["hb!./HubView","underscore","marionette","./ViewContainerView","./HubItemsListView","./HubViewLayout"],function(e,t,n,i,r,s){var a=n.Layout.extend({"className":"Hub","template":e,"ui":{"header":".header a, .header span"},"regions":{"itemsContainer":".items"},"initialize":function(e){if(t.extend(this,t.pick(e,"title","link","items","layout","variant")),this.variant||(this.variant=""),!this.link){var n=this.items.key?this.items.key:t.result(this.items,"url");
this.items.title&&(this.title=this.title.replace("%s",this.items.title)),this.link=["#!","server",encodeURIComponent(this.items.server.id),"path",this.layout,encodeURIComponent(this.title),n.substr(1)].join("/")}this.itemsView=new r({"items":this.items,"layout":this.layout,"variant":this.variant})},"serializeData":function(){var e=this.items.length>s[this.layout+this.variant].length-1;return{"title":this.title,"link":e?this.link:null}},"onRender":function(){this.itemsContainer.show(this.itemsView),this.ui.header.css("max-width",this.itemsView.layout.width)
}});return a}),define("hb!plex/tv/views/components/library/InfoPreviewView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",o="function",l=this.escapeExpression;return a+='<span class="title">',(s=n.title)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.title,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+'</span>\n<br/>\n<span class="subtitle">',(s=n.subtitle)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.subtitle,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+"</span>\n"
})}),define("plex/tv/views/components/library/InfoPreviewView",["hb!./InfoPreviewView","underscore","marionette","plex/base/utils/formatters/DateTimeUtil"],function(e,t,n,i){function r(e){return e.get("parentTitle")||e.parent&&e.parent.get("title")}function s(e){return e.get("grandparentTitle")||e.parent&&r(e.parent)}function a(e){if(e.server.get("shared")&&!e.server.get("multiuser"))return"";var t=e.get("unviewedLeafCount");return t+" Unwatched Episodes"}var o=n.ItemView.extend({"className":"InfoPreview","template":e,"initialize":function(e){this.parentType=e.parentType
},"serializeData":function(){if(!this.model)return{};var e={},n=this.model.get("title"),o=r(this.model),l=s(this.model),u=i.formatDate(this.model.get("originallyAvailableAt")),c=i.formatHoursMinutes(this.model.get("duration"));switch(this.model.get("type")){case"album":var d=this.model.get("year");"artist"===this.parentType?(e.title=n,e.subtitle=[d]):(e.title=o,e.subtitle=[n,d]);break;case"season":e.title=o,e.subtitle=[n,a(this.model),c];break;case"episode":"season"===this.parentType?(e.title=n,e.subtitle=[u,c]):(e.title=l,e.subtitle=[n,u,c]);
break;case"show":e.title=n,e.subtitle=[a(this.model),c];break;case"movie":e.title=n,e.subtitle=[u,c];break;case"artist":e.title=n;break;case"photoAlbum":e.title=n;break;case"playlistItem":e.title=n;break;case"photo":e.title=n;break;default:console.log("Unknown info titles",this.model.get("type"),this.model.toJSON(),this.model.parent&&this.model.parent.toJSON())}return e.subtitle&&(e.subtitle=t.compact(e.subtitle).join(" / ")),e}});return o}),define("plex/tv/views/screens/library/DashboardView",["hb!./DashboardView","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/tv/utils/ThrottledTaskQueue","plex/tv/utils/PageStorage","plex/tv/views/components/library/ScrollerView","plex/tv/views/components/library/ServerSelectView","plex/tv/views/components/library/UserMenuView","plex/tv/views/components/library/ButtonListView","plex/tv/views/components/library/HubView","plex/tv/views/components/library/InfoPreviewView"],function(e,t,n,i,r,s,a,o,l,u,c,d,h){var p=i.Layout.extend({"className":"Dashboard","template":e,"regions":{"serverSelect":".server-select-container","userMenu":".user-menu-container","scrollerContainer":".scroller-container","infoContainer":".info-container"},"initialize":function(e){t.extend(this,t.pick(e,"server","buttons","hubs","showDropdowns")),this.hubs||(this.hubs=[])
},"onRender":function(){this.showDropdowns&&(this.serverSelect.show(new l({"model":this.server})),this.userMenu.show(new u));var e=[];this.buttons&&e.push(new c({"collection":this.buttons,"chunkLimit":6})),t.map(this.hubs,function(t){if(t.items.length){var n=new d(t);this.listenTo(n.itemsView,"focus",this.onHubItemSelected),this.listenTo(n.itemsView,"blur",this.onHubItemDeselected),e.push(n)}},this),this.scroller=new o({"children":e,"initialOffset":a.get("lastScrollerOffset")}),this.scrollerContainer.show(this.scroller),this.listenTo(this.scroller,"focus",this.onScrollerFocus),this.listenTo(this.scroller,"moved",this.onScrollerMoved),this.infoPreview=new h({}),this.infoContainer.show(this.infoPreview),this.scroller.$(n.freefocus.selector).length?this.scroller.initFocus(a.get("lastScrollerPosition")):r.trigger("focus:element",this.serverSelect.$el)
},"onHubItemSelected":function(e){s.cancel(this.cid),s.enqueue(function(){return e!==this.infoPreview.model&&(this.infoPreview.model=e,this.infoPreview.render()),!0},this,this.cid,!0)},"onHubItemDeselected":function(){s.cancel(this.cid),s.enqueue(function(){return this.infoPreview.model&&(this.infoPreview.model=null,this.infoPreview.render()),!0},this,this.cid,!0)},"onScrollerFocus":function(e){a.set("lastScrollerPosition",e)},"onScrollerMoved":function(e){a.set("lastScrollerOffset",e)}});return p
}),define("hb!plex/tv/views/screens/library/MediaCollectionView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",o="function",l=this.escapeExpression;return a+='<div id="topBar">\n  <div class="logo"></div>\n  <a href="#/" class="home-link">\n    <span>Go Home</span>\n    <i class="pms-logo"></i>\n  </a>\n</div>\n\n<div class="header">\n  <span>',(s=n.title)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.title,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+'</span>\n</div>\n\n<div class="tiles-list-container"></div>\n\n<div class="info-container"></div>\n'
})}),define("plex/tv/utils/ViewPool",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"initialize":function(){this.pool=[]},"lockOrCreate":function(t,n,i){e.each(t,function(r){if(!this.find(r)){var s=e.find(this.pool,function(n){return!e.contains(t,n.id)},this);s||(s={},this.pool.push(s),s.view=n.call(i,s)),s.id=r}},this)},"each":function(t,n){e.each(this.pool,t,n)},"filter":function(t,n){this.pool=e.filter(this.pool,t,n)},"find":function(t){return e.findWhere(this.pool,{"id":t})
},"close":function(){e.each(this.pool,function(e){e.view.close()}),this.pool=[]}});return n}),define("plex/tv/views/cells/CellContainerView",["underscore","marionette","plex/tv/utils/ThrottledTaskQueue","plex/tv/utils/ViewPool"],function(e,t,n,i){var r=t.View.extend({"initialize":function(){t.View.prototype.initialize.apply(this,arguments),this.pool=new i(this)},"render":function(){this.isRendered=!0;var e=this.getLockIndexes();this.pool.lockOrCreate(e,this.createCellView,this),this.scheduleFilling(e),this.prepareCells(e),this.pool.each(this.moveCell,this),this.moveElement(),this.clearVisibleReusedCells()
},"createCellView":function(n){var i=t.getOption(this,"itemView"),r=t.getOption(this,"itemViewOptions");e.isFunction(r)&&(r=r.call(this,n));var s=new i(r);return s.render(),this.$el.append(s.$el),s},"scheduleFilling":function(t){n.cancel(this.cid),e.each(t,function(e){var t=this.pool.find(e);t.filledWithIndex!==t.id&&n.enqueue(function(){var e=this.fillCell(t);return e&&(t.filledWithIndex=t.id),e},this,this.cid)},this)},"prepareCells":function(){this.pool.each(this.prepareCell,this)},"clearVisibleReusedCells":function(){var e=this.getVisibleBounds();
this.pool.each(function(t){var n=t.filledWithIndex===t.id,i=-1===t.filledWithIndex,r=t.id>=e.from&&t.id<=e.to;!r||n||i||(this.clearCell(t),t.filledWithIndex=-1)},this)},"onClose":function(){n.cancel(this.cid),this.pool.close()}});return r}),define("plex/tv/views/cells/CellCollectionMixin",[],function(){var e={"collection":null,"getIndexBounds":function(){return{"from":0,"to":this.getTotalSize()-1}},"fillCell":function(e){var t=this.getModelForId(e.id);return t?(e.view.model=t,e.view.update(),!0):(this.fetchModelForCell(e),!1)
},"getModelForId":function(e){var t=this.collection.populatedRange?this.collection.populatedRange.start:0;return this.collection.at(e-t)},"fetchModelForCell":function(e){var t=2*this.getPageSize();this.collection.populateRange({"start":Math.floor(e.id/t)*t,"size":t})},"clearCell":function(e){e.view.model=null,e.view.update()},"getTotalSize":function(){return this.collection.totalSize||this.collection.length||0}};return e}),define("plex/tv/views/cells/CellSequentialNavigationMixin",["underscore"],function(e){var t={"position":0,"lastStep":0,"viewPosition":0,"viewScrolling":"paged","setPosition":function(e){var t=this.getIndexBounds();
e>t.to&&(e=t.to),e<t.from&&(e=t.from),this.position!==e&&(this.lastStep=e-this.position,this.position=e,this.updateViewPosition(),this.isRendered&&this.render(),this.triggerMethod("change:position",e))},"updateViewPosition":function(){var e=this.getPageSize(),t=this.getStepSize();switch(this.viewScrolling){case"paged":this.viewPosition=this.round(this.position,e);break;case"first":this.viewPosition=this.round(this.position);break;case"shift":for(;this.position<this.viewPosition;)this.viewPosition=this.viewPosition-t;
for(;this.position>=this.viewPosition+e;)this.viewPosition=this.viewPosition+t;break;case"center":this.viewPosition=this.round(this.position)-this.round(e/2);var n=this.getIndexBounds();this.viewPosition+e>n.to&&(this.viewPosition=this.round(n.to-e)+t),this.viewPosition<n.from&&(this.viewPosition=this.round(n.from))}},"round":function(e,t){return t||(t=this.getStepSize()),e-e%t},"step":function(e){this.setPosition(this.position+e)},"getLockIndexes":function(){var t,n=this.getVisibleBounds(),i=this.getLockBounds(),r=this.getIndexBounds(),s=e.range(n.from,n.to+1),a=e.range(n.to+1,i.to+1),o=e.range(n.from-1,i.from-1,-1);
return this.lastStep>=0?(o.reverse(),t=s.concat(a,o)):(s.reverse(),o.reverse(),t=s.concat(o,a)),e.filter(t,function(e){return e>=r.from&&e<=r.to},this)},"getVisibleBounds":function(){return{"from":this.viewPosition,"to":this.viewPosition+this.getPageSize()-1}},"getLockBounds":function(){var e=this.getPageSize(),t=this.getVisibleBounds();return{"from":t.from-e,"to":t.to+e}}};return t}),define("plex/tv/views/cells/CellFocusableMixin",["underscore","jquery","plex/base/utils/Dispatcher","plex/tv/views/cells/CellContainerView"],function(e,t,n,i){var r={"createCellView":function(t){var n=i.prototype.createCellView.apply(this,arguments);
return n.$el.on("focus",":focus",e.bind(this.onFocus,this,t)),n},"onFocus":function(i,r){if(!this.elementPositionOffset){var s=this.$el.offset();this.elementPositionOffset={"x":s.left-this.elementScrollOffset.x,"y":s.top-this.elementScrollOffset.y}}this.setPosition(i.id),setTimeout(e.bind(function(){this.$el.scrollTop(0),this.$el.scrollLeft(0),(this.tvApp||(this.tvApp=t(".TVApp"))).scrollLeft(0)},this),0),r.stopPropagation(),n.trigger("cursor:move",{"left":i.offset.x+this.elementScrollOffset.x+this.elementPositionOffset.x,"top":i.offset.y+this.elementScrollOffset.y+this.elementPositionOffset.y,"width":i.view.width,"height":i.view.height},1)
}};return r}),define("plex/tv/views/cells/CellGridMixin",["underscore","jquery"],function(e,t){var n={"rows":0,"cols":0,"cellMargin":0,"offsetLeft":0,"offsetTop":0,"cellHeight":0,"cellWidth":0,"direction":"vertical","fixedSpatialNav":!0,"getPageSize":function(){return this.cols*this.rows},"getStepSize":function(){return{"vertical":this.cols,"horizontal":this.rows}[this.direction]},"prepareCell":function(e){this.fixedSpatialNav&&this.updateSpatialNav(e),this.setCellOffset(e),this.cellWidth||(this.cellWidth=e.view.width,this.cellHeight=e.view.height)
},"updateSpatialNav":function(n){if(n.navForIndex!==n.id){var i;switch(this.direction){case"vertical":i={"left":n.id-1,"right":n.id+1,"up":n.id-this.cols,"down":n.id+this.cols};break;case"horizontal":i={"left":n.id-this.rows,"right":n.id+this.rows},n.id%this.rows&&(i.up=n.id-1),(n.id+1)%this.rows&&(i.down=n.id+1)}var r=this.getIndexBounds(),s=e.map(i,function(e,t){return(e<r.from||e>r.to)&&(e=n.id),"nav-"+t+": #_cell_"+e}).join("; ");n.view.$(t.freefocus.selector).first().attr({"id":"_cell_"+n.id,"style":s}),n.navForIndex=n.id
}},"setCellOffset":function(e){var t;switch(this.direction){case"vertical":t={"x":e.id%this.cols,"y":Math.floor(e.id/this.cols)};break;case"horizontal":t={"x":Math.floor(e.id/this.rows),"y":e.id%this.rows}}e.offset={"x":t.x*(e.view.width+this.cellMargin),"y":t.y*(e.view.height+this.cellMargin)}},"moveCell":function(e){e.movedToIndex!==e.id&&(e.view.$el.translate(e.offset.x,e.offset.y),e.movedToIndex=e.id)},"moveElement":function(){if(this.cellWidth){var e;switch(this.direction){case"vertical":e={"x":0,"y":Math.floor(-this.viewPosition/this.cols)};
break;case"horizontal":e={"x":Math.floor(-this.viewPosition/this.rows),"y":0}}this.elementScrollOffset={"x":e.x*(this.cellWidth+this.cellMargin)+this.offsetLeft,"y":e.y*(this.cellHeight+this.cellMargin)+this.offsetTop},this.$el.translate(this.elementScrollOffset.x,this.elementScrollOffset.y)}}};return n}),define("plex/tv/views/components/library/MediaListViewLayout",["plex/base/utils/PosterSizes"],function(e){function t(t,n){var i=[0,434,212,138][n];return{"height":i,"width":Math.round(i*e.ratios[t])}
}return{"portrait":function(e){return e>8?{"rows":2,"cols":8,"itemViewOptions":t("portrait",2)}:{"rows":1,"cols":4,"itemViewOptions":t("portrait",1)}},"landscape":function(){return{"rows":2,"cols":3,"itemViewOptions":t("landscape",2)}},"square":function(e){return e>6?{"rows":2,"cols":5,"itemViewOptions":t("square",2)}:{"rows":1,"cols":2,"itemViewOptions":t("square",1)}}}}),define("plex/tv/views/components/library/MediaListView",["underscore","jquery","plex/base/utils/Dispatcher","plex/tv/views/cells/CellContainerView","plex/tv/views/cells/CellCollectionMixin","plex/tv/views/cells/CellSequentialNavigationMixin","plex/tv/views/cells/CellFocusableMixin","plex/tv/views/cells/CellGridMixin","./MediaCellView","./MediaListViewLayout"],function(e,t,n,i,r,s,a,o,l,u){var c=i.extend({"mixins":[r,s,a,o],"itemView":l,"itemViewOptions":{"tagName":"li"},"tagName":"ul","className":"MediaList","cellMargin":10,"offsetLeft":40,"direction":"horizontal","viewScrolling":"center","initialize":function(t){i.prototype.initialize.apply(this,arguments);
var n=this.collection.length?this.collection.at(0).get("type"):this.collection.viewGroup,r=u[t.layout](this.getTotalSize());r.itemViewOptions=e.extend({"layout":t.layout,"type":n,"parentType":t.parentType},this.itemViewOptions,r.itemViewOptions),e.extend(this,r),t.initialPosition&&this.setPosition(t.initialPosition)},"initFocus":function(){n.trigger("focus:element",this.$("#_cell_"+this.position,", "+t.freefocus.selector))},"getVisibleBounds":function(){return{"from":this.viewPosition-this.getStepSize(),"to":this.viewPosition+this.getPageSize()-1+this.getStepSize()}
}});return c}),define("plex/tv/views/screens/library/MediaCollectionView",["hb!./MediaCollectionView","underscore","marionette","plex/base/utils/PosterSizes","plex/tv/utils/ThrottledTaskQueue","plex/tv/utils/PageStorage","plex/tv/views/components/library/MediaListView","plex/tv/views/components/library/InfoPreviewView"],function(e,t,n,i,r,s,a,o){var l=n.Layout.extend({"className":"MediaCollection","template":e,"regions":{"listContainer":".tiles-list-container","infoContainer":".info-container"},"initialize":function(e){this.server=e.server,this.layout=e.layout,this.title=e.title,this.parentType=e.parentType,this.listenTo(this.collection,"reset",this.onCollectionReset),this.collection.populateRange?this.collection.populateRange({"start":0,"size":20,"reset":!0}):this.collection.populate({"reset":!0})
},"serializeData":function(){return{"title":this.title}},"enqueueInfoPreviewUpdate":function(){r.cancel(this.cid),r.enqueue(function(){var e=this.list.getModelForId(this.list.position);return e?(e!==this.infoPreview.model&&(this.infoPreview.model=e,this.infoPreview.render()),!0):(this.infoPreview.model&&(this.infoPreview.model=null,this.infoPreview.render()),!1)},this,this.cid,!0)},"onRender":function(){if(this.collection.totalSize||this.collection.length){if(!this.layout){var e=this.collection.at(0).get("type")||this.collection.viewGroup;
this.layout=i.sizes[e]}this.list=new a({"collection":this.collection,"layout":this.layout,"parentType":this.parentType,"initialPosition":s.get("lastListPosition")||0}),this.infoPreview=new o({"parentType":this.parentType}),this.listContainer.show(this.list),this.infoContainer.show(this.infoPreview),this.listenTo(this.list,"change:position",t.debounce(this.onPositionChange,100)),this.enqueueInfoPreviewUpdate(),this.list.initFocus()}},"onCollectionReset":function(){this.isClosed||this.render()},"onPositionChange":function(e){s.set("lastListPosition",e),this.enqueueInfoPreviewUpdate()
}});return l}),define("hb!plex/tv/views/screens/library/DetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",o="function",l=this.escapeExpression;return a+="<h1>",(s=n.title)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.title,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+'</h1>\n\n<img src="',(s=n.thumb)?s=s.call(t,{"hash":{},"data":r}):(s=t&&t.thumb,s=typeof s===o?s.call(t,{"hash":{},"data":r}):s),a+=l(s)+'" style="height: 400px;"/>'
})}),define("plex/tv/views/screens/library/DetailsView",["hb!./DetailsView","marionette"],function(e,t){var n=t.ItemView.extend({"className":"Details","template":e,"serializeData":function(){var e=t.ItemView.prototype.serializeData.apply(this,arguments);return e.thumb=this.model.server.resolveUrl(e.thumb),e}});return n}),define("hb!plex/tv/views/screens/library/details/MovieDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="topBar">\n  <div class="logo"></div>\n  <a href="#/" class="home-link">\n    <span>Go Home</span>\n    <i class="pms-logo"></i>\n  </a>\n</div>\n\n<div class="background"></div>\n\n<div class="fader"></div>\n\n<div class="content-block">\n\n  <div class="buttons-block">\n    <div class="continue-button"><button><i class="playercontrol play"></i><span class="view-offset"></span></button></div>\n    <div class="play-button"><button><i class="playercontrol play"></i></button></div>\n\n    <div class="mark-watched-button"><button><i class="glyphicon circle-ok"></i></button></div>\n    <div class="mark-unwatched-button"><button><i class="glyphicon circle-minus"></i></button></div>\n\n    <div class="more-select-container"></div>\n  </div>\n\n  <div class="images-block">\n    <div class="item-poster"></div>\n    <div class="format-flags"></div>\n  </div>\n\n  <div class="info-block">\n\n    <div class="side-block">\n      <h2 class="item-year"></h2>\n      <div class="rating-container"></div>\n      <div class="item-content-rating"></div>\n    </div>\n\n    <div class="header-block">\n      <h1 class="item-title"></h1>\n      <div class="item-genre metadata-tags"></div>\n      <div class="details">\n        <span class="item-duration"></span>\n        <span class="item-unwatched-label badge">Unwatched</span>\n        <span class="item-unavailable-btn badge">Unavailable</span>\n\n        <div class="item-director metadata-tags">\n          <span class="metadata-label">Director</span>\n          <span class="metadata-tag-list"></span>\n        </div>\n        <div class="item-writer metadata-tags">\n          <span class="metadata-label">Writer</span>\n          <span class="metadata-tag-list"></span>\n        </div>\n        <div class="item-cast metadata-tags">\n          <span class="metadata-label">Cast</span>\n          <span class="metadata-tag-list"></span>\n        </div>\n        <div class="item-audio metadata-tags">\n          <span class="metadata-label">Audio</span>\n          <span class="metadata-tag"></span>\n        </div>\n        <div class="item-subtitles metadata-tags">\n          <span class="metadata-label">Subtitles</span>\n          <span class="metadata-tag"></span>\n        </div>\n      </div>\n    </div>\n\n    <div class="summary-block">\n      <p class="item-summary metadata-summary"></p>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/base/utils/formatters/TagUtil",["plex/base/utils/BaseClass","plex/base/utils/formatters/StringUtil","plex/base/utils/types/MediaTypes"],function(e,t,n){var i=e.extend({"truncateTagList":function(e){var n=e.tags,i=e.separator||", ",r="";if(n&&n.length){var s=e.maxTags||n.length;s>n.length&&(s=n.length);for(var a=0;s>a;a++){var o=n[a];"undefined"!=typeof o.tag&&""!==o.tag&&(r+=t.truncate(o.tag,e.maxLen),s>a+1&&(r+=i))}}return r},"truncateLinkedTagList":function(e){var i=e.model.section,r=n.getMediaTypeByString(e.model.get("type")),s=e.tags,a=i&&i.get("allowAdvancedFilters"),o="",l=function(n){if(!a||!n.id)return t.truncate(n.tag,e.maxLen);
var s=["#!/server/"+encodeURIComponent(i.server.id),"/section/"+encodeURIComponent(i.id),"/filter","/"+encodeURIComponent(r.id),"/"+encodeURIComponent(e.key),"/"+encodeURIComponent(n.id),"/"+encodeURIComponent(n.tag)];return'<a href="'+s.join("")+'">'+t.truncate(n.tag,e.maxLen)+"</a>"};if(s&&s.length){var u=e.maxTags||s.length;u>s.length&&(u=s.length);for(var c=0;u>c;c++){var d=s[c];"undefined"!=typeof d.tag&&""!==d.tag&&(o+=l(d),u>c+1&&(o+=", "))}}return o}});return new i}),define("plex/base/mixins/details/BaseDetailsMixin",["underscore","plex/base/utils/MediaUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/TagUtil"],function(e,t,n,i){var r={"tagsRenderer":i.truncateLinkedTagList,"tagsRendererOptions":{},"defaultBindings":{".item-title":{"modelAttribute":"title"},".item-year":{"modelAttribute":"year"},".item-progress":{"modelAttribute":"viewOffset","manual":!0,"formatter":function(e,t){var n=this.model.get("duration"),i=!(!e||!n);
if(i){var r=Math.round(e/n*100);t.css("width",r+"%")}t.parent().toggleClass("hidden",!i)}},".item-duration":{"modelAttribute":"duration","autohide":!0,"formatter":function(e){return e?n.formatHoursMinutes(e):0}},".item-unwatched-label":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;var t=this.model.get("viewOffset");return!e&&!t}},".item-unavailable-btn":{"modelAttribute":"Media","manual":!0,"autohide":function(e){var n=t.getMissingParts(e);
return!!n.length}},".item-available-at":{"modelAttribute":"originallyAvailableAt","autohide":!0,"formatter":function(e){return e?n.formatDate(e):""}},".item-tagline":{"modelAttribute":"tagline","autohide":!0},".item-genre":{"modelAttribute":"Genre","autohide":!0,"formatter":function(t){if(!t||!t.length)return"";var n=this.tagsRenderer(e.extend({},this.tagsRendererOptions,{"model":this.model,"key":"genre","tags":t,"maxLen":50,"maxTags":2}));return n}},".item-director":{"modelAttribute":"Director","manual":!0,"autohide":!0,"formatter":function(t,n){if(!t||!t.length)return"";
var i=this.tagsRenderer(e.extend({},this.tagsRendererOptions,{"model":this.model,"key":"director","tags":t,"maxLen":50,"maxTags":3}));return n.find(".metadata-tag-list").html(i),i}},".item-writer":{"modelAttribute":"Writer","manual":!0,"autohide":!0,"formatter":function(t,n){if(!t||!t.length)return"";var i=this.tagsRenderer(e.extend({},this.tagsRendererOptions,{"model":this.model,"key":"writer","tags":t,"maxLen":50,"maxTags":3}));return n.find(".metadata-tag-list").html(i),i}},".item-cast":{"modelAttribute":"Role","manual":!0,"autohide":!0,"formatter":function(t,n){if(!t||!t.length)return"";
var i=this.tagsRenderer(e.extend({},this.tagsRendererOptions,{"model":this.model,"key":"actor","tags":t,"maxLen":50,"maxTags":5}));return n.find(".metadata-tag-list").html(i),i}},".item-summary":{"modelAttribute":"summary","autohide":!0},".item-content-rating":{"modelAttribute":"contentRating","autohide":!0},".media-count-badge":{"modelAttribute":"Media","formatter":function(e){return e.length},"autohide":function(e){return e>1}},".unwatched-count-badge":{"modelAttribute":"unviewedLeafCount","autohide":function(e){return this.shared&&!this.multiuser?!1:!!e
}},".content-rating-flag-container":{"modelAttribute":"contentRating","manual":!0,"autohide":!0},".studio-flag-container":{"modelAttribute":"studio","manual":!0,"autohide":!0}}};return r}),define("plex/base/mixins/details/MovieDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-year",".item-progress",".item-duration",".item-unwatched-label",".item-unavailable-btn",".item-tagline",".item-genre",".item-director",".item-writer",".item-cast",".item-summary",".item-content-rating",".media-count-badge",".content-rating-flag-container",".studio-flag-container"])};
return n}),define("plex/base/views/images/MediaFlagImage",["plex/base/views/images/BaseImage"],function(e){var t=e.extend({"setup":function(e){if(e.className&&this.$el.addClass(e.className),this.model=e.model,this.server=e.model.server,e.flag){var t=this.model.get("Media");this.flag=e.flag,t&&t.length&&(this.path=t[0][this.flag]),this.listenTo(this.model,"change:Media",this.onMediaChange)}else this.flag=e.modelAttribute,this.path=this.model.get(this.flag),this.listenTo(this.model,"change:"+this.flag,this.onChange);
this.prefix=this.model.get("mediaTagPrefix"),this.version=this.model.get("mediaTagVersion"),this.path&&(this.url=this.getUrl(this.path)),this.setDimensions(e)},"getUrl":function(e){return this.prefix+this.flag+"/"+encodeURIComponent(e)+"?t="+this.version},"onMediaChange":function(e,t){this.onChange(e,t[0][this.flag])}});return t}),define("hb!plex/tv/views/components/library/RatingView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='\n  <i class="star-icon glyphicon ',i=n["if"].call(e,e,{"hash":{},"inverse":c.program(4,o,t),"fn":c.program(2,a,t),"data":t}),(i||0===i)&&(r+=i),r+='"></i>\n'
}function a(){return"star"}function o(){return"dislikes"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,u="",c=this;return l=n.each.call(t,t&&t.stars,{"hash":{},"inverse":c.noop,"fn":c.program(1,s,r),"data":r}),(l||0===l)&&(u+=l),u+="\n"})}),define("plex/tv/views/components/library/RatingView",["hb!./RatingView","underscore","marionette"],function(e,t,n){var i=n.ItemView.extend({"tagName":"span","className":"Rating","template":e,"serializeData":function(){var e=this.model.get("userRating")||this.model.get("rating");
return{"stars":[e>0,e>2,e>4,e>6,e>8]}}});return i}),define("plex/tv/views/components/library/MoreSelectView",["underscore","./DropdownSelectView"],function(e,t){var n=t.extend({"serializeData":function(){function t(e,t){return["#!","server",encodeURIComponent(i),"path","portrait",encodeURIComponent(e),t].join("/")}var n=[];if(this.showMenu){var i=this.model.server.id,r="library/sections/"+this.model.get("librarySectionID")+"/all?";e.each(e.first(this.model.get("Genre"),3),function(e){n.push({"title":"More "+e.tag,"url":t("More "+e.tag,r+"genre="+e.id)})
}),e.each(e.first(this.model.get("Director"),3),function(e){n.push({"title":"More by "+e.tag,"url":t("More by "+e.tag,r+"director="+e.id)})}),e.each(e.first(this.model.get("Role"),3),function(e){n.push({"title":"More with "+e.tag,"url":t("More with "+e.tag,r+"actor="+e.id)})})}return{"buttonHTML":"&bull;&bull;&bull;","items":n}}});return n}),define("plex/tv/views/screens/library/details/BaseDetailsView",["underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/Transcoder","plex/base/utils/formatters/TagUtil","plex/base/models/AppModel","plex/base/mixins/details/BaseDetailsMixin"],function(e,t,n,i,r,s,a){var o=t.Layout.extend({"mixins":a,"tagsRenderer":r.truncateTagList,"posterAttribute":"thumb","ui":{"background":".background","poster":".item-poster","thumb":".item-thumb","focusStart":".continue-button, .play-button, .list-container","markButtons":".mark-watched-button, .mark-unwatched-button"},"regions":{"rating":".rating-container","formatFlags1":".format-flags","formatFlags2":".format-flags","formatFlags3":".format-flags","thumb":".details-thumb-container","list":".details-list-container","moreSelectContainer":".more-select-container","listContainer":".list-container"},"initialize":function(){this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),this.multiuser=this.model.server.get("multiuser")
},"serializeData":function(){var e=this.model.server.get("playQueues");return{"canPlay":e.canCreateFor(this.model),"limited":this.shared||this.synced}},"setBackgroundImage":function(e,t,n){if(e.length){var r=i.image(t.server,t.get(n),{"fallbackServer":s.get("primaryServer"),"width":2*e.outerWidth(),"height":2*e.outerHeight()});e.css("background-image","url("+r+")")}},"onRender":function(){e.defer(this.setBackgroundImage,this.ui.background,this.model,"art"),e.defer(this.setBackgroundImage,this.ui.poster,this.model,this.posterAttribute),e.defer(this.setBackgroundImage,this.ui.thumb,this.model,"thumb"),this.ratingView&&this.rating.show(this.ratingView),this.moreSelect&&this.moreSelectContainer.show(this.moreSelect),this.mediaList&&this.listContainer.show(this.mediaList),n.trigger("focus:element",this.ui.focusStart)
}});return o}),define("plex/tv/views/screens/library/details/BaseVideoDetailsView",["hb!./MovieDetailsView.tpl","underscore","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/base/utils/types/StreamTypes","plex/base/utils/formatters/MetadataUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/commands/Commands","plex/base/views/images/MediaFlagImage","plex/tv/views/components/library/RatingView","plex/tv/views/components/library/MoreSelectView","./BaseDetailsView"],function(e,t,n,i,r,s,a,o,l,u,c,d){var h=d.extend({"events":{"click .play-button button":"onPlay","click .continue-button button":"onContinue","click .mark-watched-button button":"onMarkWatched","click .mark-unwatched-button button":"onMarkUnwatched"},"initialize":function(){d.prototype.initialize.apply(this,arguments),t.extend(this.bindings,this.extraBaseVideoBindings),this.ratingView=new u({"model":this.model}),this.moreSelect=new c({"model":this.model}),this.videoResolutionFlag=new l({"model":this.model,"flag":"videoResolution","className":"movie-video-resolution media-flag","width":200,"height":40}),this.audioCodecFlag=new l({"model":this.model,"flag":"audioCodec","className":"movie-audio-codec media-flag","width":200,"height":40}),this.audioChannelsFlag=new l({"model":this.model,"flag":"audioChannels","className":"movie-audio-channels media-flag","width":200,"height":40})
},"getStreamString":function(e){var n=t.first(this.model.get("Media")),a=r.getStreamTypeByString(e),o=t.first(i.getStreams(n,{"streamType":a.id,"selected":!0}));if(!o)return"Unknown";var l=o.language||"Unknown",u=[];"subtitles"===e&&(o.format&&u.push(o.format.toUpperCase()),o.forced&&u.push("Forced")),"audio"===e&&(o.codec&&u.push(s.formatAudioCodec(o.codec)),o.channels&&u.push(s.formatAudioChannels(o.channels)));var c=u.length?" ("+u.join(" ")+")":"";return l+c},"extraBaseVideoBindings":{".item-audio":{"modelAttribute":"Media","manual":!0,"autohide":!0,"formatter":function(e,t){var n=this.getStreamString("audio");
return t.find(".metadata-tag").html(n),n}},".item-subtitles":{"modelAttribute":"Media","manual":!0,"autohide":!0,"formatter":function(e,t){var n=this.getStreamString("subtitles");return t.find(".metadata-tag").html(n),n}},".continue-button":{"modelAttribute":"viewOffset","manual":!0,"autohide":!0},".view-offset":{"modelAttribute":"viewOffset","formatter":function(e){return a.formatDuration(e)}},".mark-watched-button":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;
var t=this.model.get("viewOffset");return t||!e}},".mark-unwatched-button":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;var t=this.model.get("viewOffset");return e&&!t}}},"onRender":function(){d.prototype.onRender.apply(this,arguments),this.formatFlags1.append(this.videoResolutionFlag),this.formatFlags2.append(this.audioCodecFlag),this.formatFlags3.append(this.audioChannelsFlag)},"onPlay":function(){n.trigger("clear:cache"),n.trigger("navigate","video",{"serverID":this.model.server.id,"key":this.model.get("key"),"position":0})
},"onContinue":function(){n.trigger("clear:cache"),n.trigger("navigate","video",{"serverID":this.model.server.id,"key":this.model.get("key"),"position":this.model.get("viewOffset")})},"onMarkWatched":function(){n.trigger("clear:cache"),n.trigger("show:loading");var e=o.execute("markWatched",{"item":this.model});e.always(t.bind(function(){n.trigger("hide:loading"),n.trigger("focus:element",this.ui.markButtons)},this))},"onMarkUnwatched":function(){n.trigger("clear:cache"),n.trigger("show:loading");
var e=o.execute("markUnwatched",{"item":this.model});e.always(t.bind(function(){n.trigger("hide:loading"),n.trigger("focus:element",this.ui.markButtons)},this))}});return h}),define("plex/tv/views/screens/library/details/MovieDetailsView",["hb!./MovieDetailsView.tpl","plex/base/mixins/details/MovieDetailsMixin","./BaseVideoDetailsView"],function(e,t,n){var i=n.extend({"mixins":t,"className":"BaseDetails MovieDetails","template":e});return i}),define("hb!plex/tv/views/screens/library/details/EpisodeDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="topBar">\n  <div class="logo"></div>\n  <a href="#/" class="home-link">\n    <span>Go Home</span>\n    <i class="pms-logo"></i>\n  </a>\n</div>\n\n<div class="background"></div>\n\n<div class="fader"></div>\n\n<div class="content-block">\n\n  <div class="buttons-block">\n    <div class="continue-button"><button><i class="playercontrol play"></i><span class="view-offset"></span></button></div>\n    <div class="play-button"><button><i class="playercontrol play"></i></button></div>\n\n    <div class="mark-watched-button"><button><i class="glyphicon circle-ok"></i></button></div>\n    <div class="mark-unwatched-button"><button><i class="glyphicon circle-minus"></i></button></div>\n\n    <div class="more-select-container"></div>\n  </div>\n\n  <div class="images-block">\n    <div class="item-poster"></div>\n    <div class="item-thumb"></div>\n    <div class="format-flags"></div>\n  </div>\n\n  <div class="info-block">\n\n    <div class="side-block">\n      <h2 class="item-year"></h2>\n      <h2 class="item-duration"></h2>\n      <div class="rating-container"></div>\n    </div>\n\n    <div class="header-block">\n      <h1 class="show-title"></h1>\n      <h1 class="episode-title"></h1>\n\n      <div class="details">\n        <span class="episode-index"></span> / <span class="item-available-at"></span>\n        <br/>\n        <span class="item-unwatched-label badge">Unwatched</span>\n        <span class="item-unavailable-btn badge">Unavailable</span>\n        <br/>\n        <div class="item-audio metadata-tags">\n          <span class="metadata-label">Audio</span>\n          <span class="metadata-tag"></span>\n        </div>\n        <div class="item-subtitles metadata-tags">\n          <span class="metadata-label">Subtitles</span>\n          <span class="metadata-tag"></span>\n        </div>\n      </div>\n    </div>\n\n    <div class="summary-block">\n      <p class="item-summary metadata-summary"></p>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/base/mixins/details/EpisodeDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin","plex/base/utils/MediaUtil"],function(e,t,n){var i={"bindings":e.extend({".show-title":{"modelAttribute":"grandparentTitle"},".episode-title":{"modelAttribute":"title"},".episode-index":{"modelAttribute":"index","formatter":function(e){return n.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":e,"date":this.model.get("originallyAvailableAt")})}}},e.pick(t.defaultBindings,[".item-year",".item-progress",".item-duration",".item-unwatched-label",".item-unavailable-btn",".item-available-at",".item-director",".item-writer",".item-cast",".item-summary",".item-content-rating",".media-count-badge",".content-rating-flag-container"]))};
return i}),define("plex/tv/views/screens/library/details/EpisodeDetailsView",["hb!./EpisodeDetailsView.tpl","underscore","plex/base/utils/MediaUtil","plex/base/mixins/details/EpisodeDetailsMixin","./BaseVideoDetailsView"],function(e,t,n,i,r){var s=r.extend({"mixins":i,"className":"BaseDetails EpisodeDetails","template":e,"posterAttribute":"grandparentThumb","initialize":function(){r.prototype.initialize.apply(this,arguments),t.extend(this.bindings,this.extraBindings)},"extraBindings":{".episode-index":{"modelAttribute":"index","formatter":function(e){return n.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":e,"seasonPrefix":"Season {1}","episodePrefix":" Episode {1}","date":this.model.get("originallyAvailableAt"),"noLeadingZero":!0})
}}}});return s}),define("hb!plex/tv/views/screens/library/details/ShowDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div id="topBar">\n  <div class="logo"></div>\n  <a href="#/" class="home-link">\n    <span>Go Home</span>\n    <i class="pms-logo"></i>\n  </a>\n</div>\n\n<div class="background"></div>\n\n<div class="fader"></div>\n\n<div class="content-block">\n\n  <div class="images-block">\n    <div class="item-poster"></div>\n  </div>\n\n  <div class="info-block">\n\n    <div class="side-block">\n      <h2 class="item-year"></h2>\n      <div class="rating-container"></div>\n      <div class="item-content-rating"></div>\n    </div>\n\n    <div class="header-block">\n      <h1 class="item-title"></h1>\n      <div class="item-genre metadata-tags"></div>\n      <p class="metadata-labels">\n        <span class="item-duration metadata-duration"></span><span>,</span>\n        <span class="unwatched-count-badge"></span> <span>episodes unwatched</span>\n      </p>\n      <p class="item-tagline metadata-tagline"></p>\n    </div>\n\n    <div class="summary-block">\n      <p class="item-summary metadata-summary"></p>\n    </div>\n  </div>\n</div>\n\n<div class="list-container"></div>'
})}),define("plex/base/mixins/details/ShowDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-year",".item-duration",".item-genre",".item-summary",".item-content-rating",".unwatched-count-badge",".content-rating-flag-container",".studio-flag-container"])};return n}),define("plex/tv/views/screens/library/details/ShowDetailsView",["hb!./ShowDetailsView.tpl","underscore","plex/base/mixins/details/ShowDetailsMixin","plex/base/views/images/MediaFlagImage","plex/tv/views/components/library/RatingView","plex/tv/views/components/library/MoreSelectView","plex/tv/views/components/library/MediaListView","./BaseDetailsView"],function(e,t,n,i,r,s,a,o){var l=o.extend({"mixins":n,"className":"BaseDetails ShowDetails","template":e,"initialize":function(){o.prototype.initialize.apply(this,arguments),t.extend(this.bindings,this.extraBindings),this.ratingView=new r({"model":this.model}),this.moreSelect=new s({"model":this.model}),this.mediaList=new a({"collection":this.collection,"layout":"portrait","parentType":"show"}),this.mediaList.rows=1,this.mediaList.cols=10,this.mediaList.itemViewOptions.width=137,this.mediaList.itemViewOptions.height=206
}});return l}),define("plex/tv/routes/LibraryController",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/PosterSizes","plex/base/routes/BaseController","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/models/server/ServerStorageModel","plex/base/models/library/MetadataCollection","plex/base/models/library/section/FilterOptionCollection","plex/base/models/user/PlaylistItemCollection","plex/tv/views/screens/library/DashboardView","plex/tv/views/screens/library/MediaCollectionView","plex/tv/views/screens/library/DetailsView","plex/tv/views/screens/library/details/MovieDetailsView","plex/tv/views/screens/library/details/EpisodeDetailsView","plex/tv/views/screens/library/details/ShowDetailsView"],function(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,m,g){function v(e){return e.items.fetchRange?e.items.hasOwnProperty("totalSize")?t.Deferred().resolve().promise():e.items.populateRange({"start":0,"size":10}):e.items.populate()
}var y=r.extend({"serverDashboard":function(i){var r=this.populateView({"serverID":i}),u=(s.get("user"),s.get("servers").populate());t.when(r,u).done(function(i){i.server.canBePrimary(a.get("minServerVersion"))&&(s.set("primaryServer",i.server),o.save("lastPrimaryServerID",i.server.id));var r=[];r.push({"title":"Continue watching","layout":"landscape","variant":"InOneColumn","items":new l([],{"server":i.server,"url":"/library/all?viewOffset%3E=1&type=1,4&sort=lastViewedAt:desc&includeAll=0","allowInCache":!0})}),r.push({"title":"On deck","layout":"portrait","items":new l([],{"server":i.server,"url":"/library/onDeck?type=2&viewOffset=0","allowInCache":!0})}),r.push({"title":"Recently added TV","layout":"portrait","items":new l([],{"server":i.server,"url":"/library/all?sort=addedAt:desc&type=4&unwatched=1&agent=com.plexapp.agents.thetvdb&includeAll=0","allowInCache":!0})});
var u=i.server.supports("hubFilterSigns")?"agent!=com.plexapp.agents.none":"agent=com.plexapp.agents.imdb";r.push({"title":"Recently added movies","layout":"portrait","items":new l([],{"server":i.server,"url":"/library/all?sort=addedAt:desc&type=1&unwatched=1&"+u+"&includeAll=0","allowInCache":!0})});var c=i.server.get("sections"),h=e.map(r,v);h.push(c.populate()),t.when.apply(t,h).done(function(){var e=c.reduce(function(e,t){var n=t.get("type");return"artist"!==n&&"photo"!==n&&("movie"==n&&"com.plexapp.agents.none"===t.get("agent")&&(n="homevideo"),e.push({"title":t.get("title"),"link":"#!/server/"+encodeURIComponent(t.server.id)+"/section/"+n+"/"+encodeURIComponent(t.get("key"))})),e
},[]);n.trigger("show:view",new d({"server":i.server,"buttons":e,"hubs":r,"showDropdowns":!0}))})})},"sectionDashboard":function(r,s,a){var o=this.populateView({"serverID":r,"sectionID":a});if("artist"===s){var c=t.Deferred();o.then(function(t){var n=new u([],{"server":t.server,"section":t.section,"url":e.result(t.section,"url")+"/decade/"});n.populate().then(function(){t.decades=n,c.resolve(t)})}),o=c.promise()}else if("photo"===s){var h=t.Deferred();o.then(function(t){var n=new u([],{"server":t.server,"section":t.section,"url":e.result(t.section,"url")+"/year/"});
n.populate().then(function(){t.years=n,h.resolve(t)})}),o=h.promise()}o.done(function(r){function o(e,t){return["#!","server",encodeURIComponent(r.section.server.id),"path",u,encodeURIComponent(e),t].join("/")}var u=i.sizes[s],c=[],h=[],p="/library/sections/"+a;if(c.push({"title":"All "+r.section.get("title"),"link":o("All "+r.section.get("title"),p+"/all")}),r.server.supports("hubFilters")&&"movie"===s)h.push({"title":"Unwatched "+r.section.get("title"),"link":o("Unwatched "+r.section.get("title"),p+"/unwatched"),"layout":u,"items":new l([],{"server":r.server,"url":p+"/all?unwatched=1&sort=random","allowInCache":!0})}),h.push({"title":"Recently released","layout":u,"items":new l([],{"server":r.server,"url":p+"/newest","allowInCache":!0})}),h.push({"title":"Top movies in %s","layout":u,"items":new l([],{"server":r.server,"url":p+"/discover/tags/genre?sort=rating:desc","allowInCache":!0})}),h.push({"title":"Top movies with %s","layout":u,"items":new l([],{"server":r.server,"url":p+"/discover/tags/actor?sort=rating:desc","allowInCache":!0})}),h.push({"title":"Top rated movies","layout":u,"items":new l([],{"server":r.server,"url":p+"/all?rating>=8&unwatched=1&sort=random","allowInCache":!0})}),h.push({"title":"Recently added","layout":u,"items":new l([],{"server":r.server,"url":p+"/recentlyAdded","allowInCache":!0})}),h.push({"title":"Recently viewed","layout":u,"items":new l([],{"server":r.server,"url":p+"/recentlyViewed","allowInCache":!0})});
else if(r.server.supports("hubFilters")&&"show"===s)h.push({"title":"Recently aired","layout":u,"items":new l([],{"server":r.server,"url":p+"/all?type=4&sort=originallyAvailableAt:desc","allowInCache":!0})}),h.push({"title":"Start watching","layout":u,"items":new l([],{"server":r.server,"url":p+"/all?viewedLeafCount=0&sort=random","allowInCache":!0})}),h.push({"title":"Rediscover","layout":u,"items":new l([],{"server":r.server,"url":p+"/all?lastViewedAt<=-6w&unviewedLeafCount>=1&unviewedLeafCount>=1&sort=random","allowInCache":!0})});
else if(r.server.supports("hubFilters")&&"artist"===s){h.push({"title":"Recently released","layout":u,"items":new l([],{"server":r.server,"url":p+"/newest","allowInCache":!0})}),h.push({"title":"Top albums in %s","layout":u,"items":new l([],{"server":r.server,"url":p+"/discover/tags/genre?sort=rating:desc","allowInCache":!0})});var f=r.decades.sample();h.push({"title":"Top albums of %s","layout":u,"items":new l([],{"server":r.server,"url":f.url().slice(1),"allowInCache":!0})}),e.last(h).items.title=f.get("title")
}else if(r.server.supports("hubFilters")&&"photo"===s){h.push({"title":"Recent photos","layout":u,"items":new l([],{"server":r.server,"url":p+"/newest","allowInCache":!0})});var m=r.years.sample();h.push({"title":"Photos during %s","layout":u,"items":new l([],{"server":r.server,"url":m.url().slice(1),"allowInCache":!0})}),e.last(h).items.title=m.get("title")}else h.push({"title":"On Deck","layout":u,"items":new l([],{"server":r.server,"url":p+"/onDeck","allowInCache":!0})}),h.push({"title":"Recently Added","layout":u,"items":new l([],{"server":r.server,"url":p+"/recentlyAdded","allowInCache":!0})});
var g=e.map(h,v);t.when.apply(t,g).done(function(){n.trigger("show:view",new d({"server":r.server,"buttons":c,"hubs":h}))})})},"libraryPath":function(e,t,i,r,s){var a=this.populateView({"serverID":e});a.done(function(e){var a=new l([],{"server":e.server,"url":r+(s?"?"+s:""),"allowInCache":!0});n.trigger("show:view",new h({"server":e.server,"layout":t,"collection":a,"title":i}))})},"details":function(t,n){var i=this.populateView({"serverID":t,"key":n});i.done(e.bind(function(e){var t=this[e.item.get("type")+"Details"];
if(!t)throw new Error("Unknown details action for type "+e.item.get("type"));t.call(this,e.item)},this))},"showDetails":function(e){var t=e.get("children");t.populate().done(function(){n.trigger("show:view",new g({"model":e,"collection":t}))})},"seasonDetails":function(e){n.trigger("show:view",new h({"server":e.server,"collection":e.get("children"),"parentType":e.get("type"),"title":e.get("parentTitle")+" / "+e.get("title")}))},"artistDetails":function(e){n.trigger("show:view",new h({"server":e.server,"collection":e.get("children"),"parentType":e.get("type"),"title":e.get("title")}))
},"photoAlbumDetails":function(e){n.trigger("show:view",new h({"server":e.server,"collection":e.get("children"),"parentType":e.get("type"),"title":e.get("title")}))},"albumDetails":function(e){n.trigger("show:view",new p({"model":e}))},"movieDetails":function(e){n.trigger("show:view",new f({"model":e}))},"episodeDetails":function(e){n.trigger("show:view",new m({"model":e}))},"photoDetails":function(e){n.trigger("show:view",new p({"model":e}))}});return y}),define("plex/tv/routes/LibraryRouter",["plex/base/routes/BaseRouter","./LibraryController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/server/:serverID":"serverDashboard","!/server/:serverID/section/:type/:sectionID":"sectionDashboard","!/server/:serverID/path/:layout/:title/*path":"libraryPath","!/server/:serverID/details/:key":"details"}});
return n}),define("plex/tv/routes/UserController",["jquery","plex/base/utils/Dispatcher","plex/base/routes/BaseController","plex/base/models/AppModel","plex/base/models/user/PlaylistItemCollection","plex/tv/views/screens/library/MediaCollectionView"],function(e,t,n,i,r,s){var a=n.extend({"playlist":function(e,n){var a=this.populateView({"serverID":"myPlex"});a.done(function(a){var o=i.get("user"),l=new r([],{"server":o.server,"parent":o,"key":e});t.trigger("show:view",new s({"server":a.server,"collection":l,"layout":"landscape","title":n}))
})}});return a}),define("plex/tv/routes/UserRouter",["plex/base/routes/BaseRouter","./UserController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/playlist/:key/:title":"playlist"}});return n}),define("hb!plex/tv/views/screens/player/VideoPlayerView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<video class="video-element"></video>\n<div class="video-header-container"></div>\n<div class="video-controls-container"></div>\n'
})}),define("plex/base/utils/MediaDecisionUtil",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/MediaUtil","plex/base/utils/formatters/StringUtil","plex/base/utils/types/StreamTypes"],function(e,t,n,i,r,s,a){var o=n.extend({"getMediaDecision":function(n){n.transcoderOptions||(n.transcoderOptions={}),n.maxBitrate=n.transcoderOptions.maxVideoBitrate||n.transcoderOptions.maxAudioBitrate;var i=n.item.server;e.defaults(n,{"offset":0,"minVersionForDash":i.features.dash,"minVersionForHTTP":i.features.streamingMKV});
var r={"session":s.random(),"media":n.media,"part":n.part},a=this.resolveMedia(n,r);return a=a.then(function(){return t.when(r.url)}),a=a.then(function(e){return r.url=e,r})},"resolveMedia":function(n,i){if(i.media)return this.resolvePart(n,i);var s=n.item.get("Media"),a=t.Deferred();if(!s.length)return i.offset=n.offset,this.resolveDirectPlay(n,i),this.resolveUrl(n,i),a.resolve(i),a.promise();var o=e.findWhere(s,{"protocol":"embed"});return o?(i.embed=!0,i.media=o,i.part=e.first(o.Part),a.reject(i),a.promise()):(i.media=1===s.length?s[0]:r.getMediaByBitrate(s,n.maxBitrate),this.validateMedia(n,i))
},"validateMedia":function(e,n){var i=r.getMissingParts(n.media),s=t.Deferred();if(!i.length)return this.resolvePart(e,n);var a=i[0];return n.error=1==a.exists?"Please check the permissions for this file.":"Please check that the file exists and the necessary drive is mounted.",s.reject(n),s.promise()},"resolvePart":function(t,n){return t.offset&&!n.part?1===n.media.Part.length?(n.part=n.media.Part[0],n.offset=t.offset):(n.part=r.getPartByAbsoluteOffset(n.media,t.offset),n.offset=r.getRelativeOffset(n.media,n.part,t.offset)):(n.part||(n.part=e.first(n.media.Part)),n.offset=t.offset),this.resolveIndirect(t,n)
},"resolveIndirect":function(n,i){var r=t.Deferred(),s=e.bind(function(){if("webkit"===i.media.protocol)return i.redirect=!0,void r.reject(i);var e=n.transcodeServer,t=n.fallbackServer,s=[e];t&&t.id!==e.id&&s.push(t);for(var a=!1,o=0,l=s.length;l>o;o++)if(n.transcodeServer=s[o],delete i.directPlay,delete i.error,this.resolveDirectPlay(n,i),this.validateDirectPlay(n,i)){a=!0;break}a?(i.transcodeServer=n.transcodeServer,this.resolveUrl(n,i),r.resolve(i)):r.reject(i)},this),a=e.bind(function(){i.redirect=!0,r.reject(i)
},this);return n.item.resolveIndirect(i.media,i.part).done(s).fail(a),r.promise()},"resolveDirectPlay":function(e,t){if(!t.media)return void(t.directPlay=!0);if("video"===e.type){if(t.playerType="html",t.supportsTranscoding=e.transcodeServer&&e.transcodeServer.get("transcoderVideo"),t.supportsTranscoding){if(!e.allowDirectPlay)return t.directPlay=!1,void i.warn("direct play failed, setting is disabled");var n,s=a.getStreamTypeByString("subtitles"),o=r.getStreams(t.media,{"streamType":s.id,"selected":!0});
if(o.length&&(n=o[0]),n&&n.id>0)return t.directPlay=!1,void i.warn("direct play failed, subtitles are selected")}if((e.flash||e.hls)&&"hls"===t.media.protocol)return e.hls||(t.playerType="flash"),void(t.directPlay=!0);if(e.flash&&"flv"===t.media.container)return t.playerType="flash",void(t.directPlay=!0)}else t.supportsTranscoding=e.transcodeServer&&e.transcodeServer.get("transcoderAudio");t.directPlay=this.canDirectPlay(e,t)},"validateDirectPlay":function(e,t){if(t.directPlay)t.protocol="http";else{if("video"===e.type)if(e.hls)t.protocol="hls";
else if(e.http&&e.transcodeServer&&e.transcodeServer.isVersionOrNewer(e.minVersionForHTTP))t.protocol="http";else if(e.dash){if(e.transcodeServer&&!e.transcodeServer.isVersionOrNewer(e.minVersionForDash))return t.error="HTML5 streaming requires Plex Media Server 0.9.8.6 or later.",!1;t.protocol="dash"}else{if(!e.flash)return t.error="This browser does not support video streaming.",!1;t.protocol="hls",t.playerType="flash"}else t.protocol="http";if(!t.supportsTranscoding)return t.error="This media server does not support transcoding.",!1
}return!0},"resolveUrl":function(t,n){var i=t.item,r=n.media,s=n.part;if(n.directPlay)if(s){var a=/(googlevideo|youtube).com/.test(s.key);n.url="flv"===s.container&&a&&s.postURL?s.postURL:i.server.resolveUrl(s.key,{"appendToken":!0})}else n.url=i.server.resolveUrl(i.get("key"),{"appendToken":!0});else{var o=t.transcoderOptions;e.isFunction(o)&&(o=o(n)),o=e.extend(o,{"protocol":n.protocol,"session":n.session,"offset":n.offset/1e3}),e.each(e.keys(o),function(e){null==o[e]&&delete o[e]}),("hls"===o.protocol||"dash"===o.protocol)&&(o.offset=0),n.url="video"===t.type?t.transcoder.video(t.transcodeServer,i,r,s,o):t.transcoder.music(t.transcodeServer,i,o)
}},"canPlayType":function(e,t){if("audio"===e&&window.soundManager)return window.soundManager.canPlayMIME(t);var n=document.createElement(e);return!(!n.canPlayType||!n.canPlayType(t).replace(/^no$/,""))},"canDirectPlay":function(t,n){var s=n.media,o=t.supportedTypes[s.container];if(!o)return i.warn("direct play failed, unsupported container: "+s.container),!1;var l=o[t.type];if(t.maxBitrate||l&&l.maxBitrate){l=l?e.clone(l):{};var u;u=t.maxBitrate&&l.maxBitrate?Math.min(l.maxBitrate,t.maxBitrate):t.maxBitrate||l.maxBitrate,l.maxBitrate=u,"video"===t.type?t.transcoderOptions.maxVideoBitrate=u:t.transcoderOptions.maxAudioBitrate=u
}var c=e.keys(o);if(c&&c.length){for(var d=0,h=c.length;h>d;d++){var p=c[d];if("mimeType"===p){var f=o.mimeType;if(!this.canPlayType(t.type,f))return i.warn("direct play failed canPlayType test, "+p+": "+f),!1}else if("video"===p||"audio"===p){var m=a.getStreamTypeByString(p),g=r.getStreams(s,{"streamType":m.id}),v=r.getStreams(s,{"streamType":m.id,"selected":!0});if(!g.length)continue;if(n.supportsTranscoding&&v.length&&v[0]!==g[0])return i.warn("direct play failed, first "+p+" stream is not selected"),!1;
var y=t.type===p?l:o[p];if(!this.validateStream(g[0],y,t,n))return!1}else{var b=s[p];if(null!=b&&o[p]!=b)return i.warn("direct play failed, container: "+s.container+", "+p+": "+b),!1}}return!0}return i.warn("direct play failed, no keys: "+s.container),!1},"validateStream":function(t,n,r,s){var a=e.keys(n);if(a&&a.length)for(var o=0,l=a.length;l>o;o++){var u=a[o],c=n[u],d=t[u],h=u.match(/^max(\w+)/);if(h){if(!s.supportsTranscoding)continue;if(u=h[1],u=u.charAt(0).toLowerCase()+u.slice(1),d=t[u],null!=d&&d>c)return i.warn("direct play failed, streamType: "+t.streamType+", "+u+": "+d),!1
}else if(null!=d&&c!=d&&!e.contains(c,d)){if("codec"===u&&"ac3"===d&&r.allowAC3){i.warn("direct play of ac3 audio is not recommended");continue}return i.warn("direct play failed, streamType: "+t.streamType+", "+u+": "+d),!1}}return!0}});return new o}),define("plex/base/adapters/PlayerControllerAdapter",["underscore","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/adapters/Adapter","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,r,s){var a=i.extend({"initialize":function(){this.controllers=[]
},"register":function(e){this.controllers.push(e)},"get":function(i,a){a||(a={});var o,l=s.get("primaryPlayer");o=l&&!a.forceLocal?l.get("protocol")||"legacy":"local";var u=e.find(this.controllers,function(e){var t=o===e.protocol,n=i===e.type||"*"===e.type;return t&&n});if(u)return u.create(i);n.warn("A player did not match the protocol ("+o+") and type ("+i+").");var c=r.get();return t.trigger("show:alert",{"type":"error","message":c.t("Playback of this media is not supported with the selected player.")}),this.get(i,{"forceLocal":!0})
}});return new a}),define("plex/base/models/player/PlayerModel",["underscore","backbone"],function(e,t){var n={"item":null,"media":null,"part":null,"url":null,"playlist":null,"transcodeServer":null,"mediaIndex":-1,"partIndex":-1,"partCount":1,"qualityIndex":null,"videoStreamID":null,"audioStreamID":null,"subtitleStreamID":null,"type":"video"},i={"state":"stopped","stopped":!0,"paused":!1,"playing":!1,"buffering":!1,"error":!1,"errorMessage":null,"ready":!1,"loaded":!1,"ended":!1,"finished":!1,"embedHtml":null,"duration":0,"position":0,"volume":100,"startBuffer":0,"endBuffer":0,"shuffle":!1,"repeat":!1,"directPlay":!1},r={"showPlayPause":!1,"showStop":!1,"showVolume":!1,"showVideoStream":!1,"showAudioStream":!1,"showSubtitleStream":!1,"showShuffle":!1,"showRepeat":!1,"enablePrevious":!1,"enableNext":!1,"enableSeekBar":!1,"enableQueueActions":!1,"showQuality":!1,"showEnterFullscreen":!1,"showExitFullscreen":!1,"forceWebkitVideoFullscreen":!1},s=t.Model.extend({"controllerDefaults":r,"defaults":e.extend({},n,i,r),"initialize":function(){this.on("invalid",function(t,n){e.indexOf(n.keys,"duration")>-1&&(n.attrs.duration=Math.max(n.attrs.duration,0)),e.indexOf(n.keys,"position")>-1&&(n.attrs.position=Math.min(Math.max(n.attrs.position,0),n.attrs.duration)),e.indexOf(n.keys,"volume")>-1&&(n.attrs.volume=Math.min(Math.max(n.attrs.position,0),100)),t.set(n.attrs)
}),this.on("change:state",function(e,t){e.set({"stopped":"stopped"===t,"paused":"paused"===t,"playing":"playing"===t,"buffering":"buffering"===t,"error":"error"===t}),"stopped"!==t&&e.set("ended",!1)}),this.on("change:item",function(t,n){var i=t.get("playlist");i&&e(i.setSelectedItem).isFunction()&&(i.setSelectedItem(n),i.fetch())})},"validate":function(e){var t=[];return e.duration<0&&t.push("duration"),(e.position<0||e.position>e.duration)&&t.push("position"),(e.volume<0||e.volume>100)&&t.push("volume"),t.length?{"keys":t,"attrs":e}:void 0
}});return s}),define("hb!plex/tv/views/components/player/VideoPlayerControlsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="video-controls-position">\n  <span class="player-position"></span>\n  <span class="player-duration"></span>\n  <div class="position-bar-container">\n    <div class="position-bar"></div>\n  </div>\n</div>\n\n<div class="video-controls-buttons">\n  <button class="previous-btn hidden"><i class="playercontrol step-backward"></i></button>\n  <button class="rewind-btn         "><i class="playercontrol rewind       "></i></button>\n  <button class="play-btn     hidden"><i class="playercontrol play         "></i></button>\n  <button class="pause-btn    hidden"><i class="playercontrol pause        "></i></button>\n  <button class="forward-btn        "><i class="playercontrol forward      "></i></button>\n  <button class="next-btn     hidden"><i class="playercontrol step-forward "></i></button>\n  <button class="options-btn        "><i class="playercontrol adjust-alt"></i></button>\n</div>\n'
})}),define("plex/tv/views/components/player/VideoPlayerControlsView",["hb!./VideoPlayerControlsView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/formatters/DateTimeUtil"],function(e,t,n,i,r){var s=n.Layout.extend({"className":"VideoPlayerControls","template":e,"ui":{"playButton":".play-btn","buttons":"button","positionBar":".position-bar","optionsBtn":".options-btn"},"triggers":{"click .play-btn":{"event":"play","stopPropagation":!0,"preventDefault":!0},"click .pause-btn":{"event":"pause","stopPropagation":!0,"preventDefault":!0},"click .previous-btn":{"event":"previous","stopPropagation":!0,"preventDefault":!0},"click .forward-btn":{"event":"forward","stopPropagation":!0,"preventDefault":!0},"click .rewind-btn":{"event":"rewind","stopPropagation":!0,"preventDefault":!0},"click .next-btn":{"event":"next","stopPropagation":!0,"preventDefault":!0},"click .options-btn":{"event":"options","stopPropagation":!0,"preventDefault":!0}},"onlyAfterRender":["show","hide"],"initialize":function(){this.listenTo(this,"focus",function(e){i.trigger("focus:element",this.ui[e])
})},"show":function(){this.$el.show(),this.ui.buttons.freefocus("moved"),i.trigger("focus:element",this.ui.playButton)},"hide":function(){this.ui.buttons.filter(":focus").blur(),this.$el.hide()},"bindings":{".play-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&e}},".pause-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&!e
}},".previous-btn":{"modelAttribute":"enablePrevious","manual":!0,"autohide":function(){var e=this.model.get("playlist");return e&&e.length>1},"formatter":function(e,t){t.toggleClass("disabled",!e)}},".next-btn":{"modelAttribute":"enableNext","manual":!0,"autohide":function(){var e=this.model.get("playlist");return e&&e.length>1},"formatter":function(e,t){t.toggleClass("disabled",!e)}},".player-position":{"modelAttribute":"position","formatter":function(e){return r.formatDuration(e)}},".player-duration":{"modelAttribute":"duration","formatter":function(e){return r.formatDuration(e)
}},".position-bar":{"modelAttribute":"position","manual":!0,"formatter":function(e,t){var n=this.model.get("duration");t.css("width",Math.round(e/n*100)+"%")}}}});return s}),define("hb!plex/tv/views/components/player/VideoPlayerHeaderView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='<span class="subtitle">',(i=n.subtitle)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.subtitle,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};
var a,o="",l="function",u=this.escapeExpression,c=this;return o+='<span class="title">',(a=n.title)?a=a.call(t,{"hash":{},"data":r}):(a=t&&t.title,a=typeof a===l?a.call(t,{"hash":{},"data":r}):a),o+=u(a)+"</span>",a=n["if"].call(t,t&&t.subtitle,{"hash":{},"inverse":c.noop,"fn":c.program(1,s,r),"data":r}),(a||0===a)&&(o+=a),o})}),define("plex/tv/views/components/player/VideoPlayerHeaderView",["hb!./VideoPlayerHeaderView.tpl","underscore","marionette","plex/base/utils/MediaUtil"],function(e,t,n,i){var r=n.Layout.extend({"className":"VideoPlayerHeader","template":e,"onlyAfterRender":["show","hide"],"show":function(){this.$el.show()
},"hide":function(){this.$el.hide()},"serializeData":function(){if(!this.model)return{};var e={};switch(this.model.get("type")){case"movie":e.title=this.model.get("title");break;case"episode":e.title=this.model.get("grandparentTitle")+" \u2014 "+this.model.get("title"),e.subtitle=i.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":this.model.get("index"),"seasonPrefix":"Season {1}","episodePrefix":" Episode {1}","noLeadingZero":!0});break;default:console.log("Unknown info titles",this.model.get("type"),this.model.toJSON(),this.model.parent&&this.model.parent.toJSON())
}return e}});return r}),define("hb!plex/tv/views/components/player/VideoPlayerOptionsView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(){return"disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,o,l="",u=this,c="function",d=this.escapeExpression;return l+='<h1>Options</h1>\n\n<dl>\n  <dt>Audio</dt>\n  <dd>\n    <button class="audio-stream" ',o=n["if"].call(t,(a=t&&t.audioStream,null==a||a===!1?a:a.disabled),{"hash":{},"inverse":u.noop,"fn":u.program(1,s,r),"data":r}),(o||0===o)&&(l+=o),l+=">"+d((a=t&&t.audioStream,a=null==a||a===!1?a:a.selectedName,typeof a===c?a.apply(t):a))+'</button>\n  </dd>\n  <dt>Subtitles</dt>\n  <dd>\n    <button class="subtitles-stream" ',o=n["if"].call(t,(a=t&&t.subtitlesStream,null==a||a===!1?a:a.disabled),{"hash":{},"inverse":u.noop,"fn":u.program(1,s,r),"data":r}),(o||0===o)&&(l+=o),l+=">"+d((a=t&&t.subtitlesStream,a=null==a||a===!1?a:a.selectedName,typeof a===c?a.apply(t):a))+'</button>\n  </dd>\n  <dt>Quality</dt>\n  <dd>\n    <button class="quality" ',o=n["if"].call(t,(a=t&&t.quality,null==a||a===!1?a:a.disabled),{"hash":{},"inverse":u.noop,"fn":u.program(1,s,r),"data":r}),(o||0===o)&&(l+=o),l+=">"+d((a=t&&t.quality,a=null==a||a===!1?a:a.selectedName,typeof a===c?a.apply(t):a))+"</button>\n  </dd>\n</dl>\n"
})}),define("hb!plex/tv/views/components/player/ListSelectView",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r="";return r+='\n      <li>\n        <button data-value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+'">',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),r+=u(i)+"</button>\n      </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};
var a,o="",l="function",u=this.escapeExpression,c=this;return o+="<h1>",(a=n.title)?a=a.call(t,{"hash":{},"data":r}):(a=t&&t.title,a=typeof a===l?a.call(t,{"hash":{},"data":r}):a),o+=u(a)+'</h1>\n\n<div class="scrollable-container">\n  <ul class="scrollable-content">\n    ',a=n.each.call(t,t&&t.items,{"hash":{},"inverse":c.noop,"fn":c.program(1,s,r),"data":r}),(a||0===a)&&(o+=a),o+='\n  </ul>\n  <div class="scrollable-bar-pad">\n    <div class="scrollable-bar-position"></div>\n  </div>\n</div>\n'
})}),define("plex/tv/views/components/player/ListSelectView",["hb!./ListSelectView","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/tv/views/mixins/ScrollableContent"],function(e,t,n,i,r,s){var a=i.ItemView.extend({"mixins":[s],"className":"ListSelect","template":e,"events":{"focus button":"onScrollableContentItemFocus","prefocus button":"onScrollableContentItemFocus","click button":"onItemClick"},"serializeData":function(){return{"title":"","items":[],"selected":{}}},"onRender":function(){var e=this.serializeData().selected.value;
r.trigger("focus:element",this.$el.find('button[data-value="'+e+'"]')),this.initScrollableContent()},"onItemClick":function(e){var t=n(e.currentTarget);this.onValueSelected(t.data("value"))}});return a}),define("plex/tv/views/components/player/StreamSelectView",["underscore","plex/base/utils/MediaUtil","plex/base/utils/formatters/MetadataUtil","plex/base/utils/types/StreamTypes","plex/base/commands/Commands","./ListSelectView"],function(e,t,n,i,r,s){var a=s.extend({"initialize":function(e){this.streamType=i.getStreamTypeByString(e.type)
},"serializeData":function(){var n=this.model.get("item").server.get("multiuser"),i=this.model.get("item").server.get("shared"),r=e.first(this.model.get("item").get("Media")),s=t.getStreams(r,{"streamType":this.streamType.id}),a=t.getStreams(r,{"streamType":this.streamType.id,"selected":!0});return{"enabled":s.length>1&&(!i||n),"title":"audio"===this.streamType.typeString?"Audio Track":"Subtitles","items":e.map(s,function(e){return{"value":e.id,"name":this.getStreamName(e)}},this),"selected":a.length?{"value":a[0].id,"name":this.getStreamName(a[0])}:{"value":null,"name":"None"}}
},"getStreamName":function(e){var t,i=e.language||"Unknown";return"subtitles"===this.streamType.typeString&&e.format&&(t=e.format.toUpperCase(),e.forced&&(t+=" Forced")),"audio"===this.streamType.typeString&&e.codec&&(t=n.formatAudioCodec(e.codec)+" "+n.formatAudioChannels(e.channels)),i+(t?" ("+t+")":"")},"onValueSelected":function(t){var n="audio"===this.streamType.typeString?"audioStreamID":"subtitleStreamID",i=r.execute("selectStream",{"type":this.streamType.id,"item":this.model.get("item"),"streamID":t});
i.done(e.bind(function(){this.model.set(n,t),this.close()},this))}});return a}),define("plex/tv/views/components/player/QualitySelectView",["underscore","plex/base/utils/MediaUtil","plex/base/utils/formatters/MetadataUtil","plex/base/commands/Commands","plex/base/models/SettingsModel","./ListSelectView"],function(e,t,n,i,r,s){var a=s.extend({"serializeData":function(){var i=this.model.get("transcodeServer"),s=this.model.get("media"),a=i&&i.get("transcoderVideo"),o=!s||!s.bitrate;if(!a||o)return{"enabled":!1,"selected":0,"items":[]};
var l="highest",u=!1;this.qualityInfo=t.getQualityInfo(this.model.get("item"),r);var c=e.clone(i.get("transcoderVideoQualities")),d=e.clone(i.get("transcoderVideoBitrates")),h=c.length-1,p=e.map(e.filter(e.zip(c,d),function(e){return e[1]>300}),function(e){return{"value":parseInt(e[0],10),"name":n.formatVideoQuality(e)}}),f=c.length>1&&d.length>1;if(f){for(var m=0,g=d.length;g>m;m++){var v=d[m];if(v<s.bitrate)break}m>0?(u=!0,this.qualityInfo.index<d.length-m&&(l=this.qualityInfo.index),p.splice(0,m)):l=this.qualityInfo.index
}return u&&p.unshift({"value":h,"name":"Highest"}),"highest"===l&&(l=h),l=e.find(p,function(e){return e.value===l}),{"enabled":f,"title":"Streaming Quality","items":p,"selected":l}},"onValueSelected":function(e){this.model.set("qualityIndex",parseInt(e,10)),this.close()}});return a}),define("plex/tv/views/components/player/VideoPlayerOptionsView",["hb!./VideoPlayerOptionsView","underscore","marionette","plex/base/utils/Dispatcher","./StreamSelectView","./QualitySelectView"],function(e,t,n,i,r,s){var a=n.ItemView.extend({"className":"VideoPlayerOptions","template":e,"ui":{"audioBtn":".audio-stream","subtitlesBtn":".subtitles-stream","qualityBtn":".quality"},"events":{"click .audio-stream":"onAudioStreamClick","click .subtitles-stream":"onSubtitlesStreamClick","click .quality":"onQualityClick"},"serializeData":function(){var e=new r({"model":this.model,"type":"audio"}).serializeData(),t=new r({"model":this.model,"type":"subtitles"}).serializeData(),n=new s({"model":this.model}).serializeData();
return{"audioStream":{"selectedName":e.selected.name,"disabled":!e.enabled},"subtitlesStream":{"selectedName":t.selected.name,"disabled":!t.enabled},"quality":{"selectedName":n.selected.name,"disabled":!n.enabled}}},"onRender":function(){i.trigger("focus:element",this.$el)},"onAudioStreamClick":function(e){e.preventDefault();var t=new r({"model":this.model,"type":"audio"});i.trigger("show:modal",t,function(){this.render(),i.trigger("focus:element",this.ui.audioBtn)},this)},"onSubtitlesStreamClick":function(e){e.preventDefault();
var t=new r({"model":this.model,"type":"subtitles"});i.trigger("show:modal",t,function(){this.render(),i.trigger("focus:element",this.ui.subtitlesBtn)},this)},"onQualityClick":function(e){e.preventDefault();var t=new s({"model":this.model});i.trigger("show:modal",t,function(){this.render(),i.trigger("focus:element",this.ui.qualityBtn)},this)}});return a}),define("plex/tv/views/screens/player/VideoPlayerView",["hb!./VideoPlayerView.tpl","underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/utils/MediaDecisionUtil","plex/base/adapters/PlayerControllerAdapter","plex/base/commands/Commands","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/player/PlayerModel","plex/base/adapters/LocalizerAdapter","plex/tv/views/components/player/VideoPlayerControlsView","plex/tv/views/components/player/VideoPlayerHeaderView","plex/tv/views/components/player/VideoPlayerOptionsView","plex/tv/views/screens/system/ErrorView"],function(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,m,g){var v=r.Layout.extend({"className":"VideoPlayer","template":e,"seekStep":{"paused":6e4,"playing":3e5},"ui":{"video":".video-element"},"regions":{"controls":".video-controls-container","header":".video-header-container","options":".options-container"},"events":{"click .video-element":"pause"},"initialize":function(e){this.controller=o.get("video"),this.playerModel=new d({"item":this.model,"position":e.position}),this.controlsView=new p({"model":this.playerModel}),this.headerView=new f({"model":this.model}),this.listenTo(this.playerModel,{"change:loaded":this.onPlayerLoadedChange,"change:finished":this.onPlayerFinishedChange,"change:state":this.onPlayerStateChange}),this.listenTo(this.controlsView,{"play":this.controller.play,"pause":this.controller.pause,"previous":this.controller.skipPrevious,"next":this.controller.skipNext,"skip":this.controller.skipTo,"remove":this.controller.remove,"move":this.controller.move,"change:position":this.controller.setPosition},this.controller),this.listenTo(this.controlsView,{"forward":this.forward,"rewind":this.rewind,"options":this.onOptionsClick}),this.listenTo(s,{"key:enter":this.pause,"key:pause":this.togglePause,"key:play":this.togglePause,"key:stop":this.stop,"key:forward":this.forward,"key:rewind":this.rewind})
},"start":function(){this.controller.load({"model":this.playerModel,"offset":this.playerModel.get("position")||0,"autoplay":!0,"mediaElement":this.ui.video.get(0)})},"pause":function(){this.playerModel.get("playing")&&this.controller.pause()},"togglePause":function(){this.playerModel.get("playing")?this.controller.pause():this.playerModel.get("paused")&&this.controller.play()},"stop":function(){this.controller.pause(),s.trigger("navigate:back")},"forward":function(){this.movePosition(this.seekStep[this.playerModel.get("state")])
},"rewind":function(){this.movePosition(-this.seekStep[this.playerModel.get("state")])},"movePosition":function(e){if(e){var t=this.playerModel.get("position"),n=this.playerModel.get("duration");t+=e,t>=n&&(t=n-1),0>t&&(t=0),this.controller.setPosition(t)}},"onRender":function(){s.trigger("cursor:disable"),this.controls.show(this.controlsView),this.header.show(this.headerView),this.controlsView.hide(),this.headerView.hide(),s.trigger("show:loading"),this.start()},"onClose":function(){this.controller.model&&this.controller.unload(),i.abort(),s.trigger("cursor:enable")
},"onPlayerFinishedChange":function(e,t){t&&s.trigger("navigate:back")},"onPlayerStateChange":function(e,n){if(!this.controlsView.isClosed){var i=e.previous("state");"buffering"===n&&s.trigger("show:loading"),"buffering"===i&&s.trigger("hide:loading"),"paused"===n?(this.controlsView.show(),this.headerView.show()):(this.controlsView.hide(),this.headerView.hide()),"error"===n&&t.defer(function(){s.trigger("show:view",new g({"title":"There was a problem playing this item","message":e.get("errorMessage")}))
})}},"onOptionsClick":function(){var e=new m({"model":this.playerModel});s.trigger("show:modal",e,function(){s.trigger("focus:element",this.controlsView.ui.playButton)},this)}});return v}),define("plex/tv/routes/PlayerController",["jquery","plex/base/utils/Dispatcher","plex/base/routes/BaseController","plex/tv/views/screens/player/VideoPlayerView"],function(e,t,n,i){var r=n.extend({"video":function(e,n,r){var s=this.populateView({"serverID":e,"key":n});s.done(function(e){t.trigger("show:view",new i({"model":e.item,"position":parseInt(r,10)}))
})}});return r}),define("plex/tv/routes/PlayerRouter",["plex/base/routes/BaseRouter","./PlayerController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/server/:serverID/player/video/:key(/:position)":"video"}});return n}),define("plex/tv/initializers/RouterInitializer",["backbone","plex/tv/routes/TVAppRouter","plex/tv/routes/LibraryRouter","plex/tv/routes/UserRouter","plex/tv/routes/PlayerRouter"],function(e,t,n,i,r){return{"init":function(){new t,new n,new i,new r,e.history.start()
}}}),function(e){function t(t,i){var r=t.get(0).style["nav"+i.move.charAt(0).toUpperCase()+i.move.slice(1)]||n(t.attr("style")||"")["nav-"+i.move];if(r){if(0!==r.indexOf("#"))throw new Error("Invalid nav-"+i.move+' selector "'+r+'": only #id allowed.');if(e(r).is(":visible"))return e(r)}}function n(e){var t={};return e.split(";").forEach(function(e){var n=e.split(":");n[1]&&(t[n[0].trim()]=n[1].trim())}),t}function i(t,n,i){var r=u(t,i),s=e.freefocus.focusPoint;t.is(s.$el)||(s.$el=t,s.box={"x":(r.x2-r.x1)/2,"y":(r.y2-r.y1)/2}),s.updatedInDirection=d(p(s.box,r),n),s.updatedInDirection.fwd=c(r,n).fwd2
}function r(t,n,i,r){var s=u(t,r),a=e.freefocus.focusPoint;a.$el=t;var o=c(s,n),l={"fwd":o.fwd1,"ort":m(a.updatedInDirection.ort,o.ort1,o.ort2)};a.box=f(h(l,n),s),i&&y(h(l,n),"#00f","entry focus point for "+t.html())}function s(t,n){var i=c(u(t,n.cache),n.move);n.debug&&y(h(e.freefocus.focusPoint.updatedInDirection,n.move),"#0f0","exit focus point for "+t.html());var r=1/0,s=null;return n.targets.each(function(){var o=e(this);if(!o.is(t)){var l=c(u(o,n.cache),n.move);if(!(l.fwd2<=i.fwd2)){var d=a(i,l);
d<n.maxDistance&&r>d&&(s=o,r=d)}}}),n.debug&&s&&console.log("Distance from",t.get(0),"to",s.get(0),"is",r),s}function a(t,n){var i,r=e.freefocus.focusPoint.updatedInDirection,s={"fwd":n.fwd1,"ort":m(r.ort,n.ort1,n.ort2)},a=Math.abs(s.fwd-r.fwd),l=Math.abs(s.ort-r.ort);i=s.ort===r.ort?0:Math.sqrt(a*a+l*l);var u=o(t,n);return i+a+2*l-Math.sqrt(u)}function o(e,t){var n={"ort1":e.ort1,"ort2":e.ort2};t.ort1>n.ort1&&(n.ort1=t.ort1),t.ort2<n.ort2&&(n.ort2=t.ort2);var i=n.ort2-n.ort1;return 0>i&&(i=0),i}function l(e){var t=e.offset();
return{"x1":t.left,"y1":t.top,"x2":t.left+e.outerWidth(),"y2":t.top+e.outerHeight()}}function u(e,t){if(!t)return l(e);var n=e.data("freefocus-dimensions");return n||(n=l(e),e.data("freefocus-dimensions",n)),n}function c(e,t){var n=d({"x":e.x1,"y":e.y1},t),i=d({"x":e.x2,"y":e.y2},t);return{"fwd1":Math.min(n.fwd,i.fwd),"ort1":Math.min(n.ort,i.ort),"fwd2":Math.max(n.fwd,i.fwd),"ort2":Math.max(n.ort,i.ort)}}function d(e,t){switch(t){case"left":return{"fwd":-e.x,"ort":-e.y};case"right":return{"fwd":e.x,"ort":e.y};
case"down":return{"fwd":e.y,"ort":-e.x};case"up":return{"fwd":-e.y,"ort":e.x}}}function h(e,t){switch(t){case"left":return{"x":-e.fwd,"y":-e.ort};case"right":return{"x":e.fwd,"y":e.ort};case"down":return{"x":-e.ort,"y":e.fwd};case"up":return{"x":e.ort,"y":-e.fwd}}}function p(e,t){return{"x":e.x+t.x1,"y":e.y+t.y1}}function f(e,t){return{"x":e.x-t.x1,"y":e.y-t.y1}}function m(e,t,n){return Math.min(Math.max(e,t),n)}function g(t){e(t).filter(":visible").each(function(){u(e(this),!0)})}function v(){e(".freefocus-debug").remove()
}function y(t,n,i){e('<div class="freefocus-debug"></div>').appendTo(e("body")).css({"position":"absolute","left":t.x-3,"top":t.y-3,"width":6,"height":6,"background":n,"border-radius":3}).attr("title",i)}function b(){S.on.apply(S,arguments),x.push(arguments)}function w(){x.forEach(function(e){S.off.apply(S,e)}),x=[]}e.freefocus=function(t,n){if("remove"===t)return void w();if("cache"===t)return void g(n);t=e.extend({},e.freefocus.setupOptions,t);var i=function(i){var r=e.extend({},n,{"move":i,"targets":e(t.focusablesSelector).filter(":visible")});
e(t.focusedSelector).freefocus(r)};"number"==typeof t.throttle&&(i=_.throttle(i,t.throttle)),b("keydown",function(t){var n=e.freefocus.keys[t.which];n&&(t.preventDefault(),i(n))}),t.hoverFocus&&b("mouseenter",t.focusablesSelector,function(){var t=(n||{}).trigger||e.freefocus.moveOptions.trigger;return e(this).trigger(t)})},e.fn.freefocus=function(n){if("dimensions"===n){var a=u(this,!0);return{"left":a.x1,"top":a.y1,"width":a.x2-a.x1,"height":a.y2-a.y1}}if("moved"===n)return void this.data("freefocus-dimensions",null);
if(n=e.extend({},e.freefocus.moveOptions,n),null===e.freefocus.moves[n.move])throw new Error('Unknown move direction "'+n.move+'"');if(!(n.targets instanceof e))throw new Error("Argument targets should be a jQuery object");if(this.size()>1)throw new Error("Can't move from multiple elements");if(!this.size())return this;n.debug&&v(),i(this,n.move,n.cache);var o=t(this,n)||s(this,n);return o?(r(o,n.move,n.debug,n.cache),n.preTrigger&&o.trigger(n.preTrigger),o.trigger(n.trigger),this):this},e.freefocus.moveOptions={"trigger":"focus","preTrigger":!1,"debug":!1,"useNavProps":!0,"maxDistance":1/0},e.freefocus.setupOptions={"focusablesSelector":["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(", "),"focusedSelector":":focus","hoverFocus":!1,"throttle":!1},e.freefocus.keys={"37":"left","38":"up","39":"right","40":"down"},e.freefocus.moves={"left":{},"right":{},"up":{},"down":{}},e.freefocus.focusPoint={};
var x=[],S=e(document)}(jQuery),define("jquery.freefocus",function(){}),function(e){var t=function(){var e=document.createElement("div");e.style.cssText="-webkit-transform: translate3d(0px, 0px, 0px);   -moz-transform: translate3d(0px, 0px, 0px);    -ms-transform: translate3d(0px, 0px, 0px);     -o-transform: translate3d(0px, 0px, 0px);        transform: translate3d(0px, 0px, 0px);";var t=e.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);return null!==t&&1==t.length}();e.fn.translate=t?function(e,t){this.css("transform","translate3d("+e+"px, "+t+"px, 0)")
}:function(e,t){this.css("transform","translate("+e+"px, "+t+"px)")}}(jQuery),define("jquery.translate",function(){}),define("plex/tv/initializers/UIEventInitializer",["underscore","jquery","plex/base/utils/Dispatcher","plex/tv/adapters/KeyMappingAdapter","jquery.freefocus","jquery.translate"],function(e,t,n,i){var r=100,s="button:not([disabled]), input:not([disabled]), [tabindex], a[href]",a=e.groupBy(["left","right","up","down","back","red","green","yellow","blue"]),o=function(){var e=!1;n.on("show:loading",function(){e=!0
}),n.on("hide:loading",function(){e=!1}),this.permits=function(){return e===!1}};return{"init":function(){t.freefocus.selector=s,t.freefocus.selectorContext=void 0;var l=i.get(),u=new o,c=e.throttle(function(e){t(":focus").freefocus({"move":e,"targets":t(t.freefocus.selector,t.freefocus.selectorContext).filter(":visible"),"cache":!0,"maxDistance":4e3,"preTrigger":"prefocus"})},r);t(document).on("keydown",function(e){var i=l[e.which];void 0!==i&&(a[i]&&e.preventDefault(),u.permits(i,e)&&(t.freefocus.moves[i]&&c(i),n.trigger("key",i),n.trigger("key:"+i,i)))
})}}}),define("hb!templates/desktop/modals/ConfirmModal",["handlebars"],function(e){return e.template(function(e,t,n,i,r){function s(e,t){var i,r,s="";return s+='\n        <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">',r={"hash":{},"data":t},s+=h((i=n.t||e&&e.t,i?i.call(e,e&&e.cancelLabel,r):d.call(e,"t",e&&e.cancelLabel,r)))+"</button>\n      "}function a(){return"btn-danger"}function o(){return"btn-primary"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};
var l,u,c="",d=n.helperMissing,h=this.escapeExpression,p="function",f=this;return c+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon circle-exclamation-mark"></i> ',(l=n.title)?l=l.call(t,{"hash":{},"data":r}):(l=t&&t.title,l=typeof l===p?l.call(t,{"hash":{},"data":r}):l),c+=h(l)+'</h4>\n    </div>\n\n    <div class="modal-body">',(l=n.message)?l=l.call(t,{"hash":{},"data":r}):(l=t&&t.message,l=typeof l===p?l.call(t,{"hash":{},"data":r}):l),c+=h(l)+'</div>\n\n    <div class="modal-footer">\n      ',l=n.unless.call(t,t&&t.hideCancel,{"hash":{},"inverse":f.noop,"fn":f.program(1,s,r),"data":r}),(l||0===l)&&(c+=l),c+='\n      <button type="button" class="confirm-btn btn btn-lg ',l=n["if"].call(t,t&&t.hasDanger,{"hash":{},"inverse":f.program(5,o,r),"fn":f.program(3,a,r),"data":r}),(l||0===l)&&(c+=l),c+=' btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',u={"hash":{},"data":r},c+=h((l=n.t||t&&t.t,l?l.call(t,t&&t.confirmLabel,u):d.call(t,"t",t&&t.confirmLabel,u)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/BaseModal",["underscore","marionette","plex/base/utils/Dispatcher"],function(e,t,n){var i=t.Layout.extend({"className":"modal fade","events":{"hide.bs.modal":"onHide"},"hide":function(){this.$el.modal("hide")},"onRender":function(){this.listenTo(n,"shortcut:escape",this.hide),this.$el.modal()},"onHide":function(){this.hidden=!0,setTimeout(e.bind(function(){n.trigger("hide:modal",this)},this),500)}});return i}),define("plex/desktop/views/modals/ConfirmModal",["hb!templates/desktop/modals/ConfirmModal.tpl","underscore","jquery","plex/desktop/views/modals/BaseModal"],function(e,t,n,i){var r=i.extend({"className":"confirm-modal modal modal-sm fade","template":e,"ui":{"confirmBtn":".confirm-btn"},"events":t.extend({"click .confirm-btn":"onConfirm"},i.prototype.events),"initialize":function(e){this.title=e.title,this.message=e.message,this.confirmLabel=e.confirmLabel||"Yes",this.cancelLabel=e.cancelLabel||"No",this.async=e.async,this.hasDanger=e.hasDanger,this.hideCancel=e.hideCancel,this.promise=n.Deferred()
},"serializeData":function(){return{"title":this.title,"message":this.message,"confirmLabel":this.confirmLabel,"cancelLabel":this.cancelLabel,"hasDanger":this.hasDanger,"hideCancel":this.hideCancel}},"onRender":function(){i.prototype.onRender.apply(this,arguments),setTimeout(t.bind(function(){this.ui.confirmBtn.focus()},this),200)},"onHide":function(){i.prototype.onHide.apply(this,arguments),this.promise.reject()},"onConfirm":function(e){e.preventDefault(),this.promise.resolve(),this.async?this.ui.confirmBtn.addClass("active"):this.hide()
}});return r}),define("plex/desktop/commands/library/MarkWatchedCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,r,s){function a(e){function a(){var e=t.ajax(u.server.getXHROptions(d));e.done(function(){function e(t){var n=i.getMediaTypeByString(t.get("type"));if(n&&"directory"===n.element){t.set({"unviewedLeafCount":0,"viewedLeafCount":t.get("leafCount")});
var r=t.get("children");if(!r)return;r.each(e)}else t.set({"viewOffset":0,"viewCount":1})}e(u),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem marking this item as watched.")}),o.reject(e)})}var o=t.Deferred(),l=r.get(),u=e.item,c=i.getMediaTypeByString(u.get("type")),d="/:/scrobble?key="+encodeURIComponent(u.get("ratingKey"))+"&identifier="+u.get("identifier");if(c&&"directory"===c.element&&!e.force){var h=new s({"title":l.t("Mark as Watched"),"message":l.t("Are you sure you want to mark all episodes as watched?")}),p=h.promise;
p.done(a),p.fail(function(){o.reject()}),n.trigger("show:modal",h)}else a();return o.promise()}return a}),define("plex/desktop/commands/library/MarkUnwatchedCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,r,s){function a(e){function a(){var e=t.ajax(u.server.getXHROptions(d));e.done(function(){function e(t){var n=i.getMediaTypeByString(t.get("type"));if(n&&"directory"===n.element){t.set({"unviewedLeafCount":t.get("leafCount"),"viewedLeafCount":0});
var r=t.get("children");if(!r)return;r.each(e)}else t.set({"viewOffset":0,"viewCount":0})}e(u),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem marking this item as unwatched.")}),o.reject(e)})}var o=t.Deferred(),l=r.get(),u=e.item,c=i.getMediaTypeByString(u.get("type")),d="/:/unscrobble?key="+encodeURIComponent(u.get("ratingKey"))+"&identifier="+u.get("identifier");if(c&&"directory"===c.element&&!e.force){var h=new s({"title":l.t("Mark as Unwatched"),"message":l.t("Are you sure you want to mark all episodes as unwatched?")}),p=h.promise;
p.done(a),p.fail(function(){o.reject()}),n.trigger("show:modal",h)}else a();return o.promise()}return a}),define("plex/desktop/commands/library/RateCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){function r(e){var r=e.item,s=e.rating,a={"key":r.get("ratingKey"),"identifier":r.get("identifier"),"rating":s},o="/:/rate?"+t.param(a,!0),l=t.ajax(r.server.getXHROptions(o));return r.set("userRating",s),l.fail(function(){var e=i.get();
n.trigger("show:alert",{"type":"error","message":e.t("There was a problem rating this item.")})}),l.promise()}return r}),define("plex/tv/commands/TVCommands",["underscore","plex/base/commands/Commands","plex/desktop/commands/library/MarkWatchedCommand","plex/desktop/commands/library/MarkUnwatchedCommand","plex/desktop/commands/library/RateCommand"],function(e,t,n,i,r){return e.extend(t.map,{"markWatched":n,"markUnwatched":i,"rate":r}),t}),function(){function e(){return r?{"name":"Internet Explorer","msie":i,"version":n.match(/(msie |rv:)(\d+(\.\d+)?)/i)[2]}:h?{"name":"Opera","opera":i,"version":n.match(g)?n.match(g)[1]:n.match(/opr\/(\d+(\.\d+)?)/i)[1]}:s?{"name":"Chrome","webkit":i,"chrome":i,"version":n.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}:a?{"name":"PhantomJS","webkit":i,"phantom":i,"version":n.match(/phantomjs\/(\d+(\.\d+)+)/i)[1]}:c?{"name":"TouchPad","webkit":i,"touchpad":i,"version":n.match(/touchpad\/(\d+(\.\d+)?)/i)[1]}:l||u?(t={"name":l?"iPhone":"iPad","webkit":i,"mobile":i,"ios":i,"iphone":l,"ipad":u},g.test(n)&&(t.version=n.match(g)[1]),t):d?{"name":"Android","webkit":i,"android":i,"mobile":i,"version":(n.match(g)||n.match(v))[1]}:o?{"name":"Safari","webkit":i,"safari":i,"version":n.match(g)[1]}:f?(t={"name":"Gecko","gecko":i,"mozilla":i,"version":n.match(v)[1]},p&&(t.name="Firefox",t.firefox=i),t):m?{"name":"SeaMonkey","seamonkey":i,"version":n.match(/seamonkey\/(\d+(\.\d+)?)/i)[1]}:{}
}var t,n=navigator.userAgent,i=!0,r=/(msie|trident)/i.test(n),s=/chrome|crios/i.test(n),a=/phantom/i.test(n),o=/safari/i.test(n)&&!s&&!a,l=/iphone/i.test(n),u=/ipad/i.test(n),c=/touchpad/i.test(n),d=/android/i.test(n),h=/opera/i.test(n)||/opr/i.test(n),p=/firefox/i.test(n),f=/gecko\//i.test(n),m=/seamonkey\//i.test(n),g=/version\/(\d+(\.\d+)?)/i,v=/firefox\/(\d+(\.\d+)?)/i;this.bowser=e(),bowser.msie&&bowser.version>=8||bowser.chrome&&bowser.version>=10||bowser.firefox&&bowser.version>=4||bowser.safari&&bowser.version>=5||bowser.opera&&bowser.version>=10?bowser.a=i:bowser.msie&&bowser.version<8||bowser.chrome&&bowser.version<10||bowser.firefox&&bowser.version<4||bowser.safari&&bowser.version<5||bowser.opera&&bowser.version<10?bowser.c=i:bowser.x=i
}.call(this),function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return"undefined"==typeof e}var i={},r=e.TraceKit,s=[].slice,a="unknown";i.noConflict=function(){return e.TraceKit=r,i},i.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw i.report(t),t}}return t},i.report=function(){function n(e){l(),h.push(e)}function r(e){for(var t=h.length-1;t>=0;--t)h[t]===e&&h.splice(t,1)}function a(e,n){var r=null;if(!n||i.collectWindowErrors){for(var a in h)if(t(h,a))try{h[a].apply(null,[e].concat(s.call(arguments,2)))
}catch(o){r=o}if(r)throw r}}function o(e,t,n){var r=null;if(f)i.computeStackTrace.augmentStackTraceWithInitialElement(f,t,n,e),r=f,f=null,p=null;else{var s={"url":t,"line":n};s.func=i.computeStackTrace.guessFunctionName(s.url,s.line),s.context=i.computeStackTrace.gatherContext(s.url,s.line),r={"mode":"onerror","message":e,"url":document.location.href,"stack":[s]}}return a(r,"from window.onerror"),c?c.apply(this,arguments):!1}function l(){d!==!0&&(c=e.onerror,e.onerror=o,d=!0)}function u(t){var n=s.call(arguments,1);
if(f){if(p===t)return;var r=f;f=null,p=null,a.apply(null,[r,null].concat(n))}var o=i.computeStackTrace(t);throw f=o,p=t,e.setTimeout(function(){p===t&&(f=null,p=null,a.apply(null,[o,null].concat(n)))},o.incomplete?2e3:0),t}var c,d,h=[],p=null,f=null;return u.subscribe=n,u.unsubscribe=r,u}(),i.computeStackTrace=function(){function r(t){if(!i.remoteFetching)return"";try{var n=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},r=n();return r.open("GET",t,!1),r.send(""),r.responseText
}catch(s){return""}}function s(e){if(!t(S,e)){var n="";-1!==e.indexOf(document.domain)&&(n=r(e)),S[e]=n?n.split("\n"):[]}return S[e]}function o(e,t){var i,r=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=10,c=s(e);if(!c.length)return a;for(var d=0;u>d;++d)if(l=c[t-d]+l,!n(l)){if(i=o.exec(l))return i[1];if(i=r.exec(l))return i[1]}return a}function l(e,t){var r=s(e);if(!r.length)return null;var a=[],o=Math.floor(i.linesOfContext/2),l=o+i.linesOfContext%2,u=Math.max(0,t-o-1),c=Math.min(r.length,t+l-1);
t-=1;for(var d=u;c>d;++d)n(r[d])||a.push(r[d]);return a.length>0?a:null}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return u(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(e,t){for(var n,i,r=0,a=t.length;a>r;++r)if((n=s(t[r])).length&&(n=n.join("\n"),i=e.exec(n)))return{"url":t[r],"line":n.substring(0,i.index).split("\n").length,"column":i.index-n.lastIndexOf("\n",i.index)-1};
return null}function h(e,t,n){var i,r=s(t),a=new RegExp("\\b"+u(e)+"\\b");return n-=1,r&&r.length>n&&(i=a.exec(r[n]))?i.index:null}function p(t){for(var n,i,r,s,a=[e.location.href],o=document.getElementsByTagName("script"),l=""+t,h=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=0;f<o.length;++f){var m=o[f];m.src&&a.push(m.src)}if(r=h.exec(l)){var g=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");
n=u(r[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(u(l).replace(/\s+/g,"\\s+"));if(s=d(i,a))return s;if(r=p.exec(l)){var y=r[1];if(n=c(r[2]),i=new RegExp("on"+y+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),s=d(i,a[0]))return s;if(i=new RegExp(n),s=d(i,a))return s}return null}function f(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,s=e.stack.split("\n"),u=[],c=/^(.*) is undefined$/.exec(e.message),d=0,p=s.length;p>d;++d){if(t=r.exec(s[d]))n={"url":t[3],"func":t[1]||a,"args":t[2]?t[2].split(","):"","line":+t[4],"column":t[5]?+t[5]:null};
else{if(!(t=i.exec(s[d])))continue;n={"url":t[2],"func":t[1]||a,"line":+t[3],"column":t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=o(n.url,n.line)),n.line&&(n.context=l(n.url,n.line)),u.push(n)}return u[0]&&u[0].line&&!u[0].column&&c&&(u[0].column=h(c[1],u[0].url,u[0].line)),u.length?{"mode":"stack","name":e.name,"message":e.message,"url":document.location.href,"stack":u}:null}function m(e){for(var t,n=e.stacktrace,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=n.split("\n"),s=[],a=0,u=r.length;u>a;a+=2)if(t=i.exec(r[a])){var c={"line":+t[1],"column":+t[2],"func":t[3]||t[4],"args":t[5]?t[5].split(","):[],"url":t[6]};
if(!c.func&&c.line&&(c.func=o(c.url,c.line)),c.line)try{c.context=l(c.url,c.line)}catch(d){}c.context||(c.context=[r[a+1]]),s.push(c)}return s.length?{"mode":"stacktrace","name":e.name,"message":e.message,"url":document.location.href,"stack":s}:null}function g(n){var i=n.message.split("\n");if(i.length<4)return null;var r,a,u,h,p=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),y=[];
for(a in v)t(v,a)&&!v[a].src&&y.push(v[a]);for(a=2,u=i.length;u>a;a+=2){var b=null;if(r=p.exec(i[a]))b={"url":r[2],"func":r[3],"line":+r[1]};else if(r=f.exec(i[a])){b={"url":r[3],"func":r[4]};var w=+r[1],x=y[r[2]-1];if(x&&(h=s(b.url))){h=h.join("\n");var S=h.indexOf(x.innerText);S>=0&&(b.line=w+h.substring(0,S).split("\n").length)}}else if(r=m.exec(i[a])){var k=e.location.href.replace(/#.*$/,""),C=r[1],_=new RegExp(c(i[a+1]));h=d(_,[k]),b={"url":k,"line":h?h.line:C,"func":""}}if(b){b.func||(b.func=o(b.url,b.line));
var T=l(b.url,b.line),M=T?T[Math.floor(T.length/2)]:null;b.context=T&&M.replace(/^\s*/,"")===i[a+1].replace(/^\s*/,"")?T:[i[a+1]],g.push(b)}}return g.length?{"mode":"multiline","name":n.name,"message":i[0],"url":document.location.href,"stack":g}:null}function v(e,t,n,i){var r={"url":t,"line":n};if(r.url&&r.line){e.incomplete=!1,r.func||(r.func=o(r.url,r.line)),r.context||(r.context=l(r.url,r.line));var s=/ '([^']+)' /.exec(i);if(s&&(r.column=h(s[1],r.url,r.line)),e.stack.length>0&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;
if(!e.stack[0].line&&e.stack[0].func===r.func)return e.stack[0].line=r.line,e.stack[0].context=r.context,!1}return e.stack.unshift(r),e.partial=!0,!0}return e.incomplete=!0,!1}function y(e,t){for(var n,r,s,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},d=!1,f=y.caller;f&&!d;f=f.caller)if(f!==b&&f!==i.report){if(r={"url":null,"func":a,"line":null,"column":null},f.name?r.func=f.name:(n=l.exec(f.toString()))&&(r.func=n[1]),s=p(f)){r.url=s.url,r.line=s.line,r.func===a&&(r.func=o(r.url,r.line));
var m=/ '([^']+)' /.exec(e.message||e.description);m&&(r.column=h(m[1],s.url,s.line))}c[""+f]?d=!0:c[""+f]=!0,u.push(r)}t&&u.splice(0,t);var g={"mode":"callers","name":e.name,"message":e.message,"url":document.location.href,"stack":u};return v(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),g}function b(e,t){var n=null;t=null==t?0:+t;try{if(n=m(e))return n}catch(i){if(x)throw i}try{if(n=f(e))return n}catch(i){if(x)throw i}try{if(n=g(e))return n}catch(i){if(x)throw i}try{if(n=y(e,t+1))return n
}catch(i){if(x)throw i}return{"mode":"failed"}}function w(e){e=(null==e?0:+e)+1;try{throw new Error}catch(t){return b(t,e+1)}}var x=!1,S={};return b.augmentStackTraceWithInitialElement=v,b.guessFunctionName=o,b.gatherContext=l,b.ofCaller=w,b}(),function(){var t=function(t){var n=e[t];e[t]=function(){var e=s.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=i.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};t("setTimeout"),t("setInterval")}(),i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!0),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=11),e.TraceKit=i
}(window);var timestamp=function(){return(new Date).getTime()},extend=function(e){return each(slice.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},escape=encodeURIComponent;Object.keys=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};var isObject=function(e){return e instanceof Object},array=[],slice=array.slice,isArray=function(e){return e instanceof Array},isValidKeyValue=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e
},forEach=function(e,t){Array.prototype.forEach.call(Object.keys(e),function(n){t(n,e[n])})},each=function(e,t,n){if(null!=e){var i=Array.prototype.forEach;if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;s>r;r++)if(t.call(n,e[r],r,e)===breaker)return}else for(var a=_.keys(e),r=0,s=a.length;s>r;r++)if(t.call(n,e[a[r]],a[r],e)===breaker)return}},serialize=function e(t,n,i,r){var s=isArray(n);forEach(n,function(n,a){r&&(n=i?r:r+"["+(s?"":n)+"]"),!r&&s?t.add(a.name,a.value):(i?isArray(a):isObject(a))?e(t,a,i,n):t.add(n,a)
})},param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&")},generator=function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},eventSplitter=/\s+/,eventsApi=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(eventSplitter.test(n)){for(var s=n.split(eventSplitter),a=0,o=s.length;o>a;a++)e[t].apply(e,[s[a]].concat(i));
return!1}return!0},triggerEvents=function(e,t){var n,i=-1,r=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},_once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}};(function(){return this.Lockr={},Lockr.set=function(e,t){localStorage.setItem(e,t)
},Lockr.hset=function(e,t){localStorage.setItem(e,JSON.stringify(t))},Lockr.get=function(e){var t=localStorage.getItem(e);return null==t?void 0:t.match(/[\{\}\:\[\]]/)?JSON.parse(t):t.match(/^\d+(?:\.\d+$)/)?parseFloat(t):t.match(/^\d+$/)?parseInt(t):t},Lockr.getAll=function(){var e=Object.keys(localStorage);return e.map(function(e){return Lockr.get(e)})},Lockr.flush=function(){localStorage.clear()},Lockr}).call(this);var md5cycle=function(e,t){var n=e[0],i=e[1],r=e[2],s=e[3];n=ff(n,i,r,s,t[0],7,-680876936),s=ff(s,n,i,r,t[1],12,-389564586),r=ff(r,s,n,i,t[2],17,606105819),i=ff(i,r,s,n,t[3],22,-1044525330),n=ff(n,i,r,s,t[4],7,-176418897),s=ff(s,n,i,r,t[5],12,1200080426),r=ff(r,s,n,i,t[6],17,-1473231341),i=ff(i,r,s,n,t[7],22,-45705983),n=ff(n,i,r,s,t[8],7,1770035416),s=ff(s,n,i,r,t[9],12,-1958414417),r=ff(r,s,n,i,t[10],17,-42063),i=ff(i,r,s,n,t[11],22,-1990404162),n=ff(n,i,r,s,t[12],7,1804603682),s=ff(s,n,i,r,t[13],12,-40341101),r=ff(r,s,n,i,t[14],17,-1502002290),i=ff(i,r,s,n,t[15],22,1236535329),n=gg(n,i,r,s,t[1],5,-165796510),s=gg(s,n,i,r,t[6],9,-1069501632),r=gg(r,s,n,i,t[11],14,643717713),i=gg(i,r,s,n,t[0],20,-373897302),n=gg(n,i,r,s,t[5],5,-701558691),s=gg(s,n,i,r,t[10],9,38016083),r=gg(r,s,n,i,t[15],14,-660478335),i=gg(i,r,s,n,t[4],20,-405537848),n=gg(n,i,r,s,t[9],5,568446438),s=gg(s,n,i,r,t[14],9,-1019803690),r=gg(r,s,n,i,t[3],14,-187363961),i=gg(i,r,s,n,t[8],20,1163531501),n=gg(n,i,r,s,t[13],5,-1444681467),s=gg(s,n,i,r,t[2],9,-51403784),r=gg(r,s,n,i,t[7],14,1735328473),i=gg(i,r,s,n,t[12],20,-1926607734),n=hh(n,i,r,s,t[5],4,-378558),s=hh(s,n,i,r,t[8],11,-2022574463),r=hh(r,s,n,i,t[11],16,1839030562),i=hh(i,r,s,n,t[14],23,-35309556),n=hh(n,i,r,s,t[1],4,-1530992060),s=hh(s,n,i,r,t[4],11,1272893353),r=hh(r,s,n,i,t[7],16,-155497632),i=hh(i,r,s,n,t[10],23,-1094730640),n=hh(n,i,r,s,t[13],4,681279174),s=hh(s,n,i,r,t[0],11,-358537222),r=hh(r,s,n,i,t[3],16,-722521979),i=hh(i,r,s,n,t[6],23,76029189),n=hh(n,i,r,s,t[9],4,-640364487),s=hh(s,n,i,r,t[12],11,-421815835),r=hh(r,s,n,i,t[15],16,530742520),i=hh(i,r,s,n,t[2],23,-995338651),n=ii(n,i,r,s,t[0],6,-198630844),s=ii(s,n,i,r,t[7],10,1126891415),r=ii(r,s,n,i,t[14],15,-1416354905),i=ii(i,r,s,n,t[5],21,-57434055),n=ii(n,i,r,s,t[12],6,1700485571),s=ii(s,n,i,r,t[3],10,-1894986606),r=ii(r,s,n,i,t[10],15,-1051523),i=ii(i,r,s,n,t[1],21,-2054922799),n=ii(n,i,r,s,t[8],6,1873313359),s=ii(s,n,i,r,t[15],10,-30611744),r=ii(r,s,n,i,t[6],15,-1560198380),i=ii(i,r,s,n,t[13],21,1309151649),n=ii(n,i,r,s,t[4],6,-145523070),s=ii(s,n,i,r,t[11],10,-1120210379),r=ii(r,s,n,i,t[2],15,718787259),i=ii(i,r,s,n,t[9],21,-343485551),e[0]=add32(n,e[0]),e[1]=add32(i,e[1]),e[2]=add32(r,e[2]),e[3]=add32(s,e[3])
},cmn=function(e,t,n,i,r,s){return t=add32(add32(t,e),add32(i,s)),add32(t<<r|t>>>32-r,n)},ff=function(e,t,n,i,r,s,a){return cmn(t&n|~t&i,e,t,r,s,a)},gg=function(e,t,n,i,r,s,a){return cmn(t&i|n&~i,e,t,r,s,a)},hh=function(e,t,n,i,r,s,a){return cmn(t^n^i,e,t,r,s,a)},ii=function(e,t,n,i,r,s,a){return cmn(n^(t|~i),e,t,r,s,a)},md51=function(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)md5cycle(i,md5blk(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(i,r),t=0;16>t;t++)r[t]=0;return r[14]=8*n,md5cycle(i,r),i},md5blk=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},hex_chr="0123456789abcdef".split(""),rhex=function(e){for(var t="",n=0;4>n;n++)t+=hex_chr[e>>8*n+4&15]+hex_chr[e>>8*n&15];return t},hex=function(e){for(var t=0;t<e.length;t++)e[t]=rhex(e[t]);
return e.join("")},md5=function(e){return hex(md51(e))},add32=function(e,t){return e+t&4294967295};if("5d41402abc4b2a76b9719d911017c592"!=md5("hello"))var add32=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n};window.Bugsense=function(){var e={"apiKey":null,"message":null,"uid":null,"userIdentifier":null,"appver":null,"appname":null,"osver":null,"url":"https://www.bugsense.com/api/errors","context":window},t=function(t){e=extend(e,t)},n=function(){var e=window.navigator.userAgent;
return{"client":{"name":"bugsense-js","version":"2.0.1"},"request":{"user_id":Bugsense.config.userIdentifier||"unknown"},"exception":{"message":null,"where":null,"klass":null,"backtrace":null,"breadcrumbs":null},"application_environment":{"phone":window.navigator.platform,"appver":Bugsense.config.appver||"unknown","appname":Bugsense.config.appname||"unknown","osver":"undefined"!=typeof window.device?window.device.version:e.substr(e.indexOf("; ")+2,e.length).replace(")",";").split(";")[0]||"unknown","user_agent":bowser.name+" "+bowser.version,"cordova":"undefined"!=typeof window.device?window.device.cordova:"unknown","device_name":"undefined"!=typeof window.device?window.device.name:"unknown","log_data":{}}}
};return{"config":e,"initAndStartSession":t,"generateFixture":n}}(),Bugsense.Crashes=function(){Bugsense.breadcrumbs=[],Bugsense.extraData={},Bugsense.addExtraData=function(e,t){isValidKeyValue(e)&&isValidKeyValue(t)&&(Bugsense.extraData[e]=t)},Bugsense.removeExtraData=function(e){delete Bugsense.extraData[e]},Bugsense.clearExtraData=function(){Bugsense.extraData={}},Bugsense.leaveBreadcrumb=function(e){isValidKeyValue(e)&&(Bugsense.breadcrumbs.length+1==16&&(Bugsense.breadcrumbs=Bugsense.breacrumbs.slice(1)),Bugsense.breadcrumbs.push(e))
},Bugsense.clearBreadcrumbs=function(){Bugsense.breadcrumbs=[]}}(),Bugsense.channel=function(){var e=/\s+/,t=function(t,n,i,r){if(!i)return!0;if("object"==typeof i){for(var s in i)t[n].apply(t,[s,i[s]].concat(r));return!1}if(e.test(i)){for(var a=i.split(e),o=0,l=a.length;l>o;o++)t[n].apply(t,[a[o]].concat(r));return!1}return!0},n=function(e,t){var n,i=-1,r=e.length,s=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);
return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},i=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}};Bugsense.on=function(e,n,i){if(!t(this,"on",e,[n,i])||!n)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({"callback":n,"context":i,"ctx":i||this}),this},Bugsense.once=function(e,n,r){if(!t(this,"once",e,[n,r])||!n)return this;
var s=this,a=i(function(){s.off(e,a),n.apply(this,arguments)});return a._callback=n,this.on(e,a,r)},Bugsense.off=function(e,n,i){var r,s,a,o,l,u,c,d;if(!this._events||!t(this,"off",e,[n,i]))return this;if(!e&&!n&&!i)return this._events=void 0,this;for(o=e?[e]:_.keys(this._events),l=0,u=o.length;u>l;l++)if(e=o[l],a=this._events[e]){if(this._events[e]=r=[],n||i)for(c=0,d=a.length;d>c;c++)s=a[c],(n&&n!==s.callback&&n!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[e]
}return this},Bugsense.trigger=function(e){if(!this._events)return this;var i=slice.call(arguments,1);if(!t(this,"trigger",e,i))return this;var r=this._events[e],s=this._events.all;return r&&n(r,i),s&&n(s,arguments),this}}(),Bugsense.Cache=function(){var e={"_queue":[],"cacheReport":function(e){this._queue.push(e),this.update()},"retrieve":function(){var e=Lockr.get("bugsense_cache");this._queue=e||[],this._queue.length&&this.sendCachedReport()},"update":function(){Lockr.hset("bugsense_cache",this._queue)
},"sendCachedReport":function(){if(!this._queue.length)return!1;var e=this;each(this._queue,function(t,n){Bugsense.Network.send(t,"POST"),e._queue.shift(n)}),this.update()}};return e}(),Bugsense.Errors=function(){var e=function(e,t,n,i,r){var s=e+t+n+i+r;return md5(s)},t=function(e){var t={"message":e.exception||e.message,"url":e.url||e.lineNumber||e.sourceURL,"line":e.line};return t.custom_data=e.custom_data||{},bowser.chrome&&(t.stack=e.stack),t},n=function(e){var t="string"!=typeof e?e.message:e,n={},i=r(e),s=e.url||e.lineNumber||e.sourceUrl,a=e.line,o=s&&a?TraceKit.computeStackTrace.guessFunctionName(s,a):"unknown";
return n=extend(Bugsense.generateFixture(),{"exception":{"message":t,"where":[s,a].join(":"),"klass":o,"backtrace":i&&i.length?i:[],"breadcrumbs":Bugsense.breadcrumbs}}),n.application_environment.log_data=extend(Bugsense.extraData,e.custom_data),n},i=function(e){var t=TraceKit.computeStackTrace(e).stack;return t.map(function(e){return e.func+"@"+e.url+":"+e.line})},r=function(e){return e.stack||i(e)};return Bugsense.notify=function(e,i){var r={};return i&&(e.custom_data=i),r=t(e),Bugsense.Network.send(n(r),"POST"),!0
},window.onerror=function(e,t,n,i,r){return Bugsense.config.apiKey?(Bugsense.trigger("crash"),Bugsense.notify({"exception":e,"url":t,"line":n,"column":i,"errorobj":r})):("warn"in console?console.warn("You need a BugSense API key to use bugsense.js."):console.log("You need a BugSense API key to use bugsense.js"),!1)},{"parse":t,"computeErrorHash":e,"generateExceptionData":n}}(),Bugsense.Sessions=function(){var e=function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()
},t={"generateUid":function(){var t=Lockr.get("bugsense:uid")||e();return Lockr.set("bugsense:uid",t),t}};return t}(),Bugsense.Network=function(){var e={"getPostURL":function(){return Bugsense.config.url+"?cacheBuster="+timestamp()},"send":function(e,t){function n(){return i&&4!=i.readyState?void 0:i&&200!=i.status?!1:void("console"in window&&console.log("logged 1 error to Bugsense, status: "+i.responseText))}var i=new XMLHttpRequest;i.open(t,this.getPostURL(),!0),i.setRequestHeader("X-BugSense-Api-Key",Bugsense.config.apiKey),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
var r=this;i.onerror=function(){r.cacheReport(e)},i.onreadystatechange=n,i.send(param({"data":JSON.stringify(e)}))}};return e}(),define("bugsense",function(e){return function(){var t;return t||e.Bugsense}}(this)),define("plex/base/adapters/PlayerProfileAdapter",["plex/base/adapters/Adapter"],function(e){return new e}),define("plex/desktop/adapters/LocalStorage",["jquery","plex/base/utils/Logger"],function(e,t){function n(e){return e?window.sessionStorage:window.localStorage}function i(i,r){var s=n(r.session),a=e.Deferred();
try{a.resolve(i(s))}catch(o){t.warn(o),a.reject(o)}return a.promise()}return{"get":function(e){return i(function(t){var n=window.PLEXWEB[e.key]||t.getItem(e.key);if(null==n){var i=e.session?"session":"local";throw new Error(e.key+" is not in "+i+" storage")}return n},e)},"set":function(e){return i(function(t){return t.setItem(e.key,e.value)},e)},"remove":function(e){return i(function(t){return t.removeItem(e.key)},e)},"clear":function(e){return i(function(e){return e.clear()},e)}}}),function(){function e(e,t){return e.name=t
}function t(e,t){return e.href=t}function n(e){yt.set(e)}function i(e){return"function"==typeof e}function r(e){return void 0!=e&&-1<(e.constructor+"")[q]("String")}function s(){return N.round(2147483647*N.random())}function a(e){var t=kt[X]("img");return t.width=1,t.height=1,t.src=e,t}function o(){}function l(e){return L instanceof Function?L(e):(n(28),e)}function u(e){return l(e)[z](/\(/g,"%28")[z](/\)/g,"%29")}function c(e,t){if(e){var n=kt[X]("script");n.type="text/javascript",n.async=!0,n.src=e,n.id=t;
var i=kt.getElementsByTagName("script")[0];i[mt].insertBefore(n,i)}}function d(){var e=""+kt[it][rt];return 0==e[q]("www.")?e[dt](4):e}function h(e){var t=kt.referrer;if(/^https?:\/\//i.test(t)){if(e)return t;e="//"+kt[it][rt];var n=t[q](e);if((5==n||6==n)&&(e=t.charAt(n+e[Z]),"/"==e||"?"==e||""==e||":"==e))return;return t}}function p(e,t){if(1==t[Z]&&null!=t[0]&&"object"==typeof t[0])return t[0];for(var n={},i=N.min(e[Z]+1,t[Z]),r=0;i>r;r++){if("object"==typeof t[r]){for(var s in t[r])t[r].hasOwnProperty(s)&&(n[s]=t[r][s]);
break}r<e[Z]&&(n[e[r]]=t[r])}return n}function f(e){if(100!=e.get(mi)&&D(zt(e,ri))%1e4>=100*Ut(e,mi))throw"abort"}function m(e){if(Ct(zt(e,si)))throw"abort"}function g(){var e=kt[it][lt];if("http:"!=e&&"https:"!=e)throw"abort"}function v(e){e.set(ln,Ut(e,ln)+1);var t=[];jt.map(function(n,i){if(i.p){var r=e.get(n);void 0!=r&&r!=i[W]&&("boolean"==typeof r&&(r*=1),t[V](i.p+"="+l(""+r)))}}),t[V]("z="+s()),e.set(on,t[gt]("&"),!0)}function y(e){Lt(zt(e,on),e.get(an)),e.set(an,o,!0)}function b(e){var t=St.gaData;
t&&(t.expId&&e.set(Vn,t.expId),t.expVar&&e.set(jn,t.expVar))}function w(){if(St[ft]&&"preview"==St[ft].loadPurpose)throw"abort"}function x(e){var t=Ut(e,Fn);t>=500&&n(15);var i=zt(e,sn);if("transaction"!=i&&"item"!=i){var i=Ut(e,$n),r=(new Date)[Y](),s=Ut(e,qn);if(0==s&&e.set(qn,r),s=N.round(2*(r-s)/1e3),s>0&&(i=N.min(i+s,20),e.set(qn,r)),0>=i)throw"abort";e.set($n,--i)}e.set(Fn,++t)}function S(){var e=Yi;k("create",e,e.create,3),k("getByName",e,e.j,5),k("getAll",e,e.K,6),e=Ui[et],k("get",e,e.get,7),k("set",e,e.set,4),k("send",e,e.send,2),e=Vt[et],k("get",e,e.get),k("set",e,e.set),(St.gaplugins=St.gaplugins||{}).Linker=Ri,e=Ri[et],Qi.C("linker",Ri),k("decorate",e,e.Q,20),k("autoLink",e,e.S,25),Qi.C("displayfeatures",Hi)
}function k(e,t,i,r){t[e]=function(){try{return r&&n(r),i[pt](this,arguments)}catch(t){var a=t&&t[G];if(!(1<=100*N.random()||Ct("?"))){var o=["t=error","_e=exc","_v=j15","sr=1"];e&&o[V]("_f="+e),a&&o[V]("_m="+l(a[dt](0,100))),o[V]("aip=1"),o[V]("z="+s()),Lt(o[gt]("&"))}throw t}}}function C(){var e,t,n;if((n=(n=St[ft])?n.plugins:null)&&n[Z])for(var i=0;i<n[Z]&&!t;i++){var r=n[i];-1<r[G][q]("Shockwave Flash")&&(t=r.description)}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=e.GetVariable("$version")
}catch(s){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(a){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=e.GetVariable("$version")}catch(o){}return t&&(e=t[$](/[\d]+/g))&&3<=e[Z]&&(t=e[0]+"."+e[1]+" r"+e[2]),t||void 0}function _(e,t,n){"none"==t&&(t="");var i=[],r=Tt(e);e="__utma"==e?6:2;for(var s=0;s<r[Z];s++){var a=(""+r[s])[nt](".");a[Z]>=e&&i[V]({"hash":a[0],"R":r[s],"O":a})
}return 0==i[Z]?void 0:1==i[Z]?i[0]:T(t,i)||T(n,i)||T(null,i)||i[0]}function T(e,t){var n,i;null==e?n=i=1:(n=D(e),i=D(0==e[q](".")?e[dt](1):"."+e));for(var r=0;r<t[Z];r++)if(t[r][j]==n||t[r][j]==i)return t[r]}function M(e){e=e.get(ri);var t=A(e,0);return"_ga=1."+l(t+"."+e)}function A(e,t){for(var n=new Date,i=St.screen||{},r=St[ft],s=r.plugins||[],n=[e,r.userAgent,i.width,i.height,n.getTimezoneOffset(),n.getYear(),n.getDate(),n.getHours(),n.getMinutes()+t],i=0;i<s[Z];++i)n[V](s[i].description);return D(n[gt]("."))
}function I(e,t){if(t==kt[it][rt])return!1;for(var n=0;n<e[Z];n++)if(0<=t[q](e[n]))return!0;return!1}function P(){var e=St.gaGlobal=St.gaGlobal||{};return e.hid=e.hid||s()}function E(e){function n(e){var t=(e[rt]||"")[nt](":")[0][vt](),n=(e[lt]||"")[vt](),n=1*e[K]||("http:"==n?80:"https:"==n?443:"");return e=e.pathname||"",0==e[q]("/")||(e="/"+e),[t,""+n,e]}var i=kt[X]("a");t(i,kt[it][ct]);var r=(i[lt]||"")[vt](),s=n(i),a=i[st]||"",o=r+"//"+s[0]+(s[1]?":"+s[1]:"");return 0==e[q]("//")?e=r+e:0==e[q]("/")?e=o+e:e&&0!=e[q]("?")?0>e[nt]("/")[0][q](":")&&(e=o+s[2][dt](0,s[2].lastIndexOf("/"))+"/"+e):e=o+s[2]+(e||a),t(i,e),r=n(i),{"protocol":(i[lt]||"")[vt](),"host":r[0],"port":r[1],"path":r[2],"G":i[st]||"","url":e||""}
}function D(e){var t,n=1,i=0;if(e)for(n=0,t=e[Z]-1;t>=0;t--)i=e.charCodeAt(t),n=(n<<6&268435455)+i+(i<<14),i=266338304&n,n=0!=i?n^i>>21:n;return n}var L=encodeURIComponent,R=window,B=setTimeout,N=Math,O=RegExp,V="push",j="hash",H="slice",z="replace",U="data",F="cookie",q="indexOf",$="match",W="defaultValue",K="port",X="createElement",Q="setAttribute",G="name",Y="getTime",J="host",Z="length",et="prototype",tt="clientWidth",nt="split",it="location",rt="hostname",st="search",at="target",ot="call",lt="protocol",ut="clientHeight",ct="href",dt="substring",ht="action",pt="apply",ft="navigator",mt="parentNode",gt="join",vt="toLowerCase",yt=new function(){var e=[];
this.set=function(t){e[t]=!0},this.M=function(){for(var t=[],n=0;n<e[Z];n++)e[n]&&(t[N.floor(n/6)]=t[N.floor(n/6)]^1<<n%6);for(n=0;n<t[Z];n++)t[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(t[n]||0);return t[gt]("")+"~"}},bt=function(e,t,i,r){try{e.addEventListener?e.addEventListener(t,i,!!r):e.attachEvent&&e.attachEvent("on"+t,i)}catch(s){n(27)}},wt=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},xt=function(){this.keys=[],this.w={},this.m={}
};xt[et].set=function(e,t,n){this.keys[V](e),n?this.m[":"+e]=t:this.w[":"+e]=t},xt[et].get=function(e){return this.m.hasOwnProperty(":"+e)?this.m[":"+e]:this.w[":"+e]},xt[et].map=function(e){for(var t=0;t<this.keys[Z];t++){var n=this.keys[t],i=this.get(n);i&&e(n,i)}};var St=R,kt=document,Ct=function(e){var t=St._gaUserPrefs;if(t&&t.ioo&&t.ioo()||e&&!0===St["ga-disable-"+e])return!0;try{var n=St.external;if(n&&n._gaUserPrefs&&"oo"==n._gaUserPrefs)return!0}catch(i){}return!1},_t=function(e){B(e,100)
},Tt=function(e){var t=[],n=kt[F][nt](";");e=O("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var i=0;i<n[Z];i++){var r=n[i][$](e);r&&t[V](r[1])}return t},Mt=function(e,t,i,r,s,a){if(s=Ct(s)?!1:It.test(kt[it][rt])||"/"==i&&At.test(r)?!1:!0,!s)return!1;if(t&&200<t[Z]&&(t=t[dt](0,200),n(24)),i=e+"="+t+"; path="+i+"; ",a&&(i+="expires="+new Date((new Date)[Y]()+a).toGMTString()+"; "),r&&"none"!=r&&(i+="domain="+r+";"),r=kt[F],kt.cookie=i,!(r=r!=kt[F]))e:{for(e=Tt(e),r=0;r<e[Z];r++)if(t==e[r]){r=!0;break e}r=!1}return r
},At=O(/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/),It=O(/(^|\.)doubleclick\.net$/i),Pt=function(){return(en||"https:"==kt[it][lt]?"https:":"http:")+"//www.google-analytics.com"},Et=function(t){e(this,"len"),this.message=t+"-8192"},Dt=function(t){e(this,"ff2post"),this.message=t+"-2036"},Lt=function(e,t){if(t=t||o,2036>=e[Z])Rt(e,t);else{if(!(8192>=e[Z]))throw new Et(e[Z]);var n=t;if(0<=St[ft].userAgent[q]("Firefox")&&![].reduce)throw new Dt(e[Z]);Bt(e,n)||Nt(e,n)}},Rt=function(e,t){var n=a(Pt()+"/collect?"+e);
n.onload=n.onerror=function(){n.onload=null,n.onerror=null,t()}},Bt=function(e,t){var n,i=St.XDomainRequest;return i?(n=new i,n.open("POST",Pt()+"/collect")):(i=St.XMLHttpRequest)&&(i=new i,"withCredentials"in i&&(n=i,n.open("POST",Pt()+"/collect",!0),n.setRequestHeader("Content-Type","text/plain"))),n?(n.onreadystatechange=function(){4==n.readyState&&(t(),n=null)},n.send(e),!0):void 0},Nt=function(t,n){if(kt.body){t=L(t);try{var i=kt[X]('<iframe name="'+t+'"></iframe>')}catch(r){i=kt[X]("iframe"),e(i,t)
}i.height="0",i.width="0",i.style.display="none",i.style.visibility="hidden";var s=kt[it],s=Pt()+"/analytics_iframe.html#"+L(s[lt]+"//"+s[J]+"/favicon.ico"),a=function(){i.src="",i[mt]&&i[mt].removeChild(i)};bt(St,"beforeunload",a);var o=!1,l=0,u=function(){if(!o){try{if(l>9||i.contentWindow[it][J]==kt[it][J])return o=!0,a(),wt(St,"beforeunload",a),void n()}catch(e){}l++,B(u,200)}};bt(i,"load",u),kt.body.appendChild(i),i.src=s}else _t(function(){Nt(t,n)})},Ot=function(){this.t=[]};Ot[et].add=function(e){this.t[V](e)
},Ot[et].execute=function(e){try{for(var t=0;t<this.t[Z];t++){var n=e.get(this.t[t]);n&&i(n)&&n[ot](St,e)}}catch(r){}t=e.get(an),t!=o&&i(t)&&(e.set(an,o,!0),B(t,10))};var Vt=function(){this.data=new xt},jt=new xt,Ht=[];Vt[et].get=function(e){var t=Wt(e),n=this[U].get(e);return t&&void 0==n&&(n=i(t[W])?t[W]():t[W]),t&&t.n?t.n(this,e,n):n};var zt=function(e,t){var n=e.get(t);return void 0==n?"":""+n},Ut=function(e,t){var n=e.get(t);return void 0==n||""===n?0:1*n};Vt[et].set=function(e,t,n){if(e)if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&qt(this,i,e[i],n);
else qt(this,e,t,n)};var Ft,qt=function(e,t,n,i){var r=Wt(t);r&&r.o?r.o(e,t,n,i):e[U].set(t,n,i)},$t=function(t,n,i,r,s){e(this,t),this.p=n,this.n=r,this.o=s,this.defaultValue=i},Wt=function(e){var t=jt.get(e);if(!t)for(var n=0;n<Ht[Z];n++){var i=Ht[n],r=i[0].exec(e);if(r){t=i[1](r),jt.set(t[G],t);break}}return t},Kt=function(e){var t;return jt.map(function(n,i){i.p==e&&(t=i)}),t&&t[G]},Xt=function(e,t,n,i,r){return e=new $t(e,t,n,i,r),jt.set(e[G],e),e[G]},Qt=function(e,t){Ht[V]([O("^"+e+"$"),t])
},Gt=function(e,t,n){return Xt(e,t,n,void 0,Yt)},Yt=function(){};if(Ft=r(R.GoogleAnalyticsObject)){var Jt=R.GoogleAnalyticsObject;Ft=Jt?Jt[z](/^[\s\xa0]+|[\s\xa0]+$/g,""):""}var Zt=Ft||"ga",en=!1,tn=Gt("apiVersion","v"),nn=Gt("clientVersion","_v");Xt("anonymizeIp","aip");var rn=Xt("adSenseId","a"),sn=Xt("hitType","t"),an=Xt("hitCallback"),on=Xt("hitPayload");Xt("nonInteraction","ni"),Xt("currencyCode","cu"),Xt("sessionControl","sc",""),Xt("queueTime","qt");var ln=Xt("_s","_s");Xt("description","cd");
var un=Xt("location","dl",""),cn=Xt("referrer","dr"),dn=Xt("page","dp","");Xt("hostname","dh");var hn=Xt("language","ul"),pn=Xt("encoding","de");Xt("title","dt",function(){return kt.title||void 0}),Qt("contentGroup([0-9]+)",function(e){return new $t(e[0],"cg"+e[1])});var fn=Xt("screenColors","sd"),mn=Xt("screenResolution","sr"),gn=Xt("viewportSize","vp"),vn=Xt("javaEnabled","je"),yn=Xt("flashVersion","fl");Xt("campaignId","ci"),Xt("campaignName","cn"),Xt("campaignSource","cs"),Xt("campaignMedium","cm"),Xt("campaignKeyword","ck"),Xt("campaignContent","cc");
var bn=Xt("eventCategory","ec"),wn=Xt("eventAction","ea"),xn=Xt("eventLabel","el"),Sn=Xt("eventValue","ev"),kn=Xt("socialNetwork","sn"),Cn=Xt("socialAction","sa"),_n=Xt("socialTarget","st"),Tn=Xt("l1","plt"),Mn=Xt("l2","pdt"),An=Xt("l3","dns"),In=Xt("l4","rrt"),Pn=Xt("l5","srt"),En=Xt("l6","tcp"),Dn=Xt("l7","dit"),Ln=Xt("l8","clt"),Rn=Xt("timingCategory","utc"),Bn=Xt("timingVar","utv"),Nn=Xt("timingLabel","utl"),On=Xt("timingValue","utt");Xt("appName","an"),Xt("appVersion","av",""),Xt("appId","aid",""),Xt("appInstallerId","aiid",""),Xt("exDescription","exd"),Xt("exFatal","exf");
var Vn=Xt("expId","xid"),jn=Xt("expVar","xvar"),Hn=Xt("_utma","_utma"),zn=Xt("_utmz","_utmz"),Un=Xt("_utmht","_utmht"),Fn=Xt("_hc",void 0,0),qn=Xt("_ti",void 0,0),$n=Xt("_to",void 0,20);Qt("dimension([0-9]+)",function(e){return new $t(e[0],"cd"+e[1])}),Qt("metric([0-9]+)",function(e){return new $t(e[0],"cm"+e[1])}),Xt("linkerParam",void 0,void 0,M,Yt),Xt("usage","_u",void 0,function(){return yt.M()},Yt),Xt("forceSSL",void 0,void 0,function(){return en},function(e,t,n){en=!!n});var Wn=Xt("joinId","jid");
Qt("\\&(.*)",function(e){var t=new $t(e[0],e[1]),n=Kt(e[0][dt](1));return n&&(t.n=function(e){return e.get(n)},t.o=function(e,t,i,r){e.set(n,i,r)},t.p=void 0),t});var Kn=Gt("oot"),Xn=Xt("previewTask"),Qn=Xt("checkProtocolTask"),Gn=Xt("checkStorageTask"),Yn=Xt("historyImportTask"),Jn=Xt("samplerTask"),Zn=Gt("rateLimiterTask"),ei=Xt("buildHitTask"),ti=Xt("sendHitTask"),ni=Xt("ceTask"),ii=Gt("name"),ri=Gt("clientId","cid"),si=Gt("trackingId","tid"),ai=Gt("cookieName",void 0,"_ga"),oi=Gt("cookieDomain"),li=Gt("cookiePath",void 0,"/"),ui=Gt("cookieExpires",void 0,63072e3),ci=Gt("legacyCookieDomain"),di=Gt("legacyHistoryImport",void 0,!0),hi=Gt("storage",void 0,"cookie"),pi=Gt("allowLinker",void 0,!1),fi=Gt("allowAnchor",void 0,!0),mi=Gt("sampleRate","sf",100),gi=Gt("siteSpeedSampleRate",void 0,1),vi=Gt("alwaysSendReferrer",void 0,!1),yi=function(e,t){var n=N.min(Ut(e,gi),100);
if(!(D(zt(e,ri))%100>=n)&&(n={},bi(n)||wi(n))){var i=n[Tn];void 0==i||1/0==i||isNaN(i)||(i>0?(xi(n,An),xi(n,En),xi(n,Pn),xi(n,Mn),xi(n,In),xi(n,Dn),xi(n,Ln),t(n)):bt(St,"load",function(){yi(e,t)},!1))}},bi=function(e){var t=St.performance||St.webkitPerformance,t=t&&t.timing;if(!t)return!1;var n=t.navigationStart;return 0==n?!1:(e[Tn]=t.loadEventStart-n,e[An]=t.domainLookupEnd-t.domainLookupStart,e[En]=t.connectEnd-t.connectStart,e[Pn]=t.responseStart-t.requestStart,e[Mn]=t.responseEnd-t.responseStart,e[In]=t.fetchStart-n,e[Dn]=t.domInteractive-n,e[Ln]=t.domContentLoadedEventStart-n,!0)
},wi=function(e){if(St.top!=St)return!1;var t=St.external,n=t&&t.onloadT;return t&&!t.isValidLoadTime&&(n=void 0),n>2147483648&&(n=void 0),n>0&&t.setPageReadyTime(),void 0==n?!1:(e[Tn]=n,!0)},xi=function(e,t){var n=e[t];(isNaN(n)||1/0==n||0>n)&&(e[t]=void 0)},Si=!1,ki=function(e){if("cookie"==zt(e,hi)){var t=zt(e,ai),i=Ti(e),r=Pi(zt(e,li)),s=Ai(zt(e,oi)),a=1e3*Ut(e,ui),o=zt(e,si);if("auto"!=s)Mt(t,i,r,s,o,a)&&(Si=!0);else{n(32);var l;if(i=[],s=d()[nt]("."),4!=s[Z]||(l=s[s[Z]-1],parseInt(l,10)!=l)){for(l=s[Z]-2;l>=0;l--)i[V](s[H](l)[gt]("."));
i[V]("none"),l=i}else l=["none"];for(var u=0;u<l[Z];u++)if(s=l[u],e[U].set(oi,s),i=Ti(e),Mt(t,i,r,s,o,a))return void(Si=!0);e[U].set(oi,"auto")}}},Ci=function(e){if("cookie"==zt(e,hi)&&!Si&&(ki(e),!Si))throw"abort"},_i=function(e){if(e.get(di)){var t=zt(e,oi),i=zt(e,ci)||d(),r=_("__utma",i,t);r&&(n(19),e.set(Un,(new Date)[Y](),!0),e.set(Hn,r.R),(t=_("__utmz",i,t))&&r[j]==t[j]&&e.set(zn,t.R))}},Ti=function(e){var t=u(zt(e,ri)),n=Ii(zt(e,oi));return e=Ei(zt(e,li)),e>1&&(n+="-"+e),["GA1",n,t][gt](".")
},Mi=function(e,t,n){for(var i,r=[],s=[],a=0;a<e[Z];a++){var o=e[a];o.r[n]==t?r[V](o):void 0==i||o.r[n]<i?(s=[o],i=o.r[n]):o.r[n]==i&&s[V](o)}return 0<r[Z]?r:s},Ai=function(e){return 0==e[q](".")?e.substr(1):e},Ii=function(e){return Ai(e)[nt](".")[Z]},Pi=function(e){return e?(1<e[Z]&&e.lastIndexOf("/")==e[Z]-1&&(e=e.substr(0,e[Z]-1)),0!=e[q]("/")&&(e="/"+e),e):"/"},Ei=function(e){return e=Pi(e),"/"==e?1:e[nt]("/")[Z]},Di=O(/^https?:\/\/([^\/:]+)/),Li=/(.*)([?&#])(?:_ga=[^&]*)(?:&?)(.*)/,Ri=function(e){this.target=e,this.T=!1
};Ri[et].Q=function(e,n){if(e.tagName){if("a"==e.tagName[vt]())return void(e[ct]&&t(e,Bi(this,e[ct],n)));if("form"==e.tagName[vt]())return Ni(this,e)}return"string"==typeof e?Bi(this,e,n):void 0};var Bi=function(e,t,n){var i=Li.exec(t);i&&3<=i[Z]&&(t=i[1]+(i[3]?i[2]+i[3]:"")),e=e[at].get("linkerParam");var r=t[q]("?"),i=t[q]("#");return n?t+=(-1==i?"#":"&")+e:(n=-1==r?"?":"&",t=-1==i?t+(n+e):t[dt](0,i)+n+e+t[dt](i)),t},Ni=function(e,t){if(t&&t[ht]){var n=e[at].get("linkerParam")[nt]("=")[1];if("get"==t.method[vt]()){for(var i=t.childNodes||[],r=0;r<i[Z];r++)if("_ga"==i[r][G])return void i[r][Q]("value",n);
i=kt[X]("input"),i[Q]("type","hidden"),i[Q]("name","_ga"),i[Q]("value",n),t.appendChild(i)}else"post"==t.method[vt]()&&(t.action=Bi(e,t[ht]))}};Ri[et].S=function(e,i,r){function s(r){try{r=r||St.event;var s;e:{var o=r[at]||r.srcElement;for(r=100;o&&r>0;){if(o[ct]&&o.nodeName[$](/^a(?:rea)?$/i)){s=o;break e}o=o[mt],r--}s={}}("http:"==s[lt]||"https:"==s[lt])&&I(e,s[rt]||"")&&s[ct]&&t(s,Bi(a,s[ct],i))}catch(l){n(26)}}var a=this;if(this.T||(this.T=!0,bt(kt,"mousedown",s,!1),bt(kt,"touchstart",s,!1),bt(kt,"keyup",s,!1)),r){r=function(t){if(t=t||St.event,(t=t[at]||t.srcElement)&&t[ht]){var n=t[ht][$](Di);
n&&I(e,n[1])&&Ni(a,t)}};for(var o=0;o<kt.forms[Z];o++)bt(kt.forms[o],"submit",r)}};var Oi,Vi=function(e){return e.get(ii)&&"t0"!=e.get(ii)?"_dc_"+u(e.get(ii)):"_dc"},ji=function(e){if(e.get(Wn)){var t=new xt,n=function(n){t.set(Wt(n).p,e.get(n))};n(tn),n(nn),n(si),n(ri),n(Wn);var i=Ut(e,"forceSSL")||"https:"==kt[it][lt]?"https:":"http:",i=i+"//stats.g.doubleclick.net/collect?t=dc&aip=1&";t.map(function(e,t){i+=l(e)+"="+l(""+t)+"&"}),i+="z="+s(),a(i),e.set(Wn,"",!0)}},Hi=function(e){n(29),e=e.b;var t=e.get(ei);
e.set(ei,function(e){return e.get(Wn)||(-1!=kt[F][q](Vi(e)+"=1")?e.set(Wn,"",!0):(Vi(e),Mt(Vi(e),"1",e.get(li),e.get(oi),e.get(si),6e5)?e.set(Wn,""+s(),!0):n(30))),t(e)});var i=e.get(ti);e.set(ti,function(e){var t=i(e);return ji(e),t})},zi=function(e,t,n){if(!Oi){var i;i=kt[it][j];var r=St[G],a=/^#?gaso=([^&]*)/;(r=(i=(i=i&&i[$](a)||r&&r[$](a))?i[1]:Tt("GASO")[0]||"")&&i[$](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))&&(Mt("GASO",""+i,n,t,e,0),R._udo||(R._udo=t),R._utcp||(R._utcp=n),e=r[1],c("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(e?"prefix="+e+"&":"")+s(),"_gasojs")),Oi=!0
}},Ui=function(e){function t(e,t){i.b[U].set(e,t)}function n(e,n){t(e,n),i.filters.add(e)}var i=this;this.b=new Vt,this.filters=new Ot,t(ii,e[ii]),t(si,e[si]),t(ai,e[ai]),t(oi,e[oi]||d()),t(li,e[li]),t(ui,e[ui]),t(ci,e[ci]),t(di,e[di]),t(pi,e[pi]),t(fi,e[fi]),t(mi,e[mi]),t(gi,e[gi]),t(vi,e[vi]),t(hi,e[hi]),t(tn,1),t(nn,"j15"),n(Kn,m),n(Xn,w),n(Qn,g),n(Gn,Ci),n(Yn,_i),n(Jn,f),n(Zn,x),n(ni,b),n(ei,v),n(ti,y),Fi(this.b,e[ri]),qi(this.b),this.b.set(rn,P()),zi(this.b.get(si),this.b.get(oi),this.b.get(li))
},Fi=function(e,t){if("cookie"==zt(e,hi)){Si=!1;var i;e:{var r=Tt(zt(e,ai));if(r&&!(1>r[Z])){i=[];for(var a=0;a<r[Z];a++){var o;o=r[a][nt](".");var u=o.shift();("GA1"==u||"1"==u)&&1<o[Z]?(u=o.shift()[nt]("-"),1==u[Z]&&(u[1]="1"),u[0]*=1,u[1]*=1,o={"r":u,"s":o[gt](".")}):o=void 0,o&&i[V](o)}if(1==i[Z]){n(13),i=i[0].s;break e}if(0!=i[Z]){if(n(14),r=Ii(zt(e,oi)),i=Mi(i,r,0),1==i[Z]){i=i[0].s;break e}r=Ei(zt(e,li)),i=Mi(i,r,1),i=i[0]&&i[0].s;break e}n(12)}i=void 0}i||(i=zt(e,oi),r=zt(e,ci)||d(),i=_("__utma",r,i),(i=void 0==i?void 0:i.O[1]+"."+i.O[2])&&n(10)),i&&(e[U].set(ri,i),Si=!0)
}if(i=e.get(fi),(a=(i=kt[it][i?"href":"search"][$]("(?:&|#|\\?)"+l("_ga")[z](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==i[Z]?i[1]:"")&&(e.get(pi)?(i=a[q]("."),-1==i?n(22):(r=a[dt](i+1),"1"!=a[dt](0,i)?n(22):(i=r[q]("."),-1==i?n(22):(a=r[dt](0,i),i=r[dt](i+1),a!=A(i,0)&&a!=A(i,-1)&&a!=A(i,-2)?n(23):(n(11),e[U].set(ri,i)))))):n(21)),t&&(n(9),e[U].set(ri,l(t))),!e.get(ri))if(i=(i=St.gaGlobal&&St.gaGlobal.vid)&&-1!=i[st](/^(?:utma\.)?\d+\.\d+$/)?i:void 0)n(17),e[U].set(ri,i);else{for(n(8),i=St[ft],i=i.appName+i.version+i.platform+i.userAgent+(kt[F]?kt[F]:"")+(kt.referrer?kt.referrer:""),r=i[Z],a=St.history[Z];a>0;)i+=a--^r++;
e[U].set(ri,[s()^2147483647&D(i),N.round((new Date)[Y]()/1e3)][gt]("."))}ki(e)},qi=function(e){var t=St[ft],i=St.screen,r=kt[it];if(e.set(cn,h(e.get(vi))),r){var s=r.pathname||"";"/"!=s.charAt(0)&&(n(31),s="/"+s),e.set(un,r[lt]+"//"+r[rt]+s+r[st])}i&&e.set(mn,i.width+"x"+i.height),i&&e.set(fn,i.colorDepth+"-bit");var i=kt.documentElement,a=(s=kt.body)&&s[tt]&&s[ut],o=[];if(i&&i[tt]&&i[ut]&&("CSS1Compat"===kt.compatMode||!a)?o=[i[tt],i[ut]]:a&&(o=[s[tt],s[ut]]),i=0>=o[0]||0>=o[1]?"":o[gt]("x"),e.set(gn,i),e.set(yn,C()),e.set(pn,kt.characterSet||kt.charset),e.set(vn,t&&"function"==typeof t.javaEnabled&&t.javaEnabled()||!1),e.set(hn,(t&&(t.language||t.browserLanguage)||"")[vt]()),r&&e.get(fi)&&(t=kt[it][j])){for(t=t[dt](1),t=t[nt]("&"),r=[],i=0;i<t[Z];++i)0!=t[i][q]("utm_id")&&0!=t[i][q]("utm_campaign")&&0!=t[i][q]("utm_source")&&0!=t[i][q]("utm_medium")&&0!=t[i][q]("utm_term")&&0!=t[i][q]("utm_content")||r[V](t[i]);
0<r[Z]&&(t="#"+r[gt]("&"),e.set(un,e.get(un)+t))}};Ui[et].get=function(e){return this.b.get(e)},Ui[et].set=function(e,t){this.b.set(e,t)};var $i={"pageview":[dn],"event":[bn,wn,xn,Sn],"social":[kn,Cn,_n],"timing":[Rn,Bn,On,Nn]};Ui[et].send=function(){if(!(1>arguments[Z])){var e,t;"string"==typeof arguments[0]?(e=arguments[0],t=[][H][ot](arguments,1)):(e=arguments[0]&&arguments[0][sn],t=arguments),e&&(t=p($i[e]||[],t),t[sn]=e,this.b.set(t,void 0,!0),this.filters.execute(this.b),"pageview"==e&&Wi(this),this.b[U].m={})
}};var Wi=function(e){e.I||(e.I=!0,yi(e.b,function(t){e.send("timing",t)}))},Ki=function(e){return"prerender"==kt.webkitVisibilityState?!1:(e(),!0)},Xi=function(e){if(!Ki(e)){n(16);var t=!1,i=function(){!t&&Ki(e)&&(t=!0,wt(kt,"webkitvisibilitychange",i))};bt(kt,"webkitvisibilitychange",i)}},Qi={"F":"/plugins/ua/","D":/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/};Qi.k=new xt,Qi.f=[];var Gi=function(e){if(i(e[0]))this.u=e[0];else{var t=Qi.D.exec(e[0]);if(null!=t&&4==t[Z]&&(this.c=t[1]||"t0",this.e=t[2]||"",this.d=t[3],this.a=[][H][ot](e,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d)),!i(e[0])){if(t=e[1],e=e[2],!this.d)throw"abort";
if(this.i&&(!r(t)||""==t))throw"abort";if(this.g&&(!r(t)||""==t||!i(e)))throw"abort";if(0<=this.c[q](".")||0<=this.c[q](":")||0<=this.e[q](".")||0<=this.e[q](":"))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}}};Qi.B=function(e,t,n){var r=Qi.k.get(e);return i(r)?(t.plugins_=t.plugins_||new xt,t.plugins_.set(e,new r(t,n||{})),!0):!1},Qi.C=function(e,t){Qi.k.set(e,t)},Qi.execute=function(){var e=Qi.J[pt](Qi,arguments),e=Qi.f.concat(e);for(Qi.f=[];0<e[Z]&&!Qi.v(e[0])&&(e.shift(),!(0<Qi.f[Z])););Qi.f=Qi.f.concat(e)
},Qi.J=function(){for(var e=[],t=0;t<arguments[Z];t++)try{var n=new Gi(arguments[t]);if(n.g)Qi.v(n);else{if(n.i){var r=n.a[1];if(!i(Qi.k.get(n.a[0]))&&!n.H&&r){var s,a=r+"",r=a&&0<=a[q]("/")?a:"//www.google-analytics.com"+Qi.F+a,o=E(""+r),l=o[lt],u=kt[it][lt];s="https:"==l||l==u?!0:"http:"!=l?!1:"http:"==u;var d;if(d=s){var a=o,h=E(kt[it][ct]);if(a.G||0<=a.url[q]("?")||0<=a.path[q]("://"))d=!1;else if(a[J]==h[J]&&a[K]==h[K])d=!0;else{var p="http:"==a[lt]?80:443;d="www.google-analytics.com"==a[J]&&(a[K]||p)==p&&0==a.path[q]("/plugins/")?!0:!1
}}d&&(n.H=!!c(o.url))}}e[V](n)}}catch(f){}return e},Qi.v=function(e){try{if(e.u)e.u[ot](St,Yi.j("t0"));else if(e.g)Qi.C(e.a[0],e.a[1]);else{var t=e.c==Zt?Yi:Yi.j(e.c);if(e.A)"t0"==e.c&&Yi.create[pt](Yi,e.a);else if(t)if(e.i){if(!Qi.B(e.a[0],t,e.a[2]))return!0}else e.e&&(t=t.plugins_.get(e.e)),t[e.d][pt](t,e.a)}}catch(n){}};var Yi=function(){n(1),Qi.execute[pt](Qi,[arguments])};Yi.h={},Yi.P=[],Yi.L=0,Yi.answer=42;var Ji=[si,oi,ii];Yi.create=function(){var e=p(Ji,[][H][ot](arguments));e[ii]||(e[ii]="t0");
var t=""+e[ii];return Yi.h[t]?Yi.h[t]:(e=new Ui(e),Yi.h[t]=e,Yi.P[V](e),e)},Yi.j=function(e){return Yi.h[e]},Yi.K=function(){return Yi.P[H](0)},Yi.N=function(){var e=St[Zt];if(!e||42!=e.answer){Yi.L=e&&e.l,Yi.loaded=!0,St[Zt]=Yi,S();var t=e&&e.q;"[object Array]"==Object[et].toString[ot](Object(t))&&Xi(function(){Qi.execute[pt](Yi,t)})}},Yi.N()}(window),define("google-analytics",function(e){return function(){var t;return t||e.ga}}(this)),define("plex/desktop/adapters/GoogleAnalytics",["underscore","google-analytics","plex/base/utils/BaseClass"],function(e,t,n){var i=n.extend({"constructor":function(e,n){this.ga=this.createGaQueue(),t("create",e,"auto"),t("set",{"appName":n.name,"appVersion":n.version})
},"createGaQueue":function(){var e=function(){e.queue.push(arguments)};return e.queue=[],e.run=function(){for(;e.queue.length;)t.apply(window,e.queue.shift())},e},"enable":function(){this.ga.run&&this.ga.run(),this.ga=t},"disable":function(){this.ga=function(){}},"set":function(e){t("set",e)},"trackView":function(e){this.ga("send",{"hitType":"appview","description":e})},"trackEvent":function(e){this.ga("send","event",e)}});return i}),SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),define("jssha256",function(){}),define("plex/desktop/utils/DesktopTranscoder",["underscore","jquery","jssha256","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/Transcoder","plex/base/utils/MediaUtil","plex/base/utils/formatters/StringUtil","plex/base/models/SettingsModel"],function(e,t,n,i,r,s,a,o,l){var u="KQMIY6GATPC63AIMC4R2",c=o.decode64("k3U6GLkZOoNIoSgjDshPErvqMIFdE0xMTx8kgsrhnC0="),d=i.extend({"image":function(){return s.image.apply(s,arguments)
},"music":function(){return s.music.apply(s,arguments)},"video":function(e,n,i,r,s){if(s||(s={}),e.supports("universalTranscoder"))return this.getUniversalTranscoderUrl(e,n,i,r,s);var a=t.Deferred(),o=this.getTranscoderUrl(e,n,r,s),l=t.ajax(e.getXHROptions(o));return l.done(function(t){var n=t.replace(/[\s\S]+(session.+?\.m3u8)[\s\S]+/,"$1"),i=e.resolveUrl("video/:/transcode/segmented/")+n;a.resolve(i)}),l.fail(function(){a.reject()}),a.promise()},"getTranscoderUrl":function(n,i,s,d){var h=a.getQualityInfo(i,l).index,p=Math.round((new Date).getTime()/1e3),f={"identifier":i.get("identifier"),"key":n.resolveUrl(i.get("key"),{"useLoopback":!0}),"url":n.resolveUrl(s.key,{"useLoopback":!0}),"session":d.session,"offset":0,"quality":h,"subtitleSize":l.get("subtitleSize"),"audioBoost":l.get("audioBoost"),"3g":0},m=i.get("indirectHttpHeaders");
m&&(f.httpCookies=m.Cookie,f.userAgent=m["User-Agent"]);var g="/video/:/transcode/segmented/start.m3u8?"+t.param(f,!0);HMAC_SHA256_init(c),HMAC_SHA256_write(g+"@"+p);var v=HMAC_SHA256_finalize(),y=o.encode64(array_to_string(v)),b=a.capabilities;l.get("preferAAC")&&(b=a.capabilities.replace("audioDecoders=mp3,aac","audioDecoders=aac")),l.get("directStream")||(b=a.capabilities.replace(/videoDecoders=[^;]+;audioDecoders=[^;]+/,""));var w=e.extend(n.getHeaders(),{"X-Plex-Access-Key":u,"X-Plex-Access-Code":y,"X-Plex-Access-Time":p,"X-Plex-Client-Capabilities":b});
return r.log("transcoding with old transcoder"),r.log("capabilities: "+b),r.log("quality: "+f.quality),r.log("subtitleSize: "+f.subtitleSize),r.log("audioBoost: "+f.audioBoost),g+"&"+t.param(w,!0)},"getUniversalTranscoderUrl":function(t,n,i,o,u){var c=e.extend({"directStream":l.get("directStream")?1:0,"videoQuality":a.qualities[12],"videoResolution":a.resolutions[12],"maxVideoBitrate":a.bitrates[12],"subtitleSize":l.get("subtitleSize"),"audioBoost":l.get("audioBoost")},u);return l.get("preferAAC")&&(c["X-Plex-Client-Profile-Extra"]="add-transcode-target-audio-codec(type=videoProfile&context=streaming&protocol=hls&audioCodec=aac)"),r.log("transcoding with universal transcoder"),r.log("directStream: "+c.directStream),r.log("videoQuality: "+c.videoQuality),r.log("videoResolution: "+c.videoResolution),r.log("maxVideoBitrate: "+c.maxVideoBitrate),r.log("subtitleSize: "+c.subtitleSize),r.log("audioBoost: "+c.audioBoost),c["X-Plex-Client-Profile-Extra"]&&r.log("profileExtra: "+c["X-Plex-Client-Profile-Extra"]),s.video.call(this,t,n,i,o,c)
}});return new d}),define("plex/base/mixins/player/PlayerControllerMixin",["underscore","jquery","plex/base/utils/MediaUtil","plex/base/adapters/AnalyticsAdapter","plex/base/models/SessionStatsModel"],function(e,t,n,i,r){var s={"playbackDuration":0,"request":function(t){return this.pendingRequests||(this.pendingRequests=[]),this.pendingRequests.push(t),t.always(e.bind(function(){var n=e.indexOf(this.pendingRequests,t);this.pendingRequests.splice(n,1)},this)),t},"waitForRequests":function(){return t.when.apply(t,this.pendingRequests)
},"mirror":function(){},"playPause":function(){"paused"===this.model.get("state")?this.play():this.pause()},"decreaseVolume":function(){var e=this.model.get("volume");this.setVolume(Math.round(Math.max(e-10,0)))},"increaseVolume":function(){var e=this.model.get("volume");this.setVolume(Math.round(Math.min(e+10,100)))},"seekBackward":function(){var e=this.model.get("position");this.setPosition(e-1e4)},"seekForward":function(){var e=this.model.get("position");this.setPosition(e+1e4)},"stepBackward":function(){var e=this.model.get("duration"),t=this.model.get("position");
this.setPosition(t-.1*e)},"stepForward":function(){var e=this.model.get("duration"),t=this.model.get("position");this.setPosition(t+.1*e)},"skipPrevious":function(){this.previousItem&&(this.model.set("item",this.previousItem),this.update())},"skipNext":function(){this.nextItem&&(this.model.set("item",this.nextItem),this.update())},"skipTo":function(e){this.model.set("item",e),this.update()},"remove":function(e){this.model.get("playlist").removeItem(e)},"move":function(e,t){this.model.get("playlist").moveItem(e,t)
},"getPreviousItem":function(e){e||(e={});var t=this.model.get("playlist"),n=this.model.get("item");if(!t||!n)return null;var i=t.get(n.id||n.cid),r=t.indexOf(i);return r>0?t.at(r-1):e.loop&&t.length>1?t.at(t.length-1):null},"getNextItem":function(e){e||(e={});var t=this.model.get("playlist"),n=this.model.get("item");if(!t||!n)return null;var i=t.get(n.id||n.cid),r=t.indexOf(i);return r+1<t.length?t.at(r+1):e.loop&&t.length>1?t.at(0):null},"timeline":function(i){return i||(i={}),e.defaults(i,this.model.attributes),this.local&&i.item?this.request(n.timeline(i)):t.Deferred().resolve().promise()
},"startTimeline":function(){this.local&&!this.timelineInterval&&(this.timelineInterval=setInterval(e.bind(this.timeline,this),n.timelineDelay))},"stopTimeline":function(){this.timelineInterval=clearInterval(this.timelineInterval),this.trackPlaybackEvent()},"ping":function(){return this.local?this.request(n.ping(this.model.get("transcodeServer"),this.session)):t.Deferred().resolve().promise()},"startPing":function(){var t=this.model.get("directPlay");"video"!==this.type||!this.local||t||this.pingInterval||(this.pingInterval=setInterval(e.bind(this.ping,this),n.pingDelay))
},"stopPing":function(){this.pingInterval=clearInterval(this.pingInterval)},"startPlaybackTracking":function(){this.local&&!this.playbackInterval&&(this.playbackInterval=setInterval(e.bind(function(){this.playbackDuration++},this),n.playbackDelay))},"stopPlaybackTracking":function(){this.playbackInterval=clearInterval(this.playbackInterval)},"trackPlaybackEvent":function(){if(this.local){r.incPlaybackCount();var e=i.get(),t=this.model.get("item"),n=t.get("identifier");!n&&t.parent&&(n=t.parent.get("identifier")),e.trackEvent({"eventCategory":"Playback","eventAction":t.get("type"),"eventLabel":n,"eventValue":this.playbackDuration}),this.playbackDuration=0
}}};return s}),function(){var e={};!function(){function t(){i||console.log.apply(console,arguments);for(var e=Math.round(Date.now()-s),t=[],n=0;n<arguments.length;n++){var r=""+arguments[n];"[obj"!=r.slice(0,4)&&t.push(r)}var a=e+": "+t.join(", "),o=document.getElementById("console");o&&(o.value+=a+"\n"),i&&console.log(a)}function n(e){r>=e&&t.apply(null,arguments)}var i=!!(window.console&&window.console.log&&window.console.log.call),r=2,s=(new Date).getTime();e.dlog=n,e.log=t,e.DLOG_LEVEL=r}(),function(){var t={"SMOOTH_STREAMING":"smoothstreaming","DASH":"dash"};
e.StreamingType=t}(),function(){var t=function(e){this.ttml_=e,this.frameRate_=30};t.prototype.xmlDecode_=function(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},t.prototype.parseChildElements_=function(e,t,n){var i=[];if(null==n)return i;for(var r=n.firstElementChild;null!=r;r=r.nextElementSibling)r.nodeName==e&&i.push(t.call(this,r));return i},t.prototype.parseAttributes_=function(e,t){var n={};for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));
return n},t.prototype.parseTime_=function(e){var t=e.split(":"),n=3600*parseFloat(t[0])+60*parseFloat(t[1])+parseFloat(t[2])+parseFloat(t[3])/this.frameRate_;return n},t.prototype.parseTextTrack_=function(e){var t=this.xmlDecode_(e.replace(/[\r\n]+/g,"").replace(/ {2,}/g," ").replace(/<[^>]+>/g,"").replace(/<br\s*\/>/g,"\n"));return t.trim()},t.prototype.parse_cue_=function(e){var t=this.parseAttributes_({"begin":this.parseTime_.bind(this),"end":this.parseTime_.bind(this)},e);return t&&(t.caption=this.parseTextTrack_(e.textContent),t.start=t.begin,delete t.begin),t
},t.prototype.parse_div_=function(e){return this.parseChildElements_("p",this.parse_cue_,e)},t.prototype.parse_body_=function(e){var t=this.parseChildElements_("div",this.parse_div_,e);return t[0]},t.prototype.parse_ttml_=function(e){var t=this.parseChildElements_("body",this.parse_body_,e);return t[0]},t.prototype.parse=function(){for(var e=new DOMParser,t=e.parseFromString(this.ttml_,"text/xml"),n=0;n<t.childNodes.length;n++)if("tt"===t.childNodes[n].nodeName)return this.parse_ttml_(t.childNodes[n])
},e.Ttml=t}(),function(){var t=0,n=1,i=function(e){if(null==e)throw new Error("A url for the close captions location is required");this._url=e,this._callback=null,this._ccInfo=null};i.prototype.ccType=function(){return t},i.prototype.requestCC=function(){var e=new XMLHttpRequest;e.addEventListener("load",this.onCCLoad.bind(this)),e.addEventListener("error",this.onCCError.bind(this)),e.open("GET",this._url),e.send()},i.prototype.load=function(t){if(null==t)throw new Error("A callback is required");
this._callback=t,this.requestCC(),e.dlog(1,"Sent request to get the close captions info")},i.prototype.getCCInfo=function(){return this._ccInfo},i.prototype.onCCError=function(){var t="Error geting captions from "+this._url;return e.log(t),this._callback(t)},i.prototype.onCCLoad=function(i){e.dlog(2,"Close Captions Info received");var r=null;if(200!==i.target.status||i.target.status>299)return r="HTTP error "+i.target.status+" retrieving close captions from "+this._url,e.log(r),this._callback(r);
switch(this.ccType()){case t:this._ccInfo=new e.Ttml(i.target.responseText).parse();break;case n:throw new Error("VTT parsing not implemented yet")}return null===this._ccInfo?(r="Error parsing the close captions info",e.log(r),this._callback(r)):this._callback(r,this._ccInfo)},e.CloseCaptionsLoader=i}(),function(){function t(e){return e}function n(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,n=t.exec(e);return n?3600*parseFloat(n[2]||0)+60*parseFloat(n[4]||0)+parseFloat(n[6]||0):parseFloat(e)
}function i(e,t,n){var i=[];if(null==n)return i;for(var r=n.firstElementChild;null!=r;r=r.nextElementSibling)r.nodeName==e&&i.push(t(r));return i}function r(e,t,n){return i(e,t,n)[0]||null}function s(e,t,n){n=n||{};for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));return n}function a(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1}function o(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=parseInt(t[1]),i=parseInt(t[2]);
return{"start":n,"end":i,"length":i-n+1}}function l(e){return s(x,e)}function u(e){return e.textContent}function c(e){return o(e.attributes.range.value)}function d(e){var t=s(S,e);return t.initialization=r("Initialization",c,e),t}function h(e){return s(k,e)}function p(e){var t=d(e);return t.durationSeconds=t.timescale&&t.duration?t.duration/t.timescale:t.duration,t.segmentURLs=i("SegmentURL",l,e),t}function f(e){var t=s(_,e);return t.baseURLs=i("BaseURL",u,e),t.segmentBase=r("SegmentBase",d,e),t.segmentList=r("SegmentList",p,e),t.contentProtection=r("ContentProtection",C,e),t
}function m(e){var t=f(e);return s(T,e,t),t}function g(e){var t=f(e);t.representations=i("Representation",m,e),t.segmentTemplate=r("SegmentTemplate",h,e);for(var n=0;n<t.representations.length;n++)t.representations[n].segmentTemplate=t.segmentTemplate;return t}function v(e){var t=f(e);return s(M,e,t),t.adaptationSets=i("AdaptationSet",g,e),t}function y(e){var t={};return s({"mediaPresentationDuration":n},e,t),t.periods=i("Period",v,e),t.baseURLs=i("BaseURL",u,e),t}function b(e,t){e.manifestURL=t,e.duration=e.mediaPresentationDuration,delete e.mediaPresentationDuration,e.adaptationSets=e.periods[0].adaptationSets,delete e.periods;
for(var n=0;n<e.adaptationSets.length;n++)e.adaptationSets[n].mimeType?(e.adaptationSets[n].mime=e.adaptationSets[n].mimeType,delete e.adaptationSets[n].mimeType):e.adaptationSets[n].mime=e.adaptationSets[n].representations[0].mimeType,e.adaptationSets[n].codecs||(e.adaptationSets[n].codecs=e.adaptationSets[n].representations[0].codecs);return e}function w(e,t){var n=new DOMParser,i=n.parseFromString(e,"text/xml");return b(y(i.firstChild),t)}var x={"media":t,"mediaRange":o,"index":t,"indexRange":o},S={"timescale":parseInt,"duration":parseInt,"indexRange":o,"presentationTimeOffset":parseInt,"startNumber":parseInt},k={"timescale":parseInt,"duration":parseInt,"initialization":t,"media":t,"startNumber":parseInt},C=function(e){var t=e.attributes.schemeIdUri;
if(!t||"http://youtube.com/drm/2012/10/10"!=t.textContent)return null;for(var n={},i=e.firstElementChild;null!=i;i=i.nextElementSibling)if("yt:SystemURL"==i.nodeName){var r=i.attributes.type.textContent;n[r]=i.textContent}return n},_={"id":t,"profiles":t,"width":parseInt,"height":parseInt,"frameRate":a,"audioSamplingRate":parseInt,"mimeType":t,"codecs":t},T={"bandwidth":parseInt,"qualityRanking":parseInt},M={"id":parseInt,"start":n,"duration":n};e.parseDASHManifest=w}(),function(){function t(e){for(var t=new DataView(e),n=0;n<e.byteLength;){var i=t.getUint32(n+4,!1);
if(1936286840==i||1836019558==i)break;n+=t.getUint32(n,!1)}return new Uint8Array(e.slice(0,n))}function n(e,t){for(var n=new DataView(e),i=0;1936286840!=n.getUint32(i+4,!1);)if(i+=n.getUint32(i,!1),i>=e.byteLength)throw"Could not find sidx";var r=n.getUint32(i,!1)+i;if(r>e.byteLength)throw"sidx terminates after array buffer";var s=n.getUint8(i+8);i+=12;var a=n.getUint32(i+4,!1);i+=8;var o,l;0==s?(o=n.getUint32(i,!1),l=n.getUint32(i+4,!1),i+=8):(o=(n.getUint32(i,!1)<<32)+n.getUint32(i+4,!1),l=(n.getUint32(i+8,!1)<<32)+n.getUint32(i+12,!1),i+=16),l+=r+(t||0);
var u=n.getUint16(i+2,!1);i+=4;for(var c=l,d=o,h=[],p=0;u>p;p++){var f=n.getUint32(i,!1),m=2147483648&f;if(m)throw"Unhandled indirect reference";f=2147483647&f;var g=n.getUint32(i+4,!1);i+=12,h.push({"size":f,"offset":c,"duration":g/a,"time":d/a}),c+=f,d+=g}if(i!=r)throw"Error: final pos "+i+" differs from SIDX end "+r;return h}window.ArrayBuffer&&!window.ArrayBuffer.prototype.slice&&(window.ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);null==t&&(t=n.length);for(var i=new ArrayBuffer(t-e),r=new Uint8Array(i),s=0;s<r.length;s++)r[s]=n[s+e];
return i}),e.extractInit=t,e.parseSIDX=n}(),function(){function t(e){return e}function n(e){for(var t=new ArrayBuffer(e.length/2),n=new Uint8Array(t),i=0;i<e.length;i+=2)n[i/2]=parseInt(e.substr(i,2),16);return n}function i(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t}function r(e){return n(e.replace(/[{}-]/g,""))}function s(e,t,n){var i=[];if(null==n)return i;for(var r=n.firstElementChild;null!=r;r=r.nextElementSibling)r.nodeName==e&&i.push(t(r));return i}function a(e,t,n){n=n||{};
for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));return n}function o(t){var n={},r=t.split("00000001");return 3!==r.length?(t||(e.log("Warning, Audio codec private data is not specified."),t="1210"),n=i(t)):(n.SPS=i(r[1]),n.PPS=i(r[2])),n}function l(t){return"AACL"==t?"mp4a.40.2":"H264"==t||"AVC1"==t?"avc1.4d40":(e.log("Warning, unsupported FourCC encountered: "+t),"")}function u(e){var t={};return a({"Bitrate":parseInt},e,t),a({"CodecPrivateData":o},e,t),a({"MaxWidth":parseInt},e,t),a({"MaxHeight":parseInt},e,t),a({"FourCC":l},e,t),t
}function c(e){var t={};return a({"Bitrate":parseInt},e,t),a({"CodecPrivateData":o},e,t),a({"SamplingRate":parseInt},e,t),a({"Channels":parseInt},e,t),a({"BitsPerSample":parseInt},e,t),a({"PacketSize":parseInt},e,t),a({"FourCC":l},e,t),t}function d(e){var t=[];if(null==e)return t;for(var n=-1,i=e.firstElementChild;null!=i;i=i.nextElementSibling)if("c"==i.nodeName){var r={};if(-1==n&&(n=null!=i.attributes.getNamedItem("t")?parseInt(i.attributes.t.value):0),r.time=n/1e7,r.timeURL=n,null==i.attributes.getNamedItem("d"))throw"Expected attribute 'd' not found";
var s=parseInt(i.attributes.d.value);r.duration=s/1e7,r.durationURL=s,n+=s,t.push(r)}return t}function h(e){var n={};return a({"Type":t},e,n),a({"Url":t},e,n),"video"===n.Type?n.QualityLevels=s("QualityLevel",u,e):"audio"==n.Type&&(n.QualityLevels=s("QualityLevel",c,e)),n.Fragments=d(e),n}function p(e,t){for(var n=[],i=[],r=!1,s=!1,a=e.length-1;a>=0&&(s||"video"!==e[a].Type||(i.push(a),s=!0),r||"audio"!==e[a].Type||(i.push(a),r=!0),!s||!r);a--);for(var a=0;a<e.length;a++)if(-1!==i.indexOf(a)){var o={};
switch(o.contentProtection=null,e[a].Type){case"audio":o.mime="audio/mp4";break;case"video":o.mime="video/mp4"}if(e[a].QualityLevels){o.representations=[];for(var l=0;l<e[a].QualityLevels.length;l++){var u={};switch(u.bandwidth=e[a].QualityLevels[l].Bitrate,u.baseURLs=[],u.baseURLs[0]=e[a].Url,u.segmentBase=null,u.segs=e[a].Fragments,e[a].Type){case"audio":u.codecs=e[a].QualityLevels[l].FourCC,u.audio_codec_private_data=e[a].QualityLevels[l].CodecPrivateData,u.audio_sample_rate=e[a].QualityLevels[l].SamplingRate;
break;case"video":u.codecs=e[a].QualityLevels[l].FourCC+e[a].QualityLevels[l].CodecPrivateData.SPS[3].toString(16).toLowerCase(),u.sps=e[a].QualityLevels[l].CodecPrivateData.SPS,u.pps=e[a].QualityLevels[l].CodecPrivateData.PPS,u.width=e[a].QualityLevels[l].MaxWidth,u.height=e[a].QualityLevels[l].MaxHeight}o.representations.push(u)}o.codecs=o.representations[0].codecs}t&&(o.contentProtection=t),n.push(o)}return n}function f(e){for(var t=atob(e.trim()),n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);
return{"ab":n,"u8":i}}function m(e){for(var t=0,n=[],i=[],r=new Uint16Array(e),s=e.byteLength/2;s>t&&(0===n.length||0===i.length);){for(;s>t&&60!==r[t];)t++;if(75===r[t+1]&&73===r[t+2]&&68===r[t+3]&&62===r[t+4])for(t+=5;s>t&&60!==r[t];)n.push(r[t]),t++;else if(76===r[t+1]&&65===r[t+2]&&95===r[t+3]&&85===r[t+4]&&82===r[t+5]&&76===r[t+6]&&62===r[t+7])for(t+=8;s>t&&60!==r[t];)i.push(r[t]),t++;else t++}return{"kid":String.fromCharCode.apply(null,n),"url":String.fromCharCode.apply(null,i)}}function g(e){var t={};
a({"SystemID":r},e,t);var n=f(e.textContent),i=m(n.ab);return t.KID=f(i.kid).u8,t.url=i.url,t.PrHeader=n.u8,t}function v(e){var t={};return t.ProtectionHeader=s("ProtectionHeader",g,e)[0],t}function y(e){var t={};a({"TimeScale":parseInt},e,t),t.TimeScale||(t.TimeScale=1e7),a({"Duration":parseInt},e,t),t.StreamIndexes=s("StreamIndex",h,e);var n=s("Protection",v,e);n&&n[0]&&(t.Protection=n[0]),t.duration=t.Duration/t.TimeScale;var i;return t.Protection&&(i={},i.playready=t.Protection.ProtectionHeader.url?t.Protection.ProtectionHeader.url:"http://playready.directtaps.net/pr/svc/rightsmanager.asmx"),t.adaptationSets=p(t.StreamIndexes,i),t.Protection&&(t.pr={},t.pr.systemId=t.Protection.ProtectionHeader.SystemID,t.pr.prHeader=t.Protection.ProtectionHeader.PrHeader,t.pr.ivsize=8,t.pr.kid=t.Protection.ProtectionHeader.KID),t
}function b(t,n){return t.manifestURL=n,t.type=e.StreamingType.SMOOTH_STREAMING,t}function w(e,t){for(var n,i=new DOMParser,r=i.parseFromString(e,"text/xml"),s=0;s<r.childNodes.length;s++)if("SmoothStreamingMedia"===r.childNodes[s].nodeName){n=r.childNodes[s];break}return b(y(n),t)}e.parseSSManifest=w}(),function(){function t(e,t,n){e.setUint32(t,n)}function n(e,t,n){for(var i=0;4>i;i++)e.setUint8(t+4+i,n.charCodeAt(i));return 8}function i(e,t,n,i,r){return n.set(r,i),i+r.length}function r(e,i,r,s,a,o){var l=s;
return s+=n(i,s,a),o&&(s=o(e,i,r,s)),t(i,l,s-l),s}function s(e,t,n,s,a,o){return r(e,t,n,s,a,function(e,t,n,r){return i(e,t,n,r,o)})}function a(e,t,n,i){return s(e,t,n,i,"smhd",[0,0,0,0,0,0,0,0])}function o(e,t,n,i){return s(e,t,n,i,"vmhd",[0,0,0,1,0,0,0,0,0,0,0,0])}function l(e,t,n,s){return r(e,t,n,s,"esds",function(e,t,n,r){var s=e.audio_codec_private_data[0],a=e.audio_codec_private_data[1];return r=i(e,t,n,r,[0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s,a,6,1,2])})}function u(e,t,n,s){return r(e,t,n,s,"avcC",function(e,t,n,r){return r=i(e,t,n,r,[1,77,64,30,255,225]),t.setUint16(r,e.sps.length),r+=2,r=i(e,t,n,r,e.sps),t.setUint8(r,1),r+=1,t.setUint16(r,e.pps.length),r+=2,r=i(e,t,n,r,e.pps)
})}function c(e,t,n){for(var i=n-t+1,r=0,s=t;t+i/2>s;s++)r=e[s],e[s]=e[n-s+t],e[n-s+t]=r}function d(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);return n.set(e),c(n,0,3),c(n,4,5),c(n,6,7),n}function h(e,t,n,s){return r(e,t,n,s,"tenc",function(e,t,n,r){r=i(e,t,n,r,[0,0,0,0,0,0,1]),t.setUint8(r,e.pr.ivsize),r++;var s=d(e.pr.kid);return r=i(e,t,n,r,s)})}function p(e,t,n,i){return r(e,t,n,i,"schi",function(e,t,n,i){return i=h(e,t,n,i)})}function f(e,t,n,i){return s(e,t,n,i,"schm",[0,0,0,0,99,101,110,99,0,1,0,0])
}function m(e,t,n,i){return"audio/mp4"!==e.mime?s(e,t,n,i,"frma",[97,118,99,49]):s(e,t,n,i,"frma",[109,112,52,97])}function g(e,t,n,i){return r(e,t,n,i,"sinf",function(e,t,n,i){return i=m(e,t,n,i),i=f(e,t,n,i),i=p(e,t,n,i)})}function v(e,t,n,s,a){return r(e,t,n,s,a,function(e,t,n,r){var s=e.audio_sample_rate>>8&255,o=255&e.audio_sample_rate;return r=i(e,t,n,r,[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,s,o,0,0]),r=l(e,t,n,r),"enca"===a&&(r=g(e,t,n,r)),r})}function y(e,t,n,s,a){return r(e,t,n,s,a,function(e,t,n,r){return r=i(e,t,n,r,[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.setUint16(r,e.width),r+=2,t.setUint16(r,e.height),r+=2,r=i(e,t,n,r,[0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),r=u(e,t,n,r),"encv"===a&&(r=g(e,t,n,r)),r
})}function b(e,t,n,s){return r(e,t,n,s,"stsd",function(e,t,n,r){return r=i(e,t,n,r,[0,0,0,0,0,0,0,1]),"audio/mp4"!==e.mime?(e.pr&&(r=y(e,t,n,r,"encv")),r=y(e,t,n,r,"avc1")):(e.pr&&(r=v(e,t,n,r,"enca")),r=v(e,t,n,r,"mp4a")),r})}function w(e,t,n,s){return r(e,t,n,s,"stbl",function(e,t,n,r){return r=b(e,t,n,r),r="audio/mp4"!==e.mime?i(e,t,n,r,[0,0,0,16,115,116,116,115,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,99,0,0,0,0,0,0,0,0,0,0,0,16,115,116,99,111,0,0,0,0,0,0,0,0,0,0,0,20,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,115,0,0,0,0,0,0,0,0]):i(e,t,n,r,[0,0,0,16,115,116,116,115,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,99,0,0,0,0,0,0,0,0,0,0,0,16,115,116,99,111,0,0,0,0,0,0,0,0,0,0,0,20,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,0])
})}function x(e,t,n,i){return s(e,t,n,i,"url ",[0,0,0,1])}function S(e,t,n,s){return r(e,t,n,s,"dref",function(e,t,n,r){return r=i(e,t,n,r,[0,0,0,0,0,0,0,1]),r=x(e,t,n,r)})}function k(e,t,n,i){return r(e,t,n,i,"dinf",function(e,t,n,i){return i=S(e,t,n,i)})}function C(e,t,n,i){return r(e,t,n,i,"minf",function(e,t,n,i){return i=k(e,t,n,i),i=w(e,t,n,i),i="audio/mp4"!==e.mime?o(e,t,n,i):a(e,t,n,i)})}function _(e,t,n,i){return"audio/mp4"!==e.mime?s(e,t,n,i,"hdlr",[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]):s(e,t,n,i,"hdlr",[0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])
}function T(e,t,n,i){return s(e,t,n,i,"mdhd",[0,0,0,0,204,96,118,241,204,96,118,241,0,152,150,128,0,0,0,0,85,196,0,0])}function M(e,t,n,i){return r(e,t,n,i,"mdia",function(e,t,n,i){return i=T(e,t,n,i),i=_(e,t,n,i),i=C(e,t,n,i)})}function A(e,t,n,s){return r(e,t,n,s,"tkhd",function(e,t,n,r){return r=i(e,t,n,r,[0,0,0,3,204,96,118,241,204,96,118,241,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0]),t.setUint32(r,e.width),r+=4,t.setUint32(r,e.height),r+=4,t.setUint16(r,0),r+=2
})}function I(e,t,n,i){return r(e,t,n,i,"trak",function(e,t,n,i){return i=A(e,t,n,i),i=M(e,t,n,i)})}function P(e,t,n,i){return s(e,t,n,i,"trex",[0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])}function E(e,t,n,i){return r(e,t,n,i,"mvex",function(e,t,n,i){return i=P(e,t,n,i)})}function D(e,t,n,s){return r(e,t,n,s,"pssh",function(e,t,n,r){return r=i(e,t,n,r,[0,0,0,0]),r=i(e,t,n,r,e.pr.systemId),t.setUint32(r,e.pr.prHeader.length),r+=4,r=i(e,t,n,r,e.pr.prHeader)})}function L(e,t,n,i){return s(e,t,n,i,"mvhd",[0,0,0,0,204,96,118,241,204,96,118,241,0,152,150,128,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2])
}function R(e,t,n,i){return r(e,t,n,i,"moov",function(e,t,n,i){return i=L(e,t,n,i),e.pr&&(i=D(e,t,n,i)),i=E(e,t,n,i),i=I(e,t,n,i)})}function B(e){var t=new ArrayBuffer(2e4),n=new DataView(t),i=new Uint8Array(t),r=0,s=0;r=R(e,n,i,r),s=r-1;var a={};return a.data=t.slice(0,r),a.init={},a.init.start=0,a.init.end=s,a}function N(e,t,n){for(var i=0,r=t,s=0;4>s;s++)i<<=8,i+=n.charCodeAt(s);for(;e.getUint32(r+4,!1)!=i;)if(r+=e.getUint32(r),r>=e.byteLength)throw"Could not find box: "+n;return r}function O(e,t){var n=N(e,t,"traf");
n=N(e,n+8,"tfhd"),e.setUint32(n+12,1)}function V(e,t,n,i){var r=N(e,t,n),s=e.getUint32(r);return e.setUint32(r,s+i),r}function j(e,t,n){var i=0;if(i=V(e,i,"moof",t),i=V(e,i+8,"traf",t),i=N(e,i+8,"trun"),1&e.getUint32(i+8)){var r=i+16;e.setUint32(r,n)}return i}function H(e,t,n){var i=0;if(i=V(e,i,"moof",t),i=V(e,i+8,"traf",t),i=N(e,i+8,"trun"),1&e.getUint32(i+8)){var r=i+16,s=e.getUint32(r);e.setUint32(r,s+n)}return i}function z(e,t){var n=[0,0,0,20,116,102,100,116,1,0,0,0],i=n.length+8,r=new ArrayBuffer(e.byteLength+i),s=(new Uint8Array(e),new DataView(e)),a=new Uint8Array(r),o=new DataView(r),l=0;
return O(s,8),l=H(s,i,i),a.set(new Uint8Array(e,0,l)),a.set(n,l),o.setUint32(l+12,t/4294967295&4294967295),o.setUint32(l+16,4294967295&t),a.set(new Uint8Array(e,l,e.byteLength-l),l+i),r}function U(e,t,n,i,r){if(!r)return new Uint8Array(0);for(var s=new Uint8Array(n),a=0,o=0,l=t,u=0;n>u;u++)a=e.getUint16(l+i),o=i+2+6*a,s[u]=o,l+=o;return s}function F(e,t,n,s,a,o){return r(e,t,n,s,"mdat",function(e,t,n,r){return r=i(e,t,n,r,a),r=i(e,t,n,r,o)})}function q(e,t,n,s){return r(e,t,n,s,"saio",function(e,t,n,r){r=i(e,t,n,r,[0,0,0,0,0,0,0,1]);
var s=r+4+8;return t.setUint32(r,s),r+=4})}function $(e,t,n,s,a,o,l,u){return r(e,t,n,s,"saiz",function(e,t,n,r){return r=l?i(e,t,n,r,[0,0,0,0,0]):i(e,t,n,r,[0,0,0,0,u]),t.setUint32(r,a),r+=4,n.set(o,r),r+=o.length})}function W(e){var t=new DataView(e),n=0,i=0,r=0,s=t.getUint32(n);n=N(t,n+8,"traf"),n=N(t,n+8,"trun"),i=t.getUint32(n+12),n=N(t,n,"uuid");var a=t.getUint8(n+27),o=!1;if(2!==a&&0!==a)throw"uuid flags expected is 0x02 or 0x00 but found: "+a;2===a&&(o=!0);var l=t.getUint32(n+28);if(i!==l)throw"Samples count does not match "+i+" "+l;
var u=t.getUint32(n);r=u-32;var c=200,d=new ArrayBuffer(e.byteLength+c),h=new Uint8Array(d),p=new DataView(d);h.set(new Uint8Array(e,0,n));var f=n,m=8,g=n+32,v=n+u,y=t.getUint32(v),b=U(t,g,i,m,o);if(f=$(null,p,h,f,i,b,o,m),f=q(null,p,h,f),o){for(var w=0,x=0;x<b.length;x++)w+=b[x];if(w!==r)throw"Samples size does not match "+w+" "+r}else if(m*i!==r)throw"Samples size does not match "+m*i+" "+r;var S=new Uint8Array(e,g,r),k=new Uint8Array(e,v+8,y-8),C=f-s,_=f;return f=F(null,p,h,f,S,k),j(p,C,_+8+r),new Uint8Array(d,0,f)
}function K(e,t,n){var i=z(e,t);return n?W(i):new Uint8Array(i)}e.abtohex=function(e){for(var t=[],n=0;n<e.byteLength;n++)t.push(e[n].toString(16));return t},e.abtob64=function(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e)))},e.createSSInit=B,e.process_traf=K}(),function(){function t(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function n(e){return String.fromCharCode.apply(String,e)}var i=function(e){this.video=e,!e.generateKeyRequest&&e.webkitGenerateKeyRequest&&(e.generateKeyRequest=e.webkitGenerateKeyRequest),!e.addKey&&e.webkitAddKey&&(e.addKey=e.webkitAddKey),this.initDataQueue=[],this.flavor=null,this.keySystem=null,this.licenseServerURL=null,e.generateKeyRequest&&e.addKey&&(e.addEventListener("needkey",this.onNeedKey.bind(this)),e.addEventListener("keymessage",this.onKeyMessage.bind(this)),e.addEventListener("keyerror",this.onKeyError.bind(this)),e.addEventListener("webkitneedkey",this.onNeedKey.bind(this)),e.addEventListener("webkitkeymessage",this.onKeyMessage.bind(this)),e.addEventListener("webkitkeyerror",this.onKeyError.bind(this)))
};i.kMime='video/mp4; codecs="avc1.640028"',i.kFlavorToSystem={"clearkey":["webkit-org.w3.clearkey","org.w3.clearkey"],"widevine":["com.widevine.alpha"],"playready":["com.youtube.playready","com.microsoft.playready"]},i.prototype.init=function(e,t){this.chooseFlavor(i.kMime,e,t),this.isClearKey="clearkey"==this.flavor},i.prototype.chooseFlavor=function(e,t,n){for(var r in t)if(!n||r==n){var s=i.kFlavorToSystem[r];if(s)for(var a in s)if(this.video.canPlayType(e,s[a]))return this.flavor=r,this.keySystem=s[a],void(this.licenseServerURL=t[r])
}throw"Could not find a compatible key system"},i.prototype.extractBMFFClearKeyID=function(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);n.set(e);for(var i=new DataView(t),r=0;r<t.byteLength;){var s=i.getUint32(r,!1),a=i.getUint32(r+4,!1);if(1886614376!=a)throw"Box type "+a.toString(16)+' not equal to "pssh"';if(1477738184==i.getUint32(r+12,!1)&&69420633==i.getUint32(r+16,!1)&&2464609580==i.getUint32(r+20,!1)&&1558758348==i.getUint32(r+24,!1)){var o=i.getUint32(r+28,!1);if(16!=o)throw"Unexpected KID size "+o;
return new Uint8Array(t.slice(r+32,r+32+o))}if(3991899049==i.getUint32(r+12,!1)&&2044086990==i.getUint32(r+16,!1)&&2747803612==i.getUint32(r+20,!1)&&3575456237==i.getUint32(r+24,!1))return new Uint8Array(t.slice(r+36,r+52));r+=s}return e},i.prototype.onNeedKey=function(t){if(e.dlog(2,"onNeedKey()"),!this.keySystem)throw"Not initialized! Bad manifest parse?";if(16==t.initData.length)return void e.log("Dropping non-BMFF needKey event");var n=t.initData;this.isClearKey&&(n=this.extractBMFFClearKeyID(t.initData)),this.video.generateKeyRequest(this.keySystem,n),this.initDataQueue.push(n)
},i.prototype.onKeyMessage=function(t){e.dlog(2,"onKeyMessage() Sending request: "+this.licenseServerURL+" "+t.sessionId);var n=this.initDataQueue.shift(),i=new XMLHttpRequest;i.open("POST",this.licenseServerURL),i.setRequestHeader("content-type","text/xml;charset=utf-8"),i.addEventListener("load",this.onLoad.bind(this,n,t.sessionId)),i.responseType="arraybuffer",i.send(t.message)},i.prototype.onKeyError=function(t){e.dlog(2,"onKeyError("+t.keySystem+", "+t.errorCode.code+", "+t.systemCode+")")},i.prototype.onLoad=function(i,r,s){if(e.dlog(2,"onLoad("+this.licenseServerURL+"): "+r),s.target.status<200||s.target.status>299)throw"Bad XHR status: "+s.target.statusText;
{var a=n(new Uint8Array(s.target.response)).split("\r\n").pop();this.video.addKey(this.keySystem,t(a),i,r)}},e.EMEManager=i}(),function(){var t=function(e,t,n,i,r,s,a){this.url=e,this.bandwidth=t,this.width=n,this.height=i,this.sps=r,this.pps=s,this.codecs=a,this.initFragment=null,this.initRequestData=null,this.indexRequestData=null,this.isInitialized=!1,this.segs=null};e.Representation=t}(),function(){var t={"ENOUGH":20},n=function(e,t,n,i,r,s){if(this.sourceBuffer_=t,this.sourceBuffer_.appendBuffer)this.appendBuffer_=this.sourceBuffer_.appendBuffer,this.sourceBuffer_.addEventListener("updateend",this.onUpdateEnd.bind(this));
else{if(!this.sourceBuffer_.append)throw new Error("Unknown SourceBuffer interface");this.appendBuffer_=this.sourceBuffer_.append}this.representations_=n,this.currentRep=0,this.segIndex=null,this.mime=i,this.resetReason=null,this.active=!0,this.type=r,this.pr_=s,this.seekingStartTime=null,this.mediaSrc_=e,this.bitrates=[];for(var a=0;a<this.representations_.length;a++)this.bitrates.push(this.representations_[a].bandwidth);this.deferredAppends_=[],this.segmentQueue=[],this.segmentSize=0,this.segmentLastEndTime=0,this.waitingForBuffer=!1,this.segmentTimeout=null
};n.prototype.getCurrentTime=function(){return window.googledash.player.getMediaElement().currentTime},n.prototype.updateBuffer=function(){var t=this.sourceBuffer_.buffered;if(t.length>0){var n=t.end(t.length-1)-this.segmentLastEndTime;e.dlog(3,"["+this.mime+"] Play head: "+this.getCurrentTime()+" Segment size: "+(this.segmentSize/1024/1024).toFixed(2)+" MB Segment duration: "+n),this.segmentQueue.push({"size":this.segmentSize,"duration":n,"offset":this.segmentLastEndTime})}},n.prototype.reset=function(t){e.dlog(1,"SourceBuffer["+this.mime+"] reset: "+t),this.segIndex=null,this.representations_[this.currentRep].isInitialized=!1,this.resetReason=t||null,this.active=!0,this.segmentQueue=[],this.segmentSize=0,this.segmentLastEndTime=0,this.waitingForBuffer=!1,null!=this.segmentTimeout&&clearTimeout(this.segmentTimeout),"open"==this.mediaSrc_.readyState&&this.sourceBuffer_.abort()
},n.prototype.isInitialized=function(){return this.representations_[this.currentRep].isInitialized},n.prototype.initialize=function(){this.representations_[this.currentRep].isInitialized=!0},n.prototype.updating=function(){return this.sourceBuffer_.updating},n.prototype.onUpdateEnd=function(){this.updateBuffer(),this.deferredAppends_.length>0&&(e.dlog(2,"SourceBuffer["+this.mime+"] appended deferred data"),this.append(this.deferredAppends_.pop()))},n.prototype.append=function(t){var n=this.sourceBuffer_.buffered;
if(this.segmentSize=t.length,this.segmentLastEndTime=0,n.length>0&&(this.segmentLastEndTime=n.end(n.length-1)),this.sourceBuffer_.updating){if(this.deferredAppends_.length<5)return e.dlog(2,"SourceBuffer["+this.mime+"] deferring append"),void this.deferredAppends_.push(t);e.log("SourceBuffer["+this.mime+"] too many deferrals, aborting"),this.deferredAppends_=[],this.appendBuffer_.abort()}this.appendBuffer_.call(this.sourceBuffer_,t),"appendBuffer"in this.sourceBuffer_||this.updateBuffer()},n.prototype.getCurrentRep=function(){return this.representations_[this.currentRep]
},n.prototype.changeQuality=function(t){if(t===this.currentRep)return!1;e.dlog(2,"Bandwitdth change sourceBuffer["+this.mime+"]: "+this.active),e.dlog(2,"bandwidthChange["+this.mime+"]: "+this.currentRep+" "+t);var n,i=this.representations_[this.currentRep].bandwidth,r=this.representations_[t].bandwidth;e.dlog(2,"bandwidthChange["+this.mime+"]: "+i+" "+r),n=i>r?"rep_down":"rep_up",this.reset(n),this.currentRep=t},n.prototype.getRangesString=function(){for(var e=this.sourceBuffer_.buffered,t="Ranges["+this.mime+"]:",n=0;n<e.length;n++)t+=" ["+e.start(n)+","+e.end(n)+"]";
return t},n.prototype.findRangeForPlaybackTime=function(e){for(var t=this.sourceBuffer_.buffered,n=0;n<t.length;n++)if(t.start(n)<=e&&t.end(n)>=e)return{"start":t.start(n),"end":t.end(n)};return null},n.prototype.getBufferSize=function(t){e.dlog(4,"Time: "+t+" Ranges in onProgress: "+this.getRangesString());var n=this.findRangeForPlaybackTime(t),i=n&&n.end||0;if(null!==this.segIndex){var r=this.representations_[this.currentRep].segs[this.segIndex].time;i=r>i?r:i}if(n){var s=Math.abs(n.end-i);s>.001&&e.dlog(2,"Difference in available data: "+n.end+" "+i)
}return i-t},n.prototype.findSegmentIndexForTime=function(t){for(var n=this.representations_[this.currentRep].segs,i=0;i<n.length;i++){var r=n[i];if(r.time<=t&&r.time+r.duration>=t)return i==n.length-1&&r.time+r.duration+.5<t?null:i}return e.dlog(5,"Could not find segment for time "+t),null},n.prototype.identifyNextFragment=function(n){var i=this.findRangeForPlaybackTime(n),r=i&&i.end||n;if(r>n+t.ENOUGH)return e.dlog(3,"Enough buffering currentTime in rage: "+this.mime+" "+n+"  "+r),null;if(1==this.waitingForBuffer)return null;
if(null==this.segIndex){if(e.dlog(4,"Non existing index, finding the index for the next request["+this.mime+"]"),this.segIndex=this.findSegmentIndexForTime(r),null===this.segIndex)return this.active=!1,null;e.dlog(4,"New Index["+this.mime+"]: "+r+" "+this.segIndex)}else{null==i&&e.log("Playback head outside of buffer in append-continue state.");var s=this.representations_[this.currentRep].segs[this.segIndex].time;if(s>n+t.ENOUGH)return e.dlog(3,"Enough buffering: "+this.mime+" "+this.segIndex+" "+n+"  "+s),null
}return r},n.prototype.appendData=function(t){for(e.dlog(2,"["+this.mime+"] Time is "+this.getCurrentTime()+", asked to add a "+(t.byteLength/1024/1024).toFixed(2)+" MB segment, see if we can."),this.segmentQueue.length>0&&e.dlog(2,"["+this.mime+"] End of first segment is "+(this.segmentQueue[0].offset+this.segmentQueue[0].duration).toFixed(2));this.segmentQueue.length>0&&this.segmentQueue[0].offset+this.segmentQueue[0].duration<this.getCurrentTime()+2;)e.dlog(2,"["+this.mime+"] Removing collectable segment."),this.segmentQueue.shift();
for(var n=0,i=0;i<this.segmentQueue.length;i++)n+=this.segmentQueue[i].size;e.dlog(2,"["+this.mime+"] Time is "+this.getCurrentTime()+" and there are "+(n/1024/1024).toFixed(2)+" MB uncollectable, bringing the proposed total to "+((n+t.byteLength)/1024/1024).toFixed(2)+" MB."),(n+t.byteLength)/1024/1024>24&&this.segmentQueue.length>0?(e.dlog(2,"["+this.mime+"] Waiting for buffer to have enough room."),this.waitingForBuffer=!0,this.segmentTimeout=setTimeout(function(){this.appendData(t)}.bind(this),1e3)):(this.reallyAppendData(t),this.waitingForBuffer=!1)
},n.prototype.reallyAppendData=function(t){e.dlog(3,"["+this.mime+"] Current Time: "+this.getCurrentTime()+" Ranges in appendData1: "+this.getRangesString());var n,i=this.representations_[this.currentRep].segs[this.segIndex].time,r=i+this.representations_[this.currentRep].segs[this.segIndex].duration;e.dlog(4,"Appending Response ["+this.mime+"] : ["+i+","+r+"]"),n=this.type===e.StreamingType.SMOOTH_STREAMING?process_traf(t,this.representations_[this.currentRep].segs[this.segIndex].timeURL,this.pr_):new Uint8Array(t),this.append(n),this.segIndex++,this.segIndex>=this.representations_[this.currentRep].segs.length&&(this.active=!1,e.dlog(2,"Source["+this.mime+"] is not active: "+this.segIndex+" "+this.representations_[this.currentRep].segs.length)),e.dlog(3,"Ranges in appendData2: "+this.getRangesString())
},e.SourceBufferManager=n}(),function(){var t=function(){this.mediaSrc_=null,this.sourceBufferManagers_=[],this.videoSrcBufIndex_=0,this.emeMgr_=null,this.type=null,this.pr,this.manifest_=null};t.prototype.getMediaSource=function(){return this.mediaSrc_},t.prototype.dispose=function(){null!=this.mediaSrc_&&(this.resetAll(),this.mediaSrc_=null,this.sourceBufferManagers_=[])},t.prototype.getSourceBufferCount=function(){return this.sourceBufferManagers_.length},t.prototype.getVideoSrcBufferIndex=function(){return this.videoSrcBufIndex_
},t.prototype.getLevel=function(e){return this.sourceBufferManagers_[e].currentRep},t.prototype.getSegIndex=function(e){return this.sourceBufferManagers_[e].segIndex},t.prototype.getCurrentRep=function(e){return this.sourceBufferManagers_[e].getCurrentRep()},t.prototype.getBufferSize=function(e,t){return this.sourceBufferManagers_[e].getBufferSize(t)},t.prototype.getLevel=function(e){return this.sourceBufferManagers_[e].currentRep},t.prototype.appendData=function(e,t){this.mediaSrc_&&"closed"!==this.mediaSrc_.readyState&&this.sourceBufferManagers_[e].appendData(t)
},t.prototype.append=function(e,t){this.mediaSrc_&&"closed"!==this.mediaSrc_.readyState&&this.sourceBufferManagers_[e].append(t)},t.prototype.isActive=function(e){return this.sourceBufferManagers_[e].active},t.prototype.isInitialized=function(e){return this.sourceBufferManagers_[e].isInitialized()},t.prototype.initialize=function(e){this.sourceBufferManagers_[e].initialize()},t.prototype.mime=function(e){return this.sourceBufferManagers_[e].mime},t.prototype.getBitrates=function(e){return this.sourceBufferManagers_[e].bitrates
},t.prototype.identifyNextFragment=function(e,t){return this.sourceBufferManagers_[e].identifyNextFragment(t)},t.prototype.resetAll=function(e){for(var t=0;t<this.sourceBufferManagers_.length;t++)this.sourceBufferManagers_[t].reset(e)},t.prototype.reset=function(e,t){this.sourceBufferManagers_[e].reset(t)},t.prototype.changeQuality=function(e,t){return this.sourceBufferManagers_[e].changeQuality(t)},t.prototype.endOfStream=function(){if(this.mediaSrc_&&"open"===this.mediaSrc_.readyState){for(var t=!1,n=0;n<this.sourceBufferManagers_.length;n++)if(this.sourceBufferManagers_[n].updating()){t=!0;
break}t||(e.log("Ending stream"),this.mediaSrc_.endOfStream())}},t.prototype.absolutizeURL=function(e,t){if(void 0===t&&(t=""),t.match(/^[a-z]*:\/\//))return t;var n;return n="/"==t[0]?e.match(/^[a-z]*:\/\/[^\/]*/)[0]:e.replace(/\/[^\/]*$/,"/"),n+t},t.prototype.displaySourceBuffers=function(t){for(var n=0;n<this.mediaSrc_.sourceBuffers.length;n++){var i=this.mediaSrc_.sourceBuffers[n];e.dlog(5,t+" SourceBuffer["+i.mime+"]: "+i.active)}},t.prototype.normalizeRepresentation=function(t){var n={"url":this.absolutizeURL(this.manifest_.manifestURL,t.baseURLs[0]),"bandwidth":t.bandwidth,"width":t.width,"height":t.height,"sps":t.sps,"pps":t.pps,"audio_codec_private_data":t.audio_codec_private_data,"audio_sample_rate":t.audio_sample_rate};
if(this.type===e.StreamingType.SMOOTH_STREAMING)return n.segs=t.segs,n;var i=null;if(null!=t.segmentList){i=t.segmentList.initialization,n.segs=[];for(var r=0;r<t.segmentList.segmentURLs.length;r++){var s=t.segmentList.segmentURLs[r],a={"start":s.mediaRange.start,"end":s.mediaRange.end,"index":s.indexRange&&s.indexRange.end||null,"time":t.segmentList.durationSeconds*r,"duration":t.segmentList.durationSeconds,"subsegments":null};n.segs.push(a)}}else if(null!=t.segmentTemplate){n.segs=[];var o=t.segmentTemplate.duration/t.segmentTemplate.timescale,a={"url":n.url+t.segmentTemplate.initialization.replace("$RepresentationID$",t.id)};
n.segs.push(a);for(var l=0;l*o<this.manifest_.duration;l++){var a={"start":-1,"end":-1,"index":null,"time":l*o,"duration":o,"subsegments":null,"url":n.url+t.segmentTemplate.media.replace("$RepresentationID$",t.id).replace("$Number$",l)};n.segs.push(a)}}else{var a={"start":null,"end":null,"index":null,"time":0,"duration":this.manifest_.duration,"subsegments":null};if(null!=t.segmentBase){var s=t.segmentBase;i=s.initialization,null!=s.indexRange&&(n.indexRequestData=s.indexRange)}n.segs=[a]}return this.type!==e.StreamingType.SMOOTH_STREAMING&&(n.initRequestData={"start":i&&i.start||0,"end":i&&i.end||n.segs[0].index||null}),n
},t.prototype.onSourceOpen=function(t,n,i){e.dlog(2,"onSourceOpen()");var r,s,a,o;if(this.mediaSrc_.sourceBuffers.length)for(e.dlog(2,"onSourceOpen(): Target already has buffers, bailing."),a=0;a<this.mediaSrc_.sourceBuffers.length;a++)this.mediaSrc_.sourceBuffers[a].active=!0;else{for(this.mediaSrc_.duration=this.manifest_.duration,this.sourceBufferManagers_=[],this.emeMgr_=new e.EMEManager(t),this.type=this.manifest_.type,this.pr=this.manifest_.pr,a=0;a<this.manifest_.adaptationSets.length;a++)if(o=this.manifest_.adaptationSets[a],!(o.mime&&o.mime.indexOf("webm")>=0)){o.contentProtection&&this.emeMgr_.init(o.contentProtection,options.flavor),r=o.representations.map(this.normalizeRepresentation.bind(this)),s=this.mediaSrc_.addSourceBuffer(o.mime+'; codecs="'+o.codecs+'"'),e.dlog(2,"Buffer added properly: "+(this.mediaSrc_.sourceBuffers[a]===s));
var l=new e.SourceBufferManager(this.mediaSrc_,s,r,o.mime,this.type,this.pr);o.mime.indexOf("video")>=0&&(this.videoSrcBufIndex_=a),this.sourceBufferManagers_.push(l),e.dlog(2,"onSourceOpen. Initialized SourceBuffer["+o.mime+"]")}i()}},t.prototype.isSupported=function(){return null==window.MediaSource&&null==window.WebKitMediaSource?!1:(null==window.MediaSource&&(window.MediaSource=window.WebKitMediaSource),!0)},t.prototype.init=function(){this.mediaSrc_=new MediaSource},t.prototype.attach=function(e,t,n,i){if(!this.mediaSrc_)throw new Error("MediaSourceManager has not been initialized, please call init()");
this.manifest_=t,this.mediaSrc_.addEventListener("sourceopen",this.onSourceOpen.bind(this,e,n,i)),this.mediaSrc_.addEventListener("webkitsourceopen",this.onSourceOpen.bind(this,e,n,i)),e.src=window.URL.createObjectURL(this.mediaSrc_)},e.MediaSourceManager=t}(),function(){var t=0,n=1,i=function(e){if(null==e)throw new Error("A url for the manifest is required");this.url_=e,this.callback_=null,this.manifest_=null};i.prototype.load=function(t){if(null==t)throw new Error("A callback is required");this.callback_=t,this.requestManifest_(),e.dlog(1,"Sent request to get the manifest")
},i.prototype.getManifest=function(){return this.manifest_},i.prototype.manifestType_=function(){return-1!=this.url_.lastIndexOf(".mpd")?t:n},i.prototype.requestManifest_=function(){var e=new XMLHttpRequest;e.addEventListener("load",this.onManifestLoad_.bind(this)),e.addEventListener("error",this.onManifestError_.bind(this)),e.open("GET",this.url_),e.send()},i.prototype.onManifestError_=function(){var t="Error retrieving manifest from "+this.url_;return e.log(t),this.callback_(t)},i.prototype.onManifestLoad_=function(i){e.dlog(2,"Manifest received");
var r=null;if(i.target.status<200||i.target.status>299)return r="HTTP error "+i.target.status+" retrieving manifest from "+this.url_,e.log(r),this.callback_(r);switch(this.manifestType_()){case t:this.manifest_=e.parseDASHManifest(i.target.responseText,this.url_);break;case n:this.manifest_=e.parseSSManifest(i.target.responseText,this.url_)}return null===this.manifest_?(r="Error parsing the manifest",e.log(r),this.callback_(r)):this.callback_(r,this.manifest_)},e.ManifestLoader=i}(),function(){var t=.99,n=.98,i=5e5,r=5e5,s=function(e,t,n){this.bitrates_=e,this.levelCount_=this.bitrates_.length,this.algorithm_=t||"adaptive",this.cooldownPeriod_=2,n&&(this.level_=parseInt(n))
};s.prototype.onBandwithTracking=function(s){var a=s.target;if(null!=a.lastTime&&s.timeStamp!=a.lastTime){var o=8e3*(s.loaded-a.lastSize)/(s.timeStamp-a.lastTime);i=t*i+(1-t)*o,r=n*r+(1-n)*o}a.lastTime=s.timeStamp,a.lastSize=s.loaded,e.dlog(5,"Calculated bandwidth: "+i+" "+r)},s.prototype.adapt=function(t){if(!this.bitrates_||this.bitrates_.length<=1)return-1;var n=-1;if("fixed"===this.algorithm_)n=this.level_;else if("random"===this.algorithm_)Math.random()>.5&&(n=Math.floor(Math.random()*this.levelCount_));
else if("adaptive"===this.algorithm_)if(this.cooldownPeriod_)this.cooldownPeriod_--;else{var s=0,a=0,o=.85,l=Math.min(i,r);e.dlog(5,"Calculated Bandwidth: "+l+" globalSlowBandwidth: "+i+" globalFastBandwidth: "+r);for(var u=0;u<this.bitrates_.length;u++){var c=this.bitrates_[u];c>s&&o*l-128e3>c&&(s=c,a=u)}if(a!==t)return e.dlog(2,"Selected new rate "+s+" for bandwidth "+l+" (from "+i+", "+r+")"),this.cooldownPeriod_=8,a}return t!==n&&-1!==n?(e.dlog(2,"Selected new bitrate level: "+n),n):-1},e.AdaptiveManager=s
}(),function(){var t=function(e,t,n){this.mediaSrcMgr_=e,this.bufferIndex_=t,this.adaptiveManager_=n,this.fragmentRequest_=null};t.prototype.appendInit=function(){e.dlog(2,"Appending init ["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]: "+this.mediaSrcMgr_.getLevel(this.bufferIndex_)),this.mediaSrcMgr_.initialize(this.bufferIndex_),this.mediaSrcMgr_.append(this.bufferIndex_,this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment)},t.prototype.onXHRAbort=function(){e.log("Received abort of XHR.")
},t.prototype.onXHRError=function(t){return this.fragmentRequest_!==t.target?void e.log("Received error of untracked XHR."):(e.log("Received error of XHR."),void(this.fragmentRequest_=null))},t.prototype.onXHRLoad=function(t){this.fragmentRequest_!==t.target&&e.log("Error, HTTP response for unknown request");var n=this.fragmentRequest_;return this.fragmentRequest_=null,n.readyState==n.DONE?n.status>=300?void e.log("HTTP Request failure, status="+n.status):(n.is_index&&(e.dlog(2,"Index Response"),this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs=e.parseSIDX(n.response,n.startByte)),n.is_init?(e.dlog(2,"Init Response"),this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment=e.extractInit(n.response),void(this.mediaSrcMgr_.isInitialized(this.bufferIndex_)||this.appendInit())):void this.mediaSrcMgr_.appendData(this.bufferIndex_,n.response)):void 0
},t.prototype.cancelRequests=function(){null!=this.fragmentRequest_&&(this.fragmentRequest_.abort(),this.fragmentRequest_=null)},t.prototype.makeSSXHR=function(){var t=new XMLHttpRequest,n=this.mediaSrcMgr_.getSegIndex(this.bufferIndex_),i=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).url,r=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).bandwidth,s=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[n].timeURL;if(i=i.replace("{bitrate}",r),i=i.replace("{start time}",s),t.open("GET",i),t.responseType="arraybuffer",t.addEventListener("load",this.onXHRLoad.bind(this)),t.addEventListener("error",this.onXHRError.bind(this)),t.addEventListener("abort",this.onXHRAbort.bind(this)),null==i)throw"Null URL";
return t.is_init=!1,t.is_index=!1,t.lastTime=null,t.lastSize=null,t.addEventListener("progress",this.adaptiveManager_.onBandwithTracking.bind(this.adaptiveManager_)),t.send(),e.dlog(2,"Sent XHR: url="+i),t},t.prototype.makeXHR=function(t){var n,i,r=new XMLHttpRequest,s=this.mediaSrcMgr_.getSegIndex(this.bufferIndex_),a=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_),o=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).url,l=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[s],u=!1;null==s&&(s=0),null!=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[s].url&&(o=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[s].url),t?(n=0,i=a.initRequestData.end,null!=a.indexRequestData&&(i=a.indexRequestData.end,u=!0)):(n=l.offset,i=l.offset+l.size-1);
var c=null;null!=n&&null!=i&&(c="bytes="+n+"-"+i);var d=!!/youtube.com/.exec(o);if(c&&d&&(o=o.replace(/&range=[^&]*/,""),o+="&range="+c.substring(6)),r.open("GET",o),r.responseType="arraybuffer",r.startByte=n,null==c||d||r.setRequestHeader("Range",c),r.addEventListener("load",this.onXHRLoad.bind(this)),null==o)throw"Null URL";return r.is_init=t,r.is_index=u,r.lastTime=null,r.lastSize=null,r.addEventListener("progress",this.adaptiveManager_.onBandwithTracking.bind(this.adaptiveManager_)),r.send(),e.dlog(2,"Sent XHR: url="+o+", range="+c),r
},t.prototype.findRangeForPlaybackTime=function(e,t){for(var n=e.buffered,i=0;i<n.length;i++)if(n.start(i)<=t&&n.end(i)>=t)return{"start":n.start(i),"end":n.end(i)}},t.prototype.initFragmentRequestNeeded=function(){if(null==this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment){e.dlog(2,"Creating Init segment["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]");var t=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_);if(this.mediaSrcMgr_.type===e.StreamingType.SMOOTH_STREAMING){var n={"pps":t.pps,"sps":t.sps,"width":t.width,"height":t.height,"mime":this.mediaSrcMgr_.mime(this.bufferIndex_),"pr":this.mediaSrcMgr_.pr,"audio_codec_private_data":t.audio_codec_private_data,"audio_sample_rate":t.audio_sample_rate},i=e.createSSInit(n);
return this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment=e.extractInit(i.data),this.appendInit(),!1}return this.fragmentRequest_=this.makeXHR(!0),!0}return this.mediaSrcMgr_.isInitialized(this.bufferIndex_)||this.appendInit(),!1},t.prototype.requestNextFragment=function(t,n){this.fragmentRequest_=this.mediaSrcMgr_.type===e.StreamingType.SMOOTH_STREAMING?this.makeSSXHR():this.makeXHR(!1),this.fragmentRequest_.expected_time=n},t.prototype.tick=function(t){if(!this.mediaSrcMgr_.isActive(this.bufferIndex_))return e.dlog(4,"Not active["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]"),!1;
if(this.fragmentRequest_)e.dlog(4,"Will not request next segment["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"] request pending");else if(!this.initFragmentRequestNeeded()){var n=this.mediaSrcMgr_.identifyNextFragment(this.bufferIndex_,t);if(null!==n){var i=-1;this.mediaSrcMgr_.mime(this.bufferIndex_).indexOf("video")>=0&&(i=this.adaptiveManager_.adapt(this.mediaSrcMgr_.getLevel(this.bufferIndex_))),i>=0?(this.cancelRequests(),this.mediaSrcMgr_.changeQuality(this.bufferIndex_,i)):this.requestNextFragment(t,n)
}}return!0},e.FragmentManager=t}(),function(){function t(e){var t=new RegExp("[?&]"+e+"=([^&]*)"),n=t.exec(window.location.search);return null!=n?(n=n[1],/%/.exec(n)&&(n=decodeURIComponent(n)),n):null}function n(){for(var e={},n=["autoplay","algorithm","flavor","level","cc","url"],i=0;i<n.length;i++){var r=t(n[i]);e[n[i]]=r}if(e&&e.url)for(var s in e)e.hasOwnProperty(s)&&(this.options[s]=e[s])}var i={"Audio_Type":"audio","Video_Type":"video","Image_Type":"img","MSE_Type":"mse"},r=function(t){t||(t={}),this.options=t,this.mediaElementType_=null,this.manifestLoader_=null,this.closeCaptionsLoader_=null,this.progressTimer_=null,this.mediaSrcMgr_=new e.MediaSourceManager,this.fragmentManagers_=null,this.showControls_=t.showControls,this.mediaElement_=null,this.imageElement_=null,this.mediaEvents_=new Object,t.mediaElement?this.mediaElement_=t.mediaElement:t.imageElement?this.imageElement_=t.imageElement:this.createMediaElement(),e.player=this
},s={"AUTO_PAUSE_START":1,"PAUSE_RESUME":5};r.prototype.getMediaElement=function(){return this.mediaElement_},r.prototype.onPause=function(){e.log("Paused, auto="+this.mediaElement_.autopause_pending),this.mediaElement_.autopaused=this.mediaElement_.autopause_pending,this.mediaElement_.autopause_time=(new Date).getTime(),this.mediaElement_.autopause_pending=!1},r.prototype.onPlay=function(){e.log("Playing"),this.mediaElement_.autopause_pending=!1,this.mediaElement_.autopaused=!1,this.mediaElement_.autopause_time=null
},r.prototype.onError=function(){e.log("Error ("+this.mediaElement_.error.code+")")},r.prototype.cancelRequests=function(){for(var e=0;e<this.fragmentManagers_.length;e++)this.fragmentManagers_[e].cancelRequests()},r.prototype.onSeeking=function(){e.log("Seeking"),this.cancelRequests(),this.mediaSrcMgr_.resetAll("seeking")},r.prototype.onSeeked=function(){e.log("Seeked")},r.prototype.onProgress=function(){var t=this.mediaSrcMgr_.getMediaSource();if(!t||"closed"===t.readyState)return void this.stopProgressTimer();
var n=this.mediaElement_.currentTime;if(this.mediaElement_.error)return void e.dlog(2,"Video Error: "+this.mediaElement_.error);for(var i=!1,r=0,a=0,o=0;o<this.fragmentManagers_.length;o++)if(this.fragmentManagers_[o].tick(n)){var l=this.mediaSrcMgr_.getBufferSize(o,n);this.mediaElement_.paused?l>=s.PAUSE_RESUME&&a++:l<s.AUTO_PAUSE_START&&(i=!0)}else r++;return r>0?void(r===this.fragmentManagers_.length&&this.mediaSrcMgr_.endOfStream()):void(this.mediaElement_.paused?this.mediaElement_.autopaused&&a===this.fragmentManagers_.length&&(e.dlog(2,"Autoresuming"),this.mediaElement_.play()):i&&(e.dlog(2,"Autopausing"),this.mediaElement_.autopause_pending=!0,this.mediaElement_.pause()))
},r.prototype.createMediaElement=function(){var t=document.getElementById("mediaElement");this.mediaElement_=document.createElement(i.Video_Type),this.imageElement_=document.createElement(i.Image_Type),t.appendChild(this.mediaElement_),t.appendChild(this.imageElement_),e.me=this.mediaElement_,e.img=this.imageElement_,this.showControls_?this.mediaElement_.hasAttribute("controls")||this.mediaElement_.setAttribute("controls","controls"):this.mediaElement_.hasAttribute("controls")&&this.mediaElement_.removeAttribute("controls")
},r.prototype.showMediaElement=function(t){var n=document.getElementById("mediaElement");this.mediaElementType_===i.MSE_Type&&(this.removeMediaEventListener("seeking"),this.removeMediaEventListener("seeked"),this.removeMediaEventListener("pause"),this.removeMediaEventListener("play"),this.removeMediaEventListener("error"),t!==i.MSE_Type&&(this.stopProgressTimer(),this.mediaSrcMgr_.dispose(),this.mediaSrcMgr_=new e.MediaSourceManager)),this.mediaElementType_!==i.Image_Type&&(this.mediaElement_.play(0),this.mediaElement_.pause());
var r=n.children;if(r&&r.length>0)for(var s=0;s<r.length;s++)"VIDEO"===r[s].nodeName&&t!==i.Image_Type?r[s].style.display="block":"IMG"===r[s].nodeName&&t===i.Image_Type?r[s].style.display="block":(r[s].style.display="none",r[s].src=null);this.mediaElementType_=t},r.prototype.addMediaEventListener=function(e,t){var n=t.bind(this);this.mediaElement_.addEventListener(e,n),this.mediaEvents_[e]=n},r.prototype.removeMediaEventListener=function(e){this.mediaElement_.removeEventListener(e,this.mediaEvents_[e]),this.mediaEvents_[e]=null
},r.prototype.initMseVideoElement=function(e){e&&this.addCaptionInfo(e),this.addMediaEventListener("seeking",this.onSeeking),this.addMediaEventListener("seeked",this.onSeeked),this.addMediaEventListener("pause",this.onPause),this.addMediaEventListener("play",this.onPlay),this.addMediaEventListener("error",this.onError),this.mediaElement_.autopause_pending=!1,this.mediaElement_.autopaused=this.options.autoplay?!0:!1,this.mediaElement_.seekingStatus="none"},r.prototype.onManifestLoad=function(t){return t?void e.log("Unable to load manifest"):void(this.options.cc?(this.closeCaptionsLoader_=new e.CloseCaptionsLoader(this.options.cc),this.closeCaptionsLoader_.load(this.onLoadcloseCaptions.bind(this))):this.onLoadcloseCaptions.call(this))
},r.prototype.addCaptionInfo=function(e){var t;t=this.mediaElement_.textTracks.length>0?this.mediaElement_.textTracks[0]:this.mediaElement_.addTextTrack("captions"),t.mode="showing";for(var n=e[0].start,i=e[0].end,r=[],s=0;s<e.length;s++){var a=new TextTrackCue(e[s].start,e[s].end,e[s].caption);if(n===e[s].start&&i===e[s].end&&r.push(a),n!==e[s].start||i!==e[s].end||s===e.length-1){for(var o=r.length-1;o>=0;o--)t.addCue(r[o]);r.length=0,n=e[s].start,i=e[s].end,s<e.length&&r.push(a)}}},r.prototype.onMediaSourceManagerInitialized=function(t){this.initMseVideoElement(t);
for(var n=0;n<this.mediaSrcMgr_.getSourceBufferCount();n++)this.fragmentManagers_.push(new e.FragmentManager(this.mediaSrcMgr_,n,new e.AdaptiveManager(this.mediaSrcMgr_.getBitrates(n),this.options.algorithm,this.options.level)));this.startProgressTimer()},r.prototype.initializeMsePlayer=function(){var e=null;this.closeCaptionsLoader_&&(e=this.closeCaptionsLoader_.getCCInfo()),this.fragmentManagers_=[],this.mediaSrcMgr_.init(),window.msrc=this.mediaSrcMgr_.getMediaSource(),this.mediaSrcMgr_.attach(this.mediaElement_,this.manifestLoader_.getManifest(),e,this.onMediaSourceManagerInitialized.bind(this,e))
},r.prototype.stopProgressTimer=function(){null!==this.progressTimer_&&(e.dlog(2,"Deregistering progress timer"),window.clearInterval(this.progressTimer_),this.progressTimer_=null)},r.prototype.startProgressTimer=function(){null===this.progressTimer_&&(e.dlog(2,"Starting progress timer"),this.progressTimer_=setInterval(this.onProgress.bind(this),250))},r.prototype.initializeSimplePlayer=function(e,t){e!==i.Image_Type?(this.mediaElement_.src=t,this.mediaElement_.play()):this.imageElement_.src=t},r.prototype.onLoadcloseCaptions=function(t){return t?void e.log("Unable to load close captions"):void this.initializeMsePlayer()
},r.prototype.onManifestLoad=function(t){return t?void e.log("Unable to load manifest"):void(this.options.cc?(this.closeCaptionsLoader_=new e.CloseCaptionsLoader(this.options.cc),this.closeCaptionsLoader_.load(this.onLoadcloseCaptions.bind(this))):this.onLoadcloseCaptions.call(this))},r.prototype.getMediaType=function(t){var n=t.length;if(5>n)return e.log("Error invalid url"),null;var r=t.substring(t.length-4,t.length);switch(r){case".webm":case".mkv":case".mp4":return i.Video_Type;case".mp3":return i.Audio_Type;
case".jpg":return i.Image_Type;case".mpd":return i.MSE_Type;default:return i.MSE_Type}},r.prototype.init=function(){if(e.log("-------- Initializing --------"),!this.mediaSrcMgr_.isSupported())return e.log("Incompatible browser: Media Source extensions not suported"),!1;if(n(),!this.options.url)return e.log("No manifest URL found, please provide one"),!1;var t=this.getMediaType(this.options.url);this.mediaElementType_=t,this.options.mediaElement||this.options.imageElement||this.showMediaElement(t),t===i.MSE_Type?(this.manifestLoader_=new e.ManifestLoader(this.options.url),this.manifestLoader_.load(this.onManifestLoad.bind(this))):this.initializeSimplePlayer(t,this.options.url)
},r.prototype.destroy=function(){this.mediaElementType_===i.MSE_Type&&(this.removeMediaEventListener("seeking"),this.removeMediaEventListener("seeked"),this.removeMediaEventListener("pause"),this.removeMediaEventListener("play"),this.removeMediaEventListener("error"),this.stopProgressTimer(),this.mediaSrcMgr_.dispose(),this.mediaSrcMgr_=new e.MediaSourceManager),this.mediaElementType_!==i.Image_Type&&(this.mediaElement_.play(0),this.mediaElement_.pause())},e.BasicPlayer=r}(),window.googledash=e}(),define("googledash",function(e){return function(){var t;
return t||e.googledash}}(this)),define("plex/base/adapters/player/HTMLPlayerSubcontroller",["underscore","jquery","googledash","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/Browser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,r,s,a){var o=i.extend({"wrapped":["play","pause","setVolume","setPosition","resume","stop"],"initialize":function(){e.bindAll(this,"onReady","onWaiting","onPlaying","onProgress","onTime","onPause","onVolume","onEnded","onError"),e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);
return this.mediaElement?t.apply(this,n):void 0},this))},this)},"load":function(e){this.model=e.model,this.mediaElement=e.mediaElement,this.autoplay=null==e.autoplay?!0:e.autoplay,this.offset=this.model.get("position"),this.streamingMKV=!this.model.get("directPlay")&&"http"===e.protocol,this.mediaElement.stream_restart=!1,this.mediaElement.autoplay=this.autoplay,this.mediaElement.addEventListener("loadedmetadata",this.onReady),this.mediaElement.addEventListener("waiting",this.onWaiting),this.mediaElement.addEventListener("playing",this.onPlaying),this.mediaElement.addEventListener("progress",this.onProgress),this.mediaElement.addEventListener("timeupdate",this.onTime),this.mediaElement.addEventListener("pause",this.onPause),this.mediaElement.addEventListener("volumechange",this.onVolume),this.mediaElement.addEventListener("ended",this.onEnded),this.mediaElement.addEventListener("error",this.onError);
var i=this.model.get("url");if("dash"===e.protocol)this.dashPlayer=new n.BasicPlayer({"url":i,"mediaElement":this.mediaElement,"autoplay":this.autoplay}),this.dashPlayer.init();else{var r=t("<source>").attr("src",i);e.mimeType&&r.attr("type",e.mimeType),t(this.mediaElement).html(r),this.mediaElement.load()}},"play":function(){this.mediaElement.play()},"pause":function(){this.mediaElement.pause()},"setVolume":function(e){this.mediaElement.volume=e/100},"setPosition":function(e){this.mediaElement.readyState>0?this.mediaElement.currentTime=e/1e3:(console.log("Media element is not ready"),console.trace())
},"resume":function(){r.log("resuming at "+this.offset),this.setPosition(this.offset),this.offset=0},"stop":function(){var e=this.mediaElement;if(e.removeEventListener("loadedmetadata",this.onReady),e.removeEventListener("waiting",this.onWaiting),e.removeEventListener("playing",this.onPlaying),e.removeEventListener("progress",this.onProgress),e.removeEventListener("timeupdate",this.onTime),e.removeEventListener("pause",this.onPause),e.removeEventListener("volumechange",this.onVolume),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),this.dashPlayer)this.dashPlayer.destroy(),this.dashPlayer=null;
else if(e.duration?e.pause():e.autoplay=!1,("ps3"===s.id||"ps4"===s.id)&&(e.src=""),"presto"===s.id){e.src="";try{delete e.src}catch(t){}}this.mediaElement=null},"onReady":function(){this.model.set({"ready":!0,"loaded":!0});var e=1e3*this.mediaElement.duration+this.offset;this.model.set("duration",Math.round(e));var t=this.model.get("volume");null!=t&&this.setVolume(t),this.model.get("showEnterFullscreen")||this.model.get("showExitFullscreen")||!this.mediaElement.webkitSupportsFullscreen||this.model.set({"showEnterFullscreen":!0,"forceWebkitVideoFullscreen":!0})
},"onWaiting":function(){this.model.set("state","buffering")},"onPlaying":function(){this.model.set("state","playing")},"onProgress":function(){for(var e=this.mediaElement.buffered,t=null,n=null,i=0,r=e.length;r>i;i++){var s=e.start(i),a=e.end(i);(null===t||t>s)&&(t=s),(null===n||a>n)&&(n=a)}this.model.set({"startBuffer":Math.round(1e3*t),"endBuffer":Math.round(1e3*n)})},"onTime":function(){if(this.offset&&!this.streamingMKV)return void this.resume();var e=1e3*this.mediaElement.currentTime+this.offset;
!this.mediaElement.paused&&this.model.get("buffering")&&this.model.set("state","playing"),e&&this.model.set("position",Math.round(e))},"onPause":function(){var e=this.model.get("partIndex")+1<this.model.get("partCount");this.mediaElement.ended&&e||(this.mediaElement.resume_pending||this.mediaElement.autopause_pending||this.mediaElement.autopaused||this.mediaElement.stream_restart?this.model.set("state","buffering"):this.model.set("state","paused"))},"onVolume":function(){this.model.set("volume",Math.round(100*this.mediaElement.volume))
},"onEnded":function(){this.model.set("ended",!0)},"onError":function(e){var t=e.target.error;t&&r.error("Video error code: "+t.code);var n=a.get();this.model.set({"state":"error","errorMessage":n.t("There was a problem playing this item.")})}});return o}),define("plex/base/adapters/player/LocalPlayerController",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/MediaUtil","plex/base/adapters/LocalizerAdapter","plex/base/adapters/PlayerProfileAdapter","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin","plex/base/adapters/player/HTMLPlayerSubcontroller"],function(e,t,n,i,r,s,a,o,l){var u=n.extend({"mixins":[a,o],"local":!0,"wrapped":["play","pause","setVolume","setPosition","switchStreams"],"playerDefaults":function(){return e.defaults({"type":this.type},this.model.controllerDefaults)
},"initialize":function(){e.bindAll(this,"onDecisionSuccess","onDecisionError"),this.profile=s.get(),this.supportedTypes=this.profile[this.type],e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);return this.subcontroller?t.apply(this,n):void 0},this))},this)},"load":function(t){this.model=t.model,this.volume=t.volume,this.autoplay=t.autoplay,this.postplay=t.postplay,this.mediaElement=t.mediaElement,this.mediaElement||(this.mediaElement=document.createElement(this.type)),this.listenTo(this.model,{"change:item":this.onItemChange,"change:state":this.onStateChange,"change:qualityIndex":this.onQualityIndexChange,"change:subtitleStreamID":this.onStreamIDChange,"change:audioStreamID":this.onStreamIDChange,"change:ended":this.onEndedChange});
var n=this.model.get("playlist");return n&&this.listenTo(n,{"reset":this.onPlaylistChange,"remove":this.onPlaylistChange,"add":this.onPlaylistChange}),this.model.set(e.result(this,"playerDefaults")),this.update(t)},"update":function(e){return e||(e={}),this.originalOptions=e,this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"loaded":!1,"ended":!1,"finished":!1,"duration":0,"position":0,"startBuffer":0,"endBuffer":0,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem}),this.getMediaDecision(this.currentItem,e)
},"populateItem":function(e){if("playlistItem"===e.get("type"))return t.Deferred().resolve().promise();var n={"reset":!0,"cancelable":!0};return e.isLibraryItem()&&(n.data="checkFiles=1"),e.populate(n)},"loadMedia":function(){this.subcontroller=this.getSubcontrollerByType(this.playerType);var e;this.supportedTypes&&this.supportedTypes[this.protocol]&&(e=this.supportedTypes[this.protocol].mimeType),this.subcontroller.load({"model":this.model,"protocol":this.protocol,"mediaElement":this.mediaElement,"autoplay":this.autoplay,"mimeType":e})
},"getSubcontrollerByType":function(){return new l},"embed":function(n){var i=this.model.get("item"),s=t.ajax(i.server.getXHROptions(n.key));s.done(e.bind(function(e){this.model.set("embedHtml",e)},this)),s.fail(e.bind(function(){var e=r.get();this.model.set({"state":"error","errorMessage":e.t("There was a problem embedding this video.")})},this))},"redirect":function(t){var n=this.model.get("item"),i=n.get("url");if(!i&&t){var r=t.key.match(/\/webkit\?url=([^&]+)/);r&&(i=decodeURIComponent(r[1]))
}window.open(i),e.defer(e.bind(function(){this.model.set("finished",!0)},this))},"play":function(){this.subcontroller.play()},"pause":function(){this.subcontroller.pause()},"setVolume":function(e){this.model.set("volume",e),this.subcontroller.setVolume(e)},"setPosition":function(e,t){t||(t={}),e===this.model.get("position")||e>=this.model.get("duration")||(this.model.set("finished",!1),this.model.set("position",e),this.model.trigger("change:seeking",this.model,!0),this.subcontroller.streamingMKV?this.switchStreams(t):this.subcontroller.setPosition(e))
},"skipPrevious":function(){this.previousItem&&(this.model.set({"item":this.previousItem,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0}))},"skipNext":function(){this.nextItem&&(this.model.set({"item":this.nextItem,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0}))},"skipTo":function(e){this.model.set({"item":e,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0})
},"switchStreams":function(e){e||(e={}),null==e.autoplay&&(e.autoplay=!this.model.get("paused")),this.mediaElement.stream_restart=!0,this.originalOptions.media=this.model.get("media"),this.originalOptions.part=this.model.get("part"),this.originalOptions.offset=this.model.get("position"),this.subcontroller.pause(),this.resetStream(e)},"resetStream":e.debounce(function(t){var n=this.stopSession();n.done(e.bind(function(){this.autoplay=t.autoplay,this.subcontroller.pause(),this.update(this.originalOptions)
},this))},200),"stop":function(){return this.model.get("stopped")?t.Deferred().resolve().promise():(this.model.set("state","stopped"),this.stopListening(),this.stopSession())},"stopSession":function(){return this.subcontroller&&this.subcontroller.stop(),"video"!==this.type||this.model.get("directPlay")?t.Deferred().resolve().promise():this.request(i.stop(this.model.get("transcodeServer"),this.session))},"unload":function(){return this.stop()},"onDecisionSuccess":function(e){var t=this.model.get("item"),n=0;
e.part&&e.part.duration&&(n=e.part.duration),this.session=e.session,this.playerType=e.playerType,this.protocol=e.protocol,this.model.set({"media":e.media,"part":e.part,"url":e.url,"transcodeServer":e.transcodeServer,"mediaIndex":i.getMediaIndex(t,e.media),"partIndex":i.getPartIndex(e.media,e.part),"partCount":i.getPartCount(e.media),"state":this.autoplay?"buffering":"paused","position":e.offset,"duration":n,"directPlay":e.directPlay}),this.loadMedia()},"onDecisionError":function(t){if(t.embed&&e.contains(this.profile.capabilities,"embed"))return void this.embed(t.part);
if(t.redirect&&e.contains(this.profile.capabilities,"redirect"))return void this.redirect(t.part);var n=r.get(),i=t.error||n.t("There was a problem playing this item.");this.model.set({"state":"error","errorMessage":i})},"onItemChange":function(e){this.timeline({"item":e.previous("item"),"state":"stopped","continuing":!0}),this.stopTimeline(),this.stopSession()},"onQualityIndexChange":function(e){null!=e.previous("qualityIndex")&&this.switchStreams()},"onStreamIDChange":function(){this.switchStreams()
},"onPlaylistChange":function(){this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})},"onStateChange":function(e,t){this.timeline(),"stopped"===t||"error"===t?this.stopTimeline():this.startTimeline(),"paused"===t?this.startPing():this.stopPing(),"playing"===t?this.startPlaybackTracking():this.stopPlaybackTracking()},"onEndedChange":function(e,t){if(t){var n=e.get("partIndex"),i=e.get("partCount");
if(++n>=i)this.nextItem&&!this.postplay?this.skipNext():(!this.nextItem&&this.postplay?this.stop():this.pause(),this.model.set("finished",!0));else{var r=e.get("media");this.model.set({"part":r.Part[n],"position":0}),this.switchStreams({"autoplay":!0})}}}});return u}),define("plex/tv/adapters/player/TVVideoPlayerController",["underscore","jquery","plex/base/utils/Capabilities","plex/base/utils/Browser","plex/base/utils/MediaUtil","plex/base/utils/MediaDecisionUtil","plex/base/utils/types/StreamTypes","plex/desktop/utils/DesktopTranscoder","plex/base/adapters/LocalizerAdapter","plex/base/adapters/player/LocalPlayerController","plex/base/models/AppModel","plex/base/models/SettingsModel"],function(e,t,n,i,r,s,a,o,l,u,c,d){var h=u.extend({"type":"video","playerDefaults":function(){return e.defaults({"type":this.type,"volume":this.volume,"showPlayPause":!0,"showVolume":!i.mobile,"enableSeekBar":!0,"showQuality":!0,"showSubtitleStream":!0,"showAudioStream":!0,"showEnterFullscreen":n.hasFullscreen,"enableQueueActions":!0},this.model.controllerDefaults)
},"getMediaDecision":function(t,n){var i=this.populateItem(t);return i=i.then(e.bind(function(){var i=r.getQualityInfo(t,d);this.model.set("qualityIndex",i.index);var a=s.getMediaDecision({"type":this.type,"item":t,"media":n.media,"part":n.part,"supportedTypes":this.supportedTypes,"allowDirectPlay":!1,"allowAC3":!1,"offset":n.offset,"flash":!1,"hls":!0,"dash":!1,"http":!1,"transcodeServer":t.server,"fallbackServer":c.get("primaryServer"),"transcoder":o,"transcoderOptions":e.bind(function(e){var t=this.getAudioCodec(e.media),n=[];
return t&&(n.push("add-transcode-target-audio-codec(type=videoProfile&context=streaming&protocol=hls&audioCodec="+t+")"),"aac"!==t&&n.push("add-limitation(scope=videoAudioCodec&scopeName="+t+"&type=upperBound&name=audio.channels&value=6)")),{"videoQuality":i.quality,"videoResolution":i.resolution,"maxVideoBitrate":i.bitrate,"X-Plex-Client-Profile-Extra":n.join("+")}},this)});return a.done(this.onDecisionSuccess),a.fail(this.onDecisionError),a},this),e.bind(function(){var e=l.get();this.model.set({"state":"error","errorMessage":e.t("Plex Media Server is not responding.")})
},this))},"getAudioCodec":function(e){var t=a.getStreamTypeByString("audio"),n=r.getStreams(e,{"streamType":t.id,"selected":!0})[0];if(n&&n.id>0){if("dca"===n.codec&&d.get("allowDCA"))return"dca";if("ac3"===n.codec&&d.get("allowAC3"))return"ac3";if("dca"===n.codec&&d.get("allowAC3"))return"ac3";if("dca"===n.codec&&d.get("allowAC3"))return"ac3"}return"aac"},"play":function(){var t=this.getStreamAffectingOptions(),n=!e.isEqual(t,this.currentPlaybackOptions);n?(this.model.set("paused",!1),this.switchStreams()):this.subcontroller.play()
},"loadMedia":function(){u.prototype.loadMedia.apply(this,arguments),this.currentPlaybackOptions=this.getStreamAffectingOptions()},"getStreamAffectingOptions":function(){return{"qualityIndex":this.model.get("qualityIndex"),"subtitleStreamID":this.model.get("subtitleStreamID"),"audioStreamID":this.model.get("audioStreamID")}},"onQualityIndexChange":function(){},"onStreamIDChange":function(){}});return h}),define("plex/tv/adapters/player/TVPlayerProfile",[],function(){return{"capabilities":["embed","redirect"],"video":{"mp4":{"mimeType":'video/mp4; codecs="avc1.42E01E"',"optimizedForStreaming":!0,"video":{"codec":"h264","maxWidth":1920,"maxHeight":1280,"maxFrameRate":60,"maxBitrate":12e3,"maxBitDepth":8,"maxLevel":42},"audio":{"codec":"aac"}},"hls":{"mimeType":"application/vnd.apple.mpegurl"}},"audio":{"mp4":{"mimeType":"audio/mp4","audioCodec":"aac"},"mp3":{"mimeType":'audio/mpeg; codecs="mp3"',"audioCodec":"mp3"}}}
}),define("plex/tv/adapters/BaseKeyMapping",[],function(){return{"8":"back","27":"back","13":"enter","32":"space","37":"left","38":"up","39":"right","40":"down"}}),define("plex/tv/adapters/TVKeyMapping",["underscore","plex/base/utils/Browser","plex/tv/adapters/BaseKeyMapping"],function(e,t,n){var i=t.platform,r=e.extend({},n,{"219":"rewind","221":"forward","403":"red","404":"green","405":"yellow","406":"blue"});return"Opera TV Store"===i?(r[window.VK_BACK_SPACE]="back",r[window.VK_ENTER]="enter",r[window.VK_LEFT]="left",r[window.VK_UP]="up",r[window.VK_RIGHT]="right",r[window.VK_DOWN]="down",r[window.VK_PLAY]="play",r[window.VK_PAUSE]="pause",r[window.VK_STOP]="stop",r[window.VK_TRACK_NEXT]="next",r[window.VK_TRACK_PREV]="prev",r[window.VK_FAST_FWD]="forward",r[window.VK_REWIND]="rewind",r[window.VK_SUBTITLE]="subtitle",r[window.VK_INFO]="info",r[window.VK_RED]="red",r[window.VK_GREEN]="green",r[window.VK_YELLOW]="yellow",r[window.VK_BLUE]="blue"):"SmartHub"===i&&(e.each(n,function(e,t){delete r[t]
}),r[88]="back",r[29443]="enter",r[4]="left",r[29460]="up",r[5]="right",r[29461]="down",r[71]="play",r[74]="pause",r[70]="stop",r[72]="forward",r[69]="rewind",r[108]="red",r[20]="green",r[21]="yellow",r[22]="blue"),r}),define("plex/base/mixins/LocalizerMixin",["underscore","jquery","plex/base/utils/Dispatcher"],function(e,t,n){var i={"languages":{"en":"en.json","en-GB":"en-GB.json","af":"af.json","ca":"ca.json","cs":"cs.json","sr":"sr.json","da":"da.json","de":"de.json","et":"et.json","es":"es.json","es-419":"es-419.json","el":"el.json","fr":"fr.json","hr":"hr.json","is":"is.json","it":"it.json","lt":"lt.json","hu":"hu.json","nl":"nl.json","no":"no.json","pl":"pl.json","pt":"pt.json","pt-BR":"pt-BR.json","ru":"ru.json","ro":"ro.json","sk":"sk.json","sl":"sl.json","fi":"fi.json","sv":"sv.json","tr":"tr.json","uk":"uk.json","bg":"bg.json","zh":"zh.json","zh-TW":"zh-TW.json","ja":"ja.json","ko":"ko.json","th":"th.json","fa":"fa.json","ar":"ar.json","he":"he.json"},"load":function(i){if(this.language===i)return t.Deferred().resolve();
if(!e.has(this.languages,i))return t.Deferred().reject();var r=this.language;if(this.language=i,e.has(this.translations,i))return n.trigger("change:language",i),t.Deferred().resolve();var s={"dataType":"json","url":this.basePath+this.languages[this.language]},a=e.bind(function(e){this.translations[this.language]=e,n.trigger("change:language",this.language)},this),o=e.bind(function(){this.language=r},this);return t.ajax(s).done(a).fail(o)},"t":function(e){if(!e)return"";for(var t=this.getTranslation(e),n=1;n<arguments.length;)t=t.replace("{"+n+"}",arguments[n]),n++;
return t},"getTranslation":function(t){var n=this.translations[this.language],i=t;return n&&e.has(n,t)&&(i=n[t]),i}};return i}),define("plex/tv/adapters/TVLocalizer",["underscore","jquery","plex/base/utils/BaseClass","plex/base/mixins/LocalizerMixin"],function(e,t,n,i){var r=n.extend({"mixins":i,"constructor":function(){this.basePath="translations/",this.translations={}},"load":function(){return t.Deferred().resolve()}});return new r}),define("plex/tv/adapters/TVDimensions",["plex/base/utils/Browser","plex/base/models/AppModel"],function(e,t){var n={"X-Plex-Client-Identifier":t.get("clientID"),"X-Plex-Product":"Plex TV","X-Plex-Device":e.platform,"X-Plex-Platform":e.name,"X-Plex-Platform-Version":e.version,"X-Plex-Version":t.get("version"),"X-Plex-Device-Name":"Plex TV ("+e.name+")"};
return t.on("change:clientID",function(e,t){n["X-Plex-Client-Identifier"]=t}),t.on("change:version",function(e,t){n["X-Plex-Version"]=t}),n}),define("plex/tv/adapters/TVAdapters",["bugsense","plex/base/adapters/BugsenseAdapter","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/adapters/DimensionsAdapter","plex/base/adapters/AnalyticsAdapter","plex/base/adapters/PlayerProfileAdapter","plex/base/adapters/PlayerControllerAdapter","plex/desktop/adapters/LocalStorage","plex/desktop/adapters/GoogleAnalytics","./player/TVVideoPlayerController","./player/TVPlayerProfile","./KeyMappingAdapter","./TVKeyMapping","./TVLocalizer","./TVDimensions"],function(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,m){return{"registerAll":function(){t.register(e),n.register(f),i.register(l),r.register(m),s.register(u),a.register(d),h.register(p),o.register({"protocol":"local","type":"video","create":function(e){return new c({"type":e})
}})}}}),define("plex/tv/TVApp",["jquery","marionette","plex/base/initializers/AppInitializer","plex/base/initializers/SettingsInitializer","plex/tv/initializers/SettingsDefaultsInitializer","plex/base/initializers/ServerInitializer","plex/base/initializers/AnalyticsInitializer","plex/tv/initializers/RouterInitializer","plex/tv/initializers/UIEventInitializer","plex/tv/commands/TVCommands","plex/base/models/AppModel","plex/tv/adapters/TVAdapters"],function(e,t,n,i,r,s,a,o,l,u,c,d){d.registerAll();
var h=new t.Application;return h.addInitializer(function(){var t=[];t.push(n.init(c)),t.push(r.init()),t.push(i.init()),e.when.apply(e,t).done(function(){a.init(),s.init(),l.init(),o.init()})}),h}),window.PLEXWEB=window.PLEXWEB||{},require(["config/require.conf"],function(){require(["plex/tv/TVApp"],function(e){e.start()})}),define("main-tv",function(){});